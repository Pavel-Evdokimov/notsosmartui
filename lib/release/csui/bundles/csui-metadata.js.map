{"version":3,"sources":["../../src/controls/tableheader/comment/comment.button.view.js","../../src/widgets/metadata/versions.toolbaritems!csui-ext","../../src/widgets/metadata/versions.toolbaritems.js","../../src/widgets/metadata/impl/metadata.tabcontentcollection.view.js","../../src/widgets/metadata/impl/header/rightbar/toolbaritems!csui-ext","../../src/widgets/metadata/impl/header/rightbar/toolbaritems.js","../../src/widgets/metadata/impl/header/rightbar/toolbaritems.masks.js","../../src/widgets/metadata/impl/header/item.name/metadata.item.name!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu!css","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view.js","../../src/widgets/metadata/versions.toolbaritems.mask!csui-ext","../../src/widgets/metadata/versions.toolbaritems.mask.js","../../src/widgets/metadata/header.item.name/menuitems!csui-ext","../../src/widgets/metadata/header.dropdown.menu.items.js","../../src/widgets/metadata/header.dropdown.menu.items.mask.js","../../src/widgets/metadata/impl/metadata!css","../../src/widgets/metadata/impl/header/item.name/metadata.item.name!css","../../src/widgets/metadata/impl/header/item.name/metadata.item.name.view.js","../../src/widgets/metadata/impl/header/leftbar/header.leftbar!hbs","../../src/widgets/metadata/impl/header/leftbar/header.leftbar!css","../../src/widgets/metadata/impl/header/leftbar/header.leftbar.view.js","../../src/widgets/metadata/impl/header/rightbar/header.rightbar!hbs","../../src/widgets/metadata/impl/header/rightbar/header.rightbar!css","../../src/widgets/metadata/impl/header/rightbar/header.rightbar.view.js","../../src/widgets/metadata/impl/header/metadata.header!hbs","../../src/widgets/metadata/impl/header/metadata.header!css","../../src/widgets/metadata/impl/header/metadata.header.view.js","../../src/widgets/metadata/property.panels/categories/impl/category.form.view.js","../../src/widgets/metadata/metadata.general.form.fields!csui-ext","../../src/widgets/metadata/metadata.general.form.fields.js","../../src/widgets/metadata/general.form.fields/impl/general.form.fields.view!css","../../src/widgets/metadata/general.form.fields/impl/general.form.fields.view.js","../../src/widgets/metadata/general.form.fields/general.form.field.behavior.js","../../src/widgets/metadata/metadata.general.action.fields!csui-ext","../../src/widgets/metadata/metadata.general.action.fields.js","../../src/widgets/metadata/general.action.fields/impl/general.action.fields.view.js","../../src/widgets/metadata/general.action.fields/general.action.field.behavior.js","../../src/widgets/metadata/general.panels/node/server.adaptor.mixin.js","../../src/widgets/metadata/general.panels/node/node.general.form.model.js","../../src/widgets/metadata/general.panels/document/document.general.form.model.js","../../src/widgets/metadata/general.panels/node/impl/node.general.form!hbs","../../src/widgets/metadata/general.panels/node/impl/node.general.form!css","../../src/widgets/metadata/general.panels/node/node.general.form.view.js","../../src/widgets/metadata/general.panels/document/impl/document.general.form!hbs","../../src/widgets/metadata/general.panels/document/impl/document.general.form!css","../../src/widgets/metadata/general.panels/document/document.general.form.view.js","../../src/widgets/metadata/general.panels/shortcut/shortcut.general.form.model.js","../../src/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form!hbs","../../src/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form!css","../../src/widgets/metadata/general.panels/shortcut/shortcut.general.form.view.js","../../src/widgets/metadata/general.panels/url/url.general.form.model.js","../../src/widgets/metadata/general.panels/url/impl/url.general.form!hbs","../../src/widgets/metadata/general.panels/url/impl/url.general.form!css","../../src/widgets/metadata/general.panels/url/url.general.form.view.js","../../src/widgets/metadata/metadata.general.panels!csui-ext","../../src/widgets/metadata/metadata.general.panels.js","../../src/widgets/metadata/property.panels/general/metadata.general.property.controller.js","../../src/widgets/metadata/metadata.property.panels!csui-ext","../../src/widgets/metadata/metadata.property.panels.js","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu!hbs","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu!css","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view.js","../../src/widgets/metadata/add.properties/toolbaritems!csui-ext","../../src/widgets/metadata/add.properties.menuitems.js","../../src/widgets/metadata/add.properties.menuitems.mask.js","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header!hbs","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header!css","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header.view.js","../../src/widgets/metadata/impl/metadata.properties.view.js","../../src/widgets/metadata/metadata.properties.view.js","../../src/widgets/metadata/impl/metadata.properties.content.view.js","../../src/utils/versions.default.action.items!csui-ext","../../src/utils/versions.default.action.items.js","../../src/widgets/metadata/impl/versions/metadata.versions.columns.js","../../src/widgets/metadata/impl/versions/metadata.versions!hbs","../../src/widgets/metadata/impl/versions/metadata.versions!css","../../src/widgets/metadata/impl/versions/metadata.versions.view.js","../../src/widgets/metadata/metadata.panels!csui-ext","../../src/widgets/metadata/metadata.panels.js","../../src/controls/tab.panel/impl/tab.link.dropdown!hbs","../../src/controls/tab.panel/impl/tab.link.dropdown.view.js","../../src/controls/tab.panel/impl/tab.links.dropdown!hbs","../../src/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior.js","../../src/controls/tab.panel/impl/tab.links.dropdown!css","../../src/controls/tab.panel/tab.links.dropdown.view.js","../../src/widgets/metadata/impl/metadata.dropdowntab.view.js","../../src/widgets/metadata/impl/metadata.controller.js","../../src/widgets/metadata/metadata.view.js","../../src/widgets/metadata/metadata.action.one.item.properties.view.js","../../src/widgets/metadata/impl/common/base.metadata.action.view.js","../../src/widgets/metadata/impl/add.properties/metadata.add.categories.view.js","../../src/widgets/metadata/metadata.add.categories.controller.js","../../src/widgets/metadata/metadata.add.item.controller.js","../../src/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior.js","../../src/widgets/metadata/impl/metadata.navigation.list.view.js","../../src/widgets/metadata/impl/common/metadata.action.multiple.items!hbs","../../src/widgets/metadata/impl/metadata.navigation.list.behavior.js","../../src/widgets/metadata/impl/common/metadata.action.multiple.items!css","../../src/widgets/metadata/impl/common/metadata.action.multiple.items.view.js","../../src/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller.js","../../src/widgets/metadata/metadata.add.document.controller.js","../../src/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller.js","../../src/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller.js","../../src/widgets/metadata/metadata.copy.move.items.controller.js","../../src/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation!hbs","../../src/widgets/metadata/impl/metadatanavigation/impl/nls/lang.js","../../src/widgets/metadata/impl/metadatanavigation/impl/nls/root/lang.js","../../src/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation!css","../../src/widgets/metadata/impl/metadatanavigation/metadatanavigation.view.js","../../src/widgets/metadata.navigation/impl/nls/lang.js","../../src/widgets/metadata.navigation/impl/nls/root/lang.js","../../src/widgets/metadata.navigation/impl/metadata.navigation!css","../../src/widgets/metadata.navigation/metadata.navigation.view.js","../../src/widgets/document.overview/impl/nls/lang.js","../../src/widgets/document.overview/impl/nls/root/lang.js","../../src/widgets/document.overview/impl/document.overview!hbs","../../src/widgets/document.overview/impl/document.overview!css","../../src/widgets/document.overview/document.overview.view.js","../../src/widgets/document.overview/document.overview.manifest.json!json","../../src/widgets/metadata/metadata.manifest.json!json","../../src/widgets/metadata.navigation/metadata.navigation.manifest.json!json","../../src/widgets/document.overview/impl/nls/document.overview.manifest.js","../../src/widgets/document.overview/impl/nls/root/document.overview.manifest.js","../../src/widgets/document.overview/impl/nls/document.overview.manifest!i18n","../../src/widgets/metadata/impl/nls/metadata.manifest.js","../../src/widgets/metadata/impl/nls/root/metadata.manifest.js","../../src/widgets/metadata/impl/nls/metadata.manifest!i18n","../../src/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest.js","../../src/widgets/metadata.navigation/impl/nls/root/metadata.navigation.manifest.js","../../src/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest!i18n","csui-metadata.js"],"names":["csui","define","require","_","Marionette","ViewEventsPropagationMixin","TabableRegionBehavior","CommentButtonView","View","extend","className","behaviors","behaviorClass","constructor","options","call","this","listenTo","model","render","self","CommentDialogView","contentRegion","Region","el","window","s","contexts","config","roId","get","commentDialogView","connector","nodeid","CSID","context","triggerMethod","propagateEventsToViews","show","prototype","lang","ToolItemsFactory","extraToolItems","TooItemModel","toolbarItems","tableHeaderToolbar","main","signature","name","ToolbarItemVersionInfo","icon","ToolbarItemVersionDownload","ToolbarItemVersionDelete","maxItemsShown","dropDownIcon","rightToolbar","ToolbarItemVersionPurgeAll","hAlign","each","moduleToolItems","toolItems","key","targetToolbar","Error","toolItem","addItem","TabContentCollectionView","base","attributes","apply","arguments","currentlyFocusedElement","event","reverseDirection","shiftKey","elToFocus","currentlyFocusedElementInternal","totalElements","keyboardBehavior","tabableElements","length","cursor","isElementVisibleInParent","$el","elementCursor","module","ToolItemMask","GlobalMenuItemsMask","ToolbarItemsMasks","globalMask","toolbars","reduce","toolbar","mask","normalize","source","extendMask","storeMask","hbs","Handlebars","t","template","1","depth0","helpers","partials","data","3","5","helper","escapeExpression","cancel_edit_name_tooltip","helperMissing","hash","compiler","stack1","goBack","sidebarToggleTitle","nameAria","unless","read_only","fn","program","inverse","noop","show_dropdown_menu","edit_name_id","placeholder_text","required_tooltip","edit_name","hideCancelButton","registerPartial","btnId","showMoreAria","showMoreTooltip","hasCommands","$","Backbone","commands","ToolItemView","NodeCollection","FilteredToolItemsCollection","DropdownMenuBehavior","lazyloadingTemplate","CompositeView","childView","childViewContainer","childViewOptions","role","command","collection","findWhere","templateHelpers","uniqueId","showMore","ui","dropdownToggle","dropdownMenu","loadingIconsDiv","status","nodes","container","containerCollection","delayedActions","toolItemMask","reorderOnSort","defaults","originatingView","addClass","result","_triggerMenuItemAction","_closeToggle","_hide","_show","actions","_updateMenuItems","refilter","onRender","fetching","fetchingNonPromotedActions","binf_dropdown","find","removeClass","adjustDropdown","bind","dropdownLeftOffset","offset","left","dropdownWidth","outerWidth","originatingViewWidth","width","margin","innerWidth","rightOffset","renderLazyActions","node","lazyActionsRetrieved","isLocallyCreatedNode","isLocallyCreated","nonPromotedActionCommands","append","setEnabledLazyActionCommands","done","newCollection","lazyActions","toolItemsMask","blockingEle","animate","remove","models","filter","isDestroyed","_isDestroyed","children","undefined","push","addChild","renderTextOnly","debounce","delegateEvents","blockingElement","silentFetch","onRenderCollection","onDestroy","unbind","dropdownToggleEl","parent","hasClass","toolItemView","args","setTimeout","trigger","targetView","enabled","execute","resp","dynamicMasks","_updateMask","modified","restoreMask","silent","forEach","oldExtraToolItems","addExtraToolItems","dropdownMenuList","ToolbarItemInformation","ToolbarItemCopyLink","ToolbarItemEdit","ToolbarItemShare","ToolbarItemPermissions","ToolbarItemRename","ToolbarItemDownload","MenuItemZipAndDownload","ToolbarItemReserve","ToolbarItemUnreserve","ToolbarItemCopy","ToolbarItemMove","ToolbarItemAddVersion","ToolbarItemDelete","ToolbarCollect","shortcut","ToolbarItemOriginalCopyLink","ToolbarItemOriginalEdit","ToolbarItemOriginalShare","ToolbarItemOriginalReserve","ToolbarItemOriginalUnreserve","ToolbarItemOriginalCopy","ToolbarItemOriginalMove","ToolbarItemOriginalDownload","ToolbarItemOriginalDelete","NodeTypeIconView","DropdownMenuView","versionCommands","versionToolbarItems","VersionsToolbarItemsMask","dropdownMenuItems","DropdownMenuItemsMask","VersionModel","ItemNameBehavior","i18n","MetadataItemNameView","ItemView","modelHasEmptyName","readonly","placeHolderName","emptyObjectNameAria","cancelEditNameTooltip","switch_language_tooltip","switchLanguageTooltip","showDropdownMenu","goBackTooltip","expand","mode","contextMenuDiv","nameEditDiv","nameInput","nameEditCancelIcon","titleError","toggleIcon","toggleWrapper","backEle","modelEvents","change","events","keydown","mouseenter","mouseleave","keydown @ui.nameInput","click @ui.toggleIcon","click @ui.backEle","keydown @ui.toggleIcon","keydown @ui.backEle","keydown @ui.toggleWrapper","ItemName","nameSchema","_nameSchema","toggleSideBar","keyCode","type","toggleSideBarEvent","preventDefault","stopPropagation","setToggleIconTabIndex","attr","leftBar","parentWrapper","closest","sideBarEle","toggleClass","direction","hide","collapse","sideBarHidden","that","focus","promise","Event","ensureTitleLabelIcon","required","_updateName","settings","rtl","addItemPlaceHolderName","_createDropdownMenu","view","_onWindowResize","_applyToggle","Object","mdn","is","_removeToggle","_destroyDropdownMenu","_toggleEditMode","validate","dropdownMenuView","cancelEventsToViewsPropagation","destroy","oView","isVersionModel","toolbarItemsMask","dropdownMenuListInProperties","showPermissionView","showPropertiesCommand","ddm","metadataScenario","prop","resizeTimer","clearTimeout","_setHideShowToggleButton","isLandscape","matchMedia","matches","isPortrait","navBar","css","display","positin","editing","_nodeIconView","triggerMethodOn","onMouseEnterName","onMouseLeaveName","onKeyDown","parents","inputBoxNameChange","setInputBoxValue","_validateAndSave","currentValue","getValue","trim","inputValue","getInputBoxValue","setValue","sender","success","error","showInlineError","clearInlineError","_onKeyInView","target","onKeyInView","edit","setFocus","value","iName","setEditModeFocus","_getErrorMessageFromResponse","err","setReadOnly","setPlaceHolder","updateNameSchema","val","placeholder","back_button","showBackIcon","back","click @ui.back","e","srcElement","click","onClickClose","right_label","close_metadata_button_tooltip","is_shortcut","show_close_icon","TableToolbarView","ApplicationScopeModelFactory","BooleanFieldView","MetadataHeaderRightBarView","LayoutView","templateValues","showCloseIcon","closeMetadataButtonTooltip","showShortcutSwitch","shortcutNode","right_static_label","viewOriginalMessage","original","viewShortcutMessage","regions","extraToolbarRegion","shortcutSwitchLabel","closeIcon","click @ui.shortcutSwitchLabel","click @ui.closeIcon","toolbarItemsMasks","_showExtraRightActionBar","applicationScope","getModel","removeContainer","toolbarView","onClickShortcutSwitch","show_only_required_fields_switch","4","7","9","10","12","14","16","MetadataHeaderLeftBarView","log","MetadataHeaderView","showRequiredFieldsSwitch","only_required_fields_label","onlyRequiredFieldsLabel","leftbar","header","rightbar","click .metadata-header","_createMetadataHeaderLeftBarView","_createMetadataItemNameView","_createMetadataHeaderRightBarView","leftbarView","lbv","viewNode","metadataItemNameView","inv","_getNameSchema","action","rightbarView","rbv","onBeforeDestroy","requiredFieldSwitchView","onClickHeader","$elem","getNameInputBoxValue","validateName","getNameValue","setNameEditModeFocus","generalForm","first","formSchema","properties","warn","Url","FormView","GlobalMessage","id","_saveField","_disableItem","metadataView","values","getValues","_saveChanges","changes","keys","_validate","_removeInternalProperties","_blockActions","makeAjaxCall","url","combine","urlBase","response","_updateMetadataToken","fail","jqxhr","preValues","form","formField","propertyId","refresh","showMessage","message","always","_unblockActions","Deferred","reject","resolve","categoryData","categoryId","stateId","categorySchema","stateSchema","stateData","propertyName","debug","console","last","metadata_token","metadataTokenValue","state","categories","childrenByPropertyId","extraGeneralFormFields","MetadataGeneralFormFieldModel","Model","sequence","controller","controllerOptions","MetadataGeneralFormFieldCollection","Collection","comparator","metadataGeneralFormFields","flatten","add","CollectionView","getChildView","fieldDescriptor","fieldDescriptors","formModel","formView","generalFormView","fetchedModels","displayedModels","layoutMode","formViewOptions","_triggerRenderForms","map","formViewId","cid","once","without","GeneralFormFieldCollectionView","ModalAlert","Behavior","_insertFieldExtensions","_emptyExtensionRegion","getGeneralFormFieldValues","formValues","fieldRegion","currentView","roles","roleName","fieldParent","getOption","isFunction","fieldViewOptions","fieldModels","pluck","fieldViews","empty","getFieldDescriptors","methodName","parameters","forms","promises","chain","fieldControllerDescriptor","Controller","method","compact","when","then","generalActionFields","MetadataGeneralActionFieldModel","MetadataGeneralActionFieldCollection","metadataGeneralActionFields","GeneralActionFieldCollectionView","getGeneralActionFieldValues","NodeSpriteCollection","SizeView","FormModel","NodeResourceMixin","prototypeExt","makeServerAdaptor","nodeId","str","sformat","connection","parse","schema","title","general","omit","_addCreatorInfo","_addOwnerInfo","_addCreateDateInfo","_addModifyDateInfo","_addMimeTypeInfo","_addSizeInfo","_addItemidInfo","_ensurePlaceholder","_addReserveInfo","_addMimeTypeClassNameInfo","ret","sizeView","column","has","size","getValueData","formattedValue","fields","hidden","label","formFieldSizeLabel","alpacaPlaceholderNotAvailable","itemId","formFieldItemIdLabel","tooltip","create_date","format","modify_date","ownerField","isOwnerExists","owner","type_control","NoOwner","formatMemberName","create_user_id","creator","mime_type","findTypeByNode","formFieldTypeLabel","mimeTypeClassName","findClassByNode","description","desc","alpacaPlaceholderDescription","reserve_info","formFieldReservedByLabel","mixin","ServerAdaptorMixin","NodeGeneralFormModel","makeNodeResource","column_name","sizeVal","getReadableFileSizeString","CommandHelper","DefaultActionBehavior","GeneralFormFieldBehavior","GeneralActionFieldBehavior","formTemplate","NextNodeModelFactory","NodeVersionCollection","defaultAction","generalFormFields","generalFormFieldDescriptors","generalActionFieldDescriptors","fieldToRefresh","union","fetch","defaultActionController","getAction","noDefaultActionExist","formTemplateHelpers","type_name","node_name","showThumbnail","showSize","reserved","openDoc","aria_label","openDocAria","_getLayout","layout","alpaca","bindings","_getBindings","owner_user_id","version_number_name","owner_id","field","targetField","isThumbnailView","thumbnailViewState","save","wait","patch","updateRenderedForm","updateReserveFieldDisplay","_showDefaultImage","thumbnail","versionNode","cmd","cmdOptions","nextNode","_closeMetadata","on","checkAndScrollElemToViewport","currentTarget","listenToOnce","async","nonReadOnlyFields","$form","updateForm","isReservedClicked","isUnreservedClicked","alpacaForm","requiredSwitch","requireSwitched","i","reserveInfoElem","defaultThumbnailEl","Thumbnail","NodeGeneralFormView","_showImage","doc_name","imgSrc","imgAlt","docPreviewAlt","load","img","thumbnailNotLoadedEl","one","evt","clientHeight","clientWidth","split","indexOf","SpecificNodeModel","SyncableMixin","ShortcutGeneralFormModel","makeSyncableFromMultipleSources","_mergeSources","specificNodeModel","nodeGeneralFormModel","specProperties","generalProperties","set","sync","specNodeModel","nodeGeneralModel","specificModelPromise","generalModelPromise","syncFromMultipleSources","NodeModelFactory","temporary","original_id","UrlGeneralFormModel","DocumentGeneralFormModel","DocumentGeneralFormView","ShortcutGeneralFormView","UrlGeneralFormView","RulesMatchingMixin","extraGeneralPanels","MetadataGeneralPanelModel","contentModel","contentView","contentViewOptions","makeRulesMatching","MetadataGeneralPanelCollection","findByNode","item","matchRules","generalPanels","equals","getPropertyPanels","generalPanel","_getGeneralPanel","getPropertyPanelsForCreate","deferred","getPropertyPanelsForMove","_getPropertyPanelsForMoveAndCopy","getPropertyPanelsForCopy","panel","MetadataGeneralPropertyController","extraPropertyPanels","MetadataPropertyPanelModel","MetadataPropertyPanelCollection","metadataPropertyPanels","addTitleTooltip","BlockingView","at","addNewProperties","dropdownDiv","formCollection","originalFormCollection","blockingParentView","delegate","imbue","toolItemFactory","_reRender","_isRendered","_ensureLazyActionsRetrieved","suppressAddProperties","addNewCat","aria-haspopup","aria-label","_onClickAddButton","_executeAction","executeOptions","inheritance","parentView","addPropertiesCallback","cancelled","lazyActionsAreRetrieved","isNodeLocallyCreated","nonPromotedCommands","addPropertiesToolbar","addNewCategory","requiredFieldsLabelId","PubSub","tabContentsHeaderTemplate","tagName","leftTabContentsHeader","rightTabContentsHeader","tabContentsHeaderTitle","requiredSwitchEle","requiredSwitchIcon","click @ui.requiredSwitchIcon","pubsubPostFix","objPubSubId","off","_changeTabTitle","_showRequiredSwitch","isRequiredCatPresent","_hideRequiredSwitch","html","requiredFieldSwitchModel","labelId","fieldvalue","reset","curVal","onClickRequiredIconDiv","onClickWriteField","flagWriteField","hideRequiredFieldsSwitch","TabPanelView","TabLinkCollectionViewExt","TabLinksScrollMixin","CategoryFormView","AppliedCategoryCollection","MetadataFormCollection","MetadataUtils","PerfectScrollingBehavior","AddPropertiesDropdownMenuView","AddPropertiesMenuItemsMask","TabContentHeaderView","MetadataTabContentCollectionView","AppliedCategoryActionsCollection","urlResource","fetched","categories_add","MetadataPropertiesViewImpl","classNames","isTouchBrowser","topAlignLabel","rtlEnabled","_propertyPanels","formMode","allForms","_generalFormFieldDescriptors","_generalActionFieldDescriptors","isTabable","notTabableRegion","delete_icon","tabType","extraScrollTopOffset","delete_tooltip","removeCategoryTooltip","getContentView","TabLinkCollectionViewClass","TabContentCollectionViewClass","searchTabContentForTabableElements","tabContentAccSelectors","PerfectScrolling","contentParent","scrollXMarginOffset","scrollYMarginOffset","autoreset","newCategories","removedCategories","widths","_updateToTextAreaScrollbar","blockActions","_checkFormFetching","_syncForms","unblockActions","_fetchForms","_resetRequiredSwitchView","flag","overlay","onRendered","resolveHasRequiredFields","has_required_fields","tabLinks","tabContentHeader","addPropertiesView","contentHeaderRegion","_updateScrollbar","scrollTop","top","_activateSelectedPropertyTab","selectedProperty","matchIndex","activeTab","findByIndex","activate","dataFetched","_fetchingForms","singleFormModel","clone","index","hasRequiredField","_createAddPropertiesView","_initializeOthers","metadataUtils","AlpacaFormOptionsSchemaHaveRequiredFields","_setTablinksAttributes","stopListening","tabContent","_onDeleteCategory","updateTitle","allFormsRendered","formRendered","childViewContent","content","isRenderFinished","formHtmlRegion","hideStickyHeader","_onRequiredSwitch","before","_hideNotRequiredFormFields","apv","firstVisibleTabLink","firstVisibleTab","tabModel","findByModel","isActive","_computeTablinkWidth","_enableToolbarState","objPubSubTabId","innerText","metadataHeaderView","onShow","tabLinksBar","tabLinksBarWidth","totalTablinksWidth","numTabs","$tabLink","oneTablinkWidth","totalWidthCheck1","totalWidthCheck2","onPanelActivated","validateForms","allFormsValid","tab","isCurrentFormValid","_hideValidationError","_showValidationError","getFormsValues","formFieldValues","formFieldRoles","category","catId","toString","isEmpty","removedCatId","generalTab","_addValidationErrorElement","after","validationErrorElem","hideValidationErrorMessageIconTooltip","formValidationErrorMessage","_clearValidationError","_loadPanels","_loadGeneralFormFields","_loadGeneralActionFields","panelModels","where","role_name","panelModelsLength","categoryModels","sortBy","toLowerCase","concat","_normalizeModels","_checkCategoriesActions","request","showError","getPropertyPanelsFailTitle","categoryActions","autofetch","cat","serverError","_getRespError","getCategoryActionsFailTitle","getActionsForACategoryFailMessage","gotoPreviousTooltip","gotoPreviousCategoryTooltip","gotoNextTooltip","gotoNextCategoryTooltip","_initializeToolbars","_listenToTabEvent","siblings","newWidth","widForEle","dirForEle","tabLinksEle","tabLinksEleWidth","parseInt","replace","addCatAt","respModel","catModel","doAddModelProperties","additionalAddOpts","tabContentRendered","_autoScrollTabTo","animationOff","removeAttr","_listenToTabIdEvent","formContent","newFormView","renderEvent","tabLink","tabToDelete","categoryName","removeCategoryWarningTitle","removeCategoryWarningMessage","confirmWarning","_removeCategory","isNumber","_removeTab","fullUrl","removeCategoryFailMessageTitle","removeCategoryFailMessage","previousIndex","_index","previousTab","hideNotRequired","appliedToWholeForm","_hideTabLinkByRequiredSwitch","_showTabLinkByRequiredSwitch","onReorder","tabLinkViews","_views","keysSortedByIndex","sort","view1","view2","currentTabPosition","responseJSON","MessageHelper","hasMessages","toHtml","text","clear","MetadataPropertiesView","MetadataPropertiesContentView","tabOptions","childTabPanelView","_ensureViewIsIntact","mdv","ActionItemCollection","extraActions","defaultActionItems","TableColumnModel","idAttribute","TableColumnCollection","getColumnKeys","deepClone","align","versionColumnVersionNumberTitle","versionColumnSizeTitle","LayoutViewEventsPropagationMixin","ToolbarView","DelayedToolbarView","TableView","PaginationView","TableRowSelectionToolbarView","ToolbarCommandController","NodeColumnCollection","metadataVersionsColumns","accessibleTable","exec","location","search","defaultPageSize","defaultPageSizes","MetadataVersionsTableView","tableRowSelectionToolbarView","tableView","childContainer","paginationView","tableRowSelectionToolbarRegion","tableRegion","paginationRegion","pageSize","ddItemsList","__super__","selectedNodes","getAllSignatures","onlyClientSideDefinedColumns","versions","commandController","_setTableView","_setTableRowSelectionToolbar","_setTableRowSelectionToolbarEventListeners","_setPagination","propagateEventsToRegions","_updateCollection","_tableRowSelectionToolbarView","tableColumns","columns","columnsWithSearch","orderBy","actionItems","contains","cmdOption","actionItem","toolbarCommandController","selectedChildren","defaultDDList","skipPaginationUpdateRequest","extraPanels","MetadataPanelModel","MetadataPanelCollection","metadataPanels","counter","uniqueTabId","TabLinkView","itemTemplate","_linkClicked","link","binf_tab","_parent","addToolTipContent","single_item","KeyboardBehaviorMixin","tabPanel","refreshTabableElements","_accSetFocusToPreviousOrNextElement","_setFirstAndLastFocusable","TabLinkDropDownView","collectionTemplate","TabLinksDropdownKeyboardBehavior","toggle","menuButton","selectedLabel","selected","activeTabIndex","selectedTabTitle","selectedTab","_setSelection","_refreshSelection","_updateSelection","selectedId","menuItems","onChildviewClickLink","onChildviewClearActiveTab","pick","TabLinkDropDownCollectionView","implementTabContentsDefaultKeyboardHandling","delayTabContent","tabs","_buildTabs","_nodeChanged","customProperties","executeCommand","prepend","onActivateTab","tabPane","_updateTabs","_convertCollection","hasChanged","MetadataController","Events","createItem","formsValues","version","MetadataDropdownTabView","PermissionsView","MetadataView","unset","initialPanel","assignTo","shortcutResourceScope","getResourceScope","setResourceScope","actionsPromise","_ensureCompleteNode","supportOriginatingView","baseOriginatingView","_saveItemName","metadataTabView","mhv","resultsView","shortcutOriginal","itemName","metadataController","originalNodeInCollection","errorMsg","failedToSaveName","_ensureCompleteVersionNode","checkExpansion","property","isObject","setExpand","expandable","invoke","actionsNeeded","origView","MetadataActionOneItemPropertiesView","metadataPropertiesView","_updateSchema","setNameFieldFocus","suppressHeaderView","extraViewClass","bNameIsValid","bFormsAreValid","parent_id","firstFocusCalled","DialogView","BaseMetadataActionView","baseDisplayForm","dialogOptions","okAction","OkButtonClick","_cancelAction","cancelAction","CancelButtonClick","buttons","default","OkButtonTitle","defaultDialogOkButtonTitle","CancelButtonTitle","defaultDialogCancelButtonTitle","actionToken","CancelButtonActionToken","disabled","dialogTitle","defaultDialogTitle","dialog","largeSize","buttonModel","footerView","button","updateButton","buttonAttributes","FormCollection","MetadataAddCategoriesView","displayForm","catName","catCollection","metadataAddItemPropView","baseUIOptions","callerProcessData","addNewCategoryDialogTitle","okButtonTitle","addNewCategoryDialogAddButtonTitle","_addCategory","error2","catData","category_id","formData","FormData","JSON","stringify","contentType","processData","addNewCategoryFailTitle","addNewCategoryFailMessage","AppliedCategoryFormModel","NodePicker","MetadataAddCategoriesController","AddNewCategory","startLocation","selectableTypes","unselectableNodes","selectMultiple","selectCategoryTitle","globalSearch","selectButtonLabel","selectCategoryButtonLabel","_loadNewCategoryForm","_displayAddCategoryForm","resp3","error3","_getCategoryModel","formOptions","resp2","formType","categoryExistsMessage","allowDeleteCat","pId","inheritanceVal","ajaxOptions","categoryForm","categoryOptions","categoryModel","allow_delete","removeable","loadNewCategoryFailTitle","loadNewCategoryFailMessage","nodeSpriteCollection","MetadataAddItemController","getAtLeastOneNode","addableTypeName","addItemMetadataDialogTitleGeneric","addItemView","completeFormCollection","addItemMetadataDialogTitle1","addButtonTitle","addItemMetadataDialogButtonAddTitle","_addItem","cancelButtonActionToken","updateButtons","getButtons","buttonView","enable","failedToCreateItem","responseText","TabPosition","none","list","selIndex","selectedIndex","selectedElem","selectedIndexElem","_focusHeader","headerFocusable","headerElement","_focusList","getSelectedIndex","getSelectedItem","_setFocus","_headerIsInFocus","_listIsInFocus","inFocus","_checkFocusAndSetCurrentTabPosition","_resetFocusedListElem","_moveTo","$preElem","clickBack","selectAt","which","_selectFirst","_selectLast","_selectPrevious","_selectNext","SimpleListView","MetadataNavigationListKeyboardBehavior","nameAttribute","enableIcon","initialActivationWeight","onRenderItem","onBeforeDestroyItem","verNum","thumbnailView","nodeUrl","show_required","enforcedRequire","enforcedRequiredAttrs","titleEl","cssClasses","validated","requiredPassedTooltip","requiredTooltip","onBeforeShow","_showChildViews","_showScrollPosition","internal","navigationRegion","initiallySelected","findIndex","setSelectedIndex","firstSelected","MetadataNavigationListView","MetadataNavigationListBehavior","jsonPath","MetadataActionMultipleItemsView","commonCategories","initialFormData","requiredFields","initiallySelectedModel","_getInitiallySelectedModel","applyFlag","_subscribeToMetadataViewEvents","setInitialCategories","onClickItem","onClickBack","_showNode","validateAndSetValuesToNode","cancelClick","fileAttr","advanced_versioning","getRequiredFields","resultType","nonValidateFields","nonValidateFieldsIds","nvField","match","reqFieldId","reqField","n","validateAndSetValuesToAllNode","valid","formsValid","_checkForAlpacaRequiredFields","reqArray","nullCount","arrayElement","toArray","checkNull","element","Array","childElement","iValue","iKey","onItemNameChanged","newName","selectedItem","NodeModel","MetadataAddMultipleDocsController","_getCommonCategories","metadataAddItems","addDocumentMetadataDialogTitle","addDocumentMetadataDialogAddButtonTitle","_addItems","allValid","extended_data","extendedData","missingRequiredMetadataForDocuments","MetadataAddDocumentController","addItemsRequiredMetadata","fileUploadCollection","fileModels","file","fileUploadModel","tempName","utilOptions","addableType","docParentId","newFiles","grep","ContainerHasEnforcedEmptyRequiredMetadata","hasRequiredMetadata","metadataDeferred","_addOneItemWithRequiredMetadata","_addMultipleItemsWithRequiredMetadata","_makeNodeCollectionFromItems","items","fileObject","userAction","cmdStatus","MetadataCopyMoveOneItemController","_CopyMoveItem","MetadataCopyMoveMultipleItemsController","_CopyMoveItems","modelValid","missingRequiredMetadataForObjects","ActionCollection","MetadataCopyMoveItemsController","CopyMoveItemsWithMetadata","CopyMoveItemsRequiredMetadata","openMetadata","_copyMoveItemsWithMetadata","targetFolder","_copyMoveOneItemWithRequiredMetadata","_copyMoveMultipleItemsWithRequiredMetadata","ContainerHasEnforcedEmptyRequiredMetadataOnNodes","requiredMetadata","enforcedItems","enfItem","itemObject","size_formatted","copyOneItemMetadataDialogTitle","copyItemsMetadataDialogButtonTitle","moveOneItemMetadataDialogTitle","moveItemsMetadataDialogButtonTitle","_extendDialogTitle","copyMultipleItemsMetadataDialogTitle","moveMultipleItemsMetadataDialogTitle","extDialogTitle","inheritanceOriginalProperties","inheritanceDestinationProperties","inheritanceMergedProperties","root","en-us","en","searchPlaceholder","versionsTitle","MetadataNavigationView","getPrototypeOf","metadataNavigationView","isExpandedView","_moveToNextItemAfterDeleteOrMove","nextIndex","indexOfItemDeleteOrMove","onItemBeforeDelete","onItemDeleted","onItemBeforeMove","onItemMoved","removedNode","onMetadataClose","FetchNodeFailTitle","FetchNodeFailMessage","ChildrenCollectionFactory","Children2CollectionFactory","NodesTableView","MetadataNavigationViewImpl","DefaultActionController","useV2RestApi","_ensureCompleteData","mnv","ensureCollectionAfterModel","_ensureCollection","ensureFetched","_showFetchNodeFailMessage","_ensureModelInCollection","getCollection","defaultActionCommands","getAllCommandSignatures","delayRestCommands","response2","errorObj","ToolbarItemOpen","ToolbarItemProperties","docPreviewImgAlt","created","createdBy","ownedBy","lambda","NodeAncestorCollection","ConnectorFactory","NodePickerFieldView","CommentView","FavoriteStarView","documentOverviewTemplate","DocumentOverviewView","_createModel","reloadWidget","parentNode","open","click @ui.command","click @ui.open","DefaultAction","suppressScrollX","_executeDefaultAction","stopImmediatePropagation","executeAction","setFields","_updateFieldsToRefersh","reserved_user_id","maxLength","minLength","hideInitValidationError","rows","_updateModel","_showNodeIcon","_showMetadataItemName","_showThumbnail","_addLocationView","_addCommentView","_addFavoriteView","_checkDescriptionContent","_checkEditPermission","validateInputName","_destroyThumbnail","thumbnailSet","locationRegion","_getParentNode","newAncestors","commentOptions","commentView","favoriteOptions","popoverAtBodyElement","favoriteView","_destroyForm","$schema","kind","select_types","toolItemMasks","widgetTitle","widgetDescription","idTitle","idDescription","initialPanelTitle","initialPanelDescription","dropdownMenuTitle","dropdownMenuDescription","addPropertiesTitle","addPropertiesDescription","styleLoad"],"mappings":"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","file":"csui-metadata.js","sourcesContent":["csui.define('csui/controls/tableheader/comment/comment.button.view',['require',\r\n  'csui/lib/underscore',\r\n  'csui/lib/marionette',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior'\r\n], function (require,\r\n    _,\r\n    Marionette,\r\n    ViewEventsPropagationMixin,\r\n    TabableRegionBehavior) {\r\n\r\n  var CommentButtonView = Marionette.View.extend({\r\n\r\n    className: 'csui-comment-button',\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function CommentButtonView(options) {\r\n      Marionette.View.call(this, options);\r\n      this.listenTo(this.model, 'change', this.render);\r\n    },\r\n\r\n    render: function () {\r\n      var self = this;\r\n      require(['esoc/widgets/utils/commentdialog/commentdialog.view'],\r\n          function (CommentDialogView) {\r\n            var contentRegion = new Marionette.Region({\r\n              el: self.el\r\n            });\r\n\r\n            var globalConfig = (typeof window.require !== \"undefined\") ?\r\n                               window.require.s.contexts._.config :\r\n                               window.csui.require.s.contexts._.config;\r\n            globalConfig.roId = self.model.get('id');\r\n\r\n            var commentDialogView = new CommentDialogView({\r\n              connector: self.model.connector,\r\n              nodeid: self.model.get('id'),\r\n              CSID: self.model.get('id'),\r\n              model: self.model,\r\n              context: self.options.context\r\n            });\r\n\r\n            commentDialogView.listenTo(commentDialogView, 'before:render', function () {\r\n              self.triggerMethod('before:render', self);\r\n            });\r\n            commentDialogView.listenTo(commentDialogView, 'render', function () {\r\n              self.triggerMethod('render', self);\r\n            });\r\n\r\n            self.propagateEventsToViews(commentDialogView);\r\n            contentRegion.show(commentDialogView);\r\n          }, function () {}\r\n      );\r\n      return this;\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(CommentButtonView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return CommentButtonView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/versions.toolbaritems',['csui/lib/underscore',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/controls/toolbar/toolitem.model'\r\n], function (_, lang, ToolItemsFactory, extraToolItems, TooItemModel) {\r\n\r\n  var toolbarItems = {\r\n\r\n    tableHeaderToolbar: new ToolItemsFactory(\r\n        {\r\n          main: [\r\n            {\r\n              signature: \"VersionProperties\",\r\n              name: lang.ToolbarItemVersionInfo,\r\n              icon: \"icon icon-toolbar-metadata\"\r\n            },\r\n            {\r\n              signature: \"VersionDownload\",\r\n              name: lang.ToolbarItemVersionDownload\r\n            },\r\n            {\r\n              signature: \"VersionDelete\",\r\n              name: lang.ToolbarItemVersionDelete\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 5,\r\n          dropDownIcon: \"icon icon-toolbar-more\"\r\n        }),\r\n    rightToolbar: new ToolItemsFactory(\r\n        {\r\n          main: [\r\n            {\r\n              signature: \"PurgeAllVersions\",\r\n              name: lang.ToolbarItemVersionPurgeAll\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          hAlign: \"right\"\r\n        }\r\n    )\r\n  };\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.tabcontentcollection.view',['csui/lib/underscore', 'csui/controls/tab.panel/impl/tab.contents.view',\r\n    'csui/utils/base'\r\n], function(_, TabContentCollectionView, base) {\r\n\r\n    // This view is specific to metadata view which overrides the 'currentlyFocusedElement' function such that \r\n    // only the tab contents elements visible in the current view port of the are focused on TAB and SHIFT+TAB.\r\n\r\n    var MetadataTabContentCollectionView = TabContentCollectionView.extend({\r\n\r\n        constructor: function MetadataTabContentCollectionView(attributes, options) {\r\n            TabContentCollectionView.prototype.constructor.apply(this, arguments);\r\n            _.extend(this, {\r\n                currentlyFocusedElement: function(event) {\r\n                    var reverseDirection = event && event.shiftKey;\r\n                    var elToFocus = this.currentlyFocusedElementInternal(event);\r\n                    var totalElements = this.keyboardBehavior.tabableElements.length;\r\n                    var cursor =  (reverseDirection ? totalElements - 1 : 0);\r\n                    while(!base.isElementVisibleInParent(elToFocus, this.$el, 1, 1) && \r\n                            cursor >= 0 && cursor < totalElements) { \r\n                        event.elementCursor = cursor = cursor  + (reverseDirection ? -1 : 1);\r\n                        elToFocus = this.currentlyFocusedElementInternal(event);\r\n                    }\r\n                    return elToFocus;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return  MetadataTabContentCollectionView;\r\n});\n","\n","csui.define('csui/widgets/metadata/impl/header/rightbar/toolbaritems',['csui/lib/underscore', 'csui/utils/base',\r\n  'i18n!csui/controls/tabletoolbar/impl/nls/localized.strings',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/impl/header/rightbar/toolbaritems'\r\n], function (_, base, lang, ToolItemsFactory, TooItemModel, extraToolItems) {\r\n  'use strict';\r\n  \r\n  var toolbarItems = {\r\n\r\n    rightToolbar: new ToolItemsFactory({\r\n          main: [\r\n          ]\r\n        }\r\n    )\r\n  };\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/header/rightbar/toolbaritems.masks',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  // Keep the keys in sync with csui/widgets/search.results/toolbaritems\r\n  var toolbars = ['rightToolbar'];\r\n\r\n  function ToolbarItemsMasks() {\r\n    var config = module.config(),\r\n        globalMask = new GlobalMenuItemsMask();\r\n    // Create and populate masks for every toolbar\r\n    this.toolbars = _.reduce(toolbars, function (toolbars, toolbar) {\r\n      var mask = new ToolItemMask(globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        source = source[toolbar];\r\n        if (source) {\r\n          mask.extendMask(source);\r\n        }\r\n      });\r\n      // Enable restoring the mask to its initial state\r\n      mask.storeMask();\r\n      toolbars[toolbar] = mask;\r\n      return toolbars;\r\n    }, {});\r\n  }\r\n\r\n  ToolbarItemsMasks.toolbars = toolbars;\r\n\r\n  return ToolbarItemsMasks;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/item.name/metadata.item.name',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    return \"  <div class=\\\"title-edit-icon-div\\\"></div>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    return \"  <div class=\\\"csui-metadata-item-name-dropdown\\\"></div>\\r\\n\";\n},\"5\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"    <span class=\\\"csui-undo edit-cancel inline-edit-icon\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.cancel_edit_name_tooltip || (depth0 != null ? depth0.cancel_edit_name_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cancel_edit_name_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.cancel_edit_name_tooltip || (depth0 != null ? depth0.cancel_edit_name_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cancel_edit_name_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div class=\\\"cs-metadata-item-name\\\">\\r\\n<span class=\\\"csui-toggle-wrapper binf-hidden\\\">\\r\\n  <span class=\\\"icon circular1 arrow_back cs-go-back binf-hidden1\\\" style=\\\"display:none;\\\"\\r\\n        aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBack || (depth0 != null ? depth0.goBack : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBack\",\"hash\":{}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBack || (depth0 != null ? depth0.goBack : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBack\",\"hash\":{}}) : helper)))\n    + \"\\\" tabindex=\\\"0\\\"></span>\\r\\n  <span class=\\\"csui-icon csui-metadata-listview csui-metadata-listview-expand-icon\\\" role=\\\"button\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.sidebarToggleTitle || (depth0 != null ? depth0.sidebarToggleTitle : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"sidebarToggleTitle\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n        aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.sidebarToggleTitle || (depth0 != null ? depth0.sidebarToggleTitle : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"sidebarToggleTitle\",\"hash\":{}}) : helper)))\n    + \"\\\" tabindex=\\\"0\\\"></span>\\r\\n</span><span class=\\\"csui-type-icon\\\"></span>\\r\\n<div role=\\\"heading\\\" aria-level=\\\"2\\\" class=\\\"title-header\\\">\\r\\n<span class=\\\"title\\\" tabindex=\\\"0\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"\\\" aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.nameAria || (depth0 != null ? depth0.nameAria : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"nameAria\",\"hash\":{}}) : helper)))\n    + \"\\\" role=\\\"button\\\"\\r\\n      aria-expanded=\\\"false\\\">\\r\\n    \"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"<span class=\\\"fadeout\\\"></span>\\r\\n</span>\\r\\n</div>\\r\\n\\r\\n\"\n    + ((stack1 = helpers.unless.call(depth0,(depth0 != null ? depth0.read_only : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_dropdown_menu : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(3, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"\\r\\n<div class=\\\"title-edit-div\\\">\\r\\n  <label id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.edit_name_id || (depth0 != null ? depth0.edit_name_id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"edit_name_id\",\"hash\":{}}) : helper)))\n    + \"\\\" class=\\\"binf-hidden\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.placeholder_text || (depth0 != null ? depth0.placeholder_text : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"placeholder_text\",\"hash\":{}}) : helper)))\n    + \"</label>\\r\\n  <span class=\\\"cs-icon-required category_required\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.required_tooltip || (depth0 != null ? depth0.required_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"required_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  <input type=\\\"text\\\" class=\\\"title-input\\\" placeholder=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.placeholder_text || (depth0 != null ? depth0.placeholder_text : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"placeholder_text\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n         value=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.edit_name || (depth0 != null ? depth0.edit_name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"edit_name\",\"hash\":{}}) : helper)))\n    + \"\\\" aria-labelledby=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.edit_name_id || (depth0 != null ? depth0.edit_name_id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"edit_name_id\",\"hash\":{}}) : helper)))\n    + \"\\\" aria-required=\\\"true\\\">\\r\\n\"\n    + ((stack1 = helpers.unless.call(depth0,(depth0 != null ? depth0.hideCancelButton : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":this.program(5, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"</div>\\r\\n</div>\\r\\n<div class=\\\"title-error-div\\\">\\r\\n  <span class=\\\"title-error\\\" title=\\\"\\\"></span>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_item.name_metadata.item.name', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <div class=\\\"binf-dropdown\\\">\\r\\n    <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-dropdown-toggle\\\"\\r\\n            data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"\\r\\n            aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.showMoreAria || (depth0 != null ? depth0.showMoreAria : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"showMoreAria\",\"hash\":{}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.showMoreTooltip || (depth0 != null ? depth0.showMoreTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"showMoreTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n      <span class=\\\"csui-button-icon icon-expandArrowDown\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.showMoreTooltip || (depth0 != null ? depth0.showMoreTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"showMoreTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n    </button>\\r\\n    <ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\"></ul>\\r\\n  </div>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    return \"  <div class=\\\"csui-loading-parent-wrapper binf-disabled csui-disbaled binf-hidden\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n  </div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.hasCommands : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_dropdown.menu_dropdown.menu', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<li role=\\\"menuitem\\\" class=\\\"csui-loading-parent-wrapper binf-disabled csui-disbaled\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n</li>\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_dropdown.menu_lazy.loading.template', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view',[\r\n  \"csui/lib/jquery\", \"csui/lib/underscore\",\r\n  \"csui/lib/backbone\", \"csui/lib/marionette\",\r\n  'csui/utils/commands', 'csui/controls/toolbar/toolitem.view',\r\n  'csui/models/nodes', 'csui/controls/toolbar/toolitems.filtered.model',\r\n  'hbs!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/behaviors/dropdown.menu/dropdown.menu.behavior',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'hbs!csui/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template',\r\n  'css!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',\r\n  'csui/lib/binf/js/binf'\r\n], function ($, _, Backbone, Marionette, commands, ToolItemView, NodeCollection,\r\n    FilteredToolItemsCollection, template, TabableRegionBehavior,\r\n    DropdownMenuBehavior, lang, lazyloadingTemplate) {\r\n  'use strict';\r\n\r\n  // TODO: Make common dropdown menu control to be used in both the table header and the metadata header\r\n\r\n  var DropdownMenuView = Marionette.CompositeView.extend({\r\n    className: \"cs-dropdown-menu\",\r\n    template: template,\r\n\r\n    childView: ToolItemView,\r\n    childViewContainer: \"ul.binf-dropdown-menu\",\r\n    childViewOptions: function (model) {\r\n      return {\r\n        role: 'menuitem',\r\n        command: this.collection.commands &&\r\n          this.collection.commands.findWhere({signature: model.get('signature')})\r\n      };\r\n    },\r\n\r\n    templateHelpers: function () {\r\n      return {\r\n        hasCommands: !!this.collection.length,\r\n        btnId: _.uniqueId('dropdownMenuButton'),\r\n        showMoreTooltip: lang.showMore,\r\n        showMoreAria: lang.showMoreAria\r\n      };\r\n    },\r\n\r\n    ui: {\r\n      dropdownToggle: '.binf-dropdown-toggle',\r\n      dropdownMenu: '.binf-dropdown-menu',\r\n      loadingIconsDiv: '.csui-loading-parent-wrapper'\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior\r\n      },\r\n      DropdownMenuBehavior: {\r\n        behaviorClass: DropdownMenuBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function DropdownMenuView(options) {\r\n      var status = {\r\n        nodes: new NodeCollection([options.model]),\r\n        container: options.container,\r\n        containerCollection: options.containerCollection,\r\n        context: options.context\r\n      };\r\n      options.status = status;\r\n      this.commands = options.commands || commands;\r\n      options.collection = new FilteredToolItemsCollection(\r\n          options.toolItems, {\r\n            status: status,\r\n            commands: this.commands,\r\n            delayedActions: options.containerCollection &&\r\n                            options.containerCollection.delayedActions,\r\n            mask: options.toolItemMask\r\n          });\r\n\r\n      options.reorderOnSort = true;\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n      _.defaults(this.options, options.toolItems.options);  // set options from ToolItemFactory\r\n\r\n      this.originatingView = options.originatingView;\r\n\r\n\r\n      // Passing the el to the ctor prevents creating an own el, including\r\n      // setting its attributes.  The caller must ensure the right tag.\r\n      if (options.el) {\r\n        $(options.el).addClass(_.result(this, \"className\"));\r\n      }\r\n\r\n      this.listenTo(this, \"childview:toolitem:action\", this._triggerMenuItemAction)\r\n          .listenTo(this.model, \"sync\", this.render)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle)\r\n          .listenTo(this.model, \"change\", this.render);\r\n      if (this.model.delayedActions) {\r\n        this.listenTo(this.model.delayedActions, 'request', this._hide)\r\n            .listenTo(this.model.delayedActions, 'sync error', this._show);\r\n      }\r\n      if (this.model.actions) {\r\n        this.listenTo(this.model.actions, 'update', this.render);\r\n      }\r\n    },\r\n\r\n    _updateMenuItems: function () {\r\n      this.collection.refilter();\r\n      this.render();\r\n    },\r\n\r\n    onRender: function () {\r\n      if (this.model.delayedActions && this.model.delayedActions.fetching) {\r\n        this._hide();\r\n      }\r\n      if (!this.collection.length) {\r\n        var node                 = this.options.model ? this.options.model : this.model,\r\n            lazyActionsRetrieved = !!node && !!node.get('csuiLazyActionsRetrieved'),\r\n            isLocallyCreatedNode = !!node && !!node.isLocallyCreated;\r\n        if (!!node && !lazyActionsRetrieved && node.nonPromotedActionCommands &&\r\n            node.nonPromotedActionCommands.length && !isLocallyCreatedNode) {\r\n          this.$el.find('.binf-dropdown').addClass('binf-hidden');\r\n          this.ui.loadingIconsDiv.removeClass('binf-hidden');\r\n          this.fetchingNonPromotedActions = true;\r\n          node.setEnabledLazyActionCommands(\r\n              true).done(_.bind(function () {\r\n            this.fetchingNonPromotedActions = false;\r\n            var blockingElement = this.$el.find('.csui-loading-parent-wrapper');\r\n            blockingElement.animate(\"width: 0\", 300, _.bind(function () {\r\n              blockingElement.addClass('binf-hidden');\r\n              this.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n              //UpdateToolItems silently and re-render dropdown menu;\r\n              this.collection.silentFetch = true;\r\n              this._updateMenuItems();\r\n            }, this));\r\n          }, this));\r\n        }\r\n      } else {\r\n        //state variable for fetching nonpromoted actions started or not\r\n        this.fetchingNonPromotedActions = false;\r\n        this.ui.dropdownToggle.binf_dropdown();\r\n        this.ui.dropdownMenu.find(\"> li > a.binf-hidden\").removeClass('binf-hidden');\r\n        var adjustDropdown = _.bind(function () {\r\n          this.ui.dropdownMenu.removeClass('adjust-dropdown-menu');\r\n          var dropdownLeftOffset   = this.ui.dropdownMenu.offset().left,\r\n              dropdownWidth        = this.ui.dropdownMenu.outerWidth(),\r\n              originatingViewWidth = this.options.originatingView.$el.width(),\r\n              margin               = (window.innerWidth - originatingViewWidth) / 2,\r\n              rightOffset          = originatingViewWidth -\r\n                                     (dropdownLeftOffset + dropdownWidth - margin);\r\n          if (dropdownLeftOffset + dropdownWidth >\r\n              originatingViewWidth ||\r\n              (rightOffset + dropdownWidth > originatingViewWidth)) {\r\n            this.ui.dropdownMenu.addClass('adjust-dropdown-menu');\r\n          }\r\n        }, this);\r\n        var renderLazyActions = _.bind(function () {\r\n          var self = this;\r\n          var node                 = this.options.model ? this.options.model : this.model,\r\n              lazyActionsRetrieved = !!node && !!node.get('csuiLazyActionsRetrieved'),\r\n              isLocallyCreatedNode = !!node && !!node.isLocallyCreated;\r\n          if (!!node && !lazyActionsRetrieved && node.nonPromotedActionCommands &&\r\n              node.nonPromotedActionCommands.length && !isLocallyCreatedNode) {\r\n            this.fetchingNonPromotedActions = true;\r\n            this.ui.dropdownMenu.append(lazyloadingTemplate);\r\n            node.setEnabledLazyActionCommands(\r\n                true).done(function () {\r\n              self.fetchingNonPromotedActions = false;\r\n              var newCollection = new FilteredToolItemsCollection(\r\n                  self.options.toolItems, {\r\n                    status: self.options.status,\r\n                    commands: self.commands,\r\n                    delayedActions: self.options.containerCollection &&\r\n                                    self.options.containerCollection.lazyActions,\r\n                    lazyActions: self.options.containerCollection &&\r\n                                 self.options.containerCollection.lazyActions,\r\n                    mask: self.options.toolItemsMask\r\n                  });\r\n\r\n              var blockingEle = self.ui.dropdownMenu.find('.csui-loading-parent-wrapper');\r\n              //As per UX review comments, 300 ms given before rendering lazy actions\r\n              blockingEle.animate(\"width: 0\", 300, function () {\r\n                blockingEle.remove();\r\n                if (self.collection.models.length !== newCollection.models.length) {\r\n                  _.filter(newCollection.models, function (model) {\r\n                    if (self.isDestroyed === true || self._isDestroyed) {\r\n                      self.children = undefined;\r\n                    } else {\r\n                      var signature = model.get(\"signature\");\r\n                      if (!self.collection.find({signature: signature})) {\r\n                        self.collection.models.push(model);\r\n                        var lazyToolItemView = self.addChild(model, ToolItemView);\r\n                        lazyToolItemView.renderTextOnly();\r\n                      }\r\n                    }\r\n                  });\r\n                }\r\n              });\r\n\r\n            });\r\n          }\r\n        }, this);\r\n        this.ui.dropdownToggle.bind('binf.dropdown.after.show', adjustDropdown);\r\n        this.ui.dropdownToggle.bind('binf.dropdown.before.show', renderLazyActions);\r\n        $(window).bind('resize.metadata.header.dropdown.menu', _.debounce(adjustDropdown, 100));\r\n        this.delegateEvents();\r\n      }\r\n    },\r\n\r\n    onRenderCollection: function () {\r\n      if (this.collection.length && this.fetchingNonPromotedActions) {\r\n        //loading icons div appended to dropdown,\r\n        //but before fectching nonpromoted actions collection reset event trigger from dropDownMenu Behavior\r\n        // in this case we are removing loding icons div from drop down and appended again\r\n        var loadingIconsDiv = this.ui.dropdownMenu.find('.csui-loading-parent-wrapper');\r\n        loadingIconsDiv.length && loadingIconsDiv.remove();\r\n        this.ui.dropdownMenu.append(lazyloadingTemplate);\r\n      }\r\n    },\r\n\r\n    onDestroy: function () {\r\n      $(window).unbind(\"resize.metadata.header.dropdown.menu\");\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      return $(this.ui.dropdownToggle);\r\n    },\r\n\r\n    _hide: function () {\r\n      this.$el.addClass('binf-invisible');\r\n    },\r\n\r\n    _show: function () {\r\n      this.$el.removeClass('binf-invisible');\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n        dropdownToggleEl.binf_dropdown('toggle');\r\n      }\r\n    },\r\n\r\n    _triggerMenuItemAction: function (toolItemView, args) {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      dropdownToggleEl.binf_dropdown('toggle');  // close the dropdown menu before triggering the event\r\n\r\n      var signature = args.toolItem.get(\"signature\");\r\n      var command = this.commands.findWhere({signature: signature});\r\n\r\n      if (signature === 'Rename') {\r\n        // IE is picky with Enter keypress triggered by Bootstrap not it was not stopped fast enough\r\n        setTimeout(_.bind(function () {\r\n          this.trigger('rename', this);\r\n        }, this), 200);\r\n      } else {\r\n        var status = {\r\n          context: this.options.context,\r\n          nodes: new NodeCollection([this.model]),\r\n          container: this.options.container,\r\n          collection: this.options.containerCollection,\r\n          originatingView: this.options.targetView ? this.options.targetView : this.originatingView\r\n        };\r\n\r\n        if (command && command.enabled(status)) {\r\n          // TODO: Remove the code specifgic to two commands.\r\n          // trigger some selected events so code like navigation can handle it if needed\r\n          signature === 'Delete' && (this.trigger('metadata:item:before:delete', this));\r\n          signature === 'Move' && (this.trigger('metadata:item:before:move', this));\r\n\r\n          command.execute(status)\r\n              .done(_.bind(function (resp) {\r\n                // trigger some selected events so code like navigation can handle it if needed\r\n                signature === 'Delete' && (this.trigger('metadata:item:deleted', this));\r\n              }, this));\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return DropdownMenuView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/versions.toolbaritems.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask',\r\n  // Load and external tool item masks\r\n  'csui-ext!csui/widgets/metadata/versions.toolbaritems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask, dynamicMasks) {\r\n  'use strict';\r\n  dynamicMasks || (dynamicMasks = []);\r\n  var VersionsToolbarItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function VersionsToolbarItemsMask(options) {\r\n      var config     = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n      this.context = options.context;\r\n      this.node = !!options.node ? options.node : options.model;\r\n      this._updateMask();\r\n      this.listenTo(this.node, 'change:id', this._updateMask);\r\n    },\r\n    _updateMask: function () {\r\n      var modified = this.restoreMask({silent: true});\r\n      dynamicMasks.forEach(function (mask) {\r\n        mask = mask({\r\n          context: this.context,\r\n          node: this.node\r\n        });\r\n        if (mask) {\r\n          modified = this.extendMask(mask, {silent: true}) || modified;\r\n        }\r\n      }, this);\r\n      if (modified) {\r\n        this.trigger('update', this);\r\n      }\r\n    }\r\n  });\r\n\r\n  return VersionsToolbarItemsMask;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/header.dropdown.menu.items',['csui/lib/underscore',\r\n  //'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'i18n!csui/controls/tabletoolbar/impl/nls/localized.strings',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/header.dropdown.menu.items',\r\n  // Load extra tool items from the previous module location\r\n  'csui-ext!csui/widgets/metadata/header.item.name/menuitems'\r\n], function (_, lang, ToolItemsFactory, TooItemModel, extraToolItems,\r\n    oldExtraToolItems) {\r\n  'use strict';\r\n\r\n  var toolbarItems = {\r\n    dropdownMenuList: new ToolItemsFactory({\r\n          main: [\r\n            {signature: \"Properties\", name: lang.ToolbarItemInformation},\r\n            {signature: \"CopyLink\", name: lang.ToolbarItemCopyLink},\r\n            {signature: \"Edit\", name: lang.ToolbarItemEdit},\r\n            {signature: \"EmailLink\", name: lang.ToolbarItemShare},\r\n            {signature: \"permissions\", name: lang.ToolbarItemPermissions},\r\n            {signature: \"Rename\", name: lang.ToolbarItemRename},\r\n            {signature: \"Download\", name: lang.ToolbarItemDownload},\r\n            {signature: \"ZipAndDownload\", name: lang.MenuItemZipAndDownload},\r\n            {signature: \"ReserveDoc\", name: lang.ToolbarItemReserve},\r\n            {signature: \"UnreserveDoc\", name: lang.ToolbarItemUnreserve},\r\n            {signature: \"Copy\", name: lang.ToolbarItemCopy},\r\n            {signature: \"Move\", name: lang.ToolbarItemMove},\r\n            {signature: \"AddVersion\", name: lang.ToolbarItemAddVersion},\r\n            {signature: \"Delete\", name: lang.ToolbarItemDelete},\r\n            {signature: \"Collect\", name: lang.ToolbarCollect}\r\n          ],\r\n          shortcut: [\r\n            {signature: \"OriginalCopyLink\", name: lang.ToolbarItemOriginalCopyLink},\r\n            {signature: \"OriginalEdit\", name: lang.ToolbarItemOriginalEdit},\r\n            {signature: \"OriginalEmailLink\", name: lang.ToolbarItemOriginalShare},\r\n            {signature: \"OriginalReserveDoc\", name: lang.ToolbarItemOriginalReserve},\r\n            {signature: \"OriginalUnreserveDoc\", name: lang.ToolbarItemOriginalUnreserve},\r\n            {signature: \"OriginalCopy\", name: lang.ToolbarItemOriginalCopy},\r\n            {signature: \"OriginalMove\", name: lang.ToolbarItemOriginalMove},\r\n            {signature: \"OriginalAddVersion\", name: lang.ToolbarItemAddVersion},\r\n            {signature: \"OriginalDownload\", name: lang.ToolbarItemOriginalDownload},\r\n            {signature: \"OriginalDelete\", name: lang.ToolbarItemOriginalDelete}\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 0, // force toolbar to immediately start with a drop-down list\r\n          dropDownIcon: \"icon icon-expandArrowDown\"\r\n        }\r\n    )\r\n  };\r\n\r\n  if (oldExtraToolItems) {\r\n    // TODO: Issue deprecation warning\r\n    addExtraToolItems(oldExtraToolItems);\r\n  }\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/header.dropdown.menu.items.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  var DropdownMenuItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function DropdownMenuItemsMask() {\r\n      var config = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n    }\r\n\r\n  });\r\n\r\n  return DropdownMenuItemsMask;\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/metadata',[],function(){});\n","\ncsui.define('css!csui/widgets/metadata/impl/header/item.name/metadata.item.name',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',['csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/controls/node-type.icon/node-type.icon.view',\r\n  'hbs!csui/widgets/metadata/impl/header/item.name/metadata.item.name',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view',\r\n  'csui/utils/commands/versions',\r\n  'csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/widgets/metadata/versions.toolbaritems.mask',\r\n  'csui/widgets/metadata/header.dropdown.menu.items',\r\n  'csui/widgets/metadata/header.dropdown.menu.items.mask',\r\n  'csui/models/version', 'csui/behaviors/item.name/item.name.behavior',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'i18n', 'css!csui/widgets/metadata/impl/metadata',\r\n  'css!csui/widgets/metadata/impl/header/item.name/metadata.item.name'\r\n], function ($, _, Backbone, Marionette, NodeTypeIconView, template, lang,\r\n    DropdownMenuView, versionCommands, versionToolbarItems, VersionsToolbarItemsMask, dropdownMenuItems, DropdownMenuItemsMask, VersionModel,\r\n    ItemNameBehavior, TabableRegionBehavior, ViewEventsPropagationMixin, i18n) {\r\n  'use strict';\r\n\r\n  var MetadataItemNameView = Marionette.ItemView.extend({\r\n\r\n        className: 'cs-metadata-item-name-container',\r\n        template: template,\r\n\r\n        templateHelpers: function () {\r\n          return {\r\n            name: this.modelHasEmptyName ? (this.readonly ? this.placeHolderName : '') :\r\n                  this.options.model.get(\"name\"),\r\n            edit_name: this.modelHasEmptyName ? '' : this.options.model.get(\"name\"),\r\n            edit_name_id: _.uniqueId('cs-metadata-edit-name'),\r\n            placeholder_text: this.placeHolderName,\r\n            nameAria: this.options.model.get(\"name\") || lang.emptyObjectNameAria,\r\n            cancel_edit_name_tooltip: lang.cancelEditNameTooltip,\r\n            switch_language_tooltip: lang.switchLanguageTooltip,\r\n            show_dropdown_menu: this.options.showDropdownMenu ? true : false,\r\n            read_only: this.readonly,\r\n            goBack: lang.goBackTooltip,\r\n            sidebarToggleTitle: lang.expand,\r\n            hideCancelButton: this.options.mode && this.options.mode === 'create'\r\n          };\r\n        },\r\n\r\n        ui: {\r\n          // note: if you change the template or this mapping, be sure not to break the behavior code\r\n          name: '.title',\r\n          contextMenuDiv: '.csui-metadata-item-name-dropdown',\r\n          nameEditDiv: '.title-edit-div',\r\n          nameInput: '.title-input',\r\n          nameEditCancelIcon: '.edit-cancel',\r\n          titleError: '.title-error',\r\n          toggleIcon: '.csui-metadata-listview',\r\n          toggleWrapper: '.csui-toggle-wrapper',\r\n          backEle: '.arrow_back'\r\n        },\r\n\r\n        modelEvents: {\r\n          'change': 'render'\r\n        },\r\n\r\n        events: {\r\n          'keydown': 'onKeyInView',\r\n          'mouseenter': 'onMouseEnterName',\r\n          'mouseleave': 'onMouseLeaveName',\r\n          'keydown @ui.nameInput': 'onKeyDown',\r\n          'click @ui.toggleIcon': 'toggleSideBar',\r\n          'click @ui.backEle': 'goBack',\r\n          'keydown @ui.toggleIcon': 'toggleSideBar',\r\n          'keydown @ui.backEle': 'goBack',\r\n          'keydown @ui.toggleWrapper': '_onKeyInView'\r\n        },\r\n\r\n        behaviors: function () {\r\n          return {\r\n            ItemName: {\r\n              behaviorClass: ItemNameBehavior,\r\n              nameSchema: this._nameSchema,\r\n              mode: this.options.mode\r\n            },\r\n            TabableRegionBehavior: {\r\n              behaviorClass: TabableRegionBehavior\r\n            }\r\n          };\r\n        },\r\n\r\n        toggleSideBar: function (event) {\r\n          if (!!event && (event.keyCode === 13 || event.keyCode === 32 || event.type === 'click')) {\r\n            this.toggleSideBarEvent();\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n          }\r\n        },\r\n        //Calling this method from MetadataPropertiesView to set tabindex\r\n        setToggleIconTabIndex: function () {\r\n          this.ui.toggleIcon.attr('tabindex', 0);\r\n        },\r\n\r\n        toggleSideBarEvent: function () {\r\n          if (this.leftBar && this.leftBar.length > 0) {\r\n            var parentWrapper = this.leftBar.closest(\".metadata-navigation\");\r\n            if (!!parentWrapper) {\r\n              if (parentWrapper.length > 0) {\r\n                var sideBarEle = this.leftBar;\r\n                if (sideBarEle.length > 0) {\r\n                  if (parentWrapper.hasClass('csui-hide-side-bar')) {\r\n                    parentWrapper.toggleClass(\"csui-hide-side-bar\");\r\n                    $(sideBarEle).show('blind', {direction: this.direction}, '200', function () {\r\n                      $(window).trigger(\"resize.tableview\");\r\n                    });\r\n                    $(this.ui.backEle).hide();\r\n                    $(this.ui.toggleIcon).attr('title', lang.collapse).attr('aria-label',\r\n                        lang.collapse);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-collapse-icon').removeClass(\r\n                        'csui-metadata-listview-expand-icon');\r\n                    this.sideBarHidden = false;\r\n                  } else {\r\n                    var that = this;\r\n                    $(sideBarEle).hide('blind', {direction: this.direction}, '200', function () {\r\n                      parentWrapper.toggleClass(\"csui-hide-side-bar\");\r\n                      $(window).trigger(\"resize.tableview\");\r\n                    });\r\n                    $(that.ui.backEle).show().focus();\r\n                    this.sideBarHidden = true;\r\n                    $(this.ui.toggleIcon).attr('title', lang.expand).attr('aria-label',\r\n                        lang.expand);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-expand-icon').removeClass(\r\n                        'csui-metadata-listview-collapse-icon');\r\n                  }\r\n                  $(sideBarEle).promise().done(function () {\r\n                    var event = $.Event('toggled:navigationbar');\r\n                    this.closest('.metadata-navigation').find('.cs-metadata').trigger(event);\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        // adapt the sidebar toggle button\r\n        ensureTitleLabelIcon: function () {\r\n          if (this.leftBar && this.leftBar.length > 0) {\r\n            var parentWrapper = this.leftBar.closest(\".metadata-navigation\");\r\n            if (!!parentWrapper) {\r\n              if (parentWrapper.length > 0) {\r\n                var sideBarEle = this.leftBar;\r\n                if (sideBarEle.length > 0) {\r\n                  if (parentWrapper.hasClass('csui-hide-side-bar')) {\r\n                    $(this.ui.toggleIcon).attr('title', lang.expand).attr('aria-label',\r\n                        lang.expand);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-expand-icon').removeClass(\r\n                        'csui-metadata-listview-collapse-icon');\r\n                  } else {\r\n                    $(this.ui.toggleIcon).attr('title', lang.collapse).attr('aria-label',\r\n                        lang.collapse);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-collapse-icon').removeClass(\r\n                        'csui-metadata-listview-expand-icon');\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        constructor: function MetadataItemNameView(options) {\r\n          options || (options = {});\r\n          this._nameSchema = _.extend({\r\n            required: true,\r\n            readonly: false\r\n          }, options.nameSchema);\r\n\r\n          // be the first listener, before the ones of the behavior, so behavior listeners already\r\n          // see updated ui elements\r\n          this.listenTo(options.model, \"change:name\", this._updateName);\r\n\r\n          this.direction = !!i18n.settings.rtl ? 'right' : 'left';\r\n\r\n          Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n          this.readonly = this._nameSchema.readonly;\r\n          this.placeHolderName = lang.addItemPlaceHolderName;\r\n          var name = this.model.get(\"name\");\r\n          this.modelHasEmptyName = name ? false : true;\r\n\r\n          // create dropdown menu\r\n          this.options.showDropdownMenu && this._createDropdownMenu();\r\n\r\n          $(window).bind('resize', {view: this}, this._onWindowResize);\r\n\r\n        },\r\n\r\n        goBack: function (event) {\r\n          if (event.keyCode === 13 || event.keyCode === 32 || event.type === 'click') {\r\n            this.options.originatingView.triggerMethod('metadata:close');\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n          }\r\n        },\r\n\r\n        _applyToggle: function () {\r\n          if (!!this.sideBarHidden) {} else {\r\n            this.ui.toggleWrapper instanceof Object &&\r\n            this.ui.toggleWrapper.removeClass('binf-hidden');\r\n            this.$el.addClass(\"csui-metadata-header-with-toggle\");\r\n            if (this.options.originatingView && !!this.options.originatingView.mdn &&\r\n                !!this.options.originatingView.mdn.$el.is(\":visible\")) {\r\n              if (this.ui.backEle instanceof Object) {\r\n                this.ui.backEle.hide();\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        _removeToggle: function () {\r\n          if (this.ui.toggleWrapper instanceof Object) {\r\n            this.ui.toggleWrapper.addClass('binf-hidden');\r\n            this.$el.removeClass(\"csui-metadata-header-with-toggle\");\r\n          }\r\n          if (!!this.sideBarHidden) {\r\n            this.toggleSideBarEvent();\r\n          }\r\n        },\r\n\r\n        onDestroy: function () {\r\n          this._destroyDropdownMenu();\r\n        },\r\n\r\n        _updateName: function () {\r\n          var name = this.model.get(\"name\");\r\n          this.modelHasEmptyName = name ? false : true;\r\n          this.render();\r\n          var focus = $(this.ui.nameInput).is(\":focus\");\r\n          this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n          this.validate();\r\n        },\r\n\r\n        _destroyDropdownMenu: function () {\r\n          if (this.dropdownMenuView) {\r\n            this.cancelEventsToViewsPropagation(this.dropdownMenuView);\r\n            this.dropdownMenuView.destroy();\r\n          }\r\n        },\r\n\r\n        _createDropdownMenu: function () {\r\n          var oView = this.options.originatingView;\r\n          var isVersionModel = this.options.model instanceof VersionModel;\r\n          // TODO: Pass toolItems to the constructor of this component instead\r\n          // of sniffing some other ones.\r\n          var toolItems,\r\n              toolItemsMask = this.options.toolbarItemsMask;\r\n          if (oView && oView.options && oView.options.toolbarItems &&\r\n              oView.options.toolbarItems.dropdownMenuListInProperties) {\r\n            toolItems = oView.options.toolbarItems.dropdownMenuListInProperties;\r\n          } else {\r\n            if(isVersionModel) {\r\n              toolItems = versionToolbarItems.tableHeaderToolbar;\r\n            } else {\r\n              toolItems = dropdownMenuItems.dropdownMenuList;\r\n            }\r\n          }\r\n          if (!toolItemsMask) {\r\n            if(isVersionModel) {\r\n              toolItemsMask = new VersionsToolbarItemsMask(this.options);\r\n            } else {\r\n              toolItemsMask = new DropdownMenuItemsMask();\r\n            }\r\n          }\r\n          if (this.options.showPermissionView) {\r\n            toolItems = toolItems.collection.filter(\r\n                function (command) {\r\n                  return (command.get(\"signature\") != \"permissions\");\r\n                });\r\n          } else if (this.options.showPropertiesCommand !== true) {\r\n            toolItems = toolItems.collection.filter(\r\n                function (command) {\r\n                  return (command.get(\"signature\") != \"Properties\" && command.get(\"signature\") != \"VersionProperties\");\r\n                });\r\n          }\r\n          this._destroyDropdownMenu();\r\n          var ddm = this.dropdownMenuView = new DropdownMenuView({\r\n            model: this.options.model,\r\n            container: this.options.container,\r\n            containerCollection: this.options.collection || this.options.containerCollection,\r\n            toolItems: toolItems,\r\n            toolItemsMask: toolItemsMask,\r\n            originatingView: this.options.originatingView,\r\n            targetView: this.options.targetView,\r\n            context: this.options.context,\r\n            commands: isVersionModel ?  versionCommands : this.options.commands,\r\n            metadataScenario: this.options.metadataScenario\r\n          });\r\n          this.listenTo(ddm, 'rename', _.bind(this._toggleEditMode, this, true));\r\n          this.listenTo(ddm, 'metadata:item:before:delete', _.bind(function (args) {\r\n            this.trigger('metadata:item:before:delete', args);\r\n          }, this));\r\n          this.listenTo(ddm, 'metadata:item:before:move', _.bind(function (args) {\r\n            this.trigger('metadata:item:before:move', args);\r\n          }, this));\r\n          this.listenTo(ddm, 'metadata:item:deleted', _.bind(function (args) {\r\n            this.trigger('metadata:item:deleted', args);\r\n          }, this));\r\n          ddm.$el.bind('keydown', _.bind(function (event) {\r\n            if (event.keyCode === 9 && event.shiftKey) {\r\n              if (this.ui.backEle.is(':visible') || this.ui.toggleIcon.is(':visible')) {\r\n                this.ui.name.prop('tabindex', 0);\r\n                event.stopPropagation();\r\n              }\r\n            }\r\n          }, this));\r\n          this.propagateEventsToViews(this.dropdownMenuView);\r\n        },\r\n\r\n        _onWindowResize: function (event) {\r\n          if (event && event.data && event.data.view) {\r\n            var self = event.data.view;\r\n            // optimization for rapid mouse movement and redraw when mouse movement slows down or stop\r\n            if (self.resizeTimer) {\r\n              clearTimeout(self.resizeTimer);\r\n            }\r\n\r\n            self.resizeTimer = setTimeout(function () {\r\n              self._setHideShowToggleButton();\r\n\r\n            }, 200);\r\n          }\r\n        },\r\n\r\n        _setHideShowToggleButton: function (event) {\r\n\r\n          var isLandscape = window.matchMedia(\"(orientation: landscape)\").matches,\r\n              isPortrait  = window.matchMedia(\"(orientation: portrait)\").matches,\r\n              self        = !!event && !!event.data && !!event.data.view ? event.data.view : this;\r\n\r\n          self.leftBar = self.options.originatingView &&\r\n                         self.options.originatingView.$el.find(\".metadata-sidebar\");\r\n\r\n          if (self.leftBar && self.leftBar.length > 0) {\r\n            var navBar = self.leftBar.closest(\".metadata-navigation\");\r\n            if (isLandscape) {\r\n              if (window.innerWidth <= 1280) {\r\n                if (!!self.sideBarHidden) {\r\n                  self.ui.toggleWrapper instanceof Object &&\r\n                  self.ui.toggleWrapper.removeClass('binf-hidden');\r\n                  if (self.ui.backEle instanceof Object) {\r\n                    self.ui.backEle.css({display: \"inline-block\", positin: \"relative\"});\r\n                    self.ui.backEle.attr(\"tabindex\", 0);\r\n                  }\r\n                  this.ensureTitleLabelIcon();\r\n                } else {\r\n                  self._applyToggle(event);\r\n                  self.leftBar.removeClass('binf-hidden');\r\n                  if (navBar.hasClass('csui-hide-side-bar')) {\r\n                    self.leftBar.show();\r\n                    navBar.toggleClass(\"csui-hide-side-bar\");\r\n                    if (self.ui.backEle instanceof Object) {\r\n                      self.ui.backEle.hide();\r\n                    }\r\n                    $(window).trigger(\"resize.tableview\");\r\n                  }\r\n                  this.ensureTitleLabelIcon();\r\n                }\r\n              } else {\r\n                this.sideBarHidden = false;\r\n                self._removeToggle(event);\r\n                if (navBar.hasClass('csui-hide-side-bar')) {\r\n                  self.leftBar.show();\r\n                  navBar.toggleClass(\"csui-hide-side-bar\");\r\n                  if (self.ui.backEle instanceof Object) {\r\n                    self.ui.backEle.hide();\r\n                  }\r\n                }\r\n                $(window).trigger(\"resize.tableview\");\r\n                this.ensureTitleLabelIcon();\r\n              }\r\n            } else if (isPortrait) {\r\n              self._applyToggle(event);\r\n              if (self.leftBar.length > 0) {\r\n                if (!navBar.hasClass('csui-hide-side-bar')) {\r\n                  self.leftBar.hide();\r\n                  navBar.toggleClass(\"csui-hide-side-bar\");\r\n                  $(window).trigger(\"resize.tableview\");\r\n                }\r\n                if (self.ui.backEle instanceof Object) {\r\n                  self.ui.backEle.css({display: \"inline-block\", positin: \"relative\"});\r\n                  self.ui.backEle.attr(\"tabindex\", 0);\r\n                }\r\n              }\r\n              this.ensureTitleLabelIcon();\r\n            }\r\n          }\r\n        },\r\n\r\n        currentlyFocusedElement: function () {\r\n          if (!!this.ui.backEle && $(this.ui.backEle).is(':visible')) {\r\n            return this.ui.backEle;\r\n          } else if (!!this.ui.toggleIcon && $(this.ui.toggleIcon).is(':visible')) {\r\n            return this.ui.toggleIcon;\r\n          } else if (!!this.options.mode && this.options.mode === 'create') {\r\n            return $(this.ui.nameInput);\r\n          } else {\r\n            return $(this.ui.name);\r\n          }\r\n        },\r\n\r\n        onRender: function () {\r\n          this.editing = false;\r\n          this.ui.nameEditDiv.addClass('binf-hidden');\r\n\r\n          if (this._nodeIconView) {\r\n            this._nodeIconView.destroy();\r\n          }\r\n          this._nodeIconView = new NodeTypeIconView({\r\n            el: this.$('.csui-type-icon').get(0),\r\n            node: this.options.model\r\n          });\r\n          // for shortcut objects add one more wrapper to apply special styling to overlay element.\r\n          if (this.model.get('type') === 1) {\r\n            this._nodeIconView.$el.addClass('csui-metadata-shortcut-overlay');\r\n          }\r\n          this._nodeIconView.render();\r\n\r\n          if (this.dropdownMenuView) {\r\n            this.dropdownMenuView.render();\r\n            Marionette.triggerMethodOn(this.dropdownMenuView, 'before:show', this.dropdownMenuView,\r\n                this);\r\n            this.ui.contextMenuDiv.append(this.dropdownMenuView.el);\r\n            Marionette.triggerMethodOn(this.dropdownMenuView, 'show', this.dropdownMenuView, this);\r\n          }\r\n\r\n          if (this.modelHasEmptyName) {\r\n            this.ui.nameInput.addClass('csui-empty-with-placeholder');\r\n            this.ui.nameInput.attr('placeholder', this.placeHolderName);\r\n            if (this.readonly) {\r\n              this.ui.name.addClass('csui-empty-with-placeholder');\r\n            }\r\n          }\r\n\r\n          this._setHideShowToggleButton();\r\n\r\n        },\r\n\r\n        onMouseEnterName: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        },\r\n\r\n        onMouseLeaveName: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        },\r\n\r\n        onKeyDown: function (event) {\r\n          if (this.$el.parents(\".cs-item-action-metadata\").find(\r\n                  \"div[class='load-container']\").length >\r\n              0) {\r\n            return false;\r\n          }\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          if (this.modelHasEmptyName && this.inputBoxNameChange !== true) {\r\n            this.setInputBoxValue('');\r\n            this.inputBoxNameChange = true;\r\n            this.ui.nameInput.removeClass('csui-empty-with-placeholder');\r\n          }\r\n        },\r\n\r\n        _validateAndSave: function () {\r\n          var currentValue = this.getValue().trim();\r\n          var inputValue = this.getInputBoxValue();\r\n          inputValue = inputValue.trim();\r\n\r\n          if (inputValue.length === 0 || currentValue !== inputValue) {\r\n            var success = this.validate(inputValue);\r\n            if (success === true) {\r\n              var self = this;\r\n              this.setInputBoxValue(inputValue);\r\n              this.setValue(inputValue);\r\n              this.modelHasEmptyName = false;\r\n              this.trigger(\"metadata:item:name:save\", {\r\n                sender: this,\r\n                success: function () {\r\n                  self._toggleEditMode(false, false);\r\n                },\r\n                error: function (error) {\r\n                  self.setValue(currentValue);\r\n                  self._toggleEditMode(true);\r\n                  self.showInlineError(error);\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            this.clearInlineError();\r\n            this._toggleEditMode(false, false);\r\n          }\r\n        },\r\n\r\n        _onKeyInView: function (event) {\r\n          if (event.keyCode === 9 && !event.shiftKey) {\r\n            if ($(event.target).is(this.ui.backEle)) {\r\n              this.ui.toggleIcon.focus();\r\n              event.stopPropagation();\r\n              event.preventDefault();\r\n            } else if ($(event.target).is(this.ui.toggleIcon)) {\r\n              this.ui.name.focus();\r\n              event.stopPropagation();\r\n              event.preventDefault();\r\n            }\r\n          }\r\n        },\r\n        // call proxies\r\n        onKeyInView: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          if (!!this.options.mode && this.options.mode === 'create') {\r\n            return true;\r\n          }\r\n          //prevent propagation to dialog box tabable behavior (e.g. Recently Access)\r\n          if (event.keyCode === 9 && event.shiftKey) {\r\n            event.stopPropagation();\r\n          }\r\n          return this.ItemNameBehavior.onKeyInView(event);\r\n        },\r\n\r\n        _toggleEditMode: function (edit, setFocus) {\r\n          //prevent toggle for item name on create dialog\r\n          if (this.options.mode != 'create') {\r\n            return this.ItemNameBehavior._toggleEditMode(edit, setFocus);\r\n          }\r\n        },\r\n\r\n        getValue: function () {\r\n          return this.ItemNameBehavior.getValue();\r\n        },\r\n\r\n        setValue: function (value) {\r\n          return this.ItemNameBehavior.setValue(value);\r\n        },\r\n\r\n        getInputBoxValue: function () {\r\n          return this.ItemNameBehavior.getInputBoxValue();\r\n        },\r\n\r\n        setInputBoxValue: function (value) {\r\n          return this.ItemNameBehavior.setInputBoxValue(value);\r\n        },\r\n\r\n        validate: function (iName) {\r\n          return this.ItemNameBehavior.validate(iName);\r\n        },\r\n\r\n        setEditModeFocus: function () {\r\n          return this.ItemNameBehavior.setEditModeFocus();\r\n        },\r\n\r\n        showInlineError: function (error) {\r\n          return this.ItemNameBehavior.showInlineError(error);\r\n        },\r\n\r\n        clearInlineError: function () {\r\n          return this.ItemNameBehavior.clearInlineError();\r\n        },\r\n\r\n        _getErrorMessageFromResponse: function (err) {\r\n          return this.ItemNameBehavior._getErrorMessageFromResponse(err);\r\n        },\r\n        // end of: proxies\r\n\r\n        // TODO: Deprecate this method and prefer using name field schema\r\n        // for flags like readonly and required\r\n        setReadOnly: function (mode) {\r\n          mode = mode ? true : false;\r\n          var focus;\r\n          if ((this.readonly ? true : false) !== mode) {\r\n            this.readonly = mode;\r\n            this.render();\r\n            focus = $(this.ui.nameInput).is(\":focus\");\r\n            this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n            this.validate();\r\n          } else {\r\n            focus = $(this.ui.nameInput).is(\":focus\");\r\n            if (!focus) {\r\n              this.validate();\r\n            }\r\n          }\r\n        },\r\n\r\n        setPlaceHolder: function (placeHolderName) {\r\n          placeHolderName || (placeHolderName = lang.addItemPlaceHolderName);\r\n          if (this.placeHolderName !== placeHolderName) {\r\n            this.placeHolderName = placeHolderName;\r\n            this.render();\r\n          }\r\n        },\r\n\r\n        updateNameSchema: function (nameSchema) {\r\n          if (this.modelHasEmptyName && this.ui.nameInput.val() === \"\" && !nameSchema.readonly) {\r\n            nameSchema.required = true;\r\n          }\r\n          this._nameSchema = _.extend({\r\n            required: true,\r\n            readonly: false\r\n          }, nameSchema);\r\n          this.readonly = this._nameSchema.readonly;\r\n          this.render();\r\n          this.ui.nameInput[0].placeholder = this.placeHolderName;\r\n          var focus = $(this.ui.nameInput).is(\":focus\");\r\n          this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n          return this.ItemNameBehavior.updateNameSchema(nameSchema);\r\n        }\r\n\r\n      }\r\n  );\r\n\r\n  _.extend(MetadataItemNameView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataItemNameView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/leftbar/header.leftbar',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <span class=\\\"icon arrow_back cs-go-back\\\" aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBackTooltip || (depth0 != null ? depth0.goBackTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBackTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n        title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBackTooltip || (depth0 != null ? depth0.goBackTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBackTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n        role=\\\"link\\\"></span>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.back_button : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_leftbar_header.leftbar', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/leftbar/header.leftbar',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/leftbar/header.leftbar.view',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'hbs!csui/widgets/metadata/impl/header/leftbar/header.leftbar',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'css!csui/widgets/metadata/impl/header/leftbar/header.leftbar'\r\n], function (_, $, Marionette, template, lang, TabableRegionBehavior) {\r\n  'use strict';\r\n\r\n  var MetadataHeaderLeftBarView = Marionette.ItemView.extend({\r\n    className: 'metadata-header-left-bar',\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        back_button: this.options.showBackIcon,\r\n        goBackTooltip: lang.goBackTooltip\r\n      };\r\n      return templateValues;\r\n    },\r\n\r\n    behaviors: function () {\r\n      if (this.options.showBackIcon) {\r\n        return {\r\n          TabableRegionBehavior: {\r\n            behaviorClass: TabableRegionBehavior\r\n          }\r\n        };\r\n      } else {\r\n        return {};\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      back: '.cs-go-back'\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyInView',\r\n      'click @ui.back': 'onClickClose'\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 13 || event.keyCode === 32) {\r\n        // enter key(13) or space(32)\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        $(target).click();\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataHeaderLeftBarView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      if (this.options.showBackIcon) {\r\n        return $(this.ui.back);\r\n      }\r\n      return undefined;\r\n    },\r\n\r\n    onClickClose: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.trigger('metadata:close');\r\n    }\r\n  });\r\n\r\n  return MetadataHeaderLeftBarView;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/rightbar/header.rightbar',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <div class=\\\"binf-row shortcut-div\\\">\\r\\n    <a href=\\\"#\\\" class=\\\"shortcut-switch\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.right_label || (depth0 != null ? depth0.right_label : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"right_label\",\"hash\":{}}) : helper)))\n    + \"\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.right_label || (depth0 != null ? depth0.right_label : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"right_label\",\"hash\":{}}) : helper)))\n    + \"</a>\\r\\n  </div>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <div class=\\\"metadata-header-floating-rightbar\\\">\\r\\n    <span class=\\\"icon close cs-metadata-close\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.close_metadata_button_tooltip || (depth0 != null ? depth0.close_metadata_button_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"close_metadata_button_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  </div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.is_shortcut : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"<div class=\\\"csui-extra-header-wrapper\\\"></div>\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_close_icon : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(3, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_rightbar_header.rightbar', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/rightbar/header.rightbar',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/rightbar/header.rightbar.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/commands', 'csui/controls/tabletoolbar/tabletoolbar.view',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems.masks',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'hbs!csui/widgets/metadata/impl/header/rightbar/header.rightbar',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/utils/contexts/factories/application.scope.factory',\r\n  'csui/controls/form/fields/booleanfield.view',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'css!csui/widgets/metadata/impl/header/rightbar/header.rightbar'\r\n], function (_, $, Backbone, Marionette, commands, TableToolbarView,\r\n    toolbarItems, ToolbarItemsMasks, ViewEventsPropagationMixin, template, lang,\r\n    ApplicationScopeModelFactory, BooleanFieldView, TabableRegionBehavior) {\r\n\r\n  var MetadataHeaderRightBarView = Marionette.LayoutView.extend({\r\n\r\n    className: 'metadata-header-right-bar',\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        show_close_icon: this.options.showCloseIcon,\r\n        close_metadata_button_tooltip: lang.closeMetadataButtonTooltip\r\n      };\r\n      // showing properties of the original model of a shortcut\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        var right_static_label = lang.viewOriginalMessage;\r\n        if (this.options.shortcutNode.original === this.node) {\r\n          right_static_label = lang.viewShortcutMessage;\r\n        }\r\n        return _.extend(templateValues, {\r\n          is_shortcut: true,\r\n          right_label: right_static_label\r\n        });\r\n      } else {\r\n        return templateValues;\r\n      }\r\n    },\r\n\r\n    regions: {\r\n      extraToolbarRegion: '.csui-extra-header-wrapper'\r\n    },\r\n\r\n    behaviors: function () {\r\n      if ((this.options.showShortcutSwitch && this.options.shortcutNode) ||\r\n          this.options.showCloseIcon) {\r\n        return {\r\n          TabableRegionBehavior: {\r\n            behaviorClass: TabableRegionBehavior\r\n          }\r\n        };\r\n      } else {\r\n        return {};\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      shortcutSwitchLabel: 'a.shortcut-switch',\r\n      closeIcon: '.cs-metadata-close'\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyInView',\r\n      'click @ui.shortcutSwitchLabel': 'onClickShortcutSwitch',\r\n      'click @ui.closeIcon': 'onClickClose'\r\n    },\r\n\r\n    constructor: function MetadataHeaderRightBarView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      if (!options.toolbarItemsMasks) {\r\n        options.toolbarItemsMasks = new ToolbarItemsMasks();\r\n      }\r\n\r\n      if (!options.toolbarItems) {\r\n        options.toolbarItems = toolbarItems;\r\n      }\r\n      Marionette.LayoutView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    onRender: function () {\r\n      if (this.options.showPermissionView) {\r\n        this.options.parent.$el.addClass(\"extended-headers\");\r\n        this._showExtraRightActionBar();\r\n      }\r\n    },\r\n\r\n    _showExtraRightActionBar: function (args) {\r\n      var collection       = this.collection || this.options.model.collection,\r\n          container        = this.options.container || collection ?\r\n                             (collection.node ? collection.node :\r\n                              this.options.model) : this.options.model,\r\n          applicationScope = this.options.context &&\r\n                             this.options.context.getModel(ApplicationScopeModelFactory),\r\n          removeContainer  = false;\r\n      if (applicationScope && applicationScope.get(\"id\") === \"search\") {\r\n        removeContainer = true;\r\n      }\r\n      this.toolbarView = new TableToolbarView({\r\n        toolbarItems: this.options.toolbarItems,\r\n        toolbarItemsMasks: this.options.toolbarItemsMasks,\r\n        collection: collection,\r\n        model: this.options.model,\r\n        originatingView: this.options.originatingView,\r\n        context: this.options.context,\r\n        container: container,\r\n        removeContainer: removeContainer\r\n      });\r\n      this.extraToolbarRegion.show(this.toolbarView);\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 13 || event.keyCode === 32) {\r\n        // enter key(13) or space(32)\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        // need timeout to overcome FireFox space press\r\n        setTimeout(function () {\r\n          $(target).click();\r\n        }, 200);\r\n      }\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        return $(this.ui.shortcutSwitchLabel);\r\n      } else if (this.options.showCloseIcon) {\r\n        return $(this.ui.closeIcon);\r\n      } else {\r\n        return undefined;\r\n      }\r\n    },\r\n\r\n    onClickShortcutSwitch: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.trigger('shortcut:switch');\r\n    },\r\n\r\n    onClickClose: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.trigger(\"metadata:close\");\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataHeaderRightBarView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataHeaderRightBarView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/metadata.header',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    return \"\\r\\n  <div class=\\\"metadata-header-left-bar-container\\\"></div>\\r\\n  <div class=\\\"metadata-header with-right-bar\\\"></div>\\r\\n  <div class=\\\"metadata-header-right-bar-container\\\"></div>\\r\\n\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.back_button : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(4, data, 0),\"inverse\":this.program(9, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_only_required_fields_switch : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(14, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"4\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\\r\\n    <div class=\\\"metadata-header-left-bar-container\\\"></div>\\r\\n\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_only_required_fields_switch : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(5, data, 0),\"inverse\":this.program(7, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"5\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-back-button with-right-bar\\\"></div>\\r\\n\";\n},\"7\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-back-button\\\"></div>\\r\\n\";\n},\"9\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_only_required_fields_switch : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(10, data, 0),\"inverse\":this.program(12, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"10\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-right-bar\\\"></div>\\r\\n\";\n},\"12\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header\\\"></div>\\r\\n\";\n},\"14\":function(depth0,helpers,partials,data) {\n    return \"    <div class=\\\"metadata-header-right-bar-container\\\"></div>\\r\\n\";\n},\"16\":function(depth0,helpers,partials,data) {\n    return \"  <div class=\\\"metadata-header-right-bar-container\\\"></div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.is_shortcut : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_close_icon : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(16, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_metadata.header', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/metadata.header',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/metadata.header.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/header/leftbar/header.leftbar.view',\r\n  'csui/widgets/metadata/impl/header/rightbar/header.rightbar.view',\r\n  'hbs!csui/widgets/metadata/impl/header/metadata.header',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang', 'csui/utils/log',\r\n  'csui/controls/form/fields/booleanfield.view',\r\n  'css!csui/widgets/metadata/impl/header/metadata.header'\r\n], function (_, $, Backbone, Marionette, MetadataItemNameView, ViewEventsPropagationMixin,\r\n    MetadataHeaderLeftBarView, MetadataHeaderRightBarView, template, lang, log,\r\n    BooleanFieldView) {\r\n\r\n  var MetadataHeaderView = Marionette.ItemView.extend({\r\n\r\n    className: 'metadata-content-header',\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        back_button: this.options.showBackIcon,\r\n        show_close_icon: this.options.showCloseIcon,\r\n        close_metadata_button_tooltip: lang.closeMetadataButtonTooltip,\r\n        show_only_required_fields_switch: this.options.showRequiredFieldsSwitch,\r\n        only_required_fields_label: lang.onlyRequiredFieldsLabel\r\n      };\r\n      // showing properties of the original model of a shortcut\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        var right_static_label = lang.viewOriginalMessage;\r\n        if (this.options.shortcutNode.original === this.node) {\r\n          right_static_label = lang.viewShortcutMessage;\r\n        }\r\n        return _.extend(templateValues, {\r\n          is_shortcut: true,\r\n          right_label: right_static_label\r\n        });\r\n      } else {\r\n        return templateValues;\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      leftbar: '.metadata-header-left-bar-container',\r\n      header: '.metadata-header',\r\n      rightbar: '.metadata-header-right-bar-container'\r\n    },\r\n\r\n    events: {\r\n      'click .metadata-header': 'onClickHeader'\r\n    },\r\n\r\n    constructor: function MetadataHeaderView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      this.originatingView = options.originatingView;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      this._createMetadataHeaderLeftBarView();\r\n      this._createMetadataItemNameView();\r\n      this._createMetadataHeaderRightBarView();\r\n    },\r\n\r\n    _createMetadataHeaderLeftBarView: function () {\r\n      if (this.leftbarView) {\r\n        this.cancelEventsToViewsPropagation(this.leftbarView);\r\n        this.leftbarView.destroy();\r\n      }\r\n\r\n      var lbv = this.leftbarView = new MetadataHeaderLeftBarView(this.options);\r\n      this.listenTo(lbv, 'metadata:close', function (args) {\r\n        this.trigger('metadata:close', args);\r\n      });\r\n\r\n      this.propagateEventsToViews(this.leftbarView);\r\n    },\r\n\r\n    _createMetadataItemNameView: function (viewNode) {\r\n      if (this.metadataItemNameView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataItemNameView);\r\n        this.metadataItemNameView.destroy();\r\n      }\r\n\r\n      var node = viewNode || this.node;\r\n      var inv = this.metadataItemNameView = new MetadataItemNameView({\r\n        model: node,\r\n        container: this.options.container,\r\n        containerCollection: this.options.containerCollection,\r\n        collection: this.options.collection,\r\n        context: this.options.context,\r\n        nameSchema: this._getNameSchema(),\r\n        commands: this.options.commands,\r\n        originatingView: this.options.originatingView,\r\n        showDropdownMenu: this.options.showDropdownMenu,\r\n        metadataScenario: this.options.metadataScenario,\r\n        showPermissionView: this.options.showPermissionView,\r\n        mode: this.options.action,\r\n        targetView: this.options.targetView\r\n      });\r\n      this.listenTo(inv, 'metadata:item:name:save', function (args) {\r\n        this.trigger('metadata:item:name:save', args);\r\n      });\r\n      this.listenTo(inv, 'metadata:item:before:delete', _.bind(function (args) {\r\n        this.trigger('metadata:item:before:delete', args);\r\n      }, this));\r\n      this.listenTo(inv, 'metadata:item:before:move', _.bind(function (args) {\r\n        this.trigger('metadata:item:before:move', args);\r\n      }, this));\r\n      this.listenTo(inv, 'metadata:item:deleted', _.bind(function (args) {\r\n        this.trigger('metadata:item:deleted', args);\r\n      }, this));\r\n      this.listenTo(inv, 'update:button', _.bind(function (args) {\r\n        this.trigger('update:button', args);\r\n      }, this));\r\n\r\n      this.propagateEventsToViews(this.metadataItemNameView);\r\n    },\r\n\r\n    _createMetadataHeaderRightBarView: function (viewNode) {\r\n      if (this.rightbarView) {\r\n        this.cancelEventsToViewsPropagation(this.rightbarView);\r\n        this.rightbarView.destroy();\r\n      }\r\n\r\n      var node = viewNode || this.node;\r\n      var rbv = this.rightbarView = new MetadataHeaderRightBarView(\r\n          _.extend({}, this.options,\r\n              {model: node, parent: this, showPermissionView: this.options.showPermissionView})\r\n      );\r\n      this.listenTo(rbv, 'shortcut:switch', this.onClickShortcutSwitch);\r\n      this.listenTo(rbv, 'metadata:close', function (args) {\r\n        this.trigger('metadata:close', args);\r\n      });\r\n\r\n      this.propagateEventsToViews(this.rightbarView);\r\n    },\r\n\r\n    onRender: function () {\r\n      var lbv = this.leftbarView.render();\r\n      Marionette.triggerMethodOn(lbv, 'before:show', lbv, this);\r\n      this.ui.leftbar.append(lbv.el);\r\n\r\n      var inv = this.metadataItemNameView.render();\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      this.ui.header.append(inv.el);\r\n\r\n      var rbv = this.rightbarView.render();\r\n      Marionette.triggerMethodOn(rbv, 'before:show', rbv, this);\r\n      this.ui.rightbar.append(rbv.el);\r\n\r\n      if (this.options.showCloseIcon) {\r\n        this.$el.addClass('with-close-icon');\r\n      }\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        this.$el.addClass('shortcut-object');\r\n      }\r\n\r\n      Marionette.triggerMethodOn(lbv, 'show', lbv, this);\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n      Marionette.triggerMethodOn(rbv, 'show', rbv, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      if (this.leftbarView) {\r\n        this.cancelEventsToViewsPropagation(this.leftbarView);\r\n        this.leftbarView.destroy();\r\n      }\r\n      if (this.metadataItemNameView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataItemNameView);\r\n        this.metadataItemNameView.destroy();\r\n      }\r\n      if (this.requiredFieldSwitchView) {\r\n        this.requiredFieldSwitchView.destroy();\r\n      }\r\n    },\r\n\r\n    onClickHeader: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      // UX changed their mind\r\n      //this.trigger(\"metadata:close\", {sender: this});\r\n    },\r\n\r\n    onClickShortcutSwitch: function () {\r\n      var viewNode = this.model;\r\n      if (this.options.shortcutNode && this.options.shortcutNode.original === this.node) {\r\n        // content shall show now shortcut\r\n        // label shall be 'show original'\r\n        viewNode = this.node = this.options.shortcutNode;\r\n      } else {\r\n        // content shall show now original\r\n        // label shall be 'show shortcut'\r\n        viewNode = this.node = this.node.original;\r\n      }\r\n\r\n      this._createMetadataItemNameView(viewNode);\r\n      var inv = this.metadataItemNameView.render();\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      this.ui.header.append(inv.el);\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n\r\n      this._createMetadataHeaderRightBarView(viewNode);\r\n      var rbv = this.rightbarView.render();\r\n      Marionette.triggerMethodOn(rbv, 'before:show', rbv, this);\r\n      this.ui.rightbar.append(rbv.el);\r\n      Marionette.triggerMethodOn(rbv, 'show', rbv, this);\r\n      // set focus back on the new view for keyboard navigation\r\n      var $elem = rbv.currentlyFocusedElement();\r\n      $elem && $elem.focus();\r\n\r\n      this.trigger('shortcut:switch', {node: viewNode});\r\n    },\r\n\r\n    getNameInputBoxValue: function () {\r\n      return this.metadataItemNameView.getInputBoxValue();\r\n    },\r\n\r\n    validateName: function () {\r\n      var inputValue = this.metadataItemNameView.getInputBoxValue();\r\n      return this.metadataItemNameView.validate(inputValue);\r\n    },\r\n\r\n    getNameValue: function () {\r\n      return this.metadataItemNameView.getValue();\r\n    },\r\n\r\n    setNameEditModeFocus: function () {\r\n      this.metadataItemNameView.setEditModeFocus();\r\n    },\r\n\r\n    _getNameSchema: function () {\r\n      var generalForm = this.options.collection && this.options.collection.first(),\r\n          formSchema  = generalForm && generalForm.get('schema'),\r\n          nameSchema  = formSchema && formSchema.properties && formSchema.properties.name;\r\n      // Warn only if the form collection was used to populate the view;\r\n      // it is the case only for the creation mode, where the name should\r\n      // be always present and flagged by required/readonly correctly\r\n      if (this.options.collection && formSchema && !nameSchema) {\r\n        log.warn('Form collection lacks name field in the first form.');\r\n      }\r\n      return nameSchema || {};\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataHeaderView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataHeaderView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/property.panels/categories/impl/category.form.view',[\r\n  'module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/base',\r\n  'csui/utils/url', 'csui/utils/log', 'csui/controls/form/form.view',\r\n  'csui/controls/globalmessage/globalmessage'\r\n], function (module, _, $, base, Url, log, FormView, GlobalMessage) {\r\n  'use strict';\r\n\r\n  log = log(module.id);\r\n\r\n  var CategoryFormView = FormView.extend({\r\n    constructor: function CategoryFormView(options) {\r\n      FormView.prototype.constructor.call(this, options);\r\n\r\n      this.node = this.options.node;\r\n      this.listenTo(this, 'change:field', this._saveField);\r\n      this.listenTo(this, 'disable:active:item', this._disableItem);\r\n    },\r\n\r\n    _disableItem: function (args) {\r\n      this.options.metadataView && this.options.metadataView.trigger('disable:active:item');\r\n    },\r\n\r\n    _saveField: function (args) {\r\n      // This view is shared for both creation and editing scenarios.\r\n      // Do not save immediately in the creation mode.  The creation dialog\r\n      // has a button to get all field values and perform the action.\r\n      if (this.mode === 'create') {\r\n        return;\r\n      }\r\n\r\n      // Optimizing the payload to send a part of the category, which has to\r\n      // be complete, is complicated.  The classic UI sends all data anyway.\r\n      // Until we have PATCH behaviour in the REST API, it doesn't pay off.\r\n      var values = this.getValues();\r\n      this._saveChanges(values);\r\n    },\r\n\r\n    _saveChanges: function (changes) {\r\n      if (!this.node) {\r\n        throw new Error('Missing node to save the categories to.');\r\n      }\r\n      if (_.keys(changes).length) {\r\n        if (this._validate(changes)) {\r\n          this._removeInternalProperties(changes);\r\n          this._blockActions();\r\n          return this.node.connector\r\n              .makeAjaxCall({\r\n                type: 'PUT',\r\n                url: Url.combine(this.node.urlBase(), 'categories', this.model.get('id')),\r\n                data: changes\r\n              })\r\n              .done(_.bind(function (response) {\r\n                this._updateMetadataToken(response);\r\n                this.trigger('forms:sync');\r\n                // event for keyboard navigation\r\n                var event = $.Event('tab:content:field:changed');\r\n                this.options.metadataView &&\r\n                this.options.metadataView.trigger('enable:active:item');\r\n                this.$el.trigger(event);\r\n              }, this))\r\n              .fail(_.bind(function (jqxhr) {\r\n                var preValues = this.model.get('data');\r\n                this.form.children.forEach(function (formField) {\r\n                  formField.setValue(preValues[formField.propertyId]);\r\n                  formField.refresh();\r\n                });\r\n                var error = new base.Error(jqxhr);\r\n                GlobalMessage.showMessage('error', error.message);\r\n                this.trigger('forms:error');\r\n              }, this))\r\n              .always(_.bind(function () {\r\n                this._unblockActions();\r\n              }, this));\r\n        }\r\n        return $.Deferred().reject().promise();\r\n      }\r\n      return $.Deferred().resolve().promise();\r\n    },\r\n\r\n    // Alpaca returns all field values including read-only ones. The server\r\n    // rejects the request, if the read-only internal fields are posted.\r\n    _removeInternalProperties: function (categoryData) {\r\n      var categoryId = this.model.get('id');\r\n      var stateId = categoryId + '_1';\r\n      var categorySchema = this.model.get('schema') || {};\r\n      var stateSchema = categorySchema.properties && categorySchema.properties[stateId];\r\n      if (stateSchema) {\r\n        stateSchema = stateSchema.properties || (stateSchema.properties = {});\r\n        var stateData = categoryData[stateId] || {};\r\n        Object\r\n          .keys(stateSchema)\r\n          .forEach(function (propertyName) {\r\n            if (propertyName === 'metadata_token') {\r\n              log.debug('Metadata token \"{1}\" detected in the category \"{0}\".',\r\n                  categoryId, stateData[propertyName]) && console.log(log.last);\r\n            }\r\n            // Let only writable properties sent back to the server.\r\n            if (stateSchema[propertyName].readonly) {\r\n              delete stateData[propertyName];\r\n            }\r\n          });\r\n      }\r\n    },\r\n\r\n    // Set the metadata token using Alpaca API, because setting values in\r\n    // the model does not work and values are retrieved by Alpaca API.\r\n    _updateMetadataToken: function (response) {\r\n      var categoryId = this.model.get('id');\r\n      var stateId = categoryId + '_1';\r\n      var categorySchema = this.model.get('schema') || {};\r\n      var stateSchema = categorySchema.properties && categorySchema.properties[stateId];\r\n      if (stateSchema) {\r\n        stateSchema = stateSchema.properties || (stateSchema.properties = {});\r\n        if (stateSchema.metadata_token) {\r\n          try {\r\n            var metadataTokenValue = response.state.categories[0][categoryId].metadata_token;\r\n            var metadataTokenField = this.form.childrenByPropertyId[stateId].childrenByPropertyId.metadata_token;\r\n            metadataTokenField.setValue(metadataTokenValue);\r\n            log.debug('Metadata token in the category \"{0}\" updated to \"{1}\".',\r\n                categoryId, metadataTokenValue) && console.log(log.last);\r\n          } catch (error) {\r\n            log.warn('Updating metadata token the category \"{0}\" failed.',\r\n                categoryId) && console.log(log.last);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return CategoryFormView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.form.fields',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.general.form.fields'\r\n], function (_, Backbone, extraGeneralFormFields) {\r\n\r\n  var MetadataGeneralFormFieldModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralFormFieldModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataGeneralFormFieldCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralFormFieldModel,\r\n    comparator: 'sequence',\r\n\r\n    constructor: function MetadataGeneralFormFieldCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataGeneralFormFields = new MetadataGeneralFormFieldCollection();\r\n\r\n  if (extraGeneralFormFields) {\r\n    extraGeneralFormFields = _.flatten(extraGeneralFormFields, true);\r\n    _.each(extraGeneralFormFields, function () {\r\n      var sequence = extraGeneralFormFields.sequence;\r\n      if (sequence < 10 || sequence > 100) {\r\n        throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n      }\r\n    });\r\n    metadataGeneralFormFields.add(extraGeneralFormFields);\r\n  }\r\n\r\n  return metadataGeneralFormFields;\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',[],function(){});\n","csui.define('csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',['csui/lib/underscore', 'csui/lib/marionette',\r\n  'csui/controls/form/form.view',\r\n  'css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view'\r\n], function (_, Marionette, FormView) {\r\n  'use strict';\r\n\r\n  var GeneralFormFieldCollectionView = Marionette.CollectionView.extend({\r\n\r\n    className: 'csui-general-form-fields',\r\n\r\n    getChildView: function (model) {\r\n      var fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n          {formModel: model});\r\n      return fieldDescriptor && fieldDescriptor.formView || FormView;\r\n    },\r\n\r\n    childViewOptions: function (model) {\r\n      var options = {\r\n            context: this.options.context,\r\n            node: this.options.node,\r\n            mode: this.options.mode,\r\n            generalFormView: this.view,\r\n            fetchedModels: this.options.fetchedModels,\r\n            displayedModels: this.options.displayedModels,\r\n            originatingView: this.options.originatingView,\r\n            metadataView: this.options.metadataView,\r\n            layoutMode: 'singleCol'\r\n          },\r\n          fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n              {formModel: model});\r\n      if (fieldDescriptor) {\r\n        _.extend(options, fieldDescriptor.formViewOptions);\r\n      }\r\n      return options;\r\n    },\r\n\r\n    constructor: function GeneralFormFieldCollectionView(options) {\r\n      Marionette.CollectionView.prototype.constructor.call(this, options);\r\n      this.listenTo(this, 'render', this._triggerRenderForms);\r\n    },\r\n\r\n    // Trigger render:forms once every form has triggered render:form\r\n    _triggerRenderForms: function () {\r\n      var children = this.children.map(function (formView) {\r\n        var formViewId = formView.cid;\r\n        formView.once('render:form', function () {\r\n          children = _.without(children, formViewId);\r\n          if (!children.length) {\r\n            this.triggerMethod('render:forms', this);\r\n          }\r\n        }, this);\r\n        return formView.cid;\r\n      }, this);\r\n    }\r\n\r\n  });\r\n\r\n  return GeneralFormFieldCollectionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.form.fields/general.form.field.behavior',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/widgets/metadata/metadata.general.form.fields',\r\n  'csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',\r\n  'csui/dialogs/modal.alert/modal.alert'\r\n], function (_, $, Backbone, Marionette, metadataGeneralFormFields,\r\n    GeneralFormFieldCollectionView, ModalAlert) {\r\n  'use strict';\r\n\r\n  var GeneralFormFieldBehavior = Marionette.Behavior.extend({\r\n    constructor: function GeneralFormFieldBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n      this.view = view;\r\n      this\r\n          .listenTo(this.view, 'render', this._insertFieldExtensions)\r\n          .listenTo(this.view, 'destroy', this._emptyExtensionRegion);\r\n\r\n      var self = this;\r\n      view.getGeneralFormFieldValues = function () {\r\n        var formValues = {};\r\n        // Forms with extra fields are rendered only if there\r\n        // were any field descriptors specified; there are no\r\n        // data without forms\r\n        if (self.fieldRegion) {\r\n          self.fieldRegion.currentView.children.each(function (formView) {\r\n            var values = formView.getValues(),\r\n                roleName = formView.model.get(\"role_name\"),\r\n                roles, role;\r\n            if (values) {\r\n              if (roleName) {\r\n                roles = formValues.roles || (formValues.roles = {});\r\n                role = roles[roleName] || (roles[roleName] = {});\r\n                // With a role defined, merge the properties to the\r\n                // roles.<role_name> object\r\n                _.extend(role, values);\r\n              } else {\r\n                // With no role defined, merge the properties to the root\r\n                // object literal with the general properties\r\n                _.extend(formValues, values);\r\n              }\r\n            }\r\n          });\r\n        }\r\n        return formValues;\r\n      };\r\n    },\r\n\r\n    _insertFieldExtensions: function () {\r\n      var fieldParent = this.getOption('fieldParent');\r\n      if (_.isFunction(fieldParent)) {\r\n        fieldParent = fieldParent.call(this.view);\r\n      }\r\n      if (fieldParent) {\r\n        fieldParent = this.view.$(fieldParent)[0];\r\n      }\r\n      if (!fieldParent) {\r\n        return;\r\n      }\r\n\r\n      var fieldDescriptors = this.getOption('fieldDescriptors');\r\n      if (_.isFunction(fieldDescriptors)) {\r\n        fieldDescriptors = fieldDescriptors.call(this.view);\r\n      }\r\n      if (!fieldDescriptors || !fieldDescriptors.length) {\r\n        return;\r\n      }\r\n\r\n      this.fieldRegion = new Marionette.Region({el: fieldParent});\r\n\r\n      var fieldViewOptions = this.getOption('fieldViewOptions');\r\n      if (_.isFunction(fieldViewOptions)) {\r\n        fieldViewOptions = fieldViewOptions.call(this.view);\r\n      }\r\n      var fieldModels = new Backbone.Collection(_.pluck(fieldDescriptors, 'formModel')),\r\n          fieldViews = new GeneralFormFieldCollectionView(_.extend({\r\n            context: this.view.options.context,\r\n            fieldDescriptors: fieldDescriptors,\r\n            collection: fieldModels,\r\n            node: this.view.options.node,\r\n            mode: this.view.options.mode,\r\n            generalFormView: this.view,\r\n            fetchedModels: this.view.options.fetchedModels,\r\n            displayedModels: this.view.options.displayedModels,\r\n            originatingView: this.view.options.originatingView,\r\n            metadataView: this.view.options.metadataView\r\n          }, fieldViewOptions));\r\n      this.listenTo(fieldViews, 'render:forms', function () {\r\n        this.view.triggerMethod('render:general:form:fields', fieldViews);\r\n      });\r\n      this.fieldRegion.show(fieldViews);\r\n    },\r\n\r\n    _emptyExtensionRegion: function () {\r\n      if (this.fieldRegion) {\r\n        this.fieldRegion.empty();\r\n      }\r\n    }\r\n\r\n  }, {\r\n\r\n    getFieldDescriptors: function (options) {\r\n      var methodName, parameters;\r\n      if (options.action === 'create') {\r\n        methodName = 'getGeneralFormFieldsForCreate';\r\n        parameters = [{forms: options.forms}];\r\n      } else if (options.action === 'copy') {\r\n        methodName = 'getGeneralFormFieldsForCopy';\r\n        parameters = [{forms: options.forms}];\r\n      } else if (options.action === 'move') {\r\n        methodName = 'getGeneralFormFieldsForMove';\r\n        parameters = [{forms: options.forms}];\r\n      } else {\r\n        methodName = 'getGeneralFormFields';\r\n      }\r\n      var promises = metadataGeneralFormFields.chain()\r\n          .map(function (fieldControllerDescriptor) {\r\n            var Controller = fieldControllerDescriptor.get('controller'),\r\n                controllerOptions = fieldControllerDescriptor.get('controllerOptions'),\r\n                controller = new Controller(_.extend({\r\n                  context: options.context,\r\n                  model: options.node,\r\n                  fetchedModels: options.forms\r\n                }, controllerOptions)),\r\n                method = controller[methodName];\r\n            return method && method.apply(controller, parameters);\r\n          })\r\n          .compact()\r\n          .value();\r\n      return $.when\r\n          .apply($, promises)\r\n          .then(function () {\r\n            return _.flatten(arguments);\r\n          });\r\n    }\r\n\r\n  });\r\n\r\n  return GeneralFormFieldBehavior;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.action.fields',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.general.action.fields'\r\n], function (_, Backbone, generalActionFields) {\r\n\r\n  var MetadataGeneralActionFieldModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralActionFieldModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataGeneralActionFieldCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralActionFieldModel,\r\n    comparator: 'sequence',\r\n\r\n    constructor: function MetadataGeneralActionFieldCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataGeneralActionFields = new MetadataGeneralActionFieldCollection();\r\n\r\n  // Adding Action Fields to General Panels\r\n\r\n    if (generalActionFields) {\r\n        generalActionFields = _.flatten(generalActionFields, true);\r\n        _.each(generalActionFields, function () {\r\n            var sequence = generalActionFields.sequence;\r\n            if (sequence < 10 || sequence > 100) {\r\n                throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n            }\r\n        });\r\n        metadataGeneralActionFields.add(generalActionFields);\r\n    }\r\n\r\n\r\n  return metadataGeneralActionFields;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.action.fields/impl/general.action.fields.view',['csui/lib/underscore', 'csui/lib/marionette',\r\n    'csui/controls/form/form.view',\r\n    'css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view'\r\n], function (_, Marionette, FormView) {\r\n    'use strict';\r\n\r\n    var GeneralActionFieldCollectionView = Marionette.CollectionView.extend({\r\n\r\n        className: 'csui-general-action-fields',\r\n\r\n        getChildView: function (model) {\r\n            var fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n                {formModel: model});\r\n            return fieldDescriptor && fieldDescriptor.formView || FormView;\r\n        },\r\n\r\n        childViewOptions: function (model) {\r\n            var options = {\r\n                    context: this.options.context,\r\n                    node: this.options.node,\r\n                    mode: this.options.mode,\r\n                    generalFormView: this.view,\r\n                    fetchedModels: this.options.fetchedModels,\r\n                    displayedModels: this.options.displayedModels,\r\n                    originatingView: this.options.originatingView,\r\n                    metadataView: this.options.metadataView,\r\n                    layoutMode: 'singleCol'\r\n                },\r\n                fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n                    {formModel: model});\r\n            if (fieldDescriptor) {\r\n                _.extend(options, fieldDescriptor.formViewOptions);\r\n            }\r\n            return options;\r\n        },\r\n\r\n        constructor: function GeneralActionFieldCollectionView(options) {\r\n            Marionette.CollectionView.prototype.constructor.call(this, options);\r\n            this.listenTo(this, 'render', this._triggerRenderForms);\r\n        },\r\n\r\n        // Trigger render:forms once every form has triggered render:form\r\n        _triggerRenderForms: function () {\r\n            var children = this.children.map(function (formView) {\r\n                var formViewId = formView.cid;\r\n                formView.once('render:form', function () {\r\n                    children = _.without(children, formViewId);\r\n                    if (!children.length) {\r\n                        this.triggerMethod('render:forms', this);\r\n                    }\r\n                }, this);\r\n                return formView.cid;\r\n            }, this);\r\n        }\r\n\r\n    });\r\n\r\n    return GeneralActionFieldCollectionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.action.fields/general.action.field.behavior',[\r\n    'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n    'csui/lib/marionette', 'csui/widgets/metadata/metadata.general.action.fields',\r\n    'csui/widgets/metadata/general.action.fields/impl/general.action.fields.view',\r\n    'csui/dialogs/modal.alert/modal.alert'\r\n], function (_, $, Backbone, Marionette, metadataGeneralActionFields,\r\n        GeneralActionFieldCollectionView, ModalAlert) {\r\n    'use strict';\r\n\r\n    var GeneralActionFieldBehavior = Marionette.Behavior.extend({\r\n        constructor: function GeneralActionFieldBehavior(options, view) {\r\n            Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n            this.view = view;\r\n            this\r\n                .listenTo(this.view, 'render', this._insertFieldExtensions)\r\n                .listenTo(this.view, 'destroy', this._emptyExtensionRegion);\r\n\r\n            var self = this;\r\n            view.getGeneralActionFieldValues = function () {\r\n                var formValues = {};\r\n                // Forms with extra fields are rendered only if there\r\n                // were any field descriptors specified; there are no\r\n                // data without forms\r\n                if (self.fieldRegion) {\r\n                    self.fieldRegion.currentView.children.each(function (formView) {\r\n                        var values = formView.getValues(),\r\n                            roleName = formView.model.get(\"role_name\"),\r\n                            roles, role;\r\n                        if (values) {\r\n                            if (roleName) {\r\n                                roles = formValues.roles || (formValues.roles = {});\r\n                                role = roles[roleName] || (roles[roleName] = {});\r\n                                // With a role defined, merge the properties to the\r\n                                // roles.<role_name> object\r\n                                _.extend(role, values);\r\n                            } else {\r\n                                // With no role defined, merge the properties to the root\r\n                                // object literal with the general properties\r\n                                _.extend(formValues, values);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                return formValues;\r\n            };\r\n        },\r\n\r\n        _insertFieldExtensions: function () {\r\n            var fieldParent = this.getOption('fieldParent');\r\n            if (_.isFunction(fieldParent)) {\r\n                fieldParent = fieldParent.call(this.view);\r\n            }\r\n            if (fieldParent) {\r\n                fieldParent = this.view.$(fieldParent)[0];\r\n            }\r\n            if (!fieldParent) {\r\n                return;\r\n            }\r\n\r\n            var fieldDescriptors = this.getOption('fieldDescriptors');\r\n            if (_.isFunction(fieldDescriptors)) {\r\n                fieldDescriptors = fieldDescriptors.call(this.view);\r\n            }\r\n            if (!fieldDescriptors || !fieldDescriptors.length) {\r\n                return;\r\n            }\r\n\r\n            this.fieldRegion = new Marionette.Region({el: fieldParent});\r\n\r\n            var fieldViewOptions = this.getOption('fieldViewOptions');\r\n            if (_.isFunction(fieldViewOptions)) {\r\n                fieldViewOptions = fieldViewOptions.call(this.view);\r\n            }\r\n            var fieldModels = new Backbone.Collection(_.pluck(fieldDescriptors, 'formModel')),\r\n                fieldViews = new GeneralActionFieldCollectionView(_.extend({\r\n                    context: this.view.options.context,\r\n                    fieldDescriptors: fieldDescriptors,\r\n                    collection: fieldModels,\r\n                    node: this.view.options.node,\r\n                    mode: this.view.options.mode,\r\n                    generalFormView: this.view,\r\n                    fetchedModels: this.view.options.fetchedModels,\r\n                    displayedModels: this.view.options.displayedModels,\r\n                    originatingView: this.view.options.originatingView,\r\n                    metadataView: this.view.options.metadataView\r\n                }, fieldViewOptions));\r\n            this.listenTo(fieldViews, 'render:actions', function () {\r\n                this.view.triggerMethod('render:general:action:fields', fieldViews);\r\n            });\r\n            this.fieldRegion.show(fieldViews);\r\n        },\r\n\r\n        _emptyExtensionRegion: function () {\r\n            if (this.fieldRegion) {\r\n                this.fieldRegion.empty();\r\n            }\r\n        }\r\n\r\n    }, {\r\n\r\n        getFieldDescriptors: function (options) {\r\n            var methodName, parameters;\r\n            if (options.action === 'create') {\r\n                methodName = 'getGeneralActionFieldsForCreate';\r\n                parameters = [{forms: options.forms}];\r\n            } else if (options.action === 'copy') {\r\n                methodName = 'getGeneralActionFieldsForCopy';\r\n                parameters = [{forms: options.forms}];\r\n            } else if (options.action === 'move') {\r\n                methodName = 'getGeneralActionFieldsForMove';\r\n                parameters = [{forms: options.forms}];\r\n            } else {\r\n                methodName = 'getGeneralActionFields';\r\n            }\r\n            var promises = metadataGeneralActionFields.chain()\r\n                .map(function (fieldControllerDescriptor) {\r\n                    var Controller = fieldControllerDescriptor.get('controller'),\r\n                        controllerOptions = fieldControllerDescriptor.get('controllerOptions'),\r\n                        controller = new Controller(_.extend({\r\n                            context: options.context,\r\n                            model: options.node,\r\n                            fetchedModels: options.forms\r\n                        }, controllerOptions)),\r\n                        method = controller[methodName];\r\n                    return method && method.apply(controller, parameters);\r\n                })\r\n                .compact()\r\n                .value();\r\n            return $.when\r\n                .apply($, promises)\r\n                .then(function () {\r\n                    return _.flatten(arguments);\r\n                });\r\n        }\r\n\r\n    });\r\n\r\n    return GeneralActionFieldBehavior;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/node/server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/nodesprites',\r\n  'csui/controls/table/cells/size/size.view', 'csui/utils/base',\r\n  'csui/utils/url', 'csui/models/form', 'csui/models/version',\r\n  'csui/models/mixins/node.resource/node.resource.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, Backbone, NodeSpriteCollection, SizeView, base, Url,\r\n    FormModel, VersionModel, NodeResourceMixin, lang) {\r\n  'use strict';\r\n\r\n  var prototypeExt = {\r\n    makeServerAdaptor: function (options) {\r\n      return this;\r\n    },\r\n\r\n    url: function () {\r\n      var node   = this.options.node,\r\n          nodeId = node.get('id'),\r\n          url;\r\n      if (nodeId === undefined) {\r\n        // creation form\r\n        url = _.str.sformat('forms/nodes/create?type={0}&parent_id={1}',\r\n            node.get('type'), node.get('parent_id'));\r\n      } else {\r\n        if (node instanceof VersionModel) {\r\n          url = _.str.sformat('forms/nodes/versions/properties/general?id={0}&version_number={1}',\r\n              nodeId, node.get('version_number'));\r\n        } else {\r\n          // update form\r\n          url = _.str.sformat('forms/nodes/properties/general?id={0}', nodeId);\r\n        }\r\n      }\r\n      return Url.combine(this.connector.connection.url, url);\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      // Some views may fail if one of the three properties was missing\r\n      var form  = _.extend({\r\n            data: {},\r\n            schema: {},\r\n            options: {}\r\n            // The server returns an array pf forms, although only one category\r\n            // was requested.  Normalize the response to be just a single form.\r\n          }, response.form || response.forms && response.forms[0] || response),\r\n          // Title usually does not come from the server\r\n          title = form.title || this.get('title') || lang.general;\r\n\r\n      form.options = _.omit(form.options, 'form');\r\n      if (!form.schema.title) {\r\n        form.schema.title = title;\r\n      }\r\n      if (!form.title) {\r\n        form.title = title;\r\n      }\r\n\r\n      this._addCreatorInfo(form, options);\r\n      this._addOwnerInfo(form, options);\r\n      this._addCreateDateInfo(form, options);\r\n      this._addModifyDateInfo(form, options);\r\n      this._addMimeTypeInfo(form, options);\r\n      this._addSizeInfo(form, options);\r\n      this._addItemidInfo(form, options);\r\n      this._ensurePlaceholder(form, options);\r\n      this._addReserveInfo(form, options);\r\n      this._addMimeTypeClassNameInfo(form, options);\r\n      return form;\r\n    },\r\n\r\n    _addSizeInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n\r\n      this.sizeView = new SizeView({\r\n        model: this.options.node,\r\n        column: {name: this.options.node.has('size') ? \"size\" : \"file_size\"}\r\n      });\r\n\r\n      var refNode =\r\n              _.extend(ret.data, {\r\n                // TODO: Create a custom field showing the friendly size\r\n                // in the visible HTML element and the full size in bytes\r\n                // in a tooltip\r\n                size: this.sizeView.getValueData().formattedValue\r\n              });\r\n\r\n      _.extend(ret.options.fields, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldSizeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldSizeLabel,\r\n          type: \"string\"\r\n        }\r\n      });\r\n    },\r\n\r\n    _addItemidInfo: function (ret, options) {\r\n      if (!!this.node) {\r\n        var type = this.options.node.get('type');\r\n        var refNode =\r\n                _.extend(ret.data, {\r\n                  itemId: this.node.get('id')\r\n                });\r\n\r\n        _.extend(ret.options.fields, {\r\n          itemId: {\r\n            hidden: false,\r\n            readonly: true,\r\n            label: lang.formFieldItemIdLabel,\r\n            placeholder: lang.alpacaPlaceholderNotAvailable,\r\n            type: \"text\"\r\n          }\r\n        });\r\n        _.extend(ret.schema.properties, {\r\n          itemId: {\r\n            hidden: false,\r\n            readonly: true,\r\n            label: lang.formFieldItemIdLabel,\r\n            placeholder: lang.alpacaPlaceholderNotAvailable,\r\n            type: \"text\",\r\n            tooltip: this.node.get('id')\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    _addCreateDateInfo: function (ret, options) {\r\n      if (!ret.options.fields.create_date) {\r\n        return;\r\n      }\r\n      ret.options.fields.create_date.type = 'datetime';\r\n      ret.options.fields.create_date.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      ret.schema.properties.create_date.format = 'datetime';\r\n    },\r\n\r\n    _addModifyDateInfo: function (ret, options) {\r\n      if (!ret.options.fields.modify_date) {\r\n        return;\r\n      }\r\n      ret.options.fields.modify_date.type = 'datetime';\r\n      ret.options.fields.modify_date.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      ret.schema.properties.modify_date.format = 'datetime';\r\n    },\r\n\r\n    _addOwnerInfo: function (ret, options) {\r\n      var ownerField = 'owner_user_id';\r\n      // for version, we are still using v1 call for now until switch to v2\r\n      if (this.node instanceof VersionModel) {\r\n        ownerField = 'owner_id';  // v1 has a slightly different field name\r\n      }\r\n      if (!ret.options.fields[ownerField]) {\r\n        return;\r\n      }\r\n      var isOwnerExists = this.node.get('owner_user_id') === -3,\r\n          owner         = isOwnerExists ? {\r\n            'id': -3\r\n          } : (this.node.get('owner_user_id_expand') ||\r\n               this.node.get('owner_user_id') ||\r\n               this.node.get('owner_id'));\r\n\r\n      if (owner && owner instanceof Object) {\r\n        ret.data[ownerField] = owner.id;\r\n        ret.options.fields[ownerField].type = 'otcs_user';\r\n        ret.options.fields[ownerField].type_control = {\r\n          name: isOwnerExists ? lang.NoOwner : base.formatMemberName(owner)\r\n        };\r\n        ret.options.fields[ownerField].placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      }\r\n    },\r\n\r\n    _addCreatorInfo: function (ret, options) {\r\n      if (!ret.options.fields.create_user_id) {\r\n        return;\r\n      }\r\n      var creator = this.node.get('create_user_id_expand') ||\r\n                    this.node.get('create_user_id');\r\n      if (creator && creator instanceof Object) {\r\n        ret.data.create_user_id = creator.id;\r\n        ret.options.fields.create_user_id.type = 'otcs_user';\r\n        ret.options.fields.create_user_id.type_control = {\r\n          name: base.formatMemberName(creator)\r\n        };\r\n        ret.options.fields.create_user_id.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      }\r\n    },\r\n\r\n    _addMimeTypeInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n      var node = this.options.node;\r\n\r\n      _.extend(ret.data, {\r\n        mime_type: NodeSpriteCollection.findTypeByNode(node)\r\n      });\r\n\r\n      _.extend(ret.options.fields, {\r\n        mime_type: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldTypeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        mime_type: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldTypeLabel,\r\n          type: \"string\"\r\n        }\r\n      });\r\n    },\r\n\r\n    // will retrieve corr. className of MimeType\r\n    _addMimeTypeClassNameInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n      var node = this.options.node;\r\n      _.extend(ret.data, {\r\n        mimeTypeClassName: NodeSpriteCollection.findClassByNode(node)\r\n      });\r\n    },\r\n\r\n    _ensurePlaceholder: function (ret, options) {\r\n      // ensure Description placeholder\r\n      if (ret.options.fields.description) {\r\n        var desc = ret.options.fields.description;\r\n        if (desc.placeholder === undefined || desc.placeholder.length === 0) {\r\n          desc.placeholder = lang.alpacaPlaceholderDescription;\r\n        }\r\n      }\r\n    },\r\n\r\n    _addReserveInfo: function (ret, options) {\r\n      var refNode =\r\n              _.extend(ret.data, {\r\n                reserve_info: ((!!this.options.node.get('reserved')) ? this : undefined)\r\n              });\r\n\r\n      _.extend(ret.options.fields, {\r\n        reserve_info: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldReservedByLabel,\r\n          type: \"otcs_reserve_button\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        reserve_info: {\r\n          hidden: false,\r\n          readonly: true,\r\n          type: \"otcs_reserve_button\"\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, prototypeExt);\r\n    }\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/node/node.general.form.model',[\r\n  'csui/lib/jquery', 'csui/lib/underscore', 'csui/models/form',\r\n  'csui/models/mixins/node.resource/node.resource.mixin',\r\n  'csui/widgets/metadata/general.panels/node/server.adaptor.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function ($, _, FormModel, NodeResourceMixin, ServerAdaptorMixin,\r\n    lang) {\r\n  'use strict';\r\n\r\n  var NodeGeneralFormModel = FormModel.extend({\r\n    defaults: {\r\n      id: 'general'\r\n    },\r\n\r\n    constructor: function NodeGeneralFormModel(attributes, options) {\r\n      FormModel.prototype.constructor.apply(this, arguments);\r\n\r\n      this.makeNodeResource(options)\r\n          .makeServerAdaptor(options);\r\n    }\r\n  });\r\n\r\n  NodeResourceMixin.mixin(NodeGeneralFormModel.prototype);\r\n  ServerAdaptorMixin.mixin(NodeGeneralFormModel.prototype);\r\n\r\n  return NodeGeneralFormModel;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/document/document.general.form.model',['csui/lib/underscore', 'csui/utils/base',\r\n  'csui/controls/table/cells/size/size.view',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, base, SizeView, NodeGeneralFormModel, lang) {\r\n  'use strict';\r\n\r\n  var DocumentGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function DocumentGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      var form = NodeGeneralFormModel.prototype.parse.apply(this, arguments);\r\n\r\n      this._addSizeInfo(form, options);\r\n\r\n      return form;\r\n    },\r\n\r\n    _addSizeInfo: function (ret, options) {\r\n      var type        = this.options.node.get('type'),\r\n          val         = this.options.node.has('size'),\r\n          column_name = (val ? '' : 'file_') + 'size';\r\n      this.sizeView = new SizeView({\r\n        model: this.options.node,\r\n        column: {name: column_name}\r\n      });\r\n\r\n      var sizeVal = this.sizeView.getValueData().formattedValue,\r\n          refNode =\r\n              _.extend(ret.data, {\r\n                size: !!sizeVal ? sizeVal :\r\n                      base.getReadableFileSizeString(this.options.node.get('size'))\r\n\r\n              });\r\n\r\n\r\n      _.extend(ret.options.fields, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldSizeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldSizeLabel,\r\n          type: \"string\",\r\n          tooltip: this.sizeView.getValueData().value\r\n        }\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return DocumentGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/node/impl/node.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      {{#if options.showSize}}\\r\\n      <div class=\\\"size_section general-information\\\"></div>\\r\\n      {{/if}}\\r\\n      <div class=\\\"reserve_info general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n      <div class=\\\"csui-action-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.aria_label}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_node_impl_node.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/node/impl/node.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/node/node.general.form.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/log',\r\n  'csui/controls/form/form.view', 'csui/utils/commandhelper',\r\n  'csui/behaviors/default.action/default.action.behavior',\r\n  'csui/widgets/metadata/general.form.fields/general.form.field.behavior',\r\n  'csui/widgets/metadata/general.action.fields/general.action.field.behavior',\r\n  'csui/models/version',\r\n  'csui/controls/globalmessage/globalmessage',\r\n  'hbs!csui/widgets/metadata/general.panels/node/impl/node.general.form',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/utils/base',\r\n  'csui/utils/contexts/factories/next.node',\r\n  'csui/utils/commands/versions', 'csui/models/nodeversions',\r\n  'css!csui/widgets/metadata/general.panels/node/impl/node.general.form'\r\n], function (_, $, log, FormView, CommandHelper,\r\n    DefaultActionBehavior, GeneralFormFieldBehavior, GeneralActionFieldBehavior, VersionModel,\r\n    GlobalMessage, formTemplate, lang, base, NextNodeModelFactory, versionCommands,\r\n    NodeVersionCollection) {\r\n  'use strict';\r\n\r\n  var NodeGeneralFormView = FormView.extend({\r\n\r\n    behaviors: {\r\n      defaultAction: {\r\n        behaviorClass: DefaultActionBehavior\r\n      },\r\n      generalFormFields: {\r\n        behaviorClass: GeneralFormFieldBehavior,\r\n        fieldParent: '.csui-extra-general-fields',\r\n        fieldDescriptors: function () {\r\n          return this.options.generalFormFieldDescriptors;\r\n        },\r\n        fieldViewOptions: function () {\r\n          return {\r\n            context: this.options.context,\r\n            node: this.node,\r\n            mode: this.options.mode,\r\n            originatingView: this,\r\n            metadataView: this.options.metadataView\r\n          };\r\n        }\r\n      },\r\n      generalActionFields: {\r\n        behaviorClass: GeneralActionFieldBehavior,\r\n        fieldParent: '.csui-action-fields',\r\n        fieldDescriptors: function () {\r\n          return this.options.generalActionFieldDescriptors;\r\n        },\r\n        fieldViewOptions: function () {\r\n          return {\r\n            context: this.options.context,\r\n            node: this.node,\r\n            mode: this.options.mode,\r\n            originatingView: this,\r\n            metadataView: this.options.metadataView\r\n          };\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n    className: 'cs-form csui-general-form',\r\n\r\n    // Default field set that needs to be refreshed while modifying any field in general form.\r\n    // it can be extended if a particular module need to update more field.\r\n    fieldToRefresh: ['modify_date', 'reserve_info'],\r\n\r\n    constructor: function NodeGeneralFormView(options) {\r\n      FormView.prototype.constructor.call(this, options);\r\n      this.node = this.options.node;\r\n      // extend fieldToRefresh from options.\r\n      this.fieldToRefresh = _.union(this.fieldToRefresh, (options.fieldToRefresh || []));\r\n      this.listenTo(this, 'change:field', this._saveField);\r\n      this.listenTo(this.node, 'change', _.bind(function () {\r\n        if (this.mode !== \"create\") {\r\n          this.model.fetch();\r\n        }\r\n\r\n        // The model event is no longer triggered. If a single form field\r\n        // is re-rendered, needs to let metadata keyboard navigation know\r\n        // to refresh the list of tabable elements.\r\n        var event = $.Event('tab:content:field:changed');\r\n        this.$el.trigger(event);\r\n      }, this));\r\n\r\n      var action = this.defaultActionController.getAction(this.options.node);\r\n      if (!action) {\r\n        this.noDefaultActionExist = true;\r\n      }\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    formTemplateHelpers: function () {\r\n      var type_name = this.node.get('type_name'),\r\n          node_name = this.node.get('name');\r\n      return {\r\n        showThumbnail: this.mode != 'create',\r\n        showSize: this.model.get('data').size !== \"\",\r\n        reserved: this.node.get('reserved'),\r\n        title: this.noDefaultActionExist ? \"\" : _.str.sformat(lang.openDoc, type_name),\r\n        aria_label: this.noDefaultActionExist ? \"\" :\r\n                    _.str.sformat(lang.openDocAria, type_name, node_name)\r\n      };\r\n    },\r\n\r\n    _getLayout: function () {\r\n      var template = this.getOption('formTemplate'),\r\n          html     = template.call(this, {\r\n            data: this.alpaca.data,\r\n            mode: this.mode\r\n          }),\r\n          bindings = this._getBindings(),\r\n          view     = {\r\n            parent: 'bootstrap-csui',\r\n            layout: {\r\n              template: html,\r\n              bindings: bindings\r\n            }\r\n          };\r\n      return view;\r\n    },\r\n\r\n    _getBindings: function () {\r\n      var bindings = {\r\n        name: 'name_section',\r\n        create_date: '.owner_section',\r\n        create_user_id: '.owner_section',\r\n        modify_date: '.owner_section',\r\n        owner_user_id: '.owner_section',\r\n        mime_type: '.typename_section',\r\n        description: '.description_section',\r\n        itemId: '.owner_section',\r\n        size: '.size_section'\r\n      };\r\n      // adding 'reserve_info' only for supported object types.\r\n      if (this.node.get(\"reserved\")) {\r\n        bindings = _.extend(bindings, {\r\n          reserve_info: \".reserve_info\"\r\n        });\r\n      }\r\n      // for version, extend the bindings because the v1 and v2 keys are slightly different\r\n      // To support wiki and document Versions\r\n      if (this.node instanceof VersionModel) {\r\n        bindings = _.extend(bindings, {\r\n          version_number_name: \".owner_section\",\r\n          owner_id: \".owner_section\"\r\n        });\r\n      }\r\n      return bindings;\r\n    },\r\n\r\n    _saveField: function (args) {\r\n      // This view is shared for both creation and editing scenarios.\r\n      // Do not save immediately in the creation mode.  The creation dialog\r\n      // has a button to get all field values and perform the action.\r\n      if (this.mode === 'create') {\r\n        return;\r\n      }\r\n\r\n      var field   = args.targetField,\r\n          changes = {};\r\n\r\n      changes[field.name] = field.value;\r\n      this._saveChanges(changes);\r\n    },\r\n\r\n    _saveChanges: function (changes) {\r\n      var MN = '{0}:_saveGeneralChanges {1} {2}';\r\n      var node            = this.model.options.node,\r\n          self            = this,\r\n          isThumbnailView = self.options.metadataView &&\r\n                            self.options.metadataView.thumbnailViewState;\r\n      node.save(changes, {\r\n        wait: true,\r\n        silent: isThumbnailView,\r\n        patch: true\r\n      }).then(function () {\r\n        return node.fetch();\r\n      }).fail(function (jqxhr) {\r\n        var preValues = self.model.get('data');\r\n        // Reset form data and refresh fields\r\n        self.form.children.forEach(function (formField) {\r\n          formField.setValue(preValues[formField.propertyId]);\r\n          formField.refresh();\r\n        });\r\n        var error = new base.Error(jqxhr);\r\n        GlobalMessage.showMessage('error', error.message);\r\n        self.trigger('forms:error');\r\n      });\r\n    },\r\n\r\n    updateRenderedForm: function (options) {\r\n      this.updateReserveFieldDisplay();\r\n      FormView.prototype.updateRenderedForm.apply(this, arguments);\r\n\r\n      this._showDefaultImage();\r\n      var thumbnail = this.$el.find('.thumbnail_section');\r\n      // default action\r\n      if (this.options.node instanceof VersionModel) {\r\n        //Handling default action for VersionModel differently\r\n        var versionNode = this.options.node;\r\n        thumbnail.click(_.bind(function () {\r\n          var cmd = versionCommands.get('VersionOpen');\r\n          var status = {nodes: new NodeVersionCollection([versionNode])};\r\n          var cmdOptions = {context: this.options.context, originatingView: this};\r\n          cmd.execute(status, cmdOptions);\r\n        }, this));\r\n      } else {\r\n        // default action\r\n        var self = this;\r\n        thumbnail.click(_.bind(function (event) {\r\n          if (!this.noDefaultActionExist) {\r\n            var nextNode = this.options.context.getModel(NextNodeModelFactory);\r\n            if (this.options.node.get(\"container\") && this.options.node.get('id') ===\r\n                nextNode.get(\"id\")) {\r\n              if (self.options.metadataView) {\r\n                self.options.metadataView._closeMetadata();\r\n              }\r\n            } else {\r\n              this.triggerMethod('execute:DefaultAction', this.options.node);\r\n            }\r\n          }\r\n        }, this));\r\n      }\r\n\r\n      thumbnail.on(\"focusin\", function (event) {\r\n        base.checkAndScrollElemToViewport(event.currentTarget);\r\n      });\r\n\r\n      var $langSwitcher = $('<span></span>')\r\n          .prop('class', 'icon csui-icon language-switcher')\r\n          .prop('alt', 'Switch language')\r\n          .prop('title', 'Switch language')\r\n          .css('margin-left', '0.5em');\r\n      //  this.form.domEl\r\n      //      .find('#description_section label')\r\n      //      .append($langSwitcher);\r\n\r\n      // Let render:form triggered once all extra fields were rendered\r\n      var generalFormFieldDescriptors = this.options.generalFormFieldDescriptors;\r\n      if (generalFormFieldDescriptors && generalFormFieldDescriptors.length) {\r\n        this.listenToOnce(this, 'render:general:form:fields', options.async());\r\n      }\r\n    },\r\n\r\n    setFocus: function () {\r\n      //this.form.focus();\r\n      var nonReadOnlyFields = this.$form.find('.alpaca-field:not(.alpaca-readonly) button');\r\n      if (nonReadOnlyFields.length > 0) {\r\n        nonReadOnlyFields[0].focus();\r\n      }\r\n    },\r\n\r\n    updateForm: function () {\r\n      if (!!this.node.isReservedClicked || !!this.node.isUnreservedClicked) {\r\n        // only render when reserve or unreserve action is preformed.\r\n        this.render();\r\n        this.node.isReservedClicked = false;\r\n        this.node.isUnreservedClicked = false;\r\n      }\r\n      var alpacaForm     = this.$el.alpaca('get'),\r\n          requiredSwitch = !!this.node.collection && !!this.node.collection.requireSwitched;\r\n      if (!!alpacaForm) {\r\n        var data = this.model.get('data');\r\n        for (var i = 0; i < this.fieldToRefresh.length; i++) {\r\n          var field = alpacaForm.childrenByPropertyId[this.fieldToRefresh[i]],\r\n              value = data[this.fieldToRefresh[i]];\r\n          if (!!field && field.getValue() !== value && !requiredSwitch) {\r\n            field.setValue(value);\r\n            field.refresh();\r\n          }\r\n        }\r\n      }\r\n      if (!this.thumbnail || !this.thumbnail.url) {\r\n        this._showDefaultImage();\r\n      }\r\n      this.updateReserveFieldDisplay();\r\n      return this;\r\n    },\r\n\r\n    updateReserveFieldDisplay: function () {\r\n      var reserveInfoElem = this.$el.find(\".reserve_info\");\r\n      if (!!this.node.get('reserved')) {\r\n        if (reserveInfoElem.hasClass(\"binf-hidden\")) {\r\n          reserveInfoElem.removeClass(\"binf-hidden\");\r\n        }\r\n      } else {\r\n        if (!reserveInfoElem.hasClass(\"binf-hidden\")) {\r\n          reserveInfoElem.addClass(\"binf-hidden\");\r\n        }\r\n      }\r\n    },\r\n\r\n    _showDefaultImage: function () {\r\n      // show thumbnail missing svg and hide img tag\r\n      var defaultThumbnailEl = this.$el.find('.default_thumbnail'),\r\n          className          = 'thumbnail_missing';\r\n      //checking model is available or not\r\n      if (!!this.options && !!(this.options.model.get('data'))) {\r\n        className = this.options.model.get('data').mimeTypeClassName;\r\n      }\r\n      defaultThumbnailEl.addClass(className);\r\n      defaultThumbnailEl.removeClass('thumbnail_empty');\r\n      // event for keyboard navigation\r\n      var event = $.Event('tab:content:render');\r\n      this.$el.trigger(event);\r\n      if (!!this.noDefaultActionExist) {\r\n        this.$el.find('.default_thumbnail').addClass('thumbnail_disabled');\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  return NodeGeneralFormView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/document/impl/document.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      <div class=\\\"size_section general-information\\\"></div>\\r\\n      <div class=\\\"reserve_info general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"thumbnail_not_loaded thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.aria_label}}\\\"></span>\\r\\n          <img src=\\\"{{options.imgSrc}}\\\" class=\\\"img-doc-preview binf-hidden\\\"\\r\\n               alt=\\\"{{options.imgAlt}}\\\">\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_document_impl_document.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/document/impl/document.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/document/document.general.form.view',['csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/utils/commands/impl/thumbnail/thumbnail.object',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'hbs!csui/widgets/metadata/general.panels/document/impl/document.general.form',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/general.panels/document/impl/document.general.form'\r\n], function (_, $, Thumbnail, NodeGeneralFormView, formTemplate, lang) {\r\n  'use strict';\r\n\r\n  var DocumentGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function DocumentGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n\r\n      this.thumbnail = this.options.thumbnail || new Thumbnail({\r\n            node: this.options.node\r\n          });\r\n      this.listenTo(this.thumbnail, 'load', this._showImage)\r\n          .listenTo(this.thumbnail, 'error', this._showDefaultImage)\r\n          .listenTo(this, 'destroy', function () {\r\n            this.thumbnail.destroy();\r\n          });\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n    fieldToRefresh: ['modify_date', 'reserve_info', 'mime_type', 'size'],\r\n    formTemplateHelpers: function () {\r\n      var type_name = this.node.get('type_name'),\r\n          doc_name  = this.node.get('name');\r\n      return {\r\n        showThumbnail: this.mode != 'create',\r\n        title: _.str.sformat(lang.openDoc, type_name),\r\n        aria_label: _.str.sformat(lang.openDocAria, type_name, doc_name),\r\n        reserved: this.node.get('reserved'),\r\n        // a 1x1 transparent gif, to avoid an empty src tag\r\n        imgSrc: \"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\",\r\n        imgAlt: lang.docPreviewAlt\r\n      };\r\n    },\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        size: \".size_section\"\r\n      });\r\n    },\r\n\r\n    updateRenderedForm: function (options) {\r\n      NodeGeneralFormView.prototype.updateRenderedForm.apply(this, arguments);\r\n      if (this.mode !== 'create') {\r\n        var self = this;\r\n        //Just show image if url is available,otherwise load thumbnail\r\n        if (!!this.thumbnail.url) {\r\n          this._showImage();\r\n        } else {\r\n          this.thumbnail.load();\r\n        }\r\n      }\r\n    },\r\n\r\n    _showImage: function () {\r\n      var self                 = this,\r\n          img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded');\r\n      img.attr(\"src\", this.thumbnail.url);\r\n      img.prop('tabindex', '0');\r\n      img.one('load', function (evt) {\r\n\r\n        if (evt.target.clientHeight >= evt.target.clientWidth) {\r\n          img.addClass('cs-form-img-vertical');\r\n        } else {\r\n          img.addClass('cs-form-img-horizontal');\r\n        }\r\n        img.addClass('cs-form-img-border');\r\n        //hide the thumbnail background span and show the real img\r\n        thumbnailNotLoadedEl.addClass('binf-hidden');\r\n        img.removeClass('binf-hidden');\r\n\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n      });\r\n    },\r\n\r\n    _showDefaultImage: function () {\r\n      // show thumbnail missing svg and hide img tag\r\n      var img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded'),\r\n          className            = 'thumbnail_missing';\r\n      //checking model is available or not\r\n      if (!!this.options && !!(this.options.model.get('data'))) {\r\n        className = this.options.model.get('data').mimeTypeClassName;\r\n      }\r\n      // remove the old mime-type class , then update with new one.\r\n      !!thumbnailNotLoadedEl.prop(\"className\") &&\r\n      thumbnailNotLoadedEl.prop(\"className\").split(' ').forEach(_.bind(function (str) {\r\n        if (str.indexOf('mime') === 0) {\r\n          thumbnailNotLoadedEl.removeClass(str);\r\n        }\r\n      }, thumbnailNotLoadedEl));\r\n\r\n      thumbnailNotLoadedEl.addClass(className);\r\n      thumbnailNotLoadedEl.removeClass('thumbnail_empty');\r\n      thumbnailNotLoadedEl.removeClass('csui-icon-notification-error');\r\n      thumbnailNotLoadedEl.removeClass('binf-hidden');\r\n      img.addClass('binf-hidden');\r\n\r\n      // event for keyboard navigation\r\n      var event = $.Event('tab:content:render');\r\n      this.$el.trigger(event);\r\n    }\r\n  });\r\n\r\n  return DocumentGeneralFormView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.model',[\r\n  'csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/models/specificnodemodel',\r\n  'csui/models/mixins/syncable.from.multiple.sources/syncable.from.multiple.sources.mixin'\r\n], function (_, NodeGeneralFormModel, SpecificNodeModel, SyncableMixin) {\r\n  'use strict';\r\n\r\n  var ShortcutGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function ShortcutGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n      this.makeSyncableFromMultipleSources(options);\r\n    },\r\n\r\n    _mergeSources: function (specificNodeModel, nodeGeneralFormModel) {\r\n      var specProperties    = specificNodeModel[0].forms[0], // for specific node propertie\r\n          generalProperties = nodeGeneralFormModel[0].forms[0]; // for general node properties\r\n\r\n      _.extend(generalProperties.data, specProperties.data);\r\n      _.extend(generalProperties.options.fields, specProperties.options.fields);\r\n      _.extend(generalProperties.schema.properties, specProperties.schema.properties);\r\n\r\n      generalProperties.options = _.omit(generalProperties.options, 'form');\r\n\r\n      this.set(generalProperties);  // fused properties\r\n    },\r\n\r\n    sync: function () {\r\n      var specNodeModel        = new SpecificNodeModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.node,\r\n            context: this.options.context\r\n          }),\r\n          nodeGeneralModel     = new NodeGeneralFormModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.options.node,\r\n            context: this.options.context\r\n          }),\r\n          specificModelPromise = specNodeModel.fetch(),\r\n          generalModelPromise  = nodeGeneralModel.fetch(),\r\n          options              = {parse: false};\r\n      return this.syncFromMultipleSources(\r\n          [specificModelPromise, generalModelPromise], this._mergeSources, options);\r\n    }\r\n  });\r\n  SyncableMixin.mixin(ShortcutGeneralFormModel.prototype);\r\n  return ShortcutGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn\\r\\n    cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.title}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"shortcut_section general-information\\\"></div>\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_shortcut_impl_shortcut.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.view',['csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'csui/utils/contexts/factories/node',\r\n  'hbs!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',\r\n  'css!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form'\r\n], function (_, NodeGeneralFormView, NodeModelFactory, formTemplate) {\r\n  'use strict';\r\n\r\n  var ShortcutGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function ShortcutGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n\r\n      // share the original node for deeper form fields code\r\n      if (options.context && options.node && options.node.original &&\r\n          options.node.original.get('id') > 0) {\r\n        // Create the node model or do nothing if it exists\r\n        options.context.getModel(NodeModelFactory, {\r\n          // Add unique id to the propertyPrefix for this object\r\n          attributes: {id: options.node.original.get('id')},\r\n          // Pass the property value using the propertyPrefix of the factory\r\n          node: options.node.original,\r\n          // Discard the model during context change to prevent its re-fetch \r\n          temporary: true\r\n        });\r\n      }\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        original_id: '.shortcut_section'\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return ShortcutGeneralFormView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/url/url.general.form.model',['csui/lib/jquery', 'csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/models/specificnodemodel',\r\n  'csui/models/mixins/syncable.from.multiple.sources/syncable.from.multiple.sources.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function ($, _, NodeGeneralFormModel, SpecificNodeModel, SyncableMixin, lang) {\r\n  'use strict';\r\n\r\n  var UrlGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function UrlGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n      this.makeSyncableFromMultipleSources(options);\r\n    },\r\n\r\n    _mergeSources: function (specificNodeModel, nodeGeneralFormModel) {\r\n      var specProperties    = specificNodeModel[0].forms[0], // for specific node propertie\r\n          generalProperties = nodeGeneralFormModel[0].forms[0]; // for general node properties\r\n\r\n      _.extend(generalProperties.data, specProperties.data);\r\n      _.extend(generalProperties.options.fields, specProperties.options.fields);\r\n      _.extend(generalProperties.schema.properties, specProperties.schema.properties);\r\n\r\n      generalProperties.options = _.omit(generalProperties.options, 'form');\r\n\r\n      this.set(generalProperties);  // fused properties\r\n    },\r\n\r\n    sync: function () {\r\n      var specNodeModel        = new SpecificNodeModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.node,\r\n            context: this.options.context\r\n          }),\r\n          nodeGeneralModel     = new NodeGeneralFormModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.options.node,\r\n            context: this.options.context\r\n          }),\r\n          specificModelPromise = specNodeModel.fetch(),\r\n          generalModelPromise  = nodeGeneralModel.fetch(),\r\n          options              = {parse: false};\r\n      return this.syncFromMultipleSources(\r\n          [specificModelPromise, generalModelPromise], this._mergeSources, options);\r\n    }\r\n  });\r\n\r\n  SyncableMixin.mixin(UrlGeneralFormModel.prototype);\r\n  return UrlGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/url/impl/url.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn\\r\\n    cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.title}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"url_section general-information\\\"></div>\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_url_impl_url.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/url/impl/url.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/url/url.general.form.view',['csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'hbs!csui/widgets/metadata/general.panels/url/impl/url.general.form',\r\n  'css!csui/widgets/metadata/general.panels/url/impl/url.general.form'\r\n], function (_, NodeGeneralFormView, formTemplate) {\r\n  'use strict';\r\n\r\n  var UrlGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function UrlGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        url: \".url_section\"\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return UrlGeneralFormView;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/general.panels/document/document.general.form.model',\r\n  'csui/widgets/metadata/general.panels/document/document.general.form.view',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.model',\r\n  'csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.view',\r\n  'csui/widgets/metadata/general.panels/url/url.general.form.model',\r\n  'csui/widgets/metadata/general.panels/url/url.general.form.view',\r\n  'csui/models/mixins/rules.matching/rules.matching.mixin',\r\n  // Load extra general property panel rules to be added to the built-in ones\r\n  'csui-ext!csui/widgets/metadata/metadata.general.panels'\r\n], function (_, Backbone,\r\n    DocumentGeneralFormModel, DocumentGeneralFormView,\r\n    NodeGeneralFormModel, NodeGeneralFormView,\r\n    ShortcutGeneralFormModel, ShortcutGeneralFormView,\r\n    UrlGeneralFormModel, UrlGeneralFormView,\r\n    RulesMatchingMixin, extraGeneralPanels) {\r\n  'use strict';\r\n\r\n  var MetadataGeneralPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      contentModel: null,\r\n      contentView: null,\r\n      contentViewOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n      this.makeRulesMatching(options);\r\n    }\r\n\r\n  });\r\n\r\n  RulesMatchingMixin.mixin(MetadataGeneralPanelModel.prototype);\r\n\r\n  var MetadataGeneralPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataGeneralPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    findByNode: function (node) {\r\n      return this.find(function (item) {\r\n        return item.matchRules(node, item.attributes);\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  var generalPanels = new MetadataGeneralPanelCollection([\r\n    {\r\n      // document and Email\r\n      equals: {type: [144, 749]},\r\n      contentModel: DocumentGeneralFormModel,\r\n      contentView: DocumentGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // shortcut and generation\r\n      equals: {type: [1, 2]},\r\n      contentModel: ShortcutGeneralFormModel,\r\n      contentView: ShortcutGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // url\r\n      equals: {type: 140},\r\n      contentModel: UrlGeneralFormModel,\r\n      contentView: UrlGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // default node\r\n      contentModel: NodeGeneralFormModel,\r\n      contentView: NodeGeneralFormView,\r\n      sequence: 10000\r\n    }\r\n  ]);\r\n\r\n  if (extraGeneralPanels) {\r\n    generalPanels.add(_.flatten(extraGeneralPanels, true));\r\n  }\r\n\r\n  return generalPanels;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/property.panels/general/metadata.general.property.controller',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/models/form', 'csui/controls/form/form.view',\r\n  'csui/widgets/metadata/metadata.general.panels'\r\n], function (_, $, Marionette, FormModel, FormView, generalPanels) {\r\n  'use strict';\r\n\r\n  var MetadataGeneralPropertyController = Marionette.Controller.extend({\r\n\r\n    constructor: function MetadataExternalPropertyController(options) {\r\n      Marionette.Controller.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    getPropertyPanels: function (options) {\r\n      var generalPanel = this._getGeneralPanel(),\r\n          formModel = new generalPanel.model(undefined, {\r\n            connector: this.connector,\r\n            node: this.options.model,\r\n            context: this.options.context\r\n          }),\r\n          self = this;\r\n      return formModel\r\n          .fetch()\r\n          .then(function () {\r\n            return [{\r\n              model: formModel,\r\n              contentView: generalPanel.contentView,\r\n              contentViewOptions: generalPanel.contentViewOptions\r\n            }];\r\n          });\r\n    },\r\n\r\n    getPropertyPanelsForCreate: function (options) {\r\n      var generalPanel = this._getGeneralPanel(),\r\n          deferred = $.Deferred(),\r\n          formModel = options.forms.findWhere({id: 'general'});\r\n      // The 'v1/forms/nodes/create' always returns the general form.\r\n      // If other collection is used to fetch the pre-filled forms, it\r\n      // has to include some form with the 'general' id too\r\n      if (!formModel) {\r\n        throw new Error('General form missing.');\r\n      }\r\n      formModel = new generalPanel.model(formModel.attributes, {\r\n        connector: this.connector,\r\n        node: this.options.model,\r\n        parse: true\r\n      });\r\n      return deferred\r\n          .resolve([{\r\n            model: formModel,\r\n            contentView: generalPanel.contentView,\r\n            contentViewOptions: generalPanel.contentViewOptions\r\n          }])\r\n          .promise();\r\n    },\r\n\r\n    getPropertyPanelsForMove: function (options) {\r\n      return this._getPropertyPanelsForMoveAndCopy(options);\r\n    },\r\n\r\n    getPropertyPanelsForCopy: function (options) {\r\n      return this._getPropertyPanelsForMoveAndCopy(options);\r\n    },\r\n\r\n    // Add read-only general tab fro move and copy scenarios;\r\n    // useless for the operation, but the user may like to see\r\n    // more information about the copied items and is ready to\r\n    // pay the price for the fetching server call.\r\n    _getPropertyPanelsForMoveAndCopy: function (options) {\r\n      var generalPanel = this._getGeneralPanel(),\r\n          formModel = new generalPanel.model(undefined, {\r\n            connector: this.connector,\r\n            node: this.options.model\r\n          }),\r\n          self = this;\r\n      return formModel\r\n          .fetch()\r\n          .then(function () {\r\n            formModel.get('schema').readonly = true;\r\n            return [{\r\n              model: formModel,\r\n              contentView: generalPanel.contentView,\r\n              contentViewOptions: generalPanel.contentViewOptions\r\n            }];\r\n          });\r\n    },\r\n\r\n    _getGeneralPanel: function () {\r\n      var panel = generalPanels.findByNode(this.options.model);\r\n      return {\r\n        model: panel.get('contentModel') || FormModel,\r\n        contentView: panel.get('contentView') || FormView,\r\n        contentViewOptions: panel.get('contentViewOptions')\r\n      };\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataGeneralPropertyController;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.property.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/property.panels/general/metadata.general.property.controller',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.property.panels'\r\n], function (_, Backbone, MetadataGeneralPropertyController, extraPropertyPanels) {\r\n\r\n  var MetadataPropertyPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataPropertyPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataPropertyPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataPropertyPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataPropertyPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataPropertyPanels = new MetadataPropertyPanelCollection([\r\n    {\r\n      sequence: 10,\r\n      controller: MetadataGeneralPropertyController\r\n    }\r\n  ]);\r\n\r\n  if (extraPropertyPanels) {\r\n    extraPropertyPanels = _.flatten(extraPropertyPanels, true);\r\n    _.each(extraPropertyPanels, function () {\r\n      var sequence = extraPropertyPanels.sequence;\r\n      if (sequence < 10 || sequence > 100) {\r\n        throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n      }\r\n    });\r\n    metadataPropertyPanels.add(extraPropertyPanels);\r\n  }\r\n\r\n  return metadataPropertyPanels;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"binf-dropdown\\\">\\r\\n  <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-dropdown-toggle\\\"\\r\\n          data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.addTitleTooltip || (depth0 != null ? depth0.addTitleTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"addTitleTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.addTitleTooltip || (depth0 != null ? depth0.addTitleTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"addTitleTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n    <span class=\\\"csui-button-icon icon-toolbarAdd\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.addTitleTooltip || (depth0 != null ? depth0.addTitleTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"addTitleTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  </button>\\r\\n  <ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\"></ul>\\r\\n</div>\\r\\n<div class=\\\"csui-loading-parent-wrapper binf-disabled csui-disbaled binf-hidden\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_add.properties_add.properties.dropdown.menu', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',[],function(){});\n","csui.define('csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view',[\"csui/lib/jquery\", \"csui/lib/underscore\", \"csui/lib/backbone\", \"csui/lib/marionette\",\r\n  'csui/utils/log', 'csui/controls/toolbar/toolitem.view', 'csui/controls/progressblocker/blocker',\r\n  'csui/models/nodes', 'csui/controls/toolbar/toolitems.filtered.model', 'csui/utils/commands',\r\n  'csui/behaviors/dropdown.menu/dropdown.menu.behavior',\r\n  'hbs!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',\r\n  'csui/lib/binf/js/binf'\r\n], function ($, _, Backbone, Marionette, log, ToolItemView, BlockingView,\r\n    NodeCollection, FilteredToolItemsCollection, commands, DropdownMenuBehavior,\r\n    template, lang) {\r\n\r\n  //\r\n  // This view shows the '+' icon for add properties commands such as 'add categories',\r\n  // 'add classifications', etc.\r\n  // - When there is only one command (for example: just 'add categories'), the '+' is just a\r\n  // command icon that would launch the only only command when the user clicks on it.\r\n  // - When there are two or more commands, the '+' icon is a dropdown menu that shows all the\r\n  // available commands.\r\n  //\r\n  // Params:\r\n  // - suppressAddProperties <boolean> : true to suppress the '+' icon\r\n  //\r\n  var AddPropertiesDropdownMenuView = Marionette.CompositeView.extend({\r\n\r\n    className: \"metadata-add-properties\",\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      return {\r\n        btnId: _.uniqueId('addPropertiesButton'),\r\n        addTitleTooltip: (this.collection.length === 1 ?\r\n                          this.collection.at(0).get('name') : lang.addNewProperties)\r\n      };\r\n    },\r\n\r\n    childView: ToolItemView,\r\n    childViewContainer: \"ul.binf-dropdown-menu\",\r\n    childViewOptions: function (model) {\r\n      return {\r\n        role: 'menuitem'\r\n      };\r\n    },\r\n\r\n    ui: {\r\n      dropdownDiv: '.binf-dropdown',\r\n      dropdownToggle: '.binf-dropdown-toggle',\r\n      loadingIconsDiv: '.csui-loading-parent-wrapper'\r\n    },\r\n\r\n    behaviors: {\r\n      DropdownMenuBehavior: {\r\n        behaviorClass: DropdownMenuBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function AddPropertiesDropdownMenuView(options) {\r\n      options || (options = {});\r\n      this.context = options.context;\r\n      this.commands = options.commands || commands;\r\n      this.node = options.node;\r\n      this.container = options.container;\r\n      this.formCollection = options.collection;\r\n      this.originalFormCollection = options.formCollection;\r\n      this.listenTo(this.formCollection, \"reset\", this._updateMenuItems);\r\n\r\n      this.originatingView = options.originatingView;\r\n      if (options.blockingParentView) {\r\n        BlockingView.delegate(this, options.blockingParentView);\r\n      } else {\r\n        BlockingView.imbue(this);\r\n      }\r\n\r\n      var status = {\r\n        nodes: new NodeCollection([options.node]),\r\n        container: options.container,\r\n        formCollection: this.formCollection,\r\n        originalFormCollection: this.originalFormCollection,\r\n        context: options.context\r\n      };\r\n\r\n      var toolbarName = 'addPropertiesToolbar';\r\n      var toolItemFactory = options.toolbarItems[toolbarName];\r\n      options.collection = new FilteredToolItemsCollection(\r\n          toolItemFactory, {\r\n            status: status,\r\n            commands: this.commands,\r\n            delayedActions: options.containerCollection &&\r\n                            options.containerCollection.delayedActions,\r\n            mask: options.toolbarItemsMask\r\n          });\r\n\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n\r\n      // Passing the el to the ctor prevents creating an own el, including\r\n      // setting its attributes.  The caller must ensure the right tag.\r\n      if (options.el) {\r\n        $(options.el).addClass(_.result(this, \"className\"));\r\n      }\r\n\r\n      this.listenTo(this, \"childview:toolitem:action\", this._triggerMenuItemAction)\r\n          .listenTo(this.node, 'sync change', this._reRender)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle);\r\n\r\n      if (options.containerCollection && options.containerCollection.delayedActions) {\r\n        this.listenTo(options.containerCollection.delayedActions, 'sync', this._reRender);\r\n      }\r\n    },\r\n\r\n    _updateMenuItems: function () {\r\n      this.collection.refilter();\r\n    },\r\n\r\n    _reRender: function () {\r\n      // Properties is being destroyed on changing the context node. Both destroyer\r\n      // and a sub-view refreshed are listening on node changes. Although listening\r\n      // is stopped during the destruction, already registered handlers will be\r\n      // triggered nevertheless.\r\n      if (this._isRendered && !this.isDestroyed) {\r\n        this._updateMenuItems();\r\n        this.render();\r\n      }\r\n    },\r\n\r\n    onRender: function () {\r\n      this._ensureLazyActionsRetrieved().done(_.bind(function () {\r\n        if (this.collection.length < 1 || this.options.suppressAddProperties === true) {\r\n          // hide the + button if there is no action\r\n          this.$el.addClass('binf-hidden');\r\n          this.ui.dropdownToggle.attr('data-cstabindex', '-1');\r\n        } else {\r\n          // show the view because with the latest code the view now can be hidden by the PUT call\r\n          // event that the node does not have any actions yet until it is re-fetched\r\n          this.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n          this.$el.removeClass('binf-hidden');\r\n          this.ui.dropdownToggle.attr('data-cstabindex', '0');\r\n          // when there is only one command, set aria-haspopup=false\r\n          if (this.collection.length === 1) {\r\n            var addNewCat = this.collection.at(0).get('name');\r\n            this.ui.dropdownToggle.attr({\r\n              'aria-haspopup': false,\r\n              'aria-label': addNewCat,\r\n              'title': addNewCat\r\n            });\r\n            this.ui.dropdownToggle.find('.icon-toolbarAdd').attr('title', addNewCat);\r\n          }\r\n        }\r\n\r\n        if (this.collection.length > 1) {\r\n          // make the dropdown menu when there are more than 1 menu item\r\n          this.ui.dropdownToggle.binf_dropdown();\r\n        }\r\n\r\n        this.ui.dropdownDiv.on('click', _.bind(this._onClickAddButton, this));\r\n        this.ui.dropdownToggle.on('click', _.bind(this._onClickAddButton, this));\r\n\r\n        var self = this;\r\n        setTimeout(function () {\r\n          // event for keyboard navigation\r\n          var event = $.Event('tab:content:render');\r\n          self.$el.trigger(event);\r\n        }, 200);\r\n\r\n      }, this)).fail(function () {\r\n        this.$el.addClass('binf-hidden');\r\n        this.ui.dropdownToggle.attr('data-cstabindex', '-1');\r\n      });\r\n\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      if (this.options.suppressAddProperties !== true) {\r\n        var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n        if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n          dropdownToggleEl.binf_dropdown('toggle', false);\r\n        }\r\n      }\r\n    },\r\n\r\n    _onClickAddButton: function (event) {\r\n      if (this.collection.length === 1) {\r\n        Backbone.trigger('closeToggleAction');\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        // when there is just one command\r\n        this._executeAction(this.collection.at(0).get('signature'));\r\n      }\r\n    },\r\n\r\n    _triggerMenuItemAction: function (toolItemView, args) {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      dropdownToggleEl.binf_dropdown('toggle');  // close the dropdown menu before triggering the event\r\n\r\n      this._executeAction(args.toolItem.get(\"signature\"));\r\n    },\r\n\r\n    _executeAction: function (signature) {\r\n      var command = this.commands.findWhere({signature: signature});\r\n\r\n      var executeOptions = {\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        collection: this.formCollection,\r\n        container: this.options.container,\r\n        inheritance: this.options.inheritance,\r\n        context: this.options.context,\r\n        parentView: this.options.parentView,  // use for blocking view and callback\r\n        addPropertiesCallback: this.options.addPropertiesCallback\r\n      };\r\n\r\n      var status = {\r\n        context: this.options.context,\r\n        nodes: new NodeCollection([this.node]),\r\n        container: this.options.container,\r\n        formCollection: this.formCollection,\r\n        originalFormCollection: this.originalFormCollection,\r\n        originatingView: this.originatingView\r\n      };\r\n\r\n      if (command && command.enabled(status)) {\r\n        var el = this.ui.dropdownDiv;\r\n        el.addClass(\"binf-disabled\");\r\n        command.execute(status, executeOptions)\r\n            .done(_.bind(function (resp) {\r\n              el.removeClass(\"binf-disabled\");\r\n              //focus on tab link for added property\r\n              el.closest('.tab-links').find('.tab-links-bar ul li.binf-active a').focus();\r\n            }, this))\r\n            .fail(function (error) {\r\n              el.removeClass(\"binf-disabled\");\r\n              if (error && error.cancelled) {\r\n                //focus on dropdown toggle icon\r\n                el.find(\".binf-btn.binf-dropdown-toggle\").focus();\r\n              }\r\n            });\r\n      }\r\n    },\r\n    _ensureLazyActionsRetrieved: function () {\r\n      var deferred                = $.Deferred(),\r\n          node                    = this.options.node,\r\n          lazyActionsAreRetrieved = !!node.get('csuiLazyActionsRetrieved'),\r\n          isNodeLocallyCreated    = !!node.isLocallyCreated,\r\n          nonPromotedCommands     = node.nonPromotedActionCommands;\r\n      if (!!node && !lazyActionsAreRetrieved && !isNodeLocallyCreated && nonPromotedCommands &&\r\n          nonPromotedCommands.length) {\r\n        this.$el.find('.binf-dropdown').addClass('binf-hidden');\r\n        this.ui.loadingIconsDiv.removeClass('binf-hidden');\r\n        node.setEnabledLazyActionCommands(true).done(_.bind(function () {\r\n          //As per UX req: need to show loading dots atleast for 300ms after fetch as like in\r\n          // inlineactionbar\r\n          setTimeout(_.bind(function () {\r\n            this.ui.loadingIconsDiv.addClass('binf-hidden');\r\n            this._updateMenuItems();\r\n            deferred.resolve();\r\n          }, this), 300);\r\n        }, this)).fail(_.bind(function () {\r\n          this.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n          deferred.reject();\r\n        }, this));\r\n      } else {\r\n        deferred.resolve();\r\n      }\r\n      return deferred.promise();\r\n    }\r\n\r\n  });\r\n\r\n  return AddPropertiesDropdownMenuView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/add.properties.menuitems',['csui/lib/underscore', 'csui/utils/base',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/add.properties.menuitems',\r\n  // Load extra tool items from the previous module location\r\n  'csui-ext!csui/widgets/metadata/add.properties/toolbaritems'\r\n], function (_, base, lang, ToolItemsFactory, TooItemModel,\r\n    extraToolItems, oldExtraToolItems) {\r\n  'use strict';\r\n\r\n  var toolbarItems = {\r\n\r\n    addPropertiesToolbar: new ToolItemsFactory(\r\n        {\r\n          add: [\r\n            {\r\n              signature: \"AddCategory\",\r\n              name: lang.addNewCategory\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 0 // force toolbar to immediately start with a drop-down list\r\n        }\r\n    )\r\n\r\n  };\r\n\r\n  if (oldExtraToolItems) {\r\n    // TODO: Issue deprecation warning\r\n    addExtraToolItems(oldExtraToolItems);\r\n  }\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/add.properties.menuitems.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  var AddPropertiesMenuItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function AddPropertiesMenuItemsMask() {\r\n      var config = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n    }\r\n\r\n  });\r\n\r\n  return AddPropertiesMenuItemsMask;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"csui-tab-contents-header-content\\\">\\r\\n  <div class=\\\"csui-tab-contents-header-right\\\">\\r\\n    <div class=\\\"required-field-switch binf-hidden\\\">\\r\\n        <span id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.requiredFieldsLabelId || (depth0 != null ? depth0.requiredFieldsLabelId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"requiredFieldsLabelId\",\"hash\":{}}) : helper)))\n    + \"\\\" class=\\\"only-required-fields-label\\\"\\r\\n              title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.onlyRequiredFieldsLabel || (depth0 != null ? depth0.onlyRequiredFieldsLabel : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"onlyRequiredFieldsLabel\",\"hash\":{}}) : helper)))\n    + \"\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.onlyRequiredFieldsLabel || (depth0 != null ? depth0.onlyRequiredFieldsLabel : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"onlyRequiredFieldsLabel\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n      <div class=\\\"required-fields-switch\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <h4>General</h4>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_tab.contents.header_tab.contents.header', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',[],function(){});\n","csui.define('csui/widgets/metadata/impl/tab.contents.header/tab.contents.header.view',['require', 'csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/controls/form/pub.sub',\r\n  'csui/models/version',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'hbs!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',\r\n  'css!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header', 'csui/lib/binf/js/binf'\r\n], function (require, $, _, Backbone, Marionette, PubSub, VersionModel, lang,\r\n    tabContentsHeaderTemplate) {\r\n  'use strict';\r\n\r\n  var TabContentsHeaderView = Marionette.ItemView.extend({\r\n\r\n    tagName: 'div',\r\n\r\n    className: 'csui-tab-contents-header',\r\n\r\n    template: tabContentsHeaderTemplate,\r\n\r\n    ui: {\r\n      leftTabContentsHeader: '.csui-tab-contents-header-content',\r\n      rightTabContentsHeader: '.csui-tab-contents-header-right',\r\n      tabContentsHeaderTitle: '.csui-tab-contents-header-content h4',\r\n      requiredSwitchEle: '.required-field-switch', //container of required field switch\r\n      requiredSwitchIcon: '.required-field-switch > div.required-fields-switch'\r\n    },\r\n\r\n    events: {\r\n      'click @ui.requiredSwitchIcon': 'onClickRequiredIconDiv',\r\n      'keydown': 'onKeyInView'\r\n    },\r\n\r\n    constructor: function TabContentsHeaderView() {\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.pubsubPostFix = (this.options.node instanceof VersionModel ? 'v' : 'p') +\r\n                           this.options.node.get('id');\r\n\r\n      this.requiredFieldsLabelId = _.uniqueId(\"requiredFields\");\r\n\r\n      var objPubSubId = 'pubsub:tab:contents:header:view:change:tab:title:' + this.pubsubPostFix;\r\n      PubSub.off(objPubSubId);\r\n\r\n      this.listenTo(PubSub, objPubSubId, this._changeTabTitle);\r\n\r\n      this.listenTo(this.collection, 'add', function (model) {\r\n        !!model.get('required') && this._showRequiredSwitch();\r\n      });\r\n      this.listenTo(this.collection, 'remove', function (model) {\r\n        if (!this.isRequiredCatPresent()) {\r\n          this._hideRequiredSwitch();\r\n        }\r\n      });\r\n\r\n      this.listenTo(this, 'metadata:schema:updated', function (model) {\r\n        if (!this.isRequiredCatPresent()) {\r\n          this._hideRequiredSwitch();\r\n        } else {\r\n          this._showRequiredSwitch();\r\n        }\r\n      }, this);\r\n    },\r\n\r\n    templateHelpers: function () {\r\n      return {\r\n        onlyRequiredFieldsLabel: lang.onlyRequiredFieldsLabel,\r\n        requiredFieldsLabelId: this.requiredFieldsLabelId\r\n      };\r\n    },\r\n\r\n    _changeTabTitle: function (args) {\r\n      this.$(this.ui.tabContentsHeaderTitle).html(args);\r\n    },\r\n\r\n    onRender: function () {\r\n      this.requiredFieldSwitchModel = new Backbone.Model(\r\n          {data: !!this.options.node.collection.requireSwitched});\r\n      var self = this;\r\n\r\n      //fix for grunt out-release\r\n      require(['csui/controls/form/fields/booleanfield.view'], function (BooleanFieldView) {\r\n        self.requiredFieldSwitchView = new BooleanFieldView({\r\n          mode: 'writeonly',\r\n          model: self.requiredFieldSwitchModel,\r\n          labelId: self.requiredFieldsLabelId\r\n        });\r\n        self.requiredFieldSwitchView.render();\r\n        self.listenTo(self.requiredFieldSwitchView, 'field:changed', function (event) {  //toggle\r\n          // required fields\r\n          var objPubSubId = 'pubsub:tab:contents:header:view:switch:' + self.pubsubPostFix;\r\n\r\n          PubSub.trigger(objPubSubId, {on: event.fieldvalue});\r\n          if (!!self.options.node.collection) {\r\n            self.options.node.collection.requireSwitched = event.fieldvalue;\r\n          }\r\n        });\r\n        self.$('.required-fields-switch').append(self.requiredFieldSwitchView.$el);\r\n        if (self.isRequiredCatPresent()) {\r\n          self._showRequiredSwitch();\r\n        }\r\n\r\n        PubSub.off('pubsub:header:rightbar:view:change:switch:status');\r\n        self.listenTo(PubSub, 'pubsub:header:rightbar:view:change:switch:status', function (reset) {\r\n          if (!!reset) {\r\n            if (!!self.requiredFieldSwitchView.curVal) {\r\n              self.requiredFieldSwitchView.$el.click();\r\n            }\r\n          } else if (!!self.requiredFieldSwitchModel &&\r\n                     (self.requiredFieldSwitchModel.get('data') !== undefined &&\r\n                     !self.requiredFieldSwitchModel.get('data')) && !!self.options.node &&\r\n                     !!self.options.node.collection &&\r\n                     !!self.options.node.collection.requireSwitched) {\r\n            self.requiredFieldSwitchView.$el.click();\r\n          }\r\n        });\r\n\r\n      });\r\n    },\r\n\r\n    currentlyFocusedElement: function (event) {\r\n      if (!this.ui.requiredSwitchEle.hasClass('binf-hidden') && this.requiredFieldSwitchView) {\r\n        return $(this.ui.requiredSwitchIcon.find(\":input\"));\r\n      } else {\r\n        return undefined;\r\n      }\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 32 || event.keyCode === 13) {\r\n        // space key(32) or enter key(13)\r\n        if (!this.ui.requiredSwitchEle.hasClass('binf-hidden') && this.requiredFieldSwitchView) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          // need timeout to overcome FireFox space press\r\n          setTimeout(_.bind(function () {\r\n            $(target).click();\r\n          }, this), 200);\r\n        }\r\n      }\r\n      return undefined;\r\n    },\r\n\r\n    // this method is triggered by keyboard\r\n    onClickRequiredIconDiv: function (event) {\r\n      this.requiredFieldSwitchView.onClickWriteField(event);\r\n    },\r\n\r\n    _hideRequiredSwitch: function () {\r\n      this.ui.tabContentsHeaderTitle.addClass('csui-tab-contents-header-title-full-width');\r\n      this.ui.requiredSwitchEle.addClass('binf-hidden');\r\n      //turn off if no required cat is present\r\n      !!this.requiredFieldSwitchView && !!this.requiredFieldSwitchView.getValue() &&\r\n      this.requiredFieldSwitchView.ui.flagWriteField.trigger('click');\r\n    },\r\n\r\n    _showRequiredSwitch: function () {\r\n      this.ui.tabContentsHeaderTitle.removeClass('csui-tab-contents-header-title-full-width');\r\n      this.ui.requiredSwitchEle.removeClass('binf-hidden');\r\n    },\r\n\r\n    isRequiredCatPresent: function () {\r\n      if (!!this.options.hideRequiredFieldsSwitch) {\r\n        // Permanently hide \"required\" switch\r\n        return false;\r\n      }\r\n      var isRequiredCatPresent = false,\r\n          i                    = 0;\r\n      for (; !isRequiredCatPresent && i < this.collection.models.length; i++) {\r\n        isRequiredCatPresent = this.collection.models[i].get('required') === true;\r\n      }\r\n      return isRequiredCatPresent;\r\n    }\r\n  });\r\n\r\n  return TabContentsHeaderView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.properties.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/url', 'csui/utils/base', 'csui/controls/tab.panel/tab.panel.view',\r\n  'csui/controls/tab.panel/tab.links.ext.view',\r\n  'csui/controls/tab.panel/tab.links.ext.scroll.mixin',\r\n  'csui/models/form', 'csui/controls/form/form.view',\r\n  'csui/widgets/metadata/property.panels/categories/impl/category.form.view',\r\n  'csui/models/appliedcategories', 'csui/widgets/metadata/impl/metadata.forms',\r\n  'csui/dialogs/modal.alert/modal.alert', 'csui/controls/progressblocker/blocker',\r\n  'csui/models/version', 'csui/widgets/metadata/impl/metadata.utils', 'i18n',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/widgets/metadata/general.form.fields/general.form.field.behavior',\r\n  'csui/widgets/metadata/general.action.fields/general.action.field.behavior',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang', 'csui/widgets/metadata/metadata.property.panels',\r\n  'csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view',\r\n  'csui/widgets/metadata/add.properties.menuitems',\r\n  'csui/widgets/metadata/add.properties.menuitems.mask',\r\n  'csui/widgets/metadata/impl/tab.contents.header/tab.contents.header.view',\r\n  'csui/controls/form/pub.sub',\r\n  'csui/widgets/metadata/impl/metadata.tabcontentcollection.view',\r\n  'csui/utils/deepClone/deepClone'\r\n], function (_, $, Backbone, Marionette, Url, base, TabPanelView, TabLinkCollectionViewExt,\r\n    TabLinksScrollMixin, FormModel, FormView, CategoryFormView, AppliedCategoryCollection,\r\n    MetadataFormCollection, ModalAlert, BlockingView, VersionModel, MetadataUtils, i18n,\r\n    PerfectScrollingBehavior, GeneralFormFieldBehavior, GeneralActionFieldBehavior, lang,\r\n    metadataPropertyPanels,\r\n    AddPropertiesDropdownMenuView, toolbarItems, AddPropertiesMenuItemsMask,\r\n    TabContentHeaderView, PubSub, MetadataTabContentCollectionView) {\r\n\r\n  // Private and local collection defined and used by Metadata Properties View Class\r\n  var AppliedCategoryActionsCollection = AppliedCategoryCollection.extend({\r\n\r\n    constructor: function AppliedCategoryActionsCollection(attributes, options) {\r\n      AppliedCategoryCollection.prototype.constructor.apply(this, arguments);\r\n      this.options = options || {};\r\n      _.defaults(this.options, {urlResource: ''});\r\n    },\r\n\r\n    url: function () {\r\n      return Url.combine(this.node.urlBase(), this.options.urlResource);\r\n    },\r\n\r\n    fetch: function () {\r\n      //\r\n      // 1. with document version, the is no categories/actions call but luckily everything is\r\n      // read-ony in UX specs for this release of the UI\r\n      //\r\n      // 2. with add item, the object has not been created yet on the server\r\n      //\r\n      if (this.node instanceof VersionModel ||\r\n          this.node.get(\"id\") === undefined || this.options.action) {\r\n        this.fetching = false;\r\n        this.fetched = true;\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      return AppliedCategoryCollection.prototype.fetch.apply(this, arguments);\r\n    },\r\n\r\n    parse: function () {\r\n      // with document version, the is no categories/actions call but luckily everything is\r\n      // read-ony in UX specs for this release of the UI\r\n      if (this.node instanceof VersionModel) {\r\n        return {};\r\n      }\r\n      // with add item, the object has not been created yet on the server\r\n      if (this.node.get(\"id\") === undefined || this.options.action) {\r\n        return {categories_add: \"dummy value\"};\r\n      }\r\n      return AppliedCategoryCollection.prototype.parse.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  //\r\n  // Public: Metadata Properties View Class\r\n  // Description: provides the view of general and other metadata properties (such as categories,\r\n  // etc.) of a node.  It allows for navigation, editing and getting form values of different types\r\n  // of metadata.\r\n  //\r\n  var MetadataPropertiesViewImpl = TabPanelView.extend({\r\n\r\n    className: function() {\r\n      var classNames = (base.isTouchBrowser() ? 'cs-touch-browser ' : '') + 'cs-metadata-properties' +\r\n                       ' binf-panel binf-panel-default';\r\n      classNames += !!this.options && !!this.options.topAlignLabel ? ' csui-top-align-label' : '';\r\n      return classNames;\r\n    },\r\n\r\n    rtlEnabled: i18n.settings.rtl,\r\n\r\n    contentView: function (model) {\r\n      var panel = _.findWhere(this._propertyPanels, {model: model});\r\n      if (panel) {\r\n        return panel.contentView || FormView;\r\n      }\r\n      if (model.get('role_name') === 'categories') {\r\n        return CategoryFormView;\r\n      }\r\n      return FormView;\r\n    },\r\n\r\n    contentViewOptions: function (model) {\r\n      var options = {\r\n            context: this.options.context,\r\n            node: this.options.node,\r\n            mode: this.options.formMode,\r\n            fetchedModels: this.allForms,\r\n            displayedModels: this.collection,\r\n            originatingView: this,\r\n            layoutMode: 'doubleCol',\r\n            metadataView: this.options.metadataView,\r\n            generalFormFieldDescriptors: this._generalFormFieldDescriptors,\r\n            generalActionFieldDescriptors: this._generalActionFieldDescriptors\r\n          },\r\n          panel   = _.findWhere(this._propertyPanels, {model: model});\r\n      if (panel) {\r\n        _.extend(options, panel.contentViewOptions);\r\n      }\r\n      return options;\r\n    },\r\n\r\n    // specific implementation for TabableRegionBehavior\r\n    isTabable: function () {\r\n      if (this.options.notTabableRegion === true) {\r\n        return false;\r\n      }\r\n      return true;  // this view can be reached by tab\r\n    },\r\n\r\n    constructor: function MetadataPropertiesViewImpl(options) {\r\n      options || (options = {});\r\n      var delete_icon;\r\n\r\n      if (base.isTouchBrowser()) {\r\n        delete_icon = 'category_delete-touch-browser';\r\n      } else {\r\n        delete_icon = 'category_delete';\r\n      }\r\n\r\n      _.defaults(options, {\r\n        tabType: 'binf-nav-pills',\r\n        mode: 'spy',\r\n        extraScrollTopOffset: 3,\r\n        formMode: 'update',\r\n        toolbar: true,\r\n        toolbarItems: toolbarItems,\r\n        delete_icon: delete_icon,\r\n        delete_tooltip: lang.removeCategoryTooltip,\r\n        contentView: this.getContentView,\r\n        TabLinkCollectionViewClass: TabLinkCollectionViewExt,\r\n        TabContentCollectionViewClass: MetadataTabContentCollectionView,\r\n        searchTabContentForTabableElements: true,\r\n        tabContentAccSelectors: 'a[href], area[href], input:not([disabled]),' +\r\n                                ' select:not([disabled]), textarea:not([disabled]),' +\r\n                                ' button:not([disabled]), iframe, object, embed,' +\r\n                                ' *[tabindex], *[data-cstabindex], *[contenteditable]'\r\n      });\r\n\r\n      if (!options.toolbarItemsMask) {\r\n        options.toolbarItemsMask = new AddPropertiesMenuItemsMask();\r\n      }\r\n\r\n      this.behaviors = _.extend({\r\n        PerfectScrolling: {\r\n          behaviorClass: PerfectScrollingBehavior,\r\n          contentParent: '> .binf-tab-content',\r\n          scrollXMarginOffset: 30,\r\n          // like bottom padding of container, otherwise scrollbar is shown always\r\n          scrollYMarginOffset: 15\r\n        }\r\n      }, this.behaviors);\r\n\r\n      if (options.collection) {\r\n        this.allForms = options.collection;\r\n      } else {\r\n        this.allForms = new MetadataFormCollection(undefined, {\r\n          node: options.node,\r\n          connector: options.node.connector,\r\n          container: options.container,\r\n          action: options.action,\r\n          inheritance: options.inheritance,\r\n          autoreset: true,\r\n          formCollection: options.formCollection\r\n        });\r\n        // Prepare an empty collection to be populated by tabs/forms later\r\n        options.collection = new Backbone.Collection();\r\n      }\r\n\r\n      // have collection to keep track of newly added categories\r\n      if (options.node.newCategories === undefined) {\r\n        options.node.newCategories = new Backbone.Collection();\r\n      }\r\n      if (options.node.removedCategories === undefined) {\r\n        options.node.removedCategories = [];\r\n      }\r\n\r\n      TabPanelView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.widths = [];\r\n\r\n      if (this.options.blockingParentView) {\r\n        BlockingView.delegate(this, this.options.blockingParentView);\r\n      } else {\r\n        BlockingView.imbue(this);\r\n      }\r\n\r\n      PubSub.off('pubsub:tab:contents:panel:textarea:scrollupdate');\r\n      this.listenTo(PubSub, 'pubsub:tab:contents:panel:textarea:scrollupdate',\r\n          this._updateToTextAreaScrollbar);\r\n\r\n      this.listenTo(this.allForms, \"request\", this.blockActions)\r\n          .listenTo(this.allForms, \"request\", this._checkFormFetching)\r\n          .listenTo(this.allForms, \"sync\", this._syncForms)\r\n          .listenTo(this.allForms, \"sync\", this.unblockActions)\r\n          .listenTo(this.allForms, \"destroy\", this.unblockActions)\r\n          .listenTo(this.allForms, \"error\", this.unblockActions)\r\n          // If tab panel re-renders itself whe the tab collection changes, it\r\n          // has to prevent tab links and tab content from doing the same,\r\n          // because these two views are destroyed during tab panel re-rendering\r\n          .listenTo(this.collection, \"reset\", this.render)\r\n          .listenTo(options.node, 'change:id', function () {\r\n            if (this.options.formMode !== 'create') {\r\n              this._fetchForms();\r\n            }\r\n          }).listenTo(this, 'reset:switch', this._resetRequiredSwitchView)\r\n          .listenTo(this, \"update:button\", _.bind(function (flag) {\r\n            this.options.metadataView.trigger(\"update:button\", {overlay: flag});\r\n          }, this));\r\n\r\n      // If the collection has been fetched before passing it to the view\r\n      // and the operation is still ongoing, turn on the blocking view right\r\n      // away and wait for the finishing event to turn it off\r\n      if (this.allForms.fetching) {\r\n        this.blockActions();\r\n      }\r\n\r\n      $(window).bind('resize', {view: this}, this._onWindowResize);\r\n      $(window).bind('resize.tableview', {view: this}, this._onWindowResize);\r\n\r\n      // Perform after-rendering steps after blocking view renders inside\r\n      // into this view; it registers for the render event earlier\r\n      this.listenTo(this, 'render', this.onRendered);\r\n      this.listenTo(Backbone, 'metadata:schema:updated', function (model) {\r\n        this.resolveHasRequiredFields(model);\r\n        this.has_required_fields = this.collection\r\n            .filter(\r\n                function (model) {\r\n                  return model.get('required') === true;\r\n                });\r\n        this.tabLinks.trigger('metadata:schema:updated', model);\r\n        this.tabContentHeader.trigger('metadata:schema:updated', model);\r\n      }, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      $(window).unbind('resize', this._onWindowResize);\r\n      $(window).unbind('resize.tableview', this._onWindowResize);\r\n\r\n      if (this.addPropertiesView) {\r\n        this.cancelEventsToViewsPropagation(this.addPropertiesView);\r\n        this.addPropertiesView.destroy();\r\n      }\r\n\r\n      if (this.contentHeaderRegion) {\r\n        this.contentHeaderRegion.empty();\r\n      }\r\n    },\r\n\r\n    _updateScrollbar: function () {\r\n      this.trigger('update:scrollbar');\r\n      this.$(this.behaviors.PerfectScrolling.contentParent).animate({scrollTop: 0}, \"fast\");\r\n    },\r\n\r\n    _updateToTextAreaScrollbar: function (data) {\r\n      this.trigger('update:scrollbar');\r\n      var scrollTop = data.$el.offset().top -\r\n                      this.$(this.behaviors.PerfectScrolling.contentParent).offset().top;\r\n      if (this.$(this.behaviors.PerfectScrolling.contentParent).scrollTop() > 0) {\r\n        this.$(this.behaviors.PerfectScrolling.contentParent).animate({scrollTop: scrollTop},\r\n            \"fast\");\r\n      }\r\n    },\r\n\r\n    _activateSelectedPropertyTab: function () {\r\n      var selectedProperty = this.options.selectedProperty;\r\n      if (selectedProperty && selectedProperty instanceof Backbone.Model) {\r\n        if (this.collection && this.collection.length > 0) {\r\n          var id = selectedProperty.get('id');  // primary check\r\n          var title = selectedProperty.get('title');  // fallback check\r\n          var i, model, matchIndex = -1;\r\n          for (i = 0; i < this.collection.length; i++) {\r\n            model = this.collection.at(i);\r\n            if (id === model.get('id') || title === model.get('title')) {\r\n              matchIndex = i;\r\n              break;\r\n            }\r\n          }\r\n          if (matchIndex !== -1) {\r\n            this.options.activeTab.set(\"tabIndex\", matchIndex);\r\n            this.tabLinks.children.findByIndex(matchIndex).activate();\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    // public\r\n    render: function () {\r\n      // fetch forms if not done or not failed already\r\n      var dataFetched = true;\r\n      if (!this.allForms.fetched && !this.allForms.error) {\r\n        dataFetched = false;\r\n        if (!this._fetchingForms) {\r\n          this._fetchForms();\r\n        }\r\n      }\r\n      if (dataFetched === false || this._fetchingForms) {\r\n        // wait until data is there\r\n        return this;\r\n      }\r\n\r\n      if (this.collection.length === 1) {\r\n        // only one form given -> remove title\r\n        var singleFormModel = this.collection.first(),\r\n            schema          = _.clone(singleFormModel.get('schema'));\r\n        schema.title = '';\r\n        singleFormModel.set('schema', schema);\r\n      }\r\n\r\n      var self = this;\r\n      this.collection.each(function (model, index) {\r\n        var has_required_fields = self.resolveHasRequiredFields.call(self, model);\r\n        if (has_required_fields) {\r\n          self.hasRequiredField = true;\r\n        }\r\n      });\r\n      _.extend(this, {\r\n        _: _\r\n      });\r\n      // data available -> render\r\n      TabPanelView.prototype.render.apply(this);\r\n      // create add properties + dropdown toolbar\r\n      this._createAddPropertiesView();\r\n      this._initializeOthers();\r\n      return this;\r\n    },\r\n\r\n    resolveHasRequiredFields: function (model) {\r\n      var metadataUtils = new MetadataUtils();\r\n      var has_required_fields = metadataUtils.AlpacaFormOptionsSchemaHaveRequiredFields(\r\n          model.get('options'), model.get('schema'), model.get('id')\r\n      );\r\n      model.set('required', has_required_fields);\r\n      return has_required_fields;\r\n    },\r\n\r\n    onRendered: function () {\r\n      this._setTablinksAttributes();\r\n      // work around for the dialog fade-in delay\r\n      // delay this call a bit since the initial dialog fade in makes the tab to be hidden\r\n      // calling _setTabLinksAttributes() the second time here fixes the dialog fade-in delay\r\n      // but does not have any effect if the first call already works\r\n      setTimeout(_.bind(this._setTablinksAttributes, this), 300);\r\n\r\n      // If tab panel re-renders itself whe the tab collection changes, it\r\n      // has to prevent tab links and tab content from doing the same,\r\n      // because these two views are destroyed during tab panel re-rendering\r\n      this.tabLinks.stopListening(this.collection, 'reset');\r\n      this.tabContent.stopListening(this.collection, 'reset');\r\n      if (this.tabContentHeader) { // clean-up completely tab content's header if it not yet.\r\n        this.tabContentHeader.destroy();\r\n        this.$el.find(\".csui-tab-contents-header-wrapper\").remove();\r\n      }\r\n\r\n      this.listenTo(this.tabLinks, 'childview:delete:tab', _.bind(this._onDeleteCategory, this));\r\n\r\n      // Alpaca slow rendering work-around: hide all views then block and\r\n      // wait until all forms are rendered then show view and unblock\r\n      this.tabLinks.$el.addClass('binf-hidden');\r\n      this.tabContent.$el.addClass('binf-hidden');\r\n      this.blockActions();\r\n      this.updateTitle = true;\r\n      var allFormsRendered = [],\r\n          self             = this;\r\n      this.tabContent.children.each(_.bind(function (childView) {\r\n        var formRendered = $.Deferred();\r\n        allFormsRendered.push(formRendered.promise());\r\n        var childViewContent = childView.content;\r\n        if (childViewContent instanceof FormView && !childViewContent.isRenderFinished()) {\r\n          this.listenTo(childViewContent, 'render:form', function (childViewContent) {\r\n            var formHtmlRegion = !!childViewContent.$el.find(\".cs-form-singlecolumn\") ?\r\n                                 childViewContent.$el.find(\".cs-form-singlecolumn\") :\r\n                                 childViewContent.$el.find(\".cs-form-doublecolumn\");\r\n            if (!!formHtmlRegion && formHtmlRegion.length > 0) {\r\n              if (!!formHtmlRegion.html()) {\r\n                formRendered.resolve();\r\n              }\r\n            } else {\r\n              formRendered.resolve();\r\n            }\r\n          });\r\n        } else {\r\n          formRendered.resolve();\r\n        }\r\n      }, this));\r\n      $.when.apply($, allFormsRendered).done(function () {\r\n        self.unblockActions();\r\n        self.tabLinks.$el.removeClass('binf-hidden');\r\n\r\n        // Begin: tab contents header which contains tab title and required field view.\r\n        var showStickyHeader = !(!!self.options.hideStickyHeader);\r\n        if (showStickyHeader) {\r\n          var objPubSubId = (self.options.node instanceof VersionModel ? 'v' : 'p');\r\n          objPubSubId = 'pubsub:tab:contents:header:view:switch:' + objPubSubId +\r\n                        self.options.node.get('id');\r\n          PubSub.off(objPubSubId);\r\n          self.listenTo(PubSub, objPubSubId, self._onRequiredSwitch);\r\n\r\n          self.tabContent.$el.before(\"<div class='csui-tab-contents-header-wrapper'></div>\");\r\n          self.contentHeaderRegion = new Marionette.Region({\r\n            el: self.$el.find('.csui-tab-contents-header-wrapper')\r\n          });\r\n          self.tabContentHeader = new TabContentHeaderView(self.options);\r\n          self.contentHeaderRegion.show(self.tabContentHeader);\r\n        }\r\n        // End: tab contents header which contains tab title and required field view.\r\n\r\n        if (!!self.tabContentHeader && !!self.options.node.collection.requireSwitched &&\r\n            !!self.hasRequiredField) {\r\n          self._hideNotRequiredFormFields(true);\r\n        }\r\n        self.tabContent.$el.removeClass('binf-hidden');\r\n\r\n        // TODO: Find out, how the rightToolbar is added from outside;\r\n        // it does not happen if the form collection is empty\r\n        if (self.addPropertiesView && self.rightToolbar) {\r\n          var apv = self.addPropertiesView.render();\r\n          Marionette.triggerMethodOn(apv, 'before:show', apv, self);\r\n          self.rightToolbar.append(apv.el);\r\n          Marionette.triggerMethodOn(apv, 'show', apv, self);\r\n          self.allFormsRendered = true;\r\n        }\r\n\r\n        // find out the first visible tab and make it active.\r\n        // Iterate over tab colleciton instead of childer where order is not guaranteed.\r\n        var firstVisibleTabLink,\r\n            firstVisibleTab = self.tabLinks.collection.find(function (tabModel) {\r\n              var tabLink = self.tabLinks.children.findByModel(tabModel);\r\n              return !tabLink.$el.hasClass('binf-hidden');\r\n            });\r\n        if (firstVisibleTab &&\r\n            !(firstVisibleTabLink = self.tabLinks.children.findByModel(\r\n                firstVisibleTab)).isActive()) {\r\n          firstVisibleTabLink.activate();\r\n        }\r\n\r\n        self._initializeOthers();\r\n        self.triggerMethod('render:forms', this);\r\n\r\n        // iPad needs a little timeOut\r\n        setTimeout(function () {\r\n          self._computeTablinkWidth();\r\n          self._enableToolbarState();\r\n        }, 300);\r\n\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n\r\n        if (self.options.formMode !== \"create\") {\r\n          self.setFocus();\r\n        }\r\n        self.trigger('update:scrollbar');\r\n        if (self.updateTitle) {\r\n          var objPubSubTabId = (self.options.node instanceof VersionModel ? 'v' : 'p') +\r\n                               self.options.node.get('id');\r\n          objPubSubTabId = 'pubsub:tab:contents:header:view:change:tab:title:' +\r\n                           objPubSubTabId;\r\n          PubSub.trigger(objPubSubTabId, firstVisibleTabLink.el.innerText);\r\n        }\r\n\r\n        // check options.selectedProperty and activate the tab if needed\r\n        self._activateSelectedPropertyTab();\r\n      });\r\n\r\n      if (this.$el && !this.$el.is(\":visible\")) {\r\n        this.updateTitle = false;\r\n      }\r\n      //Getting metadataItemNameView from metadataHeaderView presented in options.metadataView\r\n      //to set tabindex for Toggle Icon\r\n      this.options.metadataView && this.options.metadataView.metadataHeaderView &&\r\n      this.options.metadataView.metadataHeaderView.metadataItemNameView.setToggleIconTabIndex();\r\n    },\r\n\r\n    onShow: function () {\r\n    },\r\n\r\n    setFocus: function () {\r\n      // TODO: check if we want to have this\r\n      // set focus to first form\r\n      //var firstTabContentView = this.tabContent.children[0];\r\n      //if( firstFormView) {\r\n      //  firstTabContentView.content.setFocus();\r\n      //}\r\n    },\r\n\r\n    _computeTablinkWidth: function () {\r\n      var tabLinksBar = this.$el.find('.tab-links-bar');\r\n      var tabLinks = tabLinksBar && tabLinksBar.find('ul > li');\r\n      tabLinksBar && tabLinksBar.removeClass('wide-tablink very-wide-tablink');\r\n\r\n      // compute only when there is more than one tab (e.g. General + cats/rms/etc.)\r\n      if (tabLinksBar && tabLinksBar.length > 0 && tabLinks && tabLinks.length > 1) {\r\n        var tabLinksBarWidth = $(tabLinksBar[0]).width();\r\n        var totalTablinksWidth = 0;\r\n        var i, numTabs = 0;\r\n        for (i = 0; i < tabLinks.length; i++) {\r\n          var $tabLink = $(tabLinks[i]);\r\n          if (!($tabLink.hasClass('hidden-by-switch'))) {\r\n            totalTablinksWidth += $tabLink.width();\r\n            numTabs++;\r\n          }\r\n        }\r\n        var oneTablinkWidth = numTabs > 0 ? (totalTablinksWidth / numTabs) : $(tabLinks[0]).width();\r\n\r\n        // if this total width check values are still smaller than the tabLinks bar width,\r\n        // then increase the tabLink width\r\n        var totalWidthCheck1 = totalTablinksWidth * 2;  // twice smaller\r\n        var totalWidthCheck2 = totalTablinksWidth + (1.3 * oneTablinkWidth);  // a little smaller\r\n        if (tabLinksBarWidth > totalWidthCheck1) {\r\n          tabLinksBar.addClass('very-wide-tablink');\r\n        } else if (tabLinksBarWidth > totalWidthCheck2) {\r\n          tabLinksBar.addClass('wide-tablink');\r\n        } else {\r\n          tabLinksBar.removeClass('wide-tablink very-wide-tablink');\r\n        }\r\n      }\r\n    },\r\n\r\n    onPanelActivated: function () {\r\n      // delay this a bit since the fade-in may make the tabs to be hidden\r\n      setTimeout(_.bind(function () {\r\n        this._setTablinksAttributes();\r\n        this._enableToolbarState();\r\n      }, this), 300);\r\n    },\r\n\r\n    // public: validate all Alpaca forms\r\n    validateForms: function () {\r\n      var allFormsValid = true;\r\n      if (!!this.allFormsRendered) {\r\n        this.tabContent.children.each(function (tab) {\r\n          var isCurrentFormValid = tab.content.validate();\r\n          allFormsValid = allFormsValid && isCurrentFormValid;\r\n        });\r\n        allFormsValid ? this._hideValidationError() : this._showValidationError();\r\n        return allFormsValid;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    // public: get values from all Alpaca forms\r\n    getFormsValues: function () {\r\n      var formValues = {},\r\n          formFieldValues, formFieldRoles, roles, role;\r\n\r\n      this.tabContent.children.each(function (tab) {\r\n        var values   = tab.content.getValues(),\r\n            roleName = tab.content.model.get(\"role_name\"),\r\n            category, catId;\r\n\r\n        if (values) {\r\n          if (roleName) {\r\n            roles = formValues.roles || (formValues.roles = {});\r\n            role = roles[roleName] || (roles[roleName] = {});\r\n            if (roleName === 'categories') {\r\n              // For categories, merge the properties to the\r\n              // roles.categories.<category_id> object\r\n              catId = tab.model.get(\"id\").toString();\r\n              category = role[catId] || (role[catId] = {});\r\n              // when attributes are not set, the server deletes\r\n              // the category unless it is set to null\r\n              if (_.isEmpty(values)) {\r\n                category = null;\r\n              } else {\r\n                _.extend(category, values);\r\n              }\r\n            } else {\r\n              // With a role defined, merge the properties to the\r\n              // roles.<role_name> object\r\n              _.extend(role, values);\r\n            }\r\n          } else {\r\n            // With no role defined, merge the properties to the root\r\n            // object literal with the general properties\r\n            _.extend(formValues, values);\r\n          }\r\n        }\r\n      });\r\n\r\n      // add the deleted categories\r\n      if (this.options.node.removedCategories.length > 0) {\r\n        roles = formValues.roles || (formValues.roles = {});\r\n        role = roles['categories'] || (roles['categories'] = {});\r\n        _.each(this.options.node.removedCategories, function (removedCatId) {\r\n          role[removedCatId] || (role[removedCatId] = {});\r\n        });\r\n      }\r\n\r\n      var generalTab = this.tabContent.children.find(function (tab) {\r\n        return !!tab.content.getGeneralFormFieldValues;\r\n      });\r\n      if (generalTab) {\r\n        formFieldValues = generalTab.content.getGeneralFormFieldValues();\r\n        // Do not make a full deep merge, but ensure, that we merge not\r\n        // only properties on the root (general) level, but if there are\r\n        // roles available, also on every role level\r\n        formFieldRoles = formFieldValues.roles || {};\r\n        delete formFieldValues.roles;\r\n        _.extend(formValues, formFieldValues);\r\n        _.each(_.keys(formFieldRoles), function (roleName) {\r\n          roles = formValues.roles || (formValues.roles = {});\r\n          role = roles[roleName] || (roles[roleName] = {});\r\n          _.extend(role, formFieldRoles[roleName]);\r\n        });\r\n      }\r\n\r\n      return formValues;\r\n    },\r\n\r\n    _addValidationErrorElement: function () {\r\n      if (this.$el.find('.metadata-validation-error').length === 0) {\r\n        this.tabLinks.$el.after('<div class=\"metadata-validation-error\"></div>');\r\n        this.validationErrorElem = $(this.$el.find('.metadata-validation-error')[0]);\r\n        this.validationErrorElem.append(\r\n            '<span class=\"icon notification_error cs-close-error-icon\" alt=\"' +\r\n            lang.hideValidationErrorMessageIconTooltip + '\" title=\"' +\r\n            lang.hideValidationErrorMessageIconTooltip + '\"></span>');\r\n        this.validationErrorElem.append('<span class=\"validation-error-message\">' +\r\n                                        lang.formValidationErrorMessage + '</span>');\r\n        this.validationErrorElem.hide();\r\n\r\n        var closeIcon = $(this.$el.find('.metadata-validation-error .cs-close-error-icon')[0]);\r\n        closeIcon && closeIcon.on('click', _.bind(function (event) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          this._hideValidationError();\r\n        }, this));\r\n      }\r\n    },\r\n\r\n    _showValidationError: function () {\r\n      if (this.validationErrorElem === undefined) {\r\n        this._addValidationErrorElement();\r\n      }\r\n      if (this.tabContent.$el.find('.alpaca-message-notOptional').length > 0) {\r\n        this.tabContent && this.tabContent.$el.addClass('show-validation-error');\r\n        this.contentHeaderRegion && this.contentHeaderRegion.$el.addClass('show-validation-error');\r\n        this.validationErrorElem && this.validationErrorElem.show();\r\n      } else {\r\n        this._hideValidationError();\r\n      }\r\n    },\r\n\r\n    _hideValidationError: function () {\r\n      this.tabContent && this.tabContent.$el.removeClass('show-validation-error');\r\n      this.contentHeaderRegion && this.contentHeaderRegion.$el.removeClass('show-validation-error');\r\n      this.validationErrorElem && this.validationErrorElem.hide();\r\n    },\r\n\r\n    _clearValidationError: function () {\r\n      this.tabContent && this.tabContent.$el.removeClass('show-validation-error');\r\n      this.contentHeaderRegion && this.contentHeaderRegion.$el.removeClass('show-validation-error');\r\n      if (this.validationErrorElem) {\r\n        this.validationErrorElem.remove();\r\n        delete this.validationErrorElem;\r\n      }\r\n    },\r\n\r\n    _checkFormFetching: function () {\r\n      this._fetchingForms = true;\r\n    },\r\n\r\n    _fetchForms: function () {\r\n      return this.allForms.fetch();\r\n    },\r\n\r\n    _syncForms: function () {\r\n      var self = this;\r\n      this.blockActions();\r\n      this._clearValidationError();\r\n      return this._loadPanels()\r\n          .then(_.bind(this._loadGeneralFormFields, this)).then(\r\n              _.bind(this._loadGeneralActionFields, this))\r\n          .always(function () {\r\n            self.unblockActions();\r\n            self._fetchingForms = false;\r\n          })\r\n          .then(function () {\r\n            var panelModels = _.pluck(self._propertyPanels, 'model'),\r\n                models      = self.allForms.where({role_name: 'categories'});\r\n            self.panelModelsLength = panelModels.length;\r\n            // add back the newly added categories  that have not been saved to server\r\n            if (self.options.node.newCategories.models.length > 0) {\r\n              models = _.union(models, self.options.node.newCategories.models);\r\n            }\r\n            var categoryModels = _.sortBy(models,\r\n                function (model) {return model.attributes.title.toLowerCase()});\r\n            models = panelModels.concat(categoryModels);\r\n            self._normalizeModels(models);\r\n            self.collection.reset(models);\r\n            // check categories actions\r\n            self._checkCategoriesActions();\r\n          })\r\n          .fail(function (request) {\r\n            var error = new base.Error(request);\r\n            ModalAlert.showError(error.message, lang.getPropertyPanelsFailTitle);\r\n          });\r\n    },\r\n\r\n    _loadPanels: function () {\r\n      var self = this,\r\n          methodName, parameters;\r\n      if (this.options.action === 'create') {\r\n        methodName = 'getPropertyPanelsForCreate';\r\n        parameters = [{forms: this.allForms}];\r\n      } else if (this.options.action === 'copy') {\r\n        methodName = 'getPropertyPanelsForCopy';\r\n        parameters = [{forms: this.allForms}];\r\n      } else if (this.options.action === 'move') {\r\n        methodName = 'getPropertyPanelsForMove';\r\n        parameters = [{forms: this.allForms}];\r\n      } else { // update\r\n        methodName = 'getPropertyPanels';\r\n        // There are no pre-fetched forms for the update action;\r\n        // the 'v1/forms/info' has been abandoned, unfortunately,\r\n        // thus every panel has to fetch its own model\r\n      }\r\n      var promises = metadataPropertyPanels.chain()\r\n          .map(function (panel) {\r\n            var Controller        = panel.get('controller'),\r\n                controllerOptions = panel.get('controllerOptions'),\r\n                controller        = new Controller(_.extend({\r\n                  context: self.options.context,\r\n                  model: self.options.node\r\n                }, controllerOptions)),\r\n                method            = controller[methodName];\r\n            return method && method.apply(controller, parameters);\r\n          })\r\n          .compact()\r\n          .value();\r\n      return $.when\r\n          .apply($, promises)\r\n          .then(function () {\r\n            self._propertyPanels = _.flatten(arguments);\r\n          });\r\n    },\r\n\r\n    _loadGeneralFormFields: function () {\r\n      var self = this;\r\n      return GeneralFormFieldBehavior.getFieldDescriptors({\r\n        context: this.options.context,\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        forms: this.allForms\r\n      }).then(function (fieldDescriptors) {\r\n        self._generalFormFieldDescriptors = fieldDescriptors;\r\n      });\r\n    },\r\n\r\n    _loadGeneralActionFields: function () {\r\n      var self = this;\r\n      return GeneralActionFieldBehavior.getFieldDescriptors({\r\n        context: this.options.context,\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        forms: this.allForms\r\n      }).then(function (fieldDescriptors) {\r\n        self._generalActionFieldDescriptors = fieldDescriptors;\r\n      });\r\n    },\r\n\r\n    _normalizeModels: function (models) {\r\n      _.each(models, function (model) {\r\n        // If the view shows a form and the form has a title, which is\r\n        // not empty, this title should be used for the tab too\r\n        if (model instanceof FormModel) {\r\n          var schema = model.get('schema');\r\n          if (schema && schema.title) {\r\n            model.set('title', schema.title);\r\n          }\r\n        }\r\n        // Make sure, that the model has always an ID.  The scroll-spy\r\n        // used within the tab control puts these IDs to the a@href on\r\n        // the  tab links.  It could not recognize the particular link\r\n        // to navigate to otherwise.\r\n        if (model.get('id') == null) {\r\n          model.set('id', model.cid);\r\n        }\r\n        // When models are added to a collection, their model.collection\r\n        // property will not be updated, if it was already set - if they\r\n        // were already added to some other collection earlier.  Here,\r\n        // we're creating a new collection of property panel models, which\r\n        // should own them - they have to be removed from their previous\r\n        // collections, which fetched them.\r\n        if (model.collection) {\r\n          model.collection.remove(model);\r\n        }\r\n      });\r\n    },\r\n\r\n    // private\r\n    _checkCategoriesActions: function () {\r\n      // get category actions\r\n      // talking to the server developer, only need to check available actions of one category\r\n      var categoryModels = this.options.collection.where({role_name: 'categories'});\r\n      if (categoryModels.length > 0) {\r\n        var catId           = categoryModels[0].get('categoryId'),\r\n            categoryActions = new AppliedCategoryActionsCollection(undefined, {\r\n              node: this.options.node,\r\n              action: this.options.action,\r\n              urlResource: 'categories/' + catId + '/actions',\r\n              autofetch: true,\r\n              autoreset: true\r\n            });\r\n        this.blockActions();\r\n        categoryActions.fetch()\r\n            .done(_.bind(function () {\r\n              if (categoryActions.length > 0 &&\r\n                  categoryActions.at(0).get(\"categories_remove\") &&\r\n                  categoryActions.at(0).get(\"categories_remove\").length > 0) {\r\n                _.each(categoryModels, function (cat) {\r\n                  cat.attributes['removeable'] = true;\r\n                  cat.trigger('action:updated');\r\n                });\r\n              }\r\n              this.unblockActions();\r\n              setTimeout(_.bind(function () {\r\n                // event for keyboard navigation\r\n                var event = $.Event('tab:content:render');\r\n                this.$el.trigger(event);\r\n              }, this), 300);\r\n            }, this))\r\n            .fail(_.bind(function (resp) {\r\n              var serverError = this._getRespError(resp);\r\n              var title = lang.getCategoryActionsFailTitle;\r\n              var message = _.str.sformat(lang.getActionsForACategoryFailMessage,\r\n                  catId, this.options.node.get(\"id\"), serverError);\r\n              ModalAlert.showError(message, title);\r\n              this.unblockActions();\r\n            }, this));\r\n      }\r\n    },\r\n\r\n    // private\r\n    _initializeOthers: function () {\r\n      var options = {\r\n        gotoPreviousTooltip: lang.gotoPreviousCategoryTooltip,\r\n        gotoNextTooltip: lang.gotoNextCategoryTooltip\r\n      };\r\n      this._initializeToolbars(options);\r\n      this._listenToTabEvent();\r\n\r\n      // delay this a bit since the initial dialog fade in makes the tab to be hidden\r\n      setTimeout(_.bind(this._enableToolbarState, this), 300);\r\n    },\r\n\r\n    _onWindowResize: function (event) {\r\n      if (event && event.data && event.data.view) {\r\n        var self = event.data.view;\r\n        // optimization for rapid mouse movement and redraw when mouse movement slows down or stop\r\n        if (self.resizeTimer) {\r\n          clearTimeout(self.resizeTimer);\r\n        }\r\n        self.resizeTimer = setTimeout(function () {\r\n          self._setTablinksAttributes();\r\n          self._computeTablinkWidth();\r\n          self._enableToolbarState();\r\n          self._updateScrollbar();\r\n        }, 200);\r\n      }\r\n    },\r\n\r\n    _setTablinksAttributes: function () {\r\n      var i, limit = 5;\r\n      var siblings, parent = this.$el.parent();\r\n      for (i = 0; i < limit; i++) {\r\n        siblings = parent.siblings('.cs-tab-links.binf-dropdown');\r\n        if (siblings.length > 0) {\r\n          var width = $(siblings[0]).width();\r\n          if (width > 15) {\r\n            var newWidth    = width - 12,\r\n                widForEle   = newWidth + \"px\",\r\n                dirForEle   = this.rtlEnabled ? \"margin-right\" : \"margin-left\",\r\n                tabLinksEle = this.$el.find('.tab-links');\r\n\r\n            tabLinksEle.css({\r\n              \"width\": function () {\r\n                return \"calc(100% - \" + widForEle + \")\";\r\n              }\r\n            });\r\n\r\n            if (tabLinksEle.length) {\r\n              tabLinksEle.css(dirForEle, widForEle);\r\n              var tabLinksEleWidth = parseInt(tabLinksEle.css('width').replace('px', ''), 10);\r\n              if (tabLinksEleWidth > 20 && tabLinksEleWidth < 250) {\r\n                tabLinksEle.addClass('csui-mini-tablinks');\r\n              } else {\r\n                tabLinksEle.removeClass('csui-mini-tablinks');\r\n              }\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        parent = parent.parent();\r\n      }\r\n    },\r\n\r\n    _createAddPropertiesView: function () {\r\n      if (this.addPropertiesView) {\r\n        this.cancelEventsToViewsPropagation(this.addPropertiesView);\r\n        this.addPropertiesView.destroy();\r\n      }\r\n\r\n      var options = _.extend({\r\n        toolbarItems: this.options.toolbarItems,\r\n        toolbarItemsMask: this.options.toolbarItemsMask,\r\n        parentView: this,\r\n        blockingParentView: this.options.blockingParentView,\r\n        addPropertiesCallback: this.addPropertiesCallback,\r\n        suppressAddProperties: this.options.suppressAddProperties\r\n      }, this.options);\r\n      this.addPropertiesView = new AddPropertiesDropdownMenuView(options);\r\n      this.propagateEventsToViews(this.addPropertiesView);\r\n    },\r\n\r\n    addCatAt: function (models, respModel) {\r\n      var index = this.panelModelsLength;\r\n      for (var i = index; i < models.length; i++) {\r\n        if (models[i].get('title').toLowerCase() > respModel.get('title').toLowerCase()) {\r\n          index = i;\r\n          break;\r\n        }\r\n        index += 1;\r\n      }\r\n      return index;\r\n    },\r\n\r\n    addPropertiesCallback: function (catModel) {\r\n      // keep a list of newly added categories\r\n      if (this.options.action) {\r\n        this.options.node.newCategories.add(catModel);\r\n      }\r\n      var index = this.options.collection.models.length === 1 ? 1 :\r\n                  this.addCatAt(this.options.collection.models, catModel);\r\n\r\n      this.doAddModelProperties(catModel, index);\r\n      return false;\r\n    },\r\n\r\n    /**\r\n     * Adds provided model's form and handles and fires respective adjustments and events.\r\n     */\r\n    doAddModelProperties: function doAddModelProperties(model, index, additionalAddOpts) {\r\n      var self = this;\r\n      this.tabLinks.$el.find(\".binf-active\").removeClass(\"binf-active\")\r\n          .removeAttr('aria-selected');\r\n\r\n      function tabContentRendered() {\r\n        // Refresh tab indexes\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n        // Scroll and activate Tab\r\n        self._autoScrollTabTo(index, {animationOff: true})\r\n            .done(function () {\r\n              var newTab = self.tabLinks.children.findByModel(\r\n                  self.options.collection.findWhere({id: model.get('id')}));\r\n              newTab.activate();\r\n            });\r\n      }\r\n\r\n      // Add model to collection to render form\r\n      this.options.collection.add(model, _.extend(additionalAddOpts || {}, {at: index}));\r\n      model.collection = this.options.collection;\r\n\r\n      this._listenToTabIdEvent(index);\r\n\r\n      var formContent = this.tabContent.children.findByModel(\r\n          this.options.collection.findWhere({id: model.get('id')})),\r\n          newFormView = formContent && formContent.content;\r\n      if (newFormView !== undefined) {\r\n        var isRendered = (newFormView instanceof FormView) ? newFormView.isRenderFinished() :\r\n                         newFormView._isRendered;\r\n        if (isRendered) {\r\n          // Content rendred by now.\r\n          tabContentRendered();\r\n        } else {\r\n          var renderEvent = (newFormView instanceof FormView) ? 'render:form' : 'dom:refresh';\r\n          this.listenToOnce(newFormView, renderEvent, _.bind(function () {\r\n            this.trigger(\"update:button\", false);\r\n            tabContentRendered();\r\n          }, this));\r\n        }\r\n        // Scroll to current rendered Tab.\r\n        // This is to make necessary adjustment to TabLinks scroll (Previous, Next)\r\n        this._autoScrollTabTo(index, {animationOff: true});\r\n      } else {\r\n        tabContentRendered();\r\n      }\r\n\r\n      this._computeTablinkWidth();\r\n      this._enableToolbarState();\r\n      this.trigger('reset:switch');\r\n    },\r\n\r\n    _resetRequiredSwitchView: function () {\r\n      PubSub.trigger('pubsub:header:rightbar:view:change:switch:status', 'reset');\r\n    },\r\n\r\n    // private\r\n    _onDeleteCategory: function (tabLink) {\r\n      this.tabToDelete = tabLink;\r\n      var categoryName = tabLink.model.get(\"title\");\r\n      var title = lang.removeCategoryWarningTitle;\r\n      var message = categoryName ? _.str.sformat(lang.removeCategoryWarningMessage, categoryName) :\r\n                    lang.removeCategoryWarningMessage;\r\n      ModalAlert\r\n          .confirmWarning(message, title)\r\n          .done(_.bind(this._removeCategory, this))\r\n          .fail(_.bind(function (err) {\r\n            if (!err) {\r\n              this.tabToDelete.$el.find('a').focus();\r\n            }\r\n          }, this));\r\n    },\r\n\r\n    // private\r\n    _removeCategory: function () {\r\n      if (this.tabToDelete) {\r\n        var id = this.tabToDelete.model.get('id');\r\n        id = _.isNumber(id) ? id.toString() : id;\r\n\r\n        // with add item metadata, the new node has not been created on the server yet\r\n        if (this.options.node.get(\"id\") === undefined || this.options.action) {\r\n          this._removeTab();\r\n          if (this.options.node.newCategories.remove(id) === undefined) {\r\n            this.options.node.removedCategories.push(id);\r\n          }\r\n          return;\r\n        }\r\n\r\n        var fullUrl = Url.combine(this.options.node.urlBase(), 'categories/' + id);\r\n        var options = {\r\n          type: 'DELETE',\r\n          url: fullUrl\r\n        };\r\n\r\n        this.blockActions();\r\n        this.options.node.connector.makeAjaxCall(options)\r\n            .done(_.bind(function () {\r\n              this.unblockActions();\r\n              this._removeTab();\r\n            }, this))\r\n            .fail(_.bind(function (resp) {\r\n              this.unblockActions();\r\n              var serverError = this._getRespError(resp);\r\n              var categoryName = this.tabToDelete.model.get(\"title\");\r\n              var title = lang.removeCategoryFailMessageTitle;\r\n              var message = _.str.sformat(lang.removeCategoryFailMessage, categoryName,\r\n                  serverError);\r\n              ModalAlert.showError(message, title);\r\n            }, this));\r\n      }\r\n    },\r\n\r\n    // private\r\n    _removeTab: function () {\r\n      if (this.tabToDelete.$el.hasClass('binf-active')) {\r\n        var previousIndex = this.tabToDelete._index - 1;\r\n        var previousTab = this.tabLinks.children.findByIndex(previousIndex);\r\n        this._autoScrollTabTo(previousIndex, {animationOff: true})\r\n            .done(function () {\r\n              previousTab && previousTab.activate();\r\n            });\r\n      }\r\n      this.options.collection.remove(this.tabToDelete.model);\r\n      this.trigger('reset:switch');\r\n\r\n      setTimeout(_.bind(function () {\r\n        this._computeTablinkWidth();\r\n        this._enableToolbarState();\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        this.$el.trigger(event);\r\n      }, this), 300);\r\n    },\r\n\r\n    // private\r\n    _onRequiredSwitch: function (args) {\r\n      Backbone.trigger('closeToggleAction');\r\n      this._updateScrollbar();\r\n      this._hideNotRequiredFormFields(args.on, args);\r\n      return false;\r\n    },\r\n\r\n    _hideNotRequiredFormFields: function (hide, args) {\r\n      this.tabContent.children.each(function (tabContent) {\r\n        // Not every tab panel has to be a form, or implemented by FormView\r\n        if (tabContent.content.hideNotRequired) {\r\n          var appliedToWholeForm = tabContent.content.hideNotRequired(hide);\r\n          var tabLink = this.tabLinks.children.findByModel(tabContent.model);\r\n          // If the whole form has been hidden, hide the tab content with\r\n          // optional border lines and the tab link at the top too\r\n          if (appliedToWholeForm) {\r\n            var method = hide ? 'addClass' : 'removeClass';\r\n            tabContent.$el[method]('binf-hidden hidden-by-switch');\r\n            if (hide) {\r\n              this._hideTabLinkByRequiredSwitch(tabLink.$el);\r\n            } else {\r\n              this._showTabLinkByRequiredSwitch(tabLink.$el, tabContent.model.get('removeable'));\r\n            }\r\n          } else {\r\n            // The form has some required fields, make sure the tabLink is visible\r\n            this._showTabLinkByRequiredSwitch(tabLink.$el, tabContent.model.get('removeable'));\r\n          }\r\n        }\r\n      }, this);\r\n      this.tabLinks.$el.find(\".tab-links-first-visible\").removeClass(\"tab-links-first-visible\");\r\n      this.tabContent.onReorder();\r\n      // Ensure, that another tab gets activated, if the currently active\r\n      // one was hidden, and scroll to the top to see it.\r\n      /* var firstVisibleTabLink = this.tabLinks.children.find(function (tabLink) {\r\n         return !tabLink.$el.hasClass('binf-hidden');\r\n       });*/\r\n      var firstVisibleTabLink,\r\n          tabLinkViews      = this.tabLinks.children._views,\r\n          keysSortedByIndex = Object.keys(tabLinkViews).sort(\r\n              function (view1, view2) {\r\n                return tabLinkViews[view1]._index - tabLinkViews[view2]._index;\r\n              });\r\n      for (var index = 0; index < keysSortedByIndex.length; index++) {\r\n        if (!this.tabLinks.children._views[keysSortedByIndex[index]].$el.hasClass('binf-hidden')) {\r\n          firstVisibleTabLink = this.tabLinks.children._views[keysSortedByIndex[index]];\r\n          break;\r\n        }\r\n      }\r\n      if (!!firstVisibleTabLink) {\r\n        firstVisibleTabLink.$el.addClass(\"tab-links-first-visible\");\r\n      }\r\n      // FIXME: If the very first tab (General) is hidden, this scrolls right\r\n      // to the second one.  The scrollbar thumb stays a little above the top.\r\n      // If it is moved really the the top, no tab link will be emphasized as\r\n      // active one.  Hiding the tab links may need some cooperation from the\r\n      // scroll-spy to skip the hidden tab links.\r\n      if (firstVisibleTabLink && !firstVisibleTabLink.isActive()) {\r\n        firstVisibleTabLink.activate();\r\n      }\r\n\r\n      setTimeout(_.bind(function () {\r\n        this._computeTablinkWidth();\r\n        this._enableToolbarState();\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        this.$el.trigger(event);\r\n        if (!!args) { // executes only when coming thr' event driven\r\n          this.currentTabPosition = 1;\r\n        }\r\n\r\n      }, this), 300);\r\n    },\r\n\r\n    // private\r\n    _getRespError: function (resp) {\r\n      var error = '';\r\n      if (resp && resp.responseJSON && resp.responseJSON.error) {\r\n        error = resp.responseJSON.error;\r\n      } else if (base.MessageHelper.hasMessages()) {\r\n        error = $(base.MessageHelper.toHtml()).text();\r\n        base.MessageHelper.clear();\r\n      }\r\n      return error;\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataPropertiesViewImpl.prototype, TabLinksScrollMixin);\r\n\r\n  return MetadataPropertiesViewImpl;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.properties.view',['module', 'csui/lib/underscore', 'csui/widgets/metadata/impl/metadata.properties.view',\r\n  'css!csui/widgets/metadata/impl/metadata'\r\n], function (module, _, MetadataPropertiesViewImpl) {\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    topAlignLabel: false\r\n  });\r\n\r\n  //\r\n  // Public: Metadata Properties View Class\r\n  // Description: provides the view of general and other metadata properties (such as categories,\r\n  // etc.) of a node.  It allows for navigation, editing and getting form values of different types\r\n  // of metadata.\r\n  //\r\n  // This class is a clean and easy-to-read wrapper to expose as a public interface.\r\n  // See the implementation impl/metadata.properties.view.js for more available public methods.\r\n  //\r\n  var MetadataPropertiesView = MetadataPropertiesViewImpl.extend({\r\n\r\n    constructor: function MetadataPropertiesView(options) {\r\n      options.topAlignLabel = config.topAlignLabel;\r\n      MetadataPropertiesViewImpl.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    validateForms: function () {\r\n      return MetadataPropertiesViewImpl.prototype.validateForms.apply(this, arguments);\r\n    },\r\n\r\n    getFormsValues: function () {\r\n      return MetadataPropertiesViewImpl.prototype.getFormsValues.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataPropertiesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.properties.content.view',['csui/lib/underscore', 'csui/lib/marionette', 'csui/utils/nodesprites',\r\n  'csui/widgets/metadata/metadata.properties.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin'\r\n], function (_, Marionette, NodeSpriteCollection, MetadataPropertiesView,\r\n    ViewEventsPropagationMixin) {\r\n\r\n  var MetadataPropertiesContentView = Marionette.ItemView.extend({\r\n\r\n    className: 'metadata-inner-wrapper',\r\n\r\n    constructor: function MetadataPropertiesContentView(options) {\r\n      this.options = options;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      var tabOptions = {\r\n        context: this.options.context,\r\n        node: this.options.model,\r\n        containerCollection: this.options.containerCollection,\r\n        metadataView: this.options.metadataView,\r\n        blockingParentView: this.options.blockingParentView,\r\n        selectedProperty: this.options.selectedProperty,\r\n        notTabableRegion: true\r\n      };\r\n      this.childTabPanelView = new MetadataPropertiesView(tabOptions);\r\n\r\n      this.propagateEventsToViews(this.childTabPanelView);\r\n    },\r\n\r\n    render: function () {\r\n      this._ensureViewIsIntact();\r\n      this.triggerMethod('before:render', this);\r\n\r\n      var mdv = this.childTabPanelView.render();\r\n\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n      this.$el.append(mdv.el);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n\r\n      this.triggerMethod('render', this);\r\n      return this;\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      this.childTabPanelView.destroy();\r\n    },\r\n\r\n    onPanelActivated: function () {\r\n      this.childTabPanelView && this.childTabPanelView.triggerMethod('panel:activated');\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataPropertiesContentView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataPropertiesContentView;\r\n\r\n});\r\n\n","\n","csui.define('csui/utils/versions.default.action.items',[\r\n  'csui/lib/underscore', 'csui/models/actionitems',\r\n  // Load and register external default action rules\r\n  'csui-ext!csui/utils/versions.default.action.items'\r\n], function (_, ActionItemCollection, extraActions) {\r\n  'use strict';\r\n\r\n  var defaultActionItems = new ActionItemCollection([\r\n    // Default for versions is always version open command\r\n    {\r\n      type: 144,\r\n      signature: 'VersionOpen',\r\n      sequence: 10\r\n    }\r\n  ]);\r\n\r\n  if (extraActions) {\r\n    defaultActionItems.add(_.flatten(extraActions, true));\r\n  }\r\n\r\n  return defaultActionItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/versions/metadata.versions.columns',[\"csui/lib/backbone\", 'i18n!csui/widgets/metadata/impl/nls/lang'],\r\n    function (Backbone, lang) {\r\n\r\n      var TableColumnModel = Backbone.Model.extend({\r\n\r\n        idAttribute: \"key\",\r\n\r\n        defaults: {\r\n          key: null,  // key from the resource definitions\r\n          sequence: 0 // smaller number moves the column to the front\r\n        }\r\n\r\n      });\r\n\r\n      var TableColumnCollection = Backbone.Collection.extend({\r\n\r\n        model: TableColumnModel,\r\n        comparator: \"sequence\",\r\n\r\n        getColumnKeys: function () {\r\n          return this.pluck('key');\r\n        },\r\n\r\n        deepClone: function () {\r\n          return new TableColumnCollection(\r\n              this.map(function (column) {\r\n                return column.attributes;\r\n              }));\r\n        }\r\n      });\r\n\r\n      // Fixed (system) columns have sequence number < 100, dynamic columns\r\n      // have sequence number > 1000\r\n\r\n      var tableColumns = new TableColumnCollection([\r\n        {\r\n          key: 'version_number_name',\r\n          align: 'center',\r\n          title: lang.versionColumnVersionNumberTitle,\r\n          sequence: 10\r\n        },\r\n        {\r\n          key: 'name',\r\n          sequence: 20\r\n        },\r\n        {\r\n          key: 'create_date',\r\n          sequence: 30\r\n        },\r\n        {\r\n          key: 'owner_id',\r\n          sequence: 40\r\n        },\r\n        {\r\n          key: 'file_size',\r\n          align: 'right',\r\n          title: lang.versionColumnSizeTitle,\r\n          sequence: 50\r\n        }\r\n      ]);\r\n\r\n      return tableColumns;\r\n\r\n    });\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/versions/metadata.versions',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"csui-metadata-versions\\\">\\r\\n  <div class=\\\"csui-metadata-versions-rowselection-toolbar-view\\\"></div>\\r\\n  <div class=\\\"csui-table-view\\\"></div>\\r\\n  <div class=\\\"csui-pagination-view\\\"></div>\\r\\n</div>\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_versions_metadata.versions', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/versions/metadata.versions',[],function(){});\n","csui.define('csui/widgets/metadata/impl/versions/metadata.versions.view',[\"module\", \"csui/lib/jquery\", \"csui/lib/underscore\",\r\n  'csui/lib/backbone',\r\n  'csui/lib/marionette',\r\n  'csui/utils/base',\r\n  'csui/controls/globalmessage/globalmessage',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/controls/toolbar/toolitems.filtered.model',\r\n  'csui/controls/toolbar/toolbar.view',\r\n  'csui/controls/toolbar/delayed.toolbar.view',\r\n  'csui/controls/table/table.view',\r\n  'csui/controls/pagination/nodespagination.view',\r\n  'csui/utils/versions.default.action.items',\r\n  'csui/utils/commands/versions',\r\n  'csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view',\r\n  'csui/controls/toolbar/toolbar.command.controller',\r\n  'csui/models/nodes',\r\n  'csui/models/columns',\r\n  'csui/models/nodeversions',\r\n  'csui/models/version',\r\n  'csui/widgets/metadata/impl/versions/metadata.versions.columns',\r\n  'csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/widgets/metadata/versions.toolbaritems.mask',\r\n  'hbs!csui/widgets/metadata/impl/versions/metadata.versions',\r\n  'css!csui/widgets/metadata/impl/versions/metadata.versions'\r\n], function (module, $, _, Backbone, Marionette, base,\r\n    GlobalMessage,\r\n    LayoutViewEventsPropagationMixin,\r\n    FilteredToolItemsCollection,\r\n    ToolbarView,\r\n    DelayedToolbarView,\r\n    TableView,\r\n    PaginationView,\r\n    defaultActionItems,\r\n    commands,\r\n    TableRowSelectionToolbarView,\r\n    ToolbarCommandController,\r\n    NodeCollection,\r\n    NodeColumnCollection,\r\n    NodeVersionCollection,\r\n    VersionModel,\r\n    metadataVersionsColumns,\r\n    toolbarItems,\r\n    VersionsToolbarItemsMask,\r\n    template) {\r\n  'use strict';\r\n\r\n  var accessibleTable = /\\baccessibleTable\\b(?:=([^&]*)?)?/i.exec(location.search);\r\n  accessibleTable = accessibleTable && accessibleTable[1] !== 'false';\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    defaultPageSize: 30,\r\n    defaultPageSizes: [30, 50, 100],\r\n    enabled: true\r\n  });\r\n\r\n  var MetadataVersionsTableView = Marionette.LayoutView.extend({\r\n\r\n    className: function () {\r\n      var className = 'metadata-inner-wrapper';\r\n      if (accessibleTable) {\r\n        className += ' csui-no-animation';\r\n      }\r\n      return className;\r\n    },\r\n    template: template,\r\n\r\n    ui: {\r\n      tableRowSelectionToolbarView: '.csui-metadata-versions-rowselection-toolbar-view',\r\n      tableView: '.csui-table-view',\r\n      childContainer: '.csui-table-view',\r\n      paginationView: '.csui-pagination-view'\r\n    },\r\n\r\n    regions: {\r\n      tableRowSelectionToolbarRegion: '@ui.tableRowSelectionToolbarView',\r\n      tableRegion: '@ui.tableView',\r\n      paginationRegion: '@ui.paginationView'\r\n    },\r\n\r\n    constructor: function MetadataVersionsTableView(options) {\r\n      this.commands = options.commands || commands;\r\n      _.defaults(options, {\r\n        pageSize: config.defaultPageSize,\r\n        ddItemsList: config.defaultPageSizes,\r\n        toolbarItems: toolbarItems,\r\n        originatingView: options.originatingView || options.metadataView\r\n      });\r\n\r\n      MetadataVersionsTableView.__super__.constructor.call(this, options);\r\n\r\n      this.selectedNodes = new NodeCollection();\r\n\r\n      this.collection = new NodeVersionCollection(undefined, {\r\n        node: this.options.model,\r\n        autoreset: true,\r\n        expand: \"user\",\r\n        commands: commands.getAllSignatures(),\r\n        onlyClientSideDefinedColumns: true  // ignore columns sent by server\r\n      });\r\n\r\n      this.options.model.versions = this.collection;  // connect version collection with node\r\n\r\n      this.commandController = new ToolbarCommandController({commands: this.commands});\r\n\r\n      if (this.collection.delayedActions) {\r\n        this.listenTo(this.collection.delayedActions, 'error',\r\n            function (collection, request, options) {\r\n              var error = new base.Error(request);\r\n              GlobalMessage.showMessage('error', error.message);\r\n            });\r\n      }\r\n      this.defaultActionItems = defaultActionItems;\r\n\r\n      if (!this.options.toolbarItemsMasks) {\r\n        this.options.toolbarItemsMasks = new VersionsToolbarItemsMask(this.options);\r\n      }\r\n\r\n      this._setTableView();\r\n\r\n      // must be after setTableView\r\n      this._setTableRowSelectionToolbar({\r\n        toolItemFactory: this.options.toolbarItems.tableHeaderToolbar,\r\n        toolbarItemsMask: this.options.toolbarItemsMasks,\r\n        commands: this.options.commands || commands,\r\n      });\r\n\r\n      this._setTableRowSelectionToolbarEventListeners();\r\n\r\n      this._setPagination();\r\n\r\n      this.collection.fetch();\r\n\r\n      // Cause the show events triggered on the parent view re-triggered\r\n      // on the views placed in the inner regions\r\n      this.propagateEventsToRegions();\r\n      this.listenTo(this.collection, \"add\", this._updateCollection)\r\n          .listenTo(this.collection, \"remove\", this._updateCollection);\r\n    },\r\n\r\n    onRender: function () {\r\n      this.tableRowSelectionToolbarRegion.show(this._tableRowSelectionToolbarView);\r\n      this.tableRegion.show(this.tableView);\r\n      this.paginationRegion.show(this.paginationView);\r\n    },\r\n\r\n    _updateCollection: function () {\r\n      this.collection.fetch();\r\n    },\r\n\r\n    _setTableView: function () {\r\n      this.options || (this.options = {});\r\n\r\n      var args = _.extend({\r\n        tableColumns: metadataVersionsColumns,\r\n        connector: this.model.connector,\r\n        collection: this.collection,\r\n        columns: this.collection.columns,\r\n        columnsWithSearch: [],\r\n        orderBy: \"version_number_name desc\",\r\n        actionItems: defaultActionItems,\r\n        commands: commands,\r\n        originatingView: this.options.originatingView\r\n      }, this.options);\r\n\r\n      /*\r\n      LPAD-60042\r\n      deleting blockingParentView option to fix expand/collapse icon.\r\n      table.view.js checks the condition this.$el[0].children.length > 0 in\r\n      function calculateMaxColumnsDisplayed()\r\n      */\r\n      delete args.blockingParentView;\r\n\r\n      if (!_.contains(this.options.ddItemsList, this.options.pageSize)) {\r\n        this.options.ddItemsList.push(this.options.pageSize);\r\n        this.options.ddItemsList.sort();\r\n      }\r\n\r\n      this.tableView = new TableView(args);\r\n\r\n      // Events\r\n      var cmdOption = {context: this.options.context, originatingView: this};\r\n\r\n      this.listenTo(this.tableView, 'execute:defaultAction', function (node) {\r\n        var action = this.defaultActionItems.find(function (actionItem) {\r\n          if (actionItem.get('type') === node.get('type')) {\r\n            return true;\r\n          }\r\n        }, this);\r\n        var cmd = commands.get(action.get('signature'));\r\n        var status = {nodes: new NodeVersionCollection([node])};\r\n        cmd.execute(status, cmdOption);\r\n      });\r\n    },\r\n\r\n    _setTableRowSelectionToolbar: function (options) {\r\n      this._tableRowSelectionToolbarView = new TableRowSelectionToolbarView({\r\n        toolItemFactory: options.toolItemFactory,\r\n        toolbarItemsMask: options.toolbarItemsMask,\r\n        toolbarCommandController: this.commandController,\r\n\r\n        // if toolbarCommandController is not defined, a new ToolbarCommandController\r\n        // with the following commands is created\r\n        commands: commands,\r\n        selectedChildren: this.tableView.selectedChildren,\r\n        container: this.collection.node,\r\n        context: this.options.context,\r\n        originatingView: this.options.originatingView,\r\n        collection: this.collection\r\n      });\r\n    },\r\n\r\n    _setTableRowSelectionToolbarEventListeners: function () {\r\n      // listen for change of the selected rows in the table.view and if at least one row is\r\n      // selected, display the table-row-selected-toolbar\r\n      this.listenTo(this.tableView.selectedChildren, 'reset', function () {\r\n        // TODO: Re-use TableRowSelectionToolbarBehavior.\r\n        if (this.tableView.selectedChildren.length > 0) {\r\n          this.tableRowSelectionToolbarRegion.$el.addClass(\r\n              'csui-metadata-versions-rowselection-toolbar-visible');\r\n        } else {\r\n          this.tableRowSelectionToolbarRegion.$el.removeClass(\r\n              'csui-metadata-versions-rowselection-toolbar-visible');\r\n        }\r\n      });\r\n    },\r\n\r\n    _setPagination: function () {\r\n      this.paginationView = new PaginationView({\r\n        collection: this.collection,\r\n        pageSize: this.options.pageSize,\r\n        defaultDDList: this.options.ddItemsList,\r\n        skipPaginationUpdateRequest: true\r\n      });\r\n    }\r\n\r\n  }, {\r\n\r\n    enabled: function (options) {\r\n      if (config.enabled === false) {\r\n        return false;\r\n      }\r\n      // don't enable if we are viewing properties of a VersionModel\r\n      if (options.node instanceof VersionModel) {\r\n        return false;\r\n      }\r\n      // TODO: Recognize versionable objects in a common way. For example,\r\n      // available_roles in v1 REST API was a viable way. It could be also\r\n      // done by extensibility on the client side.\r\n      return _.contains([144, 736, 5574], options.node.get('type'));\r\n    }\r\n\r\n  });\r\n\r\n  // Add the mixin functionality to the target view\r\n  _.extend(MetadataVersionsTableView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataVersionsTableView;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/impl/metadata.properties.content.view',\r\n  'csui/widgets/metadata/impl/versions/metadata.versions.view',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  // Load extra panels to be added to the built-in dropdown tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.panels'\r\n], function (_, Backbone, MetadataPropertiesContentView,\r\n    MetadataVersionsTableView, lang, extraPanels) {\r\n\r\n  var MetadataPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      title: null,\r\n      contentView: null,\r\n      contentViewOptions: null\r\n    },\r\n\r\n    constructor: function MetadataPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataPanels = new MetadataPanelCollection([\r\n    {\r\n      title: lang.properties,\r\n      name: 'properties',\r\n      sequence: 10,\r\n      contentView: MetadataPropertiesContentView\r\n    }, {\r\n      title: lang.versions,\r\n      name: 'versions',\r\n      sequence: 20,\r\n      contentView: MetadataVersionsTableView\r\n    }\r\n  ]);\r\n\r\n  if (extraPanels) {\r\n    metadataPanels.add(_.flatten(extraPanels, true));\r\n    // assign default name to panels that are not having the 'name' field yet\r\n    var counter = 1;\r\n    metadataPanels.forEach(function (model) {\r\n      if (model.get('name') === undefined) {\r\n        model.set('name', 'unnamed_panel' + counter, {silent: true});\r\n        counter++;\r\n      }\r\n    });\r\n  }\r\n\r\n  return metadataPanels;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/controls/tab.panel/impl/tab.link.dropdown',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<a href=\\\"#\"\n    + this.escapeExpression(((helper = (helper = helpers.uniqueTabId || (depth0 != null ? depth0.uniqueTabId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"uniqueTabId\",\"hash\":{}}) : helper)))\n    + \"\\\" data-binf-toggle=\\\"tab\\\">\\r\\n  <span class=\\\"cs-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n</a>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_controls_tab.panel_impl_tab.link.dropdown', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/controls/tab.panel/impl/tab.link.dropdown.view',['csui/lib/underscore', 'csui/controls/tab.panel/impl/tab.link.view',\r\n  'hbs!csui/controls/tab.panel/impl/tab.link.dropdown',\r\n  'csui/lib/binf/js/binf'\r\n], function (_, TabLinkView, itemTemplate) {\r\n  \"use strict\";\r\n\r\n  var TabLinkDropDownView = TabLinkView.extend({\r\n\r\n    template: itemTemplate,\r\n\r\n    attributes: function () {\r\n      var title = this.model.get('title');\r\n      return {\r\n        id: 'tablink-' + this.model.get('uniqueTabId'),\r\n        role: 'menuitem',\r\n        'aria-label': title,\r\n        title: title\r\n      };\r\n    },\r\n\r\n    constructor: function TabLinkDropDownView() {\r\n      TabLinkView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.listenTo(this.model, 'change', this.render);\r\n\r\n      this.$el.bind('click', '>a', _.bind(this._linkClicked, this));\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      this.$el.unbind('click', '>a');\r\n    },\r\n\r\n    activate: function () {\r\n      if (!this.$el.hasClass(\"binf-active\")) {\r\n        this.triggerMethod('clear:active:tab');\r\n        this.ui.link.binf_tab('show');\r\n      }\r\n      // TODO: comment out this code for now because HTML Validator does not allow it\r\n      //this.$el.attr('aria-selected', 'true');\r\n      var index = this.model.collection.indexOf(this.model);\r\n      this._parent.options.activeTab && this._parent.options.activeTab.set('tabIndex', index);\r\n      this.triggerMethod('activate:tab', this);\r\n      this.triggerMethod('click:link');\r\n    },\r\n\r\n    _linkClicked: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      this.activate();\r\n    }\r\n\r\n  });\r\n\r\n  return TabLinkDropDownView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/controls/tab.panel/impl/tab.links.dropdown',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-btn-default\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n    <span class=\\\"cs-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n  </button>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-btn-default binf-dropdown-toggle\\\"\\r\\n          data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n    <span class=\\\"cs-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n    <span class=\\\"cs-icon icon-caret-down\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.addToolTipContent || (depth0 != null ? depth0.addToolTipContent : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"addToolTipContent\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  </button>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<span class=\\\"dropdown-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.single_item : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0)})) != null ? stack1 : \"\")\n    + \"<ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\" aria-labelledby=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n</ul>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_controls_tab.panel_impl_tab.links.dropdown', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior',['module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/log', 'csui/lib/marionette',\r\n  'csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin'\r\n], function (module, _, $, log, Marionette, KeyboardBehaviorMixin) {\r\n  'use strict';\r\n\r\n  // This behavior implements a default keyboard navigation by tab keys similar to the browser\r\n  // default and is used when the browser default can't be used because of tabable region behavior.\r\n\r\n  var TabLinksDropdownKeyboardBehavior = Marionette.Behavior.extend({\r\n\r\n    constructor: function TabLinksDropdownKeyboardBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n      view.keyboardBehavior = this;\r\n      this.tabableElements = [];\r\n\r\n      var self = this;\r\n      this.listenTo(view, 'refresh:tabable:elements', function (tabPanel) {\r\n        self.refreshTabableElements(view, tabPanel);\r\n      });\r\n\r\n      KeyboardBehaviorMixin.mixin(view);\r\n\r\n      _.extend(view, {\r\n\r\n        onKeyInView: function (event) {\r\n          var ret;\r\n          if (this.keyboardBehavior.tabableElements.length === 0) {\r\n            // don't handle keystrokes at all if no elements were found for keyboard navigation\r\n            return ret;\r\n          }\r\n          if (event.keyCode === 9) {  // tab\r\n            // log.debug('TabLinksDropdownKeyboardBehavior::onKeyInView ' + this.constructor.name)\r\n            // && console.log(log.last);\r\n\r\n            // event.shiftKey: shift tab -> activate previous region\r\n            ret = this._accSetFocusToPreviousOrNextElement(event.shiftKey);\r\n          }\r\n          return ret;\r\n        }\r\n      });\r\n\r\n    }, // constructor\r\n\r\n    refreshTabableElements: function (view, tabPanel) {\r\n      this.tabableElements = view.$el.find('button:not([disabled])').filter(':visible');\r\n      this.view.currentTabPosition = -1;\r\n      setTimeout(function () {\r\n        view._setFirstAndLastFocusable && view._setFirstAndLastFocusable();\r\n      }, 50);\r\n\r\n      // log.debug('TabLinksDropdownKeyboardBehavior::refreshTabableElements ' +\r\n      //           view.constructor.name + ': found ' + this.tabableElements.length + ' tabable' +\r\n      //           ' elements') && console.log(log.last);\r\n    }\r\n\r\n  });\r\n\r\n  return TabLinksDropdownKeyboardBehavior;\r\n\r\n});\r\n\n","\ncsui.define('css!csui/controls/tab.panel/impl/tab.links.dropdown',[],function(){});\n","csui.define('csui/controls/tab.panel/tab.links.dropdown.view',['csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/controls/tab.panel/impl/tab.link.dropdown.view',\r\n  'hbs!csui/controls/tab.panel/impl/tab.links.dropdown',\r\n  'csui/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior',\r\n  'csui/behaviors/dropdown.menu/dropdown.menu.behavior',\r\n  'i18n!csui/controls/tab.panel/impl/nls/lang',\r\n  'css!csui/controls/tab.panel/impl/tab.links.dropdown',\r\n  'csui/lib/binf/js/binf'\r\n], function (_, Backbone, Marionette, TabLinkDropDownView, collectionTemplate,\r\n    TabLinksDropdownKeyboardBehavior, DropdownMenuBehavior, lang) {\r\n  \"use strict\";\r\n\r\n  var TabLinkDropDownCollectionView = Marionette.CompositeView.extend({\r\n\r\n    className: 'cs-tab-links binf-dropdown tile-nav',\r\n\r\n    template: collectionTemplate,\r\n    templateHelpers: function () {\r\n      return {\r\n        single_item: this.collection.length === 1 ? true : false,\r\n        addToolTipContent: lang.showMore,\r\n        btnId: _.uniqueId(\"cstabBtn\")\r\n      };\r\n    },\r\n\r\n    childView: TabLinkDropDownView,\r\n    childViewContainer: '>ul',\r\n\r\n    ui: {\r\n      toggle: '>.binf-dropdown-toggle',\r\n      menuButton: '>.binf-btn',\r\n      selectedLabel: '>.binf-btn >.cs-label'\r\n    },\r\n\r\n    behaviors: {\r\n      TabLinksDropdownKeyboardBehavior: {\r\n        behaviorClass: TabLinksDropdownKeyboardBehavior\r\n      },\r\n      DropdownMenuBehavior: {\r\n        behaviorClass: DropdownMenuBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function TabLinkDropDownCollectionView(options) {\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n      this.selected = new Backbone.Model();\r\n      // if selectedTab is passed in, search for it and set activeTab to it\r\n      // also store the data on this.selected model\r\n      var activeTabIndex = options.activeTab && options.activeTab.get(\"tabIndex\");\r\n      if (this.collection && this.collection.length > 0 && activeTabIndex !== undefined &&\r\n          activeTabIndex < this.collection.length) {\r\n        var selectedTabTitle = options.selectedTab && options.selectedTab.get(\"title\");\r\n        if (selectedTabTitle !== undefined &&\r\n            selectedTabTitle === this.collection.at(activeTabIndex).get(\"title\")) {\r\n          this._setSelection(this.collection.at(activeTabIndex));\r\n        } else {\r\n          var matchIndex = -1;\r\n          if (selectedTabTitle !== undefined) {\r\n            for (var i = 0; i < this.collection.length; i++) {\r\n              if (selectedTabTitle === this.collection.at(i).get(\"title\")) {\r\n                matchIndex = i;\r\n              }\r\n            }\r\n          }\r\n          if (matchIndex !== -1) {\r\n            this._setSelection(this.collection.at(matchIndex));\r\n            options.activeTab.set(\"tabIndex\", matchIndex);\r\n          } else {\r\n            this._setSelection(this.collection.at(0));\r\n            options.activeTab.set(\"tabIndex\", 0);\r\n          }\r\n        }\r\n      }\r\n      this.listenTo(this.collection, 'change', this._refreshSelection);\r\n      this.listenTo(this.selected, 'change', this._updateSelection);\r\n    },\r\n\r\n    onRender: function () {\r\n      var title = this.selected.get('title');\r\n      this.ui.selectedLabel.text(title);\r\n      this.ui.menuButton.attr('aria-label', title);\r\n      if (this.collection.length !== 1) {\r\n        this.ui.toggle.binf_dropdown();\r\n      }\r\n      // TODO: comment out this code for now because HTML Validator does not allow it\r\n      // set the selected tab active and aria-selected=true\r\n      var selectedId = this.selected.get('id');\r\n      for (var i = 0; i < this.collection.length; i++) {\r\n        if (selectedId === this.collection.at(i).get(\"id\")) {\r\n          var menuItems = this.$el.find(\"ul li\");\r\n          menuItems.removeClass('binf-active');  //.removeAttr('aria-selected');\r\n          this.$(menuItems.get(i)).addClass('binf-active');  //.attr('aria-selected', 'true');\r\n          break;\r\n        }\r\n      }\r\n    },\r\n\r\n    onChildviewClickLink: function (childView) {\r\n      this._setSelection(childView.model);\r\n      this.ui.toggle.binf_dropdown('toggle');\r\n    },\r\n\r\n    onChildviewClearActiveTab: function (childView) {\r\n      this.children.each(function (view) {\r\n        if (view.$el.hasClass('binf-active')) {\r\n          view.$el.removeClass('binf-active');\r\n        }\r\n        // TODO: comment out this code for now because HTML Validator does not allow it\r\n        //if (view.el.hasAttribute('aria-selected') !== undefined) {\r\n        //  view.$el.removeAttr('aria-selected');\r\n        //}\r\n      });\r\n    },\r\n\r\n    _setSelection: function (model) {\r\n      this.selected.set(model.pick('id', 'title'));\r\n    },\r\n\r\n    _updateSelection: function () {\r\n      var title = this.selected.get('title');\r\n      this.ui.selectedLabel.text(title);\r\n      this.ui.menuButton.attr('aria-label', title);\r\n    },\r\n\r\n    _refreshSelection: function (model) {\r\n      if (model.get('id') === this.selected.get('id')) {\r\n        this._setSelection(model);\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  return TabLinkDropDownCollectionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.dropdowntab.view',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/controls/tab.panel/tab.panel.view',\r\n  'csui/widgets/metadata/metadata.panels',\r\n  'csui/controls/tab.panel/tab.links.dropdown.view',\r\n  'csui/lib/binf/js/binf'\r\n], function (_, Backbone, TabPanelView, metadataPanels,\r\n    TabLinkDropDownCollectionView) {\r\n  'use strict';\r\n\r\n  var MetadataDropdownTabView = TabPanelView.extend({\r\n    // FIXME: This removes the tab classes from the paren object\r\n    className: 'metadata-content-wrapper binf-panel binf-panel-default',\r\n\r\n    ui: {\r\n      dropdownToggle: '.binf-dropdown-toggle'\r\n    },\r\n\r\n    contentView: function () {\r\n      return this.options.contentView;\r\n    },\r\n\r\n    contentViewOptions: function () {\r\n      return {\r\n        context: this.options.context,\r\n        model: this.options.node,\r\n        originatingView: this.options.originatingView,\r\n        metadataView: this.options.metadataView,\r\n        blockingParentView: this.options.blockingParentView,\r\n        selectedProperty: this.options.selectedProperty\r\n      };\r\n    },\r\n\r\n    constructor: function MetadataDropdownTabView(options) {\r\n      // Assign the options to this before the parent constructor\r\n      // would do it, so that the _buildTabs below can access it\r\n      this.options = options || (options = {});\r\n      _.defaults(options, {\r\n        TabLinkCollectionViewClass: TabLinkDropDownCollectionView,\r\n        implementTabContentsDefaultKeyboardHandling: false,\r\n        delayTabContent: options.delayTabContent !== false\r\n      });\r\n\r\n      options.tabs = this._buildTabs();\r\n\r\n      TabPanelView.prototype.constructor.call(this, options);\r\n\r\n      this.listenTo(this.options.node, \"change\", this._nodeChanged)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle);\r\n    },\r\n\r\n    _buildTabs: function () {\r\n      return metadataPanels\r\n          .chain()\r\n          .filter(function (panel) {\r\n            // If there is a static method enabled, call it, otherwise\r\n            // consider the panel always enabled\r\n            var contentView = panel.get('contentView'),\r\n                enabled     = contentView.enabled;\r\n            // providing way to render custom properties view for node types that has separate\r\n            // view to show in metadata. Based on key 'customproperties' provided in response.\r\n            if (this.options.node.attributes.customProperties) {\r\n              // filter extra commands based on the key 'executeCommand' for respective node.\r\n              if (panel.attributes.executeCommand) {\r\n                return !enabled || enabled({\r\n                      context: this.options.context,\r\n                      node: this.options.node\r\n                    });\r\n              } else {\r\n                return false;\r\n              }\r\n            } else {\r\n              return !enabled || enabled({\r\n                    context: this.options.context,\r\n                    node: this.options.node\r\n                  });\r\n            }\r\n          }, this)\r\n          .map(function (panel) {\r\n            return panel.attributes;\r\n          })\r\n          .value();\r\n    },\r\n\r\n    onRender: function () {\r\n      this.$el.prepend(\"<div class='csui-metadata-tab-bar'></div>\");\r\n    },\r\n\r\n    onActivateTab: function (tabContent, tabPane, tabLink) {\r\n      // Warning: this onActivateTab is currently being triggered twice by the 'activate:tab' event.\r\n      // The code in the base 'controls/tab.panel' needs to be revisited later when time permits.\r\n      // Any code being called from here should handle two calls gracefully by itself !!!\r\n      tabContent && tabContent.triggerMethod('panel:activated');\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n        dropdownToggleEl.binf_dropdown('toggle');\r\n      }\r\n    },\r\n\r\n    _updateTabs: function () {\r\n      var tabs = this._buildTabs();\r\n      // FIXME: _convertCollection should return an array of object\r\n      // literals or models; the models below do not change their\r\n      // parent collection without removing them\r\n      this.collection.reset(this._convertCollection({tabs: tabs}).models);\r\n    },\r\n\r\n    _nodeChanged: function () {\r\n      // We switched to other node or fetched the node info\r\n      if (this.options.node.hasChanged('id') || this.options.node.hasChanged('type')) {\r\n        this._updateTabs();\r\n      }\r\n    }\r\n  });\r\n\r\n  return MetadataDropdownTabView;\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\", \"csui/utils/url\",\r\n  \"csui/utils/base\"\r\n], function (_, $, Backbone, Url, base) {\r\n\r\n  // handling server calls for metadata\r\n  function MetadataController(status, options, attributes) {\r\n    this.status = status || {};\r\n    this.options = options || {};\r\n    this.attributes = attributes || {};\r\n  }\r\n\r\n  _.extend(MetadataController.prototype, Backbone.Events, {\r\n\r\n    save: function (model, data) {\r\n      // Pass data via the first attrs param to get them set to model\r\n      // attributes\r\n      return model.save(data, {\r\n        wait: true,\r\n        patch: true\r\n      });\r\n    },\r\n\r\n    createItem: function (model, formsValues) {\r\n      return model.save(undefined, {\r\n        // If data does not contain common attributes, which should be just set\r\n        // to model attributes, it should be passed via options.data instead of\r\n        // using the first attrs paremeter\r\n        data: formsValues,\r\n        wait: true\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  MetadataController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataController, {version: \"1.0\"});\r\n\r\n  return MetadataController;\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.view',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/utils/base', 'csui/widgets/metadata/impl/header/metadata.header.view',\r\n  'csui/widgets/metadata/impl/metadata.dropdowntab.view',\r\n  'csui/utils/contexts/factories/node',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/metadata.controller',\r\n  'csui/controls/progressblocker/blocker', 'csui/utils/commandhelper',\r\n  'csui/widgets/permissions/permissions.view',\r\n  'csui/dialogs/modal.alert/modal.alert',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/metadata'\r\n], function (_, $, Marionette, base, MetadataHeaderView, MetadataDropdownTabView,\r\n    NodeModelFactory, ViewEventsPropagationMixin, MetadataController, BlockingView,\r\n    CommandHelper, PermissionsView, ModalAlert, lang) {\r\n  'use strict';\r\n\r\n  var MetadataView = Marionette.ItemView.extend({\r\n    className: 'cs-metadata',\r\n\r\n    template: false,\r\n\r\n    constructor: function MetadataView(options) {\r\n      var self = this;\r\n      options || (options = {});\r\n      options.data || (options.data = {});\r\n      this.options = options;\r\n      this.targetView = options.targetView;\r\n      this.thumbnailViewState = options.originatingView &&\r\n                                options.originatingView.thumbnailViewState;\r\n      if (!options.model) {\r\n        options.model = options.context.getModel(NodeModelFactory, {\r\n          attributes: options.data.id && {id: options.data.id},\r\n          temporary: true\r\n        });\r\n      }\r\n\r\n      // setting initialPanel if it was passed in from data or overriden by URL\r\n      options.model.unset('initialPanel', {silent: true});\r\n      if (options.data.initialPanel) {\r\n        options.model.set('initialPanel', options.data.initialPanel, {silent: true});\r\n      }\r\n\r\n      this.options.showShortcutSwitch = true;\r\n      this.options.showRequiredFieldsSwitch = true;\r\n      if (this.options.model.get('type') === 1 || !!this.options.model.get('shortcutNode')) {  // shortcut\r\n        if (!!this.options.model.get('shortcutNode') && this.options.model.get('type') !== 1) {\r\n          this.options.shortcutNode = this.options.model.get('shortcutNode');\r\n        } else {\r\n          this.options.model.connector.assignTo(this.options.model.original); //TODO: have to do this?\r\n          this.options.shortcutNode = this.options.model;\r\n          var shortcutResourceScope = this.options.shortcutNode.getResourceScope();\r\n          this.options.model.original.setResourceScope(shortcutResourceScope);\r\n          this.options.model = this.options.model.original;\r\n          this.options.model.set('shortcutNode', this.options.shortcutNode, {silent: true});\r\n        }\r\n        //Load permissions page after getting actions from REST API\r\n        this.options.actionsPromise = this._ensureCompleteNode();\r\n      } else {\r\n        this.options.actionsPromise = $.Deferred().resolve().promise();\r\n      }\r\n\r\n      // Once PropertiesView is opened , 'OrginatingView' becomes metadataView or\r\n      // MetadataNavigationview.\r\n      // If  properties view page does not have navigationlist (eg for folders and wikipage) then\r\n      // originating view becomes 'MetadataView' based on supportOriginatingView\r\n      if (!!this.options.originatingView && !!this.options.originatingView.supportOriginatingView) {\r\n        this.options.baseOriginatingView = this.options.originatingView;\r\n        this.options.originatingView = this;\r\n      }\r\n\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      // When this view is used alone on a perspective, if should offer\r\n      // spinning sun to commands executed with it as originating view\r\n      BlockingView.imbue(this);\r\n\r\n      this.options.showDropdownMenu = true;\r\n      this.options.originatingView = this.options.originatingView || this;\r\n      this.metadataHeaderView = new MetadataHeaderView(_.extend({\r\n        // Since ItemNameView (which includes DropdownMenuView, etc.) is now being used elsewhere,\r\n        // this boolean flag is to indicate metadata scenario for ItemNameView to know.\r\n        metadataScenario: true,\r\n        // If this widget is placed on a perspective, it becomes the originating view itself\r\n        originatingView: this\r\n      }, this.options));\r\n      this.listenTo(this.metadataHeaderView, \"metadata:item:name:save\", this._saveItemName)\r\n          .listenTo(this.metadataHeaderView, 'metadata:item:before:delete',\r\n              function (args) {\r\n                self.trigger('metadata:item:before:delete', args);\r\n              })\r\n          .listenTo(this.metadataHeaderView, 'metadata:item:before:move',\r\n              function (args) {\r\n                self.trigger('metadata:item:before:move', args);\r\n              })\r\n          .listenTo(this.metadataHeaderView, 'metadata:item:deleted', function (args) {\r\n            self.trigger('metadata:item:deleted', args);\r\n          })\r\n          .listenTo(this.metadataHeaderView, \"shortcut:switch\", function (view) {\r\n            self.options.model = view.node;\r\n            self.options.model.set('shortcutNode', self.model.get('shortcutNode'), {silent: true});\r\n            this._ensureCompleteNode()\r\n                .always(function () {\r\n                  !!self.metadataTabView && self.metadataTabView.destroy();\r\n                  if (!!self.options.showPermissionView) {\r\n                    self.metadataTabView = new PermissionsView({\r\n                      model: self.options.model,\r\n                      originatingView: self.options.originatingView,\r\n                      context: self.options.context,\r\n                      showCloseIcon: self.options.originatingView ? false : true,\r\n                      showBackIcon: self.options.originatingView ? true : false,\r\n                      selectedTab: status.selectedTab,\r\n                      selectedProperty: self.options.selectedProperty\r\n                    });\r\n\r\n                  } else {\r\n                    self.metadataTabView = new MetadataDropdownTabView({\r\n                      context: self.options.context,\r\n                      node: self.options.model,\r\n                      containerCollection: self.options.containerCollection,\r\n                      originatingView: self.options.originatingView,\r\n                      metadataView: self,\r\n                      activeTab: self.options.activeTab,\r\n                      delayTabContent: self.options.delayTabContent\r\n                    });\r\n                  }\r\n\r\n                  self.$el.append(self.metadataTabView.render().$el);\r\n                  self.propagateEventsToViews(self.metadataTabView);\r\n                });\r\n          })\r\n          .listenTo(this.metadataHeaderView, \"metadata:close\", function () {\r\n            self.trigger(\"metadata:close\");\r\n          })\r\n          .listenTo(this.options.context, 'retain:perspective', function () {\r\n            // new data was fetched by context, but perspective stays same (if perspective changes\r\n            // it is not necessary to close the metadata dialog, because it gets destroyed\r\n            // anyways when new perspective slides in)\r\n            self._closeMetadata();\r\n          });\r\n\r\n      var tabOptions = {\r\n        context: this.options.context,\r\n        node: this.options.model,\r\n        containerCollection: this.options.containerCollection,\r\n        originatingView: this.options.originatingView,\r\n        metadataView: this,\r\n        blockingParentView: this,\r\n        activeTab: this.options.activeTab,\r\n        selectedTab: this.options.selectedTab,\r\n        selectedProperty: this.options.selectedProperty,\r\n        delayTabContent: self.options.delayTabContent\r\n      };\r\n\r\n      if (this.options.showPermissionView) {\r\n        this.options.actionsPromise.always(function () {\r\n          self.metadataTabView = new PermissionsView({\r\n            model: self.options.model,\r\n            originatingView: self.options.originatingView,\r\n            context: self.options.context,\r\n            showCloseIcon: self.options.originatingView ? false : true,\r\n            showBackIcon: self.options.originatingView ? true : false,\r\n            selectedTab: status.selectedTab,\r\n            selectedProperty: self.options.selectedProperty\r\n          });\r\n          self.propagateEventsToViews(self.metadataTabView, self.metadataHeaderView);\r\n        });\r\n      } else {\r\n        this.metadataTabView = new MetadataDropdownTabView(tabOptions);\r\n        this.propagateEventsToViews(this.metadataTabView, this.metadataHeaderView);\r\n      }\r\n    },\r\n\r\n    onRender: function () {\r\n      // don't render until the shortcut's original node has been fetched\r\n      var fetching = this.options.model.fetching;\r\n      if (fetching) {\r\n        // Note: render always so that the link to Shortcut Properties is available for the \r\n        // user to click on to go into the Properties page and update the Original Location field.\r\n        // This is due to the backward UX design that Original Properties is rendered first.\r\n        // TODO: Find out, why the link \"View shortcut\" is dead after re-rendering\r\n        return fetching.always(_.bind(this.render, this));\r\n      }\r\n\r\n      var mhv = this.metadataHeaderView.render();\r\n      var mdv = this.metadataTabView.render();\r\n\r\n      Marionette.triggerMethodOn(mhv, 'before:show', mhv, this);\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n\r\n      this.$el.append(mhv.el);\r\n      this.$el.append(mdv.el);\r\n\r\n      Marionette.triggerMethodOn(mhv, 'show', mhv, this);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      this.cancelEventsToViewsPropagation(this.metadataTabView, this.metadataHeaderView);\r\n      this.metadataHeaderView.destroy();\r\n      this.metadataTabView.destroy();\r\n      if (this.targetView && this.thumbnailViewState) {\r\n          this.targetView.thumbnail.resultsView.triggerMethod(\"metadata:close\");\r\n      }\r\n    },\r\n\r\n    _saveItemName: function (args) {\r\n      var self = this;\r\n      var itemName = args.sender.getValue();\r\n      var data = {'name': itemName};\r\n      var metadataController = new MetadataController();\r\n      var node = this.options.model;\r\n      var collection = this.options.collection;\r\n      var shortcutOriginal;\r\n      // workarounds to handle the refresh of the shortcut node or original node\r\n      if (this.options.shortcutNode && this.options.shortcutNode.original === node) {\r\n        var originalNodeInCollection = this.options.collection.findWhere(\r\n            {id: node.get('id')});\r\n        if (originalNodeInCollection) {\r\n          shortcutOriginal = node;\r\n          node = originalNodeInCollection;\r\n        } else {\r\n          collection = undefined;\r\n        }\r\n      }\r\n\r\n      self._blockActions();\r\n      metadataController.save(node, data)\r\n          .done(function () {\r\n            return node.fetch()\r\n                .then(function () {\r\n                  if (shortcutOriginal) {\r\n                    shortcutOriginal.set(node.attributes);\r\n                  }\r\n                  // Following command causing failure in breadcrumb collection update,\r\n                  // While renaming the item in metadata view, and clicking directly on breadcrumb\r\n                  // ancestor. After commenting out nodes table parent item renaming functionality\r\n                  // is working fine.\r\n                  //self.options.context && self.options.context.trigger('current:folder:changed');\r\n                  args.success && args.success();\r\n                  self._unblockActions();\r\n                  if (self.options.originatingView &&\r\n                      _.isFunction(self.options.originatingView.unblockActions)) {\r\n                    self.options.originatingView.unblockActions();\r\n                  }\r\n                });\r\n          })\r\n          .fail(function (error) {\r\n            self._unblockActions();\r\n            var errorMsg = CommandHelper._getErrorMessageFromResponse(error);\r\n            errorMsg === undefined && (errorMsg = lang.failedToSaveName);\r\n            args.error && args.error(errorMsg);\r\n          });\r\n    },\r\n\r\n    _ensureCompleteVersionNode: function () {\r\n      this._blockActions();\r\n      return this.options.model.fetch()\r\n          .always(_.bind(this._unblockActions, this))\r\n          .fail(function (request) {\r\n            var error = new base.Error(request);\r\n            ModalAlert.showError(error.message);\r\n          });\r\n    },\r\n\r\n    _ensureCompleteNode: function () {\r\n      var node = this.options.model;\r\n\r\n      function checkExpansion(property) {\r\n        var value = node.get(property + '_id');\r\n        if (value && !_.isObject(value) && !_.isObject(node.get(property + '_id_expand'))) {\r\n          node.setExpand('properties', property);\r\n          return true;\r\n        }\r\n      }\r\n\r\n      var expandable = _.invoke(['original', 'parent', 'create_user',\r\n        'modify_user', 'owner_user', 'reserved_user'], checkExpansion);\r\n      expandable = _.contains(expandable, true);\r\n\r\n      var actionsNeeded = node.actions.length <= 1;\r\n\r\n      if (expandable || actionsNeeded) {\r\n        this._blockActions();\r\n        return node.fetch()\r\n            .always(_.bind(this._unblockActions, this))\r\n            .fail(_.bind(function (request) {\r\n              var error = new base.Error(request);\r\n              ModalAlert.showError(error.message);\r\n            }, this));\r\n      }\r\n      return $.Deferred().resolve().promise();\r\n    },\r\n\r\n    _closeMetadata: function () {\r\n      var node = this.options.model;\r\n      if (node.get('type') === 1 && node.original && node.original.get('type') === 0) {\r\n        this.trigger(\"metadata:close\");\r\n      } else {\r\n        this.trigger('metadata:close:without:animation');\r\n      }\r\n    },\r\n\r\n    _blockActions: function () {\r\n      var origView = this.options.originatingView;\r\n      origView && origView.blockActions && origView.blockActions();\r\n    },\r\n\r\n    _unblockActions: function () {\r\n      var origView = this.options.originatingView;\r\n      origView && origView.unblockActions && origView.unblockActions();\r\n    }\r\n  });\r\n\r\n  _.extend(MetadataView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataView;\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.action.one.item.properties.view',[\"module\", \"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/marionette\",\r\n  \"csui/widgets/metadata/impl/header/metadata.header.view\",\r\n  \"csui/widgets/metadata/metadata.properties.view\", 'csui/utils/log',\r\n  \"csui/controls/mixins/view.events.propagation/view.events.propagation.mixin\",\r\n  \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (module, _, $, Marionette, MetadataHeaderView, MetadataPropertiesView,\r\n    log, ViewEventsPropagationMixin) {\r\n\r\n  var MetadataActionOneItemPropertiesView = Marionette.ItemView.extend({\r\n\r\n    className: 'cs-add-item-metadata-form',\r\n    template: false,\r\n\r\n    // public\r\n    constructor: function MetadataActionOneItemPropertiesView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n\r\n      options.showRequiredFieldsSwitch = true;\r\n      this.metadataHeaderView = new MetadataHeaderView(options);\r\n      this.listenTo(this.metadataHeaderView, \"metadata:item:name:save\", this._saveItemName);\r\n      this.listenTo(this.metadataHeaderView, \"update:button\", _.bind(function (args) {\r\n        this.trigger(\"update:button\", args);\r\n      }, this));\r\n\r\n      this.metadataPropertiesView = new MetadataPropertiesView({\r\n        node: options.model,\r\n        collection: options.collection,\r\n        container: options.container,\r\n        context: options.context,\r\n        hideStickyHeader: !!options.hideStickyHeader,\r\n        formMode: 'create',\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        metadataView: this,\r\n        formCollection: options.formCollection,\r\n        suppressAddProperties: options.suppressAddProperties\r\n      });\r\n      if (!options.collection) {\r\n        this.listenTo(this.metadataPropertiesView.allForms, 'sync', this._updateSchema);\r\n      }\r\n      this.listenTo(this.metadataPropertiesView, 'render:forms', this.setNameFieldFocus);\r\n      this.propagateEventsToViews(this.metadataHeaderView, this.metadataPropertiesView);\r\n    },\r\n\r\n    // private\r\n    _updateSchema: function() {\r\n      // just update name schema in name field of header\r\n      var generalForm = this.metadataPropertiesView.allForms.first(),\r\n          formSchema = generalForm && generalForm.get('schema'),\r\n          nameSchema = formSchema && formSchema.properties && formSchema.properties.name;\r\n      if (nameSchema) {\r\n        this.metadataHeaderView.metadataItemNameView.updateNameSchema(nameSchema);\r\n      } else {\r\n        log.warn('Form collection lacks name field in the first form.') && console.warn(log.last);\r\n      }\r\n    },\r\n\r\n    // private\r\n    onRender: function () {\r\n      var inv = this.metadataHeaderView.render();\r\n      var mdv = this.metadataPropertiesView.render();\r\n\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n\r\n      if (this.options.suppressHeaderView !== true) {\r\n        this.$el.append(inv.el);\r\n      }\r\n      this.$el.append(mdv.el);\r\n\r\n      if (this.options.suppressHeaderView) {\r\n        this.$el.addClass('without-header-bar');\r\n      }\r\n\r\n      if (this.options.extraViewClass) {\r\n        this.$el.addClass(this.options.extraViewClass);\r\n      }\r\n\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n    },\r\n\r\n    // private\r\n    onBeforeDestroy: function () {\r\n      this.cancelEventsToViewsPropagation(this.metadataHeaderView, this.metadataPropertiesView);\r\n      this.metadataHeaderView.destroy();\r\n      this.metadataPropertiesView.destroy();\r\n    },\r\n\r\n    // public\r\n    validate: function () {\r\n      var bNameIsValid = this.metadataHeaderView.validateName();\r\n      var bFormsAreValid = this.metadataPropertiesView.validateForms();\r\n\r\n      return bNameIsValid && bFormsAreValid;\r\n    },\r\n\r\n    // public\r\n    getValues: function () {\r\n      var data = {};\r\n      var validation = this.validate();\r\n      if (validation) {\r\n        var itemName = this.metadataHeaderView.getNameValue();\r\n        data = {\r\n          \"name\": itemName,\r\n          \"type\": this.options.model.get('type'),\r\n          \"parent_id\": this.options.model.get('parent_id')\r\n        };\r\n        var formsValues = this.metadataPropertiesView.getFormsValues();\r\n        _.extend(data, formsValues);\r\n      }\r\n\r\n      return data;\r\n    },\r\n\r\n    // public\r\n    setNameFieldFocus: function () {\r\n      if (this.firstFocusCalled !== true && this.options.suppressHeaderView !== true) {\r\n        this.metadataHeaderView.setNameEditModeFocus();\r\n      }\r\n      this.firstFocusCalled = true;\r\n    },\r\n\r\n    _saveItemName: function (args) {\r\n      var itemName = args.sender.getValue();\r\n      this.model.set('name', itemName, {silent: true});\r\n      args.success && args.success();\r\n    }\r\n\r\n  });\r\n\r\n  MetadataActionOneItemPropertiesView.version = \"1.0\";\r\n\r\n  _.extend(MetadataActionOneItemPropertiesView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataActionOneItemPropertiesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/common/base.metadata.action.view',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\",\r\n  \"csui/controls/dialog/dialog.view\", \"csui/controls/progressblocker/blocker\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, $, Backbone, DialogView, BlockingView, lang) {\r\n\r\n  function BaseMetadataActionView() {\r\n  }\r\n\r\n  _.extend(BaseMetadataActionView.prototype, Backbone.Events, {\r\n\r\n    // public: display metadata view in either originatingView with animation or modal dialog\r\n    // @parameter:\r\n    // - options: {\r\n    //    - originatingView: animate and show the form in the originating view\r\n    //    - view: the view to show\r\n    //    - dialogOptions: {\r\n    //      - dialogTitle: dialog title\r\n    //      - OkButtonTitle: the OK button title\r\n    //      - OkButtonClick: method to handle the OkClick\r\n    //      - CancelButtonTitle: (optional) the Cancel button title\r\n    //      - CancelButtonClick: (optional) method to handle the CancelClick\r\n    //    }\r\n    // }\r\n    baseDisplayForm: function (options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.deferred = $.Deferred();\r\n\r\n      if (options.view) {\r\n        BlockingView.imbue(options.view);\r\n      }\r\n\r\n      // replace the originatingView with sliding left/right animation\r\n      if (options.originatingView) {\r\n\r\n        // TODO: UX and Josef will ask for this in the future, add this support when time permits\r\n\r\n      } else {  // show Metadata View in a modal dialog\r\n\r\n        var dialogOptions = options.dialogOptions || {};\r\n        var okAction = dialogOptions.OkButtonClick || this._cancelAction;\r\n        var cancelAction = dialogOptions.CancelButtonClick || this._cancelAction;\r\n        var buttons = [\r\n          {\r\n            id: 'okButton',\r\n            default: true,\r\n            label: dialogOptions.OkButtonTitle ? dialogOptions.OkButtonTitle :\r\n                   lang.defaultDialogOkButtonTitle,\r\n            click: _.bind(okAction, this, options)\r\n          },\r\n          {\r\n            id: 'cancel',\r\n            label: dialogOptions.CancelButtonTitle ? dialogOptions.CancelButtonTitle :\r\n                   lang.defaultDialogCancelButtonTitle,\r\n            click: _.bind(cancelAction, this),\r\n            actionToken: dialogOptions.CancelButtonActionToken\r\n          }\r\n        ];\r\n        if (this.options.view.model) {\r\n          if (!(this.options.view.model.get('name'))) {\r\n            buttons[0].disabled = true;\r\n          }\r\n        }\r\n        var title = dialogOptions.dialogTitle ? dialogOptions.dialogTitle :\r\n                    lang.defaultDialogTitle;\r\n        var dialog = new DialogView({\r\n          className: 'cs-item-action-metadata',\r\n          title: title,\r\n          buttons: buttons,\r\n          largeSize: true,\r\n          view: options.view\r\n        });\r\n        this.dialog = dialog;\r\n        this.listenTo(this.dialog, \"hide\", this._cancelAction)\r\n            .listenTo(this.dialog, \"update:button\", _.bind(function (args) {\r\n              // Apply overlay[pointer-events:none] for button to prevent user interaction\r\n              // until the respective action is performed instead of disabling the button\r\n              // which may cause ambiguity\r\n              if (args.overlay !== undefined) {\r\n                var buttonModel = this.dialog.footerView.collection.get('okButton'),\r\n                    button      = this.dialog.footerView.children.findByModel(buttonModel),\r\n                    method      = button && !button.$el.is(\":disabled\") && args.overlay ?\r\n                                  'addClass' : 'removeClass';\r\n                button.$el[method](\"cs-button-overlay\");\r\n              } else {\r\n                this.dialog.footerView.updateButton('okButton', args);\r\n              }\r\n            }, this));\r\n\r\n        dialog.show();\r\n\r\n      }\r\n\r\n      return this.deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _cancelAction: function (args) {\r\n      var resetRequiredSwitch = !!this.node && !!this.node.collection &&\r\n                                !!this.node.collection.requireSwitched &&\r\n                                (!!this.node.get('action') ||\r\n                                 (!!this.options.view && this.options.view.options.action));\r\n      if (resetRequiredSwitch) {\r\n        this.node.collection.requireSwitched = false;\r\n      }\r\n      if (this.options.view) {\r\n        this.options.view.unblockActions();\r\n      }\r\n      this.dialog.destroy();\r\n\r\n      // assume that the close button was clicked if args is undefined\r\n      if (args === undefined) {\r\n        args = {\r\n          buttonAttributes: {\r\n            actionToken: \"closeMetadataActionView\"\r\n          }\r\n        };\r\n      }\r\n\r\n      this.deferred.reject(args);\r\n    }\r\n\r\n  });\r\n\r\n  BaseMetadataActionView.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(BaseMetadataActionView, {version: \"1.0\"});\r\n\r\n  return BaseMetadataActionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/add.properties/metadata.add.categories.view',['require', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/url',\r\n  'csui/utils/log', 'csui/widgets/metadata/impl/common/base.metadata.action.view',\r\n  'csui/models/forms', 'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/dialogs/modal.alert/modal.alert', 'css!csui/widgets/metadata/impl/metadata'\r\n], function (require, _, $, Url, log, BaseMetadataActionView, FormCollection, lang, ModalAlert) {\r\n  'use strict';\r\n\r\n  //\r\n  // Metadata add categories view displays the category form for the user to fill out\r\n  // categories values, validates the form and adds the category to the object when the user clicks\r\n  // on the Add button.\r\n  //\r\n  function MetadataAddCategoriesView() {\r\n  }\r\n\r\n  _.extend(MetadataAddCategoriesView.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    displayForm: function (options) {\r\n      var deferred = $.Deferred();\r\n      var self = this;\r\n\r\n      options || (options = {});\r\n      this.node = options.model;\r\n      this.catId = options.catId;\r\n      this.catName = options.catName;\r\n\r\n      var catCollection = new FormCollection([options.catModel]);\r\n      catCollection.fetching = false;\r\n      catCollection.fetched = true;\r\n\r\n      require([\"csui/widgets/metadata/metadata.action.one.item.properties.view\"\r\n      ], function (MetadataActionOneItemPropertiesView) {\r\n\r\n        self.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n          model: options.model,\r\n          collection: catCollection,\r\n          context: options.context,\r\n          commands: options.commands,\r\n          suppressAddProperties: true,\r\n          suppressHeaderView: true,\r\n          // send this flag to MetadataActionOneItemPropertiesView to hide sticky header.\r\n          hideStickyHeader: true,\r\n          extraViewClass: 'add-category'\r\n        });\r\n\r\n        var baseUIOptions = {};\r\n        baseUIOptions.callerProcessData = options.callerProcessData;\r\n        baseUIOptions.originatingView = options.originatingView;\r\n        baseUIOptions.view = self.metadataAddItemPropView;\r\n        var dialogOptions = {};\r\n        dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                    lang.addNewCategoryDialogTitle;\r\n        dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                      lang.addNewCategoryDialogAddButtonTitle;\r\n        dialogOptions.OkButtonClick = self._addCategory;\r\n        baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n        self.baseDisplayForm(baseUIOptions)\r\n            .done(function (resp) {\r\n              deferred.resolve(resp);\r\n            })\r\n            .fail(function (error2) {\r\n              deferred.reject(error2);\r\n            });\r\n\r\n      }, function (error) {\r\n        log.warn('Failed to load MetadataActionOneItemPropertiesView. {0}', error)\r\n        && console.log(log.last);\r\n        deferred.reject(error);\r\n      });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _addCategory: function (args) {\r\n      var valid = this.metadataAddItemPropView.validate();\r\n      if (valid) {\r\n        //generic error handling for all modules\r\n        this.options.view.$el.find(\".cs-formfield-invalid\").removeClass('cs-formfield-invalid');\r\n        var nodeId = this.node.get('id');\r\n        var catData = this.metadataAddItemPropView.getValues();\r\n        var data = {id: nodeId, category_id: this.catId};\r\n        if (catData.roles && catData.roles.categories) {\r\n          _.each(catData.roles.categories, function (cat, key) {\r\n            data = _.extend(data, cat);\r\n          });\r\n        }\r\n\r\n        var fullUrl = Url.combine(this.node.urlBase(), 'categories');\r\n        var formData = new FormData();\r\n        var options = {\r\n          type: 'POST',\r\n          url: fullUrl\r\n        };\r\n        formData.append('body', JSON.stringify(data));\r\n        _.extend(options, {\r\n          data: formData,\r\n          contentType: false,\r\n          processData: false\r\n        });\r\n\r\n        this.metadataAddItemPropView.blockActions();\r\n        this.node.connector.makeAjaxCall(options)\r\n            .done(_.bind(function (resp) {\r\n              this.metadataAddItemPropView.unblockActions();\r\n              this.dialog.destroy();\r\n              this.deferred.resolve(resp);\r\n            }, this))\r\n            .fail(_.bind(function (error) {\r\n              this.metadataAddItemPropView.unblockActions();\r\n              var serverError = '';\r\n              if (error && error.responseJSON && error.responseJSON.error) {\r\n                serverError = error.responseJSON.error;\r\n              }\r\n              var title = lang.addNewCategoryFailTitle;\r\n              var message = _.str.sformat(lang.addNewCategoryFailMessage,\r\n                  this.catName, this.node.get('name'), nodeId, serverError);\r\n              ModalAlert.showError(message, title);\r\n            }, this));\r\n\r\n      } else {\r\n        //generic error handling for all modules\r\n        this.options.view.$el.find(\".binf-has-error .cs-formfield\").addClass(\r\n            'cs-formfield-invalid');\r\n\r\n      }\r\n\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddCategoriesView, {version: \"1.0\"});\r\n\r\n  return MetadataAddCategoriesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.categories.controller',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/utils/base', 'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/dialogs/modal.alert/modal.alert', 'csui/widgets/metadata/impl/metadata.utils',\r\n  'csui/widgets/metadata/impl/add.properties/metadata.add.categories.view',\r\n  'csui/models/appliedcategoryform', 'csui/dialogs/node.picker/node.picker',\r\n  'csui/utils/commands', 'css!csui/widgets/metadata/impl/metadata'\r\n], function (_, $, Backbone, Url, base, lang, ModalAlert,\r\n    MetadataUtils, MetadataAddCategoriesView, AppliedCategoryFormModel,\r\n    NodePicker, commands) {\r\n  'use strict';\r\n\r\n  //\r\n  // Metadata add categories controller handles adding category to an existing item, a new item\r\n  // being created or copied or moved.\r\n  //\r\n\r\n  function MetadataAddCategoriesController() {\r\n  }\r\n\r\n  _.extend(MetadataAddCategoriesController.prototype, Backbone.Events, {\r\n\r\n    // Public: add category to an existing item, new item being created or copied or moved\r\n    //\r\n    // Parameters:\r\n    // - <object> options containing:\r\n    //   - action: the action 'create', 'copy', 'move', or undefined for an existing item\r\n    //   - node: an existing or a temporary NodeModel for a new item being created with undefined id\r\n    //   - collection: the existing category collection\r\n    //   - container: the container where the item is/will be in\r\n    //   - inheritance: the category inheritance 'original', 'destination' or 'merged'\r\n    //   - context: the application context\r\n    //   - parentView: the view to have blockingView on\r\n    //\r\n    // Return:\r\n    // - <object> jQuery deferred object containing the new 'catModel' if succeeds\r\n    //\r\n    AddNewCategory: function (options) {\r\n      var deferred = $.Deferred();\r\n      var nodePicker = new NodePicker({\r\n        startLocation: 'category.volume',\r\n        context: options.context,\r\n        selectableTypes: [131],\r\n        unselectableNodes: !options.collection ? [] :\r\n                           options.collection.where({role_name: \"categories\"}),\r\n        selectMultiple: false,\r\n        dialogTitle: lang.selectCategoryTitle,\r\n        globalSearch: true,\r\n        selectButtonLabel: lang.selectCategoryButtonLabel\r\n      });\r\n      nodePicker.show()\r\n          .done(_.bind(function (args) {\r\n            _.reduce(args.nodes, function (promise, node) {\r\n                  return promise.then(_.bind(function () {\r\n                    var catId = node.get('id');\r\n                    var catName = node.get('name');\r\n\r\n                    // with adding a new item, the object does not exist yet.  Just load the form.\r\n                    if (options.node.get('id') === undefined || options.action) {\r\n                      // load the category create form for the user to fill out values\r\n                      return this._loadNewCategoryForm(options, catId, catName);\r\n                    } else {\r\n                      // code path new: display the form in a modal dialog with the Add button\r\n                      return this._displayAddCategoryForm(options, catId, catName);\r\n                    }\r\n                  }, this));\r\n                }, $.Deferred().resolve(), this)\r\n                .done(function (resp3) {\r\n                  deferred.resolve(resp3);\r\n                })\r\n                .fail(function (error3) {\r\n                  deferred.reject(error3);\r\n                });\r\n          }, this))\r\n          .fail(function (error2) {\r\n            deferred.reject(error2);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private: display the form in a modal dialog with the Add button\r\n    _displayAddCategoryForm: function (options, catId, catName) {\r\n      var deferred = $.Deferred();\r\n      var self = this;\r\n      this._getCategoryModel(options, catId, catName)\r\n          .done(function (resp) {\r\n            var formOptions = {\r\n              model: options.node,\r\n              context: options.context,\r\n              commands: commands,\r\n              catId: catId,\r\n              catName: catName, catModel: resp.catModel\r\n            };\r\n            var metadataAddCatView = new MetadataAddCategoriesView();\r\n            metadataAddCatView.displayForm(formOptions)\r\n                .done(function (resp2) {\r\n                  self._loadNewCategoryForm(options, catId, catName, \"update\")\r\n                      .done(function (resp3) {\r\n                        deferred.resolve(resp3);\r\n                      })\r\n                      .fail(function (error3) {\r\n                        deferred.reject(error3);\r\n                      });\r\n                })\r\n                .fail(function (error2) {\r\n                  deferred.reject(error2);\r\n                });\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: load the category create form first for the user to fill out values\r\n    _loadNewCategoryForm: function (options, catId, catName, formType) {\r\n      if (catId && options.collection.get(catId)) {\r\n        var title = lang.addNewCategoryFailTitle;\r\n        var message = _.str.sformat(lang.categoryExistsMessage, catName);\r\n        ModalAlert.showError(message, title);\r\n        return $.Deferred().reject({});\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      this._getCategoryModel(options, catId, catName, formType)\r\n          .done(_.bind(function (resp) {\r\n            deferred.resolve(resp);\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: get the category model\r\n    _getCategoryModel: function (options, catId, catName, formType) {\r\n\r\n      var allowDeleteCat = true;\r\n      // default: formType = 'create'\r\n      if (!formType) {\r\n        formType = 'create';\r\n        if (options.action === undefined) {\r\n          allowDeleteCat = false;\r\n        }\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      var fullUrl;\r\n      var connector = (options.node && options.node.connector) ||\r\n                      (options.container && options.container.connector);\r\n      var nodeId = options.node.get('id');\r\n      //TO:DO pId is passed to made it availabe in TKLFieldView need to fix as this temp fix\r\n      if (options.container) {\r\n        options.node.pId = options.container.get('id');\r\n      }\r\n      if (options.node.get('id') === undefined && options.action === 'create') {\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/create?parent_id=' + options.container.get('id') +\r\n            '&type=' + options.node.get('type') + '&category_id=' + catId);\r\n      } else if (options.action === 'copy' || options.action === 'move') {\r\n        var inheritanceVal = 0;\r\n        if (options.inheritance === 'destination') {\r\n          inheritanceVal = 1;\r\n        } else if (options.inheritance === 'merged') {\r\n          inheritanceVal = 2;\r\n        }\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/' + options.action + '?id=' + nodeId +\r\n            '&parent_id=' + options.container.get('id') +\r\n            '&inheritance=' + inheritanceVal + '&category_id=' + catId);\r\n      } else {\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/categories/' + formType + '?id=' + nodeId +\r\n            '&category_id=' + catId);\r\n      }\r\n\r\n      var ajaxOptions = {\r\n        type: 'GET',\r\n        url: fullUrl\r\n      };\r\n      if (options.parentView) {\r\n        options.parentView.blockActions();\r\n        //prevent pointer events on add button untill new category form is rendered\r\n        options.parentView.trigger(\"update:button\", true);\r\n      }\r\n      connector\r\n          .makeAjaxCall(ajaxOptions)\r\n          .done(_.bind(function (resp) {\r\n            options.parentView && (options.parentView.unblockActions());\r\n\r\n            // different calls have different data structure\r\n            var categoryForm, categoryData, categoryOptions, categorySchema;\r\n            if (options.action === 'create' ||\r\n                options.action === 'copy' || options.action === 'move') {\r\n              if (resp.forms.length > 1) {\r\n                categoryForm = _.find(resp.forms, function (form) {\r\n                  return form.role_name === \"categories\";\r\n                });\r\n                if (categoryForm) {\r\n                  categoryData = (categoryForm.data[catId]) || {};\r\n                  categoryOptions = (categoryForm.options.fields[catId]) || {};\r\n                  categorySchema = (categoryForm.schema.properties[catId]) || {};\r\n                }\r\n              }\r\n            } else {\r\n              categoryForm = resp && resp.forms && resp.forms[0];\r\n              categoryData = (categoryForm && categoryForm.data) || {};\r\n              categoryOptions = (categoryForm.options) || {};\r\n              categorySchema = (categoryForm.schema) || {};\r\n            }\r\n\r\n            if (categoryForm) {\r\n              if (categoryOptions.form) {\r\n                categoryOptions = _.omit(categoryOptions, 'form');\r\n              }\r\n              if (categorySchema.title === undefined && catName) {\r\n                categorySchema.title = catName;\r\n              }\r\n\r\n              var metadataUtils = new MetadataUtils();\r\n              var required = metadataUtils.AlpacaFormOptionsSchemaHaveRequiredFields(categoryOptions,\r\n                  categorySchema);\r\n\r\n              var categoryModel = new AppliedCategoryFormModel({\r\n                id: catId,\r\n                title: catName || (categoryOptions && categoryOptions.fields && categoryOptions.fields.category_id &&\r\n                                   categoryOptions.fields.category_id.label),\r\n                allow_delete: allowDeleteCat,\r\n                removeable: allowDeleteCat,\r\n                required: required,\r\n                data: categoryData,\r\n                schema: _.omit(categorySchema, 'description'),\r\n                options: categoryOptions,\r\n                role_name: \"categories\"\r\n              }, {\r\n                node: options.node,\r\n                categoryId: catId,\r\n                action: 'none',\r\n                parse: true\r\n              });\r\n\r\n              deferred.resolve({catModel: categoryModel});\r\n            } else {\r\n              deferred.reject({});\r\n            }\r\n          }, this))\r\n          .fail(_.bind(function (error) {\r\n            if (options.parentView) {\r\n              options.parentView.unblockActions();\r\n              options.parentView.trigger(\"update:button\", false);\r\n            }\r\n            var serverError = this._getRespError(error);\r\n            var title = lang.loadNewCategoryFailTitle;\r\n            var message = _.str.sformat(lang.loadNewCategoryFailMessage,\r\n                catName, options.node.get('name'), nodeId, serverError);\r\n            ModalAlert.showError(message, title);\r\n            deferred.reject(error);\r\n          }, this));\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _getRespError: function (resp) {\r\n      var error = '';\r\n      if (resp && resp.responseJSON && resp.responseJSON.error) {\r\n        error = resp.responseJSON.error;\r\n      } else if (base.MessageHelper.hasMessages()) {\r\n        error = $(base.MessageHelper.toHtml()).text();\r\n        base.MessageHelper.clear();\r\n      }\r\n      return error;\r\n    }\r\n  });\r\n\r\n  _.extend(MetadataAddCategoriesController, {version: \"1.0\"});\r\n\r\n  return MetadataAddCategoriesController;\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.item.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/widgets/metadata/impl/metadata.controller\",\r\n  \"csui/widgets/metadata/metadata.action.one.item.properties.view\",\r\n  \"csui/utils/commandhelper\", \"i18n!csui/widgets/metadata/impl/nls/lang\",\r\n  \"csui/dialogs/modal.alert/modal.alert\", 'csui/utils/nodesprites',\r\n  'csui/utils/commands', \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, BaseMetadataActionView, MetadataController,\r\n    MetadataActionOneItemPropertiesView, CommandHelper, lang, ModalAlert,\r\n    nodeSpriteCollection, commands) {\r\n\r\n  //\r\n  // Metadata Add Item Controller allows the adding of item with complete metadata\r\n  // that the user can edit and change values of general metadata, categories and other roles.\r\n  //\r\n\r\n  function MetadataAddItemController() {\r\n  }\r\n\r\n  _.extend(MetadataAddItemController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public (usually called from the 'command' class that has 'status' and 'options' parameters)\r\n    displayForm: function (status, options) {\r\n      var nodes = CommandHelper.getAtLeastOneNode(status);\r\n      var node = nodes.length > 0 ? nodes.models[0] : null;\r\n      // Compute the type name only if the new node includes the type name\r\n      // sent by the server, to be able to fall back to it\r\n      var addableTypeName = node.get('type_name') ?\r\n                            nodeSpriteCollection.findTypeByNode(node) :\r\n                            lang.addItemMetadataDialogTitleGeneric;\r\n\r\n      this.node = node;\r\n      this.metadataController = options.metadataController;\r\n\r\n      var addItemView = this.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n        model: node,\r\n        container: status.container,\r\n        id: options.id,\r\n        context: status.context || options && options.context,\r\n        commands: commands,\r\n        action: 'create',\r\n        inheritance: options.inheritance,\r\n        // Performs the complete fetch and preparation of the creation forms\r\n        collection: options.completeFormCollection,\r\n        // Performs just fetch; the preparation is performed by the csui forms collection\r\n        formCollection: options.formCollection\r\n      });\r\n      var baseUIOptions = {};\r\n      baseUIOptions.callerProcessData = options.callerProcessData;\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = addItemView;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  _.str.sformat(lang.addItemMetadataDialogTitle1, addableTypeName);\r\n      dialogOptions.OkButtonTitle = options.addButtonTitle ? options.addButtonTitle :\r\n                                    lang.addItemMetadataDialogButtonAddTitle;\r\n      dialogOptions.OkButtonClick = this._addItem;\r\n      dialogOptions.CancelButtonActionToken = options.cancelButtonActionToken;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      var deferred = this.baseDisplayForm(baseUIOptions);\r\n      this.listenTo(this.metadataAddItemPropView, \"update:button\", _.bind(function (args) {\r\n        this.dialog && this.dialog.trigger(\"update:button\", args);\r\n      }, this));\r\n\r\n      return deferred;\r\n    },\r\n\r\n    // private\r\n    _addItem: function (args) {\r\n      function updateButtons(dialog, attributes) {\r\n        if (dialog && dialog.footerView) {\r\n          dialog.footerView.getButtons().forEach(function (buttonView) {\r\n            buttonView.updateButton(attributes);\r\n          });\r\n        }\r\n      }\r\n\r\n      if (!!args.view.metadataPropertiesView.allFormsRendered) {\r\n        var enable = false;\r\n        if (args.callerProcessData !== true) {\r\n          updateButtons(this.dialog, {disabled: true});\r\n          enable = true;\r\n        }\r\n        var valid = this.metadataAddItemPropView.validate();\r\n        if (valid) {\r\n          var data = this.metadataAddItemPropView.getValues();\r\n\r\n          if (args.callerProcessData === true) {\r\n            this.dialog.destroy();\r\n            this.deferred.resolve({data: data});\r\n          } else {\r\n            var metadataController = this.metadataController ||\r\n                                     new MetadataController();\r\n\r\n            this.metadataAddItemPropView.blockActions();\r\n            enable = false;\r\n            metadataController.createItem(this.node, data)\r\n                .done(_.bind(function (resp) {\r\n                  this.listenToOnce(this.dialog, \"hide\", function () {\r\n                    this.metadataAddItemPropView.unblockActions();\r\n                    updateButtons(this.dialog, {disabled: false});\r\n                  });\r\n                  this.dialog.destroy();\r\n                  this.deferred.resolve({name: data.name});\r\n                }, this))\r\n                .fail(_.bind(function (resp) {\r\n                  this.metadataAddItemPropView.unblockActions();\r\n                  var error = lang.failedToCreateItem;\r\n                  if (resp) {\r\n                    if (resp.responseJSON && resp.responseJSON.error) {\r\n                      error = resp.responseJSON.error;\r\n                    } else if (resp.responseText) {\r\n                      error = resp.responseText;\r\n                    }\r\n                    ModalAlert.showError(error);\r\n                  }\r\n                  updateButtons(this.dialog, {disabled: false});\r\n                }, this));\r\n          }\r\n        }\r\n        if (enable) {\r\n          updateButtons(this.dialog, {disabled: false});\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddItemController, {version: \"1.0\"});\r\n\r\n  return MetadataAddItemController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior',['module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/log', 'csui/lib/marionette'\r\n], function (module, _, $, log, Marionette) {\r\n  'use strict';\r\n\r\n  // This behavior implements a default keyboard navigation for the metadata navigation list.\r\n\r\n  var TabPosition = {\r\n    none: -1,\r\n    header: 0,\r\n    list: 1\r\n  };\r\n\r\n  var MetadataNavigationListKeyboardBehavior = Marionette.Behavior.extend({\r\n\r\n    constructor: function MetadataNavigationListKeyboardBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n      view.keyboardBehavior = this;\r\n      this.tabableElements = [];\r\n\r\n      var self = this;\r\n      this.listenTo(view, 'show', function () {\r\n        self.refreshTabableElements(view);\r\n      });\r\n      this.listenTo(view, 'click:item', function (item) {\r\n        // clear the currently focused element\r\n        var selIndex = view.selectedIndex;\r\n        var selectedElem = view.selectedIndexElem(selIndex);\r\n        selectedElem && selectedElem.prop('tabindex', '-1');\r\n        // set the new element tabindex\r\n        view.currentTabPosition = TabPosition.list;\r\n        view.selectedIndex = view.collection.indexOf(item.model);\r\n      });\r\n\r\n      _.extend(view, {\r\n\r\n        _focusHeader: function () {\r\n          if (this.headerFocusable === true && this.headerElement) {\r\n            this.currentTabPosition = TabPosition.header;\r\n            return $(this.ui.header);\r\n          }\r\n          return undefined;\r\n        },\r\n\r\n        _focusList: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          this.currentTabPosition = TabPosition.list;\r\n          return this.getSelectedItem().$el;\r\n        },\r\n\r\n        _setFocus: function () {\r\n          if (this.headerFocusable === true && this.headerElement) {\r\n            return this._focusHeader();\r\n          } else {\r\n            return this._focusList();\r\n          }\r\n        },\r\n\r\n        _headerIsInFocus: function () {\r\n          return this.$(this.ui.header).is(\":focus\");\r\n        },\r\n\r\n        _listIsInFocus: function () {\r\n          var inFocus = false;\r\n          var i;\r\n          for (i = 0; i < this.collection.length; i++) {\r\n            var $elem = this.selectedIndexElem(i);\r\n            if ($elem && $elem.is(\":focus\")) {\r\n              inFocus = true;\r\n              break;\r\n            }\r\n          }\r\n\r\n          return inFocus;\r\n        },\r\n\r\n        _checkFocusAndSetCurrentTabPosition: function () {\r\n          if (this._headerIsInFocus()) {\r\n            this.currentTabPosition = TabPosition.header;\r\n          } else if (this._listIsInFocus()) {\r\n            this.currentTabPosition = TabPosition.list;\r\n          } else {\r\n            this.currentTabPosition = TabPosition.none;\r\n          }\r\n        },\r\n\r\n        // handle scenario that currentlyFocusedElement does not have event param for shiftTab\r\n        _setFirstAndLastFocusable: function () {\r\n          if (this.headerFocusable === true) {\r\n            $(this.ui.header).prop('tabindex', '0');\r\n          }\r\n          this.getSelectedItem() && this.getSelectedItem().$el.prop('tabindex', '0');\r\n        },\r\n\r\n        currentlyFocusedElement: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          this._setFirstAndLastFocusable();\r\n          if (event && event.shiftKey) {\r\n            return this._focusList();\r\n          }\r\n          // maintain old position\r\n          if (this.currentTabPosition === TabPosition.header) {\r\n            return this._focusHeader();\r\n          } else if (this.currentTabPosition === TabPosition.list) {\r\n            return this._focusList();\r\n          } else {\r\n            return this._setFocus();\r\n          }\r\n        },\r\n\r\n        _resetFocusedListElem: function () {\r\n          // workaround the general behaviors that it keeps the old focus\r\n          // reset focus back to the active list item before moving out of the region\r\n          var selIndex, selectedElem;\r\n\r\n          // clear the currently focused element\r\n          selIndex = this.selectedIndex;\r\n          selectedElem = this.selectedIndexElem(selIndex);\r\n          selectedElem && selectedElem.prop('tabindex', '-1');\r\n\r\n          // set to the active element\r\n          selIndex = this.getSelectedIndex();\r\n          selectedElem = this.selectedIndexElem(selIndex);\r\n          if (selectedElem) {\r\n            selectedElem.prop('tabindex', '0');\r\n            this.selectedIndex = selIndex;\r\n          }\r\n\r\n          // always have the header focusable\r\n          $(this.ui.header).prop('tabindex', '0');\r\n        },\r\n\r\n        _moveTo: function (event, $elem, $preElem) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          // this.trigger('changed:focus', this);\r\n          setTimeout(_.bind(function () {\r\n            $preElem && $preElem.prop('tabindex', '-1');\r\n            $elem.prop('tabindex', '0');\r\n            $elem.focus();\r\n          }, this), 50);\r\n        },\r\n\r\n        onKeyInView: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          if (event.keyCode === 9) {\r\n            // tab\r\n            if (event.shiftKey) {  // shift tab -> activate previous region\r\n              if (this.currentTabPosition === TabPosition.list &&\r\n                  this.headerFocusable === true && this.headerElement) {\r\n                if ($(this.ui.header).is(\":visible\")) {\r\n                  this._moveTo(event, this._focusHeader());\r\n                  this._resetFocusedListElem();\r\n                }\r\n              }\r\n            } else {\r\n              if (this.currentTabPosition === TabPosition.header) {\r\n                if (this.$el.find(\">.cs-content\").is(\":visible\")) {\r\n                  this._moveTo(event, this._focusList());\r\n                }\r\n              } else {\r\n                setTimeout(_.bind(function () {\r\n                  this._resetFocusedListElem();\r\n                }, this), 50);\r\n              }\r\n            }\r\n          } else if (event.keyCode === 32 || event.keyCode === 13) {\r\n            // space(32) or enter(13)\r\n            if (this.currentTabPosition === TabPosition.header) {\r\n              event.preventDefault();\r\n              event.stopPropagation();\r\n              this.clickBack();\r\n            } else if (this.currentTabPosition === TabPosition.list) {\r\n              event.preventDefault();\r\n              event.stopPropagation();\r\n              this.selectAt(this.selectedIndex);\r\n            }\r\n          }\r\n        },\r\n\r\n        onKeyDown: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          if (this.currentTabPosition !== TabPosition.list) {\r\n            this.onKeyInView(event);\r\n            return;\r\n          }\r\n\r\n          var selIndex = this.selectedIndex;\r\n          if (selIndex < 0 || selIndex === undefined) {\r\n            selIndex = this.getSelectedIndex();\r\n          }\r\n          var $preElem = this.selectedIndexElem(selIndex);\r\n\r\n          switch (event.which) {\r\n          case 33: // page up\r\n            this._moveTo(event, this._selectFirst(), $preElem);\r\n            break;\r\n          case 34: // page down\r\n            this._moveTo(event, this._selectLast(), $preElem);\r\n            break;\r\n          case 38: // up\r\n            this._moveTo(event, this._selectPrevious(), $preElem);\r\n            break;\r\n          case 40: // down\r\n            this._moveTo(event, this._selectNext(), $preElem);\r\n            break;\r\n          default:\r\n            this.onKeyInView(event);\r\n            return; // exit this handler for other keys\r\n          }\r\n        },\r\n\r\n        _selectFirst: function () {\r\n          this.selectedIndex = 0;\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectLast: function () {\r\n          this.selectedIndex = this.collection.length - 1;\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectNext: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          if (this.selectedIndex < this.collection.length - 1) {\r\n            this.selectedIndex++;\r\n          }\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectPrevious: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          if (this.selectedIndex > 0) {\r\n            this.selectedIndex--;\r\n          }\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        selectAt: function (index) {\r\n          if (index >= this.collection.length || index < 0) {\r\n            return;\r\n          }\r\n          var $elem = this.selectedIndexElem(index);\r\n          $elem && $elem.click();\r\n        }\r\n\r\n      });\r\n\r\n    }, // constructor\r\n\r\n    refreshTabableElements: function (view) {\r\n      log.debug('MetadataNavigationListKeyboardBehavior::refreshTabableElements ' +\r\n                view.constructor.name) &&\r\n      console.log(log.last);\r\n      if (view.options.data.back_button) {\r\n        this.view.headerFocusable = true;\r\n        this.view.headerElement = view.ui.header;\r\n      }\r\n      this.view.currentTabPosition = TabPosition.none;\r\n      this.view.selectedIndex = -1;\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataNavigationListKeyboardBehavior;\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.view',['csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/controls/list/simplelist.view',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior',\r\n  'csui/controls/node-type.icon/node-type.icon.view',\r\n  'csui/models/version',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, $,\r\n    SimpleListView,\r\n    TabableRegionBehavior,\r\n    MetadataNavigationListKeyboardBehavior,\r\n    NodeTypeIconView,\r\n    VersionModel,\r\n    lang) {\r\n\r\n  var MetadataNavigationListView = SimpleListView.extend({\r\n\r\n    childViewOptions: function (model) {\r\n      return {\r\n        templateHelpers: function () {\r\n          var nameAttribute = this.options.nameAttribute || 'name';\r\n          return {enableIcon: true, name: this.model.get(nameAttribute)};\r\n        },\r\n        nameAttribute: this.options.data.nameAttribute\r\n      };\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyDown'\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior,\r\n        initialActivationWeight: 100\r\n      },\r\n      MetadataNavigationListKeyboardBehavior: {\r\n        behaviorClass: MetadataNavigationListKeyboardBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataNavigationListView(options) {\r\n      this.events = _.extend({}, SimpleListView.prototype.events, this.events);\r\n      SimpleListView.apply(this, arguments);\r\n\r\n      // Do not use childEvents, because SimpleListView does it and our property\r\n      // would overwrite their value and disable their event handlers\r\n      this.listenTo(this, 'childview:render', this.onRenderItem);\r\n      this.listenTo(this, 'childview:before:destroy', this.onBeforeDestroyItem);\r\n    },\r\n\r\n    onRenderItem: function (childView) {\r\n      // for version metadata, show the version number in place of the icon\r\n      if (childView.model instanceof VersionModel) {\r\n        var verNum = childView.model.get('version_number_name');\r\n        $(childView.$('.csui-type-icon').get(0)).append(\r\n            \"<span title='\" + verNum + \"' class='list-item-version'>\" + verNum + \"</span>\"\r\n        );\r\n      } else {\r\n        childView._nodeIconView = new NodeTypeIconView({\r\n          el: childView.$('.csui-type-icon').get(0),\r\n          node: childView.model\r\n        });\r\n        childView._nodeIconView.render();\r\n        // Checking for ThumbnailView\r\n        if (this.options.originatingView && this.options.originatingView.thumbnailView) {\r\n          this.$el.addClass(\"csui-metadata-navigation-thumbnail\");\r\n          var nodeUrl = childView.model && childView.model.thumbnail &&\r\n                        childView.model.thumbnail.url;\r\n          if (childView._nodeIconView.$el.find('.csui-icon').hasClass('mime_document') &&\r\n              !childView._nodeIconView.$el.find('.csui-icon').hasClass('csui-icon-shortcut-overlay')) {\r\n            childView._nodeIconView.$el.find('.csui-icon').removeClass('mime_document');\r\n          }\r\n          if (nodeUrl) {\r\n            childView._nodeIconView.$el.find('.csui-icon').css('background-image',\r\n                'url(' + nodeUrl + ')');\r\n          }\r\n        }\r\n        else {\r\n          this.$el.find(\".csui-metadata-navigation-thumbnail\").removeClass(\r\n              \"csui-metadata-navigation-thumbnail\");\r\n        }\r\n      }\r\n\r\n      // show a red star if the model has enforced required attribute\r\n      var show_required = this.options.data && this.options.data.show_required === true;\r\n      var enforcedRequire = childView.model && childView.model.options &&\r\n                            childView.model.options.enforcedRequiredAttrs === true;\r\n      if (show_required && enforcedRequire) {\r\n        var titleEl = childView.$('.list-item-title').get(0);\r\n        if (titleEl) {\r\n          var cssClasses, tooltip;\r\n          if (childView.model.validated === true) {\r\n            // change the star to green checkmark if the model passed validation\r\n            cssClasses = 'cs-icon-required category_required_done';\r\n            tooltip = lang.requiredPassedTooltip;\r\n          } else {\r\n            //show red star icon for required attributes to be filled\r\n            cssClasses = 'cs-icon-required category_required';\r\n            tooltip = lang.requiredTooltip;\r\n          }\r\n          $(titleEl).before(\"<span class='\" + cssClasses + \"' aria-label='\" + tooltip +\r\n                            \"' title='\" + tooltip + \"'></span>\");\r\n        }\r\n      }\r\n    },\r\n\r\n    onBeforeDestroyItem: function (childView) {\r\n      if (childView._nodeIconView) {\r\n        childView._nodeIconView.destroy();\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataNavigationListView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/common/metadata.action.multiple.items',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"metadata-wrapper binf-col-md-12\\\">\\r\\n  <div class=\\\"metadata-navigation\\\">\\r\\n    <div class=\\\"metadata-sidebar\\\"></div>\\r\\n    <div class=\\\"metadata-content\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_common_metadata.action.multiple.items', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.behavior',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette'\r\n], function (_, $, Backbone, Marionette) {\r\n  'use strict';\r\n\r\n  // This behavior provides shared functionality for the metadata navigation list.\r\n\r\n  var MetadataNavigationListBehavior = Marionette.Behavior.extend({\r\n\r\n    constructor: function MetadataNavigationListBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n      _.extend(view, {\r\n\r\n        onBeforeShow: function () {\r\n          this._showChildViews();\r\n        },\r\n        onShow: function () {\r\n          this._showScrollPosition();\r\n        },\r\n        onBeforeDestroy: function () {\r\n          if (this.mdv && this.mdv.internal) {\r\n            this.mdv.destroy();\r\n          }\r\n          if (this.mdn) {\r\n            this.mdn.destroy();\r\n          }\r\n        },\r\n\r\n        _showChildViews: function () {\r\n          this.navigationRegion.show(this.mdn);\r\n          this.contentRegion.show(this.mdv);\r\n        },\r\n\r\n        _showScrollPosition: function () {\r\n          if (this.initiallySelected instanceof Backbone.Model) {\r\n            var index = this.mdn.collection.findIndex({id: this.initiallySelected.get('id')});\r\n            (index < 0 || index > this.mdn.collection.length - 1) && (index = 0);\r\n            return this.mdn.setSelectedIndex(index);\r\n          } else if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n            var firstSelected = this.initiallySelected.models[0];\r\n            var selIndex = this.mdn.collection.indexOf(firstSelected);\r\n            if (selIndex === -1) {\r\n              selIndex = this.mdn.collection.findIndex({id: firstSelected.get('id')});\r\n            }\r\n            this.mdn.setSelectedIndex(selIndex);\r\n          } else {\r\n            if (this.mdn.collection.models.length > 0) {\r\n              this.mdn.setSelectedIndex(0);\r\n            }\r\n          }\r\n\r\n        }\r\n      });\r\n\r\n    } // constructor\r\n\r\n  });\r\n\r\n  return MetadataNavigationListBehavior;\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/common/metadata.action.multiple.items',[],function(){});\n","csui.define('csui/widgets/metadata/impl/common/metadata.action.multiple.items.view',['csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.view',\r\n  'csui/widgets/metadata/metadata.action.one.item.properties.view',\r\n  'hbs!csui/widgets/metadata/impl/common/metadata.action.multiple.items',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.behavior', \"csui/lib/jsonpath\",\r\n  'css!csui/widgets/metadata/impl/common/metadata.action.multiple.items'\r\n], function (_, Backbone, Marionette, MetadataNavigationListView,\r\n    MetadataActionOneItemPropertiesView, template, LayoutViewEventsPropagationMixin,\r\n    MetadataNavigationListBehavior, jsonPath) {\r\n\r\n  var MetadataActionMultipleItemsView = Marionette.LayoutView.extend({\r\n\r\n    className: 'cs-metadata-add-items',\r\n    template: template,\r\n\r\n    regions: {\r\n      navigationRegion: \".metadata-sidebar\",\r\n      contentRegion: \".metadata-content\"\r\n    },\r\n\r\n    behaviors: {\r\n      MetadataNavigationListBehavior: {\r\n        behaviorClass: MetadataNavigationListBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataActionMultipleItemsView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      Marionette.LayoutView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.collection = options.collection;\r\n      this.container = options.container;\r\n      this.context = options.context;\r\n      this.originatingView = options.originatingView;\r\n      this.initiallySelected = this.options.selected;\r\n      this.commonCategories = options.commonCategories;\r\n      this.initialFormData = options.initialFormData;\r\n      this.requiredFields = [];\r\n\r\n      var initiallySelectedModel = this._getInitiallySelectedModel();\r\n      if (options.applyFlag) {\r\n        initiallySelectedModel.set(\"applyFlag\", options.applyFlag);\r\n      }\r\n\r\n      this.mdv = new MetadataActionOneItemPropertiesView({\r\n        model: initiallySelectedModel,\r\n        container: this.container,\r\n        context: this.context,\r\n        commands: options.commands,\r\n        originatingView: this.originatingView,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n      this.mdv.internal = true;\r\n      this._subscribeToMetadataViewEvents();\r\n\r\n      this.mdn = new MetadataNavigationListView({\r\n        collection: options.collection,\r\n        data: {\r\n          back_button: false,\r\n          title: '',\r\n          show_required: true\r\n        }\r\n      });\r\n      //Set the Initial categories to all uploadable files\r\n      if (options.applyFlag) {\r\n        this.setInitialCategories();\r\n      }\r\n      this.listenTo(this.mdn, 'click:item', this.onClickItem);\r\n      this.listenTo(this.mdn, 'click:back', this.onClickBack);\r\n      this.listenTo(this.mdn, 'show:node', function (args) {\r\n        this._showNode(args.model);\r\n      });\r\n      this.propagateEventsToRegions();\r\n    },\r\n\r\n    _getInitiallySelectedModel: function () {\r\n      if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n        return this.initiallySelected.models[0];\r\n      } else if (this.collection && this.collection.length > 0) {\r\n        return this.collection.models[0];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    onClickItem: function (item) {\r\n      var valid = this.validateAndSetValuesToNode();\r\n      if (valid) {\r\n        this._showNode(item.model);\r\n      } else {\r\n        item.cancelClick = true;\r\n      }\r\n    },\r\n\r\n    // set initial category values to all Alpaca forms\r\n    setInitialCategories: function () {\r\n      var that = this;\r\n      _.each(this.mdn.collection.models, function (model) {\r\n        var fileAttr = {};\r\n        if (model.get(\"data\") === undefined) {\r\n          fileAttr.advanced_versioning = false;\r\n          fileAttr.name = model.get(\"newName\") || model.get(\"name\");\r\n          fileAttr.mime_type = model.get(\"mime_type\");\r\n          fileAttr.type = model.get(\"type\") || 144;\r\n          fileAttr.parent_id = this.mdv.options.container.get(\"id\");\r\n          _.extend(fileAttr, JSON.parse(JSON.stringify(that.commonCategories)));\r\n        }\r\n        model.set('data', fileAttr);\r\n      }, this);\r\n\r\n    },\r\n\r\n    getRequiredFields: function () {\r\n      var formValues = {},\r\n          that       = this;\r\n      that.requiredFields = [];\r\n      if (this.initialFormData && this.initialFormData.models) {\r\n        _.each(this.initialFormData.models, function (tab, key) {\r\n          var values   = tab.get(\"data\"),\r\n              roleName = tab.get(\"role_name\"),\r\n              options  = tab.get('options'),\r\n              schema   = tab.get('schema'),\r\n              roles, role, category;\r\n\r\n          if (values) {\r\n            if (roleName) {\r\n              roles = formValues.roles || (formValues.roles = {});\r\n              role = roles[roleName] || (roles[roleName] = {});\r\n              if (roleName === 'categories') {\r\n                var requiredFields = jsonPath(schema, \"$..[?(@.required===true)]\",\r\n                    {resultType: \"PATH\"});\r\n                var nonValidateFields = jsonPath(options, \"$..[?(@.validate===false)]\",\r\n                    {resultType: \"PATH\"});\r\n\r\n                // getting field id for non validate fields\r\n                var nonValidateFieldsIds = [];\r\n                _.each(nonValidateFields, function (nvField) {\r\n                  var matches = nvField.toString().match(/(\\'[\\w]*\\')/g);\r\n                  if (!!matches) {\r\n                    nonValidateFieldsIds.push(matches[matches.length - 1].replace(/'/g, \"\"));\r\n                  }\r\n                });\r\n\r\n                // getting field id for Required Fields\r\n                var reqFieldId = [];\r\n                _.each(requiredFields, function (reqField) {\r\n                  var matches = reqField.toString().match(/(\\'[\\w]*\\')/g);\r\n                  if (!!matches) {\r\n                    reqFieldId.push(matches[matches.length - 1].replace(/'/g, \"\"));\r\n                  }\r\n                });\r\n\r\n                // eliminating non validating fields from required field ids.\r\n                reqFieldId = reqFieldId.filter(function (n) {\r\n                  // Eliminate if validation not required.\r\n                  return nonValidateFieldsIds.indexOf(n) === -1;\r\n                });\r\n                if (reqFieldId.length > 0) {\r\n                  that.requiredFields.push(reqFieldId);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    validateAndSetValuesToAllNode: function () {\r\n      var that           = this,\r\n          requiredFields = {},\r\n          valid          = true;\r\n      var formsValid = true;\r\n      this.getRequiredFields();\r\n      _.each(this.mdn.collection.models, _.bind(function (form) {\r\n        var data = form.get('data');\r\n        _.each(data.roles.categories, function (category) {\r\n          valid = valid && that._checkForAlpacaRequiredFields(form, category);\r\n        });\r\n        form.validated = valid;\r\n        formsValid = formsValid && valid;\r\n      }, this));\r\n      return formsValid;\r\n    },\r\n\r\n    // private\r\n    _checkForAlpacaRequiredFields: function (form, category) {\r\n      var valid    = true,\r\n          reqArray = [];\r\n      if (!!this.requiredFields) {\r\n        var nullCount = false;\r\n        _.each(this.requiredFields, function (arrayElement) {\r\n          reqArray = jsonPath(category, \"$..\" + arrayElement.toString(),\r\n              {resultType: \"PATH\"}.toArray);\r\n          _.each(reqArray, function (arrayElement) {\r\n            var checkNull = function (element) {\r\n              if (element instanceof Array && (element !== null || element !== \"\")) {\r\n                _.each(element, function (childElement) {\r\n                  checkNull(childElement);\r\n                });\r\n              } else if (element === null || element === \"\") {\r\n                nullCount = true;\r\n                return;\r\n              }\r\n            };\r\n            if (!nullCount) {\r\n              checkNull(arrayElement);\r\n            } else {\r\n              valid = false;\r\n              return;\r\n            }\r\n          });\r\n          if (nullCount) {\r\n            valid = false;\r\n            return;\r\n          }\r\n        });\r\n      }\r\n      return valid;\r\n    },\r\n\r\n    // public: validate the current form and set values to node if valid.\r\n    //         returns true if form is valid; otherwise, false.\r\n    validateAndSetValuesToNode: function () {\r\n      var item = this.mdn.getSelectedItem();\r\n      var valid = this.mdv.validate();\r\n      if (valid) {\r\n        var data = this.mdv.getValues();\r\n        // store the newly added categories data\r\n        if (item.model.newCategories.models.length > 0) {\r\n          _.each(item.model.newCategories.models, function (catModel) {\r\n            var catId = catModel.get('id');\r\n            var roleName = catModel.get('role_name');\r\n            var catData = {};\r\n            if (data && data.roles && data.roles[roleName]) {\r\n              catData = data.roles[roleName];\r\n            }\r\n            if (_.isEmpty(catData[catId]) === false) {\r\n              _.each(catModel.attributes.data, function (iValue, iKey) {\r\n                if (_.has(catData[catId], iKey)) {\r\n                  catModel.attributes.data[iKey] = catData[catId][iKey];\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n        item.model.validated = true;\r\n        item.model.set('data', data);  // intentionally trigger the set to redraw list item\r\n        return true;\r\n      }\r\n      if (!!this.mdv.metadataPropertiesView.allFormsRendered) {\r\n        item.model.validated = false;\r\n        item.model.trigger('change', item.model); // intentionally trigger the set to redraw list item\r\n      }\r\n      return false;\r\n    },\r\n\r\n    onClickBack: function () {\r\n      this.trigger(\"metadata:close\", {sender: this});\r\n    },\r\n\r\n    onItemNameChanged: function (newName) {\r\n      var selectedItem  = this.mdn.getSelectedItem(),\r\n          selectedIndex = this.mdn.getSelectedIndex();\r\n\r\n      selectedItem.render(); // name has been set silently\r\n      this.mdn.setSelectedIndex(selectedIndex);\r\n    },\r\n\r\n    _showNode: function (model) {\r\n      if (this.mdv && this.mdv.internal) {\r\n        this.mdv.destroy();\r\n      }\r\n      model.set(\"applyFlag\", this.options.applyFlag);\r\n      this.mdv = new MetadataActionOneItemPropertiesView({\r\n        model: model,\r\n        container: this.container,\r\n        context: this.context,\r\n        originatingView: this.originatingView,\r\n        action: this.options.action,\r\n        inheritance: this.options.inheritance\r\n      });\r\n      this.mdv.internal = true;\r\n      this._subscribeToMetadataViewEvents();\r\n      this.contentRegion.show(this.mdv);\r\n    },\r\n\r\n    _subscribeToMetadataViewEvents: function () {\r\n      this.listenTo(this.mdv, 'metadata:close',\r\n          _.bind(function () {\r\n            this.trigger(\"metadata:close\", {sender: this});\r\n          }, this));\r\n      this.listenTo(this.mdv, 'item:name:changed', _.bind(this.onItemNameChanged, this));\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataActionMultipleItemsView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataActionMultipleItemsView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/models/node/node.model\", \"csui/controls/dialog/dialog.view\",\r\n  \"csui/widgets/metadata/impl/common/metadata.action.multiple.items.view\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/dialogs/modal.alert/modal.alert\",\r\n  'csui/utils/commands',\r\n  \"css!csui/widgets/metadata/impl/metadata\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, BaseMetadataActionView, NodeModel, DialogView,\r\n    MetadataActionMultipleItemsView, lang, ModalAlert, commands) {\r\n\r\n  function MetadataAddMultipleDocsController() {\r\n  }\r\n\r\n  _.extend(MetadataAddMultipleDocsController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public\r\n    displayForm: function (status, options) {\r\n\r\n      var applyFlag        = false,\r\n          commonCategories = this._getCommonCategories(options);\r\n      if (options.initialFormData && options.initialFormData.models &&\r\n          options.initialFormData.models.length > 1) {\r\n        applyFlag = true;\r\n      }\r\n      this.metadataAddItems = new MetadataActionMultipleItemsView({\r\n        container: options.container,\r\n        collection: status.nodes,\r\n        selected: status.nodes,\r\n        action: 'create',\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        commands: commands,\r\n        commonCategories: commonCategories,\r\n        applyFlag: applyFlag,\r\n        initialFormData: options.initialFormData\r\n      });\r\n\r\n      this.listenTo(this.metadataAddItems, \"metadata:add\", _.bind(function () {\r\n        this.deferred.resolve();\r\n      }, this));\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = this.metadataAddItems;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.addDocumentMetadataDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.addButtonTitle ? options.addButtonTitle :\r\n                                    lang.addDocumentMetadataDialogAddButtonTitle;\r\n      dialogOptions.OkButtonClick = this._addItems;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      return this.baseDisplayForm(baseUIOptions);\r\n\r\n    },\r\n\r\n    _getCommonCategories: function (options) {\r\n      var formValues = {},\r\n          that       = this;\r\n      if (options.initialFormData && options.initialFormData.models) {\r\n        _.each(options.initialFormData.models, function (tab, key) {\r\n          var values   = tab.get(\"data\"),\r\n              roleName = tab.get(\"role_name\"),\r\n              options  = tab.get('options'),\r\n              schema   = tab.get('schema'),\r\n              roles, role, category;\r\n\r\n          if (values) {\r\n            if (roleName) {\r\n              roles = formValues.roles || (formValues.roles = {});\r\n              role = roles[roleName] || (roles[roleName] = {});\r\n              if (roleName === 'categories') {\r\n                // For categories, merge the properties to the\r\n                // roles.categories.<category_id> object\r\n                var catId = tab.get(\"id\").toString();\r\n                category = role[catId] || (role[catId] = {});\r\n                // when attributes are not set, the server deletes\r\n                // the category unless it is set to null\r\n                if (_.isEmpty(values)) {\r\n                  category = null;\r\n                } else {\r\n                  //Replace null values with empty string\r\n                  values = JSON.parse(JSON.stringify(values).replace(/null/g, \"\\\"\\\"\"));\r\n                  _.extend(category, values);\r\n                }\r\n              } else {\r\n                // With a role defined, merge the properties to the\r\n                // roles.<role_name> object\r\n                //TODO: uncomment this once classifications are displayed on upload dialog\r\n                //_.extend(role, values);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n      return formValues;\r\n    },\r\n\r\n    // private\r\n    _addItems: function (args) {\r\n      if (args.view.mdv && args.view.mdv.metadataPropertiesView &&\r\n          args.view.mdv.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItems.validateAndSetValuesToNode();\r\n        if (valid) {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".cs-formfield-invalid\").removeClass('cs-formfield-invalid');\r\n          var allValid = true;\r\n          this.metadataAddItems.validateAndSetValuesToAllNode();\r\n          this.metadataAddItems.collection.forEach(function (model) {\r\n            allValid = allValid && (model.validated ? true : false);\r\n          });\r\n          if (allValid) {\r\n            this.metadataAddItems.collection.forEach(function (model) {\r\n              var data = model.get('data');\r\n              var item = model.get('fileObject');\r\n              var extended_data = model.get('extended_data');\r\n              if (data && item) {\r\n                item.set('newName', data.name);\r\n                var extendedData = {};\r\n                if (data.description !== undefined) {\r\n                  extendedData.description = data.description;\r\n                }\r\n                if (data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = data.advanced_versioning;\r\n                }\r\n                if (data.roles) {\r\n                  extendedData.roles = _.deepClone(data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  _.extend(extended_data, extendedData);\r\n                }\r\n              }\r\n            });\r\n            this.dialog.destroy();\r\n            this.deferred.resolve();\r\n          } else {\r\n            var title = lang.addDocumentMetadataDialogTitle;\r\n            var message = lang.missingRequiredMetadataForDocuments;\r\n            ModalAlert.showError(message, title);\r\n          }\r\n        } else {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".binf-has-error .cs-formfield\").addClass(\r\n              'cs-formfield-invalid');\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddMultipleDocsController, {version: \"1.0\"});\r\n\r\n  return MetadataAddMultipleDocsController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.document.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\",\r\n  \"csui/models/nodes\", \"csui/models/node/node.model\",\r\n  \"csui/widgets/metadata/metadata.add.item.controller\", \"csui/widgets/metadata/impl/metadata.utils\",\r\n  \"csui/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, $, Backbone, NodeCollection, NodeModel, MetadataAddItemController, MetadataUtils,\r\n    MetadataAddMultipleDocsController, lang) {\r\n  'use strict';\r\n\r\n  function MetadataAddDocumentController() {\r\n  }\r\n\r\n  _.extend(MetadataAddDocumentController.prototype, Backbone.Events, {\r\n\r\n    //\r\n    // Public: check for enforced required metadata and show the metadata view if true\r\n    //\r\n    addItemsRequiredMetadata: function (fileUploadCollection, options) {\r\n      var deferred      = $.Deferred(),\r\n          fileModels    = fileUploadCollection.models,\r\n          file          = _.find(fileUploadCollection.models, function (fileUploadModel) {\r\n                return fileUploadModel.get('newVersion') === undefined;\r\n              }) || fileModels[0],\r\n          tempName      = fileModels.length > 0 ? file.get('file').name : 'temp_name',\r\n          utilOptions   = {\r\n            action: 'create',\r\n            addableType: options.addableType,\r\n            name: tempName,\r\n            container: options.container,\r\n            docParentId: fileModels.length > 0 ? file.get('id') : null\r\n          },\r\n          metadataUtils = new MetadataUtils(),\r\n          newFiles      = $.grep(fileUploadCollection.models, function (fileUploadModel) {\r\n            return fileUploadModel.get('newVersion') === undefined;\r\n          }); //Collection might contain new versions of existing items, remove such items\r\n\r\n      metadataUtils.ContainerHasEnforcedEmptyRequiredMetadata(utilOptions)\r\n          .done(_.bind(function (resp) {\r\n            if (resp.hasRequiredMetadata === true) {\r\n              var metadataDeferred = $.Deferred();\r\n\r\n              if (newFiles && newFiles.length === 1) {\r\n                // add one item with required metadata\r\n                metadataDeferred = this._addOneItemWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else if (newFiles && newFiles.length > 1) {\r\n                // add multiple items with required metadata\r\n                if (resp.initialFormData) {\r\n                  options.initialFormData = resp.initialFormData;\r\n                }\r\n                metadataDeferred = this._addMultipleItemsWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else {\r\n                deferred.reject();\r\n              }\r\n\r\n              metadataDeferred.done(function (resp) {\r\n                deferred.resolve(resp);\r\n              }).fail(function (error) {\r\n                deferred.reject(error);\r\n              });\r\n\r\n            } else {\r\n              // no required metadata: resolve and let the caller code proceed with add item as normal\r\n              deferred.resolve({});\r\n            }\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: create a node collection from the items array\r\n    _makeNodeCollectionFromItems: function (items, options) {\r\n      var nodes = new NodeCollection();\r\n      if (items && items.length > 0) {\r\n        _.each(items, function (item) {\r\n          var file = item.get('file');\r\n          var node = new NodeModel({\r\n            name: item.get('newName') || file.name,\r\n            type: item.get('type') || 144,\r\n            size: file.size,\r\n            mime_type: file.type,\r\n            fileObject: item,\r\n            extended_data: item.get('extended_data')\r\n          }, {\r\n            connector: options.container.connector\r\n          });\r\n          _.extend(node.options, {\r\n            enforcedRequiredAttrs: true\r\n          });\r\n          nodes.add(node, {silent: true});\r\n        }, this);\r\n      }\r\n      return nodes;\r\n    },\r\n\r\n    // Private: add one item with required metadata\r\n    _addOneItemWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var status = {\r\n        nodes: nodes,\r\n        container: options.container,\r\n        context: options.context\r\n      };\r\n      var cmdOptions = {\r\n        callerProcessData: true,\r\n        dialogTitle: lang.addDocumentMetadataDialogTitle,\r\n        addButtonTitle: lang.addDocumentMetadataDialogAddButtonTitle,\r\n        cancelButtonActionToken: \"cancelAddOneItemWithRequiredMetadata\"\r\n      };\r\n\r\n      // show add item metadata view\r\n      var metadataAddItemController = new MetadataAddItemController();\r\n      metadataAddItemController\r\n          .displayForm(status, cmdOptions)\r\n          .done(function (resp) {\r\n            var item = items[0];\r\n            item.set('newName', resp.data.name);\r\n\r\n            var extendedData = {};\r\n            if (resp.data.description !== undefined) {\r\n              extendedData.description = resp.data.description;\r\n            }\r\n            if (resp.data.advanced_versioning !== undefined) {\r\n              extendedData.advanced_versioning = resp.data.advanced_versioning;\r\n            }\r\n            if (resp.data.roles) {\r\n              extendedData.roles = _.deepClone(resp.data.roles);\r\n            }\r\n            if (_.isEmpty(extendedData) === false) {\r\n              item.set('extended_data', extendedData);\r\n            }\r\n\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (args) {\r\n            var error = (args && args.error) ? args.error : undefined;\r\n            var userAction;\r\n\r\n            if (args && args.buttonAttributes) {\r\n              if (args.buttonAttributes.actionToken === \"cancelAddOneItemWithRequiredMetadata\") {\r\n                userAction = \"cancelAddOneItemWithRequiredMetadata\";\r\n              }\r\n              else if (args.buttonAttributes.actionToken === \"closeMetadataActionView\") {\r\n                userAction = \"closeMetadataActionView\";\r\n              }\r\n            }\r\n            deferred.reject({error: error, userAction: userAction});\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: add multiple items with required metadata\r\n    _addMultipleItemsWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var cmdStatus = {nodes: nodes};\r\n\r\n      var metadataAddMultipleDocsController = new MetadataAddMultipleDocsController();\r\n      metadataAddMultipleDocsController\r\n          .displayForm(cmdStatus, options)\r\n          .done(function (resp) {\r\n            deferred.resolve();\r\n          })\r\n          .fail(function () {\r\n            deferred.reject();\r\n          });\r\n\r\n      return deferred.promise();\r\n    }\r\n\r\n  });\r\n\r\n  MetadataAddDocumentController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataAddDocumentController, {version: \"1.0\"});\r\n\r\n  return MetadataAddDocumentController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/widgets/metadata/impl/metadata.controller\",\r\n  \"csui/widgets/metadata/metadata.action.one.item.properties.view\",\r\n  \"csui/utils/commandhelper\", \"i18n!csui/widgets/metadata/impl/nls/lang\",\r\n  \"csui/dialogs/modal.alert/modal.alert\", 'csui/utils/commands',\r\n  \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, BaseMetadataActionView, MetadataController,\r\n    MetadataActionOneItemPropertiesView, CommandHelper, lang, ModalAlert, commands) {\r\n\r\n  //\r\n  // Metadata Copy/Move One Item Controller allows copying/moving of ONE item with complete metadata\r\n  // that the user can edit and change values of general metadata, categories and other roles.\r\n  //\r\n\r\n  function MetadataCopyMoveOneItemController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveOneItemController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public (usually called from the 'command' class that has 'status' and 'options' parameters)\r\n    displayForm: function (status, options) {\r\n      var nodes = CommandHelper.getAtLeastOneNode(status);\r\n      var node = nodes.length > 0 ? nodes.models[0] : null;\r\n\r\n      this.node = node;\r\n\r\n      var addItemView = this.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n        model: node,\r\n        container: status.container,\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        commands: commands,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.callerProcessData = options.callerProcessData;\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = addItemView;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.defaultDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                    lang.defaultDialogOkButtonTitle;\r\n      dialogOptions.OkButtonClick = this._CopyMoveItem;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      var deferred = this.baseDisplayForm(baseUIOptions);\r\n\r\n      return deferred;\r\n    },\r\n\r\n    // private\r\n    _CopyMoveItem: function (args) {\r\n      if (args.view.metadataPropertiesView && args.view.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItemPropView.validate();\r\n        if (valid) {\r\n          var data = this.metadataAddItemPropView.getValues();\r\n\r\n          if (args.callerProcessData === true) {\r\n            this.dialog.destroy();\r\n            this.deferred.resolve({data: data});\r\n          } else {\r\n            var metadataController = new MetadataController();\r\n            metadataController.createItem(this.node, data)\r\n                .done(_.bind(function (resp) {\r\n                  this.dialog.destroy();\r\n                  this.deferred.resolve({name: data.name});\r\n                }, this))\r\n                .fail(function (resp) {\r\n                  var error = lang.failedToCreateItem;\r\n                  if (resp) {\r\n                    if (resp.responseJSON && resp.responseJSON.error) {\r\n                      error = resp.responseJSON.error;\r\n                    } else if (resp.responseText) {\r\n                      error = resp.responseText;\r\n                    }\r\n                    ModalAlert.showError(error);\r\n                  }\r\n                });\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataCopyMoveOneItemController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveOneItemController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/models/node/node.model\", \"csui/controls/dialog/dialog.view\",\r\n  \"csui/widgets/metadata/impl/common/metadata.action.multiple.items.view\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/dialogs/modal.alert/modal.alert\",\r\n  \"css!csui/widgets/metadata/impl/metadata\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, BaseMetadataActionView, NodeModel, DialogView,\r\n    MetadataActionMultipleItemsView, lang, ModalAlert) {\r\n\r\n  function MetadataCopyMoveMultipleItemsController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveMultipleItemsController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public\r\n    displayForm: function (status, options) {\r\n\r\n      this.metadataAddItems = new MetadataActionMultipleItemsView({\r\n        container: options.container,\r\n        collection: status.nodes,\r\n        selected: status.nodes,\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n\r\n      this.listenTo(this.metadataAddItems, \"metadata:add\", _.bind(function () {\r\n        this.deferred.resolve();\r\n      }, this));\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = this.metadataAddItems;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.defaultDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                    lang.defaultDialogOkButtonTitle;\r\n      dialogOptions.OkButtonClick = this._CopyMoveItems;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      return this.baseDisplayForm(baseUIOptions);\r\n\r\n    },\r\n\r\n    // private\r\n    _CopyMoveItems: function (args) {\r\n      if (args.view.mdv && args.view.mdv.metadataPropertiesView &&\r\n          args.view.mdv.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItems.validateAndSetValuesToNode();\r\n        if (valid) {\r\n          var allValid = true;\r\n          this.metadataAddItems.collection.forEach(function (model) {\r\n            var modelValid = model.options.enforcedRequiredAttrs === true ?\r\n                             (model.validated ? true : false ) : true;\r\n            allValid = allValid && modelValid;\r\n          });\r\n          if (allValid) {\r\n            this.metadataAddItems.collection.forEach(function (model) {\r\n              var data = model.get('data');\r\n              var item = model.get('itemObject');\r\n              if (data && item) {\r\n                item.newName = data.name;\r\n                var extendedData = {};\r\n                if (data.description !== undefined) {\r\n                  extendedData.description = data.description;\r\n                }\r\n                if (data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = data.advanced_versioning;\r\n                }\r\n                if (data.roles) {\r\n                  extendedData.roles = _.deepClone(data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  item.extended_data = extendedData;\r\n                }\r\n              }\r\n            });\r\n            this.dialog.destroy();\r\n            this.deferred.resolve();\r\n          } else {\r\n            var title = lang.defaultDialogTitle;\r\n            var message = lang.missingRequiredMetadataForObjects;\r\n            ModalAlert.showError(message, title);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataCopyMoveMultipleItemsController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveMultipleItemsController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.copy.move.items.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\", \"csui/models/nodes\",\r\n  \"csui/models/node/node.model\", \"csui/widgets/metadata/impl/metadata.utils\", \"csui/models/actions\",\r\n  \"csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller\",\r\n  \"csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, $, Backbone, NodeCollection, NodeModel, MetadataUtils, ActionCollection,\r\n    MetadataCopyMoveOneItemController, MetadataCopyMoveMultipleItemsController, lang) {\r\n\r\n  function MetadataCopyMoveItemsController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveItemsController.prototype, Backbone.Events, {\r\n\r\n    //\r\n    // Public: copy/move one or multiple items with open metadata option\r\n    //\r\n    CopyMoveItemsWithMetadata: function (items, options) {\r\n      return this.CopyMoveItemsRequiredMetadata(items, _.extend(options, {openMetadata: true}));\r\n    },\r\n\r\n    // private\r\n    _copyMoveItemsWithMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n      var metadataDeferred = $.Deferred();\r\n\r\n      if (items && items.length > 0) {\r\n        options.id || (options.id = items[0].id);\r\n        options.container || (options.container = options.targetFolder);\r\n      }\r\n\r\n      if (items && items.length === 1) {\r\n        // copy/move one item with metadata\r\n        metadataDeferred = this._copyMoveOneItemWithRequiredMetadata(items, options);\r\n      } else if (items && items.length > 1) {\r\n        // copy/move multiple items with metadata\r\n        metadataDeferred = this._copyMoveMultipleItemsWithRequiredMetadata(items, options);\r\n      } else {\r\n        deferred.reject();\r\n      }\r\n\r\n      metadataDeferred.done(function (resp) {\r\n        deferred.resolve();\r\n      }).fail(function (error) {\r\n        deferred.reject(error);\r\n      });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    //\r\n    // Public: check for enforced required metadata and show the metadata view if true\r\n    //\r\n    CopyMoveItemsRequiredMetadata: function (items, options) {\r\n      if (!items || items.length < 1) {\r\n        return $.Deferred().reject();\r\n      }\r\n\r\n      // 'original' does not need checking\r\n      if (options.openMetadata !== true && options.inheritance === 'original') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      // latest PM decision is to deal only with 'destination'.  Option 'merged' is only for 1 item.\r\n      if (options.openMetadata !== true && items.length > 1 && options.inheritance === 'merged') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      // talking the server developers, only need to check with one object\r\n      var utilOptions = {\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        items: items,\r\n        container: options.targetFolder,\r\n        context: options.context\r\n      };\r\n      var metadataUtils = new MetadataUtils();\r\n      metadataUtils.ContainerHasEnforcedEmptyRequiredMetadataOnNodes(utilOptions)\r\n          .done(_.bind(function (resp) {\r\n            if ((resp.requiredMetadata && resp.enforcedItems && resp.enforcedItems.length > 0) ||\r\n                options.openMetadata === true) {\r\n              if (resp.requiredMetadata) {\r\n                utilOptions = _.extend(utilOptions, {enforcedItems: resp.enforcedItems});\r\n              }\r\n              this._copyMoveItemsWithMetadata(items, utilOptions)\r\n                  .done(function (resp) {\r\n                    deferred.resolve(resp);\r\n                  }).fail(function (error) {\r\n                deferred.reject(error);\r\n              });\r\n            } else {\r\n              // no required metadata: resolve and let the caller code proceed normally\r\n              deferred.resolve();\r\n            }\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: create a node collection from the items array\r\n    _makeNodeCollectionFromItems: function (items, options) {\r\n      var nodes = new NodeCollection();\r\n      if (items && items.length > 0) {\r\n        _.each(items, function (item) {\r\n          var enforcedRequiredAttrs = _.find(options.enforcedItems,\r\n              function (enfItem) { return enfItem.id === item.id; }) === undefined ? false : true;\r\n          var node = new NodeModel({\r\n            id: item.id,\r\n            name: item.newName || item.name,\r\n            container: item.container,\r\n            mime_type: item.mime_type,\r\n            original_id: item.original_id,\r\n            type: item.type,\r\n            type_name: item.type_name,\r\n            action: options.action,\r\n            inheritance: options.inheritance,\r\n            itemObject: item,\r\n            size: item.size,\r\n            size_formatted: (item.type === 144 || item.type === 749 || item.type === 736 ||\r\n                             item.type === 30309) ? item.size_formatted : undefined\r\n          }, {\r\n            connector: options.container.connector\r\n          });\r\n          if (item.type === 140) { // for url object\r\n            node.attributes.url = item.url;\r\n          }\r\n          _.extend(node.options, {\r\n            original: item.original,\r\n            enforcedRequiredAttrs: enforcedRequiredAttrs\r\n          });\r\n          node.original = item.original || node.original;\r\n          node.actions = item.actions || new ActionCollection();\r\n          nodes.add(node, {silent: true});\r\n        }, this);\r\n      }\r\n      return nodes;\r\n    },\r\n\r\n    // Private: copy/move one item with required metadata\r\n    _copyMoveOneItemWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var status = {\r\n        nodes: nodes,\r\n        container: options.container\r\n      };\r\n      var dialogTitle, okButtonTitle;\r\n      if (options.action === 'copy') {\r\n        dialogTitle = lang.copyOneItemMetadataDialogTitle;\r\n        okButtonTitle = lang.copyItemsMetadataDialogButtonTitle;\r\n      } else if (options.action === 'move') {\r\n        dialogTitle = lang.moveOneItemMetadataDialogTitle;\r\n        okButtonTitle = lang.moveItemsMetadataDialogButtonTitle;\r\n      }\r\n      dialogTitle = this._extendDialogTitle(dialogTitle, options.inheritance);\r\n\r\n      var cmdOptions = {\r\n        callerProcessData: true,\r\n        action: options.action,\r\n        context: options.context,\r\n        inheritance: options.inheritance,\r\n        originatingView: options.originatingView,\r\n        dialogTitle: dialogTitle,\r\n        okButtonTitle: okButtonTitle\r\n      };\r\n\r\n      // show copy/move one item metadata view\r\n      var metadataCopyMoveOneItemController = new MetadataCopyMoveOneItemController();\r\n      metadataCopyMoveOneItemController\r\n          .displayForm(status, cmdOptions)\r\n          .done(function (resp) {\r\n            items[0].newName = resp.data.name;\r\n            var extendedData = {};\r\n            if (resp.data.description !== undefined) {\r\n              extendedData.description = resp.data.description;\r\n            }\r\n            if (resp.data.advanced_versioning !== undefined) {\r\n              extendedData.advanced_versioning = resp.data.advanced_versioning;\r\n            }\r\n            if (resp.data.roles) {\r\n              extendedData.roles = _.deepClone(resp.data.roles);\r\n            }\r\n            if (_.isEmpty(extendedData) === false) {\r\n              items[0].extended_data = extendedData;\r\n            }\r\n\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: copy/move multiple items with metadata\r\n    _copyMoveMultipleItemsWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var dialogTitle, okButtonTitle;\r\n      if (options.action === 'copy') {\r\n        dialogTitle = _.str.sformat(lang.copyMultipleItemsMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.copyItemsMetadataDialogButtonTitle;\r\n      } else if (options.action === 'move') {\r\n        dialogTitle = _.str.sformat(lang.moveMultipleItemsMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.moveItemsMetadataDialogButtonTitle;\r\n      }\r\n      dialogTitle = this._extendDialogTitle(dialogTitle, options.inheritance);\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var cmdStatus = {nodes: nodes};\r\n      var cmdOptions = {\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        container: options.container,\r\n        context: options.context,\r\n        originatingView: options.originatingView,\r\n        dialogTitle: dialogTitle,\r\n        okButtonTitle: okButtonTitle\r\n      };\r\n      var metadataCopyMoveMultipleItemsController = new MetadataCopyMoveMultipleItemsController();\r\n      metadataCopyMoveMultipleItemsController\r\n          .displayForm(cmdStatus, cmdOptions)\r\n          .done(function (resp) {\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: extend the dialog title based on the inheritance\r\n    _extendDialogTitle: function (dialogTitle, inheritance) {\r\n      var extDialogTitle = dialogTitle;\r\n      if (inheritance === 'original') {\r\n        extDialogTitle = dialogTitle + ' ' + lang.inheritanceOriginalProperties;\r\n      } else if (inheritance === 'destination') {\r\n        extDialogTitle = dialogTitle + ' ' + lang.inheritanceDestinationProperties;\r\n      } else if (inheritance === 'merged') {\r\n        extDialogTitle = dialogTitle + ' ' + lang.inheritanceMergedProperties;\r\n      }\r\n      return extDialogTitle;\r\n    }\r\n\r\n  });\r\n\r\n  MetadataCopyMoveItemsController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataCopyMoveItemsController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveItemsController;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"metadata-wrapper binf-col-md-12\\\">\\r\\n  <div class=\\\"metadata-navigation\\\">\\r\\n    <div class=\\\"metadata-sidebar\\\"></div>\\r\\n    <div class=\\\"metadata-content\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_metadatanavigation_impl_metadatanavigation', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/metadata/impl/metadatanavigation/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadatanavigation/impl/nls/root/lang',{\r\n  dialogTitle: 'Favorites',\r\n  searchPlaceholder: 'Search Favorites',\r\n  versionsTitle: 'Versions'\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',[],function(){});\n","// Shows a list of links to favorite nodes\r\ncsui.define('csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',[\r\n  'csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.view',\r\n  'csui/widgets/metadata/metadata.view',\r\n  'hbs!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/utils/contexts/factories/next.node',\r\n  'i18n!csui/widgets/metadata/impl/metadatanavigation/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation'\r\n], function (_, Backbone, Marionette, TabableRegionBehavior, MetadataNavigationListBehavior,\r\n    MetadataNavigationListView, MetadataView, template, LayoutViewEventsPropagationMixin,\r\n    NextNodeModelFactory, lang) {\r\n  'use strict';\r\n\r\n  //\r\n  // Constructor options:\r\n  // - showTitleIcon: boolean to show or hide the icon in the title bar\r\n  //\r\n  var MetadataNavigationView = Marionette.LayoutView.extend({\r\n    className: 'cs-metadata',\r\n    template: template,\r\n\r\n    regions: {\r\n      navigationRegion: \".metadata-sidebar\",\r\n      contentRegion: \".metadata-content\"\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior,\r\n        initialActivationWeight: 100\r\n      },\r\n      MetadataNavigationListBehavior: {\r\n        behaviorClass: MetadataNavigationListBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataNavigationView(options) {\r\n      options || (options = {});\r\n      Marionette.LayoutView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.collection = options.collection;\r\n      this.container = options.container;\r\n      this.containerCollection = options.containerCollection;\r\n      this.context = options.context;\r\n      this.originatingView = options.originatingView;\r\n      this.showCloseIcon = options.showCloseIcon;\r\n      this.initiallySelected = this.options.selected;\r\n      this.selectedTab = options.selectedTab;\r\n      this.selectedProperty = options.selectedProperty;\r\n      this.showPermissionView = options.showPermissionView;\r\n      this.thumbnailViewState = options.originatingView &&\r\n                                options.originatingView.thumbnailViewState;\r\n      // TODO: Put the title on the interface (to options). New scenarios\r\n      // should not be hardcoded here one after another. They should\r\n      // specify what they need on the interface.\r\n      var title = options.container ? options.container.get('name') : '';\r\n      if (!title && options.collection.length > 0 &&\r\n          !!options.collection.models[0].collection.title) {\r\n        title = options.collection.models[0].collection.title;\r\n      }\r\n      // for versions, use a static title\r\n      if (Object.getPrototypeOf(options.collection).constructor.name === 'NodeVersionCollection') {\r\n        title = lang.versionsTitle;\r\n      }\r\n\r\n      // Set toolbarItems from originating view to this.options, because when creating\r\n      // MetadataView, this is used as originatingView and we want to use the toolbar or menu\r\n      // items that are specified at the initial originatingView\r\n      if (!this.options.toolbarItems && this.originatingView && this.originatingView.options &&\r\n          this.originatingView.options.toolbarItems) {\r\n        this.options.toolbarItems = this.originatingView.options.toolbarItems;\r\n      }\r\n\r\n      var initiallySelectedModel = this._getInitiallySelectedModel();\r\n      this.mdv = (this.options.data && this.options.data.contentView) ?\r\n                 this.options.data.contentView :\r\n                 new MetadataView({\r\n                   model: initiallySelectedModel,\r\n                   container: this.container,\r\n                   containerCollection: this.containerCollection,\r\n                   collection: this.collection,\r\n                   context: this.context,\r\n                   originatingView: this,\r\n                   metadataNavigationView: this,\r\n                   isExpandedView: !!this.options.isExpandedView,\r\n                   showCloseIcon: this.showCloseIcon === undefined ? false : this.showCloseIcon,\r\n                   selectedTab: this.selectedTab,\r\n                   selectedProperty: this.selectedProperty,\r\n                   showPermissionView: this.showPermissionView\r\n                 });\r\n      if (!this.options.data || !this.options.data.contentView) {\r\n        this.mdv.internal = true;\r\n      }\r\n\r\n      this._subscribeToMetadataViewEvents();\r\n\r\n      this.mdn = new MetadataNavigationListView({\r\n        collection: options.collection,\r\n        containerCollection: this.containerCollection,\r\n        data: {\r\n          back_button: (this.originatingView || this.containerCollection) ? true : false,\r\n          title: title,\r\n          nameAttribute: options.nameAttribute\r\n        },\r\n        originatingView: options.originatingView\r\n      });\r\n      this.listenTo(this.mdn, 'click:item', this.onClickItem);\r\n      this.listenTo(this.mdn, 'click:back', this.onClickBack);\r\n      this.listenTo(this.mdn, 'show:node', function (args) {\r\n        this._showNode(args.model);\r\n      });\r\n      this.listenTo(this.mdv, 'disable:active:item', function (args) {\r\n        this.mdn.$el.find('.binf-active').addClass('active-item-disable');\r\n      }).listenTo(this.mdv, 'enable:active:item', function () {\r\n        this.mdn.$el.find('.active-item-disable').removeClass('active-item-disable');\r\n      });\r\n\r\n      if (this.options.originatingView) {\r\n        this.listenTo(this.options.originatingView, 'before:destroy', function () {\r\n          this._closeMetadata();\r\n        });\r\n      }\r\n\r\n      this.propagateEventsToRegions();\r\n    },\r\n\r\n    _getInitiallySelectedModel: function () {\r\n      if (this.initiallySelected instanceof Backbone.Model) {\r\n        var index = this.collection.findIndex({id: this.initiallySelected.get('id')});\r\n        if (index < 0 || index > this.collection.length - 1) { return null; }\r\n        return this.collection.at(index);\r\n      } else if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n        return this.initiallySelected.models[0];\r\n      } else if (this.collection && this.collection.length > 0) {\r\n        return this.collection.models[0];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    onClickItem: function (item) {\r\n      this._showNode(item.model);\r\n    },\r\n\r\n    onClickBack: function () {\r\n      this._closeMetadata();\r\n    },\r\n\r\n    onItemNameChanged: function (newName) {\r\n      var selectedItem  = this.mdn.getSelectedItem(),\r\n          selectedIndex = this.mdn.getSelectedIndex();\r\n\r\n      selectedItem.render(); // name has been set silently\r\n      this.mdn.setSelectedIndex(selectedIndex);\r\n    },\r\n\r\n    _moveToNextItemAfterDeleteOrMove: function () {\r\n      if (this.mdn.collection.length === 0) {\r\n        this._closeMetadata();\r\n      } else {\r\n        var nextIndex = this.indexOfItemDeleteOrMove;\r\n        nextIndex === this.mdn.collection.length && (nextIndex--);\r\n        this.mdn.selectAt(nextIndex);\r\n      }\r\n    },\r\n\r\n    onItemBeforeDelete: function (args) {\r\n      this.indexOfItemDeleteOrMove = this.mdn.getSelectedIndex();\r\n    },\r\n\r\n    onItemDeleted: function (args) {\r\n      this._moveToNextItemAfterDeleteOrMove();\r\n    },\r\n\r\n    onItemBeforeMove: function (args) {\r\n      this.indexOfItemDeleteOrMove = this.mdn.getSelectedIndex();\r\n      this.listenToOnce(this.containerCollection, 'remove', _.bind(this.onItemMoved, this));\r\n    },\r\n\r\n    onItemMoved: function (removedNode) {\r\n      this.mdn.collection.remove(removedNode);\r\n      this._moveToNextItemAfterDeleteOrMove();\r\n    },\r\n\r\n    _showNode: function (model) {\r\n      var selectedTab = this.mdv.metadataTabView.tabLinks ?\r\n                        this.mdv.metadataTabView.tabLinks.selected :\r\n                        this.mdv.options.selectedTab ? this.mdv.options.selectedTab : \"\",\r\n          activeTab   = this.mdv.metadataTabView.options.activeTab ?\r\n                        this.mdv.metadataTabView.options.activeTab :\r\n                        this.mdv.options.activeTab ? this.mdv.options.activeTab : \"\";\r\n      if (this.mdv && this.mdv.internal) {\r\n        this.mdv.destroy();\r\n      }\r\n\r\n      this.mdv = new MetadataView({\r\n        model: model,\r\n        container: this.container,\r\n        containerCollection: this.containerCollection,\r\n        collection: this.collection,\r\n        context: this.context,\r\n        originatingView: this,\r\n        metadataNavigationView: this,\r\n        showCloseIcon: this.showCloseIcon === undefined ? false : this.showCloseIcon,\r\n        activeTab: activeTab,\r\n        selectedTab: selectedTab,\r\n        showPermissionView: this.showPermissionView\r\n      });\r\n      this.mdv.internal = true;\r\n\r\n      this._subscribeToMetadataViewEvents();\r\n      this.contentRegion.show(this.mdv);\r\n    },\r\n\r\n    onMetadataClose: function () {\r\n      this._closeMetadata();\r\n    },\r\n\r\n    onDestroy: function() {\r\n      if (this.thumbnailViewState) {\r\n        this.originatingView.thumbnail.resultsView.triggerMethod('metadata:close');\r\n      }\r\n    },\r\n\r\n    _closeMetadata: function () {\r\n      this.trigger('metadata:close', {sender: this});\r\n\r\n      if (!this.originatingView && this.containerCollection && this.containerCollection.node) {\r\n        // there is no originatingView to go back; thus, go to the container\r\n        var id = this.containerCollection.node.get('id');\r\n        if (this.context && id !== undefined) {\r\n          var nextNode = this.context.getModel(NextNodeModelFactory);\r\n          if (nextNode) {\r\n            if (nextNode.get('id') === id) {\r\n              // when id is same as nextNode's id, nextNode.set(id) event is not triggered\r\n              nextNode.unset('id', {silent: true});\r\n            }\r\n            nextNode.set('id', id);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    _subscribeToMetadataViewEvents: function () {\r\n      this.listenTo(this.mdv, 'metadata:close', _.bind(function () {\r\n        this._closeMetadata();\r\n      }, this));\r\n      this.listenTo(this.mdv, 'metadata:close:without:animation', _.bind(function () {\r\n        this.trigger('metadata:close:without:animation', {sender: this});\r\n      }, this));\r\n      this.listenTo(this.mdv, 'item:name:changed', _.bind(this.onItemNameChanged, this));\r\n      this.listenTo(this.mdv, 'metadata:item:before:delete', _.bind(function (args) {\r\n        this.onItemBeforeDelete(args);\r\n      }, this));\r\n      this.listenTo(this.mdv, 'metadata:item:deleted', _.bind(function (args) {\r\n        this.onItemDeleted(args);\r\n      }, this));\r\n      this.listenTo(this.mdv, 'metadata:item:before:move', _.bind(function (args) {\r\n        this.onItemBeforeMove(args);\r\n      }, this));\r\n    }\r\n  });\r\n\r\n  _.extend(MetadataNavigationView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataNavigationView;\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/root/lang',{\r\n\r\n  FetchNodeFailTitle: 'Error',\r\n  FetchNodeFailMessage: 'Failed to fetch node \"{0}\". \\n\\n{1}'\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata.navigation/impl/metadata.navigation',[],function(){});\n","csui.define('csui/widgets/metadata.navigation/metadata.navigation.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/base', 'csui/controls/progressblocker/blocker', 'csui/utils/contexts/factories/node',\r\n  'csui/utils/contexts/factories/children', 'csui/utils/contexts/factories/children2',\r\n  'csui/widgets/nodestable/nodestable.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',\r\n  'csui/behaviors/default.action/impl/defaultaction', 'csui/dialogs/modal.alert/modal.alert',\r\n  'i18n!csui/widgets/metadata.navigation/impl/nls/lang',\r\n  'css!csui/widgets/metadata.navigation/impl/metadata.navigation'\r\n], function (_, $, Backbone, Marionette, base, BlockingView, NodeModelFactory,\r\n    ChildrenCollectionFactory, Children2CollectionFactory, NodesTableView,\r\n    ViewEventsPropagationMixin, MetadataNavigationViewImpl, DefaultActionController,\r\n    ModalAlert, lang) {\r\n  'use strict';\r\n\r\n  // TODO: remove this code when v1 and v2 browse call is finalized\r\n  if (NodesTableView.useV2RestApi) {\r\n    ChildrenCollectionFactory = Children2CollectionFactory;\r\n  }\r\n\r\n  //\r\n  // Public: Metadata Navigation View\r\n  // Description: view consists of the navigation list panel on the left and metadata view panel.\r\n  //\r\n  var MetadataNavigationView = Marionette.ItemView.extend({\r\n\r\n    className: 'cs-metadata-navigation-wrapper',\r\n\r\n    template: false,\r\n\r\n    constructor: function MetadataNavigationView(options) {\r\n      options || (options = {});\r\n      options.data || (options.data = {});\r\n      options.showCloseIcon = false;\r\n      this.options = options;\r\n      this.defaultActionController = new DefaultActionController();\r\n\r\n      // Once PropertiesView is opened, 'OrginatingView' becomes metadataView or\r\n      // MetadataNavigationview.\r\n      // If  properties view page does not have navigationlist (eg for folders and wikipage) then\r\n      // originating view becomes 'MetadataView' based on supportOriginatingView\r\n      if (!!this.options.originatingView && !!this.options.originatingView.supportOriginatingView) {\r\n        this.options.baseOriginatingView = this.options.originatingView;\r\n        this.options.originatingView = this;\r\n      }\r\n\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      // When this view is used alone on a perspective, if should offer\r\n      // spinning sun to commands executed with it as originating view\r\n      BlockingView.imbue(this);\r\n    },\r\n\r\n    onRender: function () {\r\n      // don't render until the complete data have been fetched\r\n      var fetching = this._ensureCompleteData();\r\n      if (fetching) {\r\n        return fetching.done(_.bind(this.render, this));\r\n      }\r\n\r\n      this.metadataNavigationView && this.metadataNavigationView.destroy();\r\n      var mnv = this.metadataNavigationView = new MetadataNavigationViewImpl(this.options);\r\n      this.propagateEventsToViews(this.metadataNavigationView);\r\n\r\n      this.metadataNavigationView.render();\r\n      Marionette.triggerMethodOn(mnv, 'before:show', mnv, this);\r\n      this.$el.append(mnv.el);\r\n      Marionette.triggerMethodOn(mnv, 'show', mnv, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      if (this.metadataNavigationView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataNavigationView);\r\n        this.metadataNavigationView.destroy();\r\n      }\r\n    },\r\n\r\n    _ensureCompleteData: function () {\r\n      var self = this;\r\n      var deferred;\r\n      var options = this.options;\r\n      if (!options.model || (!options.collection && !options.containerCollection)) {\r\n        deferred = $.Deferred();\r\n      }\r\n\r\n      function ensureCollectionAfterModel() {\r\n        self._ensureCollection()\r\n            .always(function () {\r\n              self.unblockActions();\r\n            })\r\n            .done(function (response) {\r\n              deferred && deferred.resolve(response);\r\n            })\r\n            .fail(function (error) {\r\n              deferred && deferred.reject(error);\r\n            });\r\n      }\r\n\r\n      if (!options.model) {\r\n        options.model = options.context.getModel(NodeModelFactory, {\r\n          attributes: options.data.id && {id: options.data.id},\r\n          temporary: true\r\n        });\r\n        options.selected = options.model;\r\n        self.blockActions();\r\n        options.model.ensureFetched()\r\n            .done(function (response) {\r\n              ensureCollectionAfterModel();\r\n            })\r\n            .fail(function (error) {\r\n              self.unblockActions();\r\n              self._showFetchNodeFailMessage(error, options.model.get(\"id\"));\r\n              deferred && deferred.reject(error);\r\n            });\r\n      } else if (!options.collection || !options.containerCollection) {\r\n        options.selected = options.model;\r\n        self.blockActions();\r\n        ensureCollectionAfterModel();\r\n      }\r\n\r\n      return deferred && deferred.promise();\r\n    },\r\n\r\n    _ensureCollection: function () {\r\n      var self = this;\r\n      var deferred = $.Deferred();\r\n      var options = this.options;\r\n\r\n      var collection = options.collection || options.containerCollection;\r\n      if (!collection) {\r\n        options.container = options.context.getModel(NodeModelFactory, {\r\n          attributes: {id: options.model.get('parent_id')},\r\n          temporary: true\r\n        });\r\n        options.container.ensureFetched()\r\n            .done(function (response) {\r\n              collection = options.context.getCollection(\r\n                  ChildrenCollectionFactory, {\r\n                    options: {\r\n                      node: options.container,\r\n                      commands: self.defaultActionController.commands,\r\n                      defaultActionCommands: self.defaultActionController.actionItems.getAllCommandSignatures(\r\n                          self.defaultActionController.commands),\r\n                      delayRestCommands: false\r\n                    }\r\n\r\n                  });\r\n              collection.ensureFetched()\r\n                  .done(function (response2) {\r\n                    self._ensureModelInCollection(collection);\r\n                    deferred && deferred.resolve(response2);\r\n                  })\r\n                  .fail(function (error2) {\r\n                    self.unblockActions();\r\n                    self._showFetchNodeFailMessage(error2, options.container.get(\"id\"));\r\n                    deferred && deferred.reject(error2);\r\n                  });\r\n            })\r\n            .fail(function (error) {\r\n              self.unblockActions();\r\n              self._showFetchNodeFailMessage(error, options.container.get(\"id\"));\r\n              deferred && deferred.reject(error);\r\n            });\r\n\r\n        return deferred && deferred.promise();\r\n      }\r\n\r\n      this._ensureModelInCollection(collection);\r\n\r\n      return deferred && deferred.promise().resolve();\r\n    },\r\n\r\n    _ensureModelInCollection: function (collection) {\r\n      // if the model is not in the collection, insert it at the beginning\r\n      if (!collection.findWhere({id: this.options.model.get('id')})) {\r\n        collection.add(this.options.model, {at: 0, silent: true});\r\n      }\r\n\r\n      this.options.collection || (this.options.collection = collection);\r\n      this.options.containerCollection || (this.options.containerCollection = collection);\r\n    },\r\n\r\n    _showFetchNodeFailMessage: function (error, nodeId) {\r\n      var errorObj = new base.Error(error);\r\n      var title = lang.FetchNodeFailTitle;\r\n      var message = _.str.sformat(lang.FetchNodeFailMessage, nodeId, errorObj.message);\r\n      ModalAlert.showError(message, title);\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataNavigationView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataNavigationView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/document.overview/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/document.overview/impl/nls/root/lang',{\r\n  ToolbarItemOpen: 'Open',\r\n  ToolbarItemDownload: 'Download',\r\n  ToolbarItemEdit: 'Edit',\r\n  ToolbarItemProperties: 'Properties',\r\n  location: \"Location\",\r\n  docPreviewImgAlt: 'Document Preview',\r\n  name: \"Name\",\r\n  description: \"Description\",\r\n  created: \"Created\",\r\n  createdBy: \"Created by\",\r\n  type: \"Type\",\r\n  modified: \"Modified\",\r\n  ownedBy: \"Owned by\",\r\n  size: \"Size\"\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/document.overview/impl/document.overview',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div class=\\\"cs-content-wrapper\\\">\\r\\n  <div class=\\\"cs-content-header\\\">\\r\\n    <div class=\\\"title-container\\\"></div>\\r\\n    <div class=\\\"actions-container\\\">\\r\\n      <div class=\\\"commentRegion\\\"></div>\\r\\n      <div class=\\\"favoriteRegion\\\"></div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n  <div class=\\\"cs-content-container\\\">\\r\\n    <div class=\\\"description-container cs-content\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"modified_section general-information\\\"></div>\\r\\n      <div class=\\\"type_section general-information\\\"></div>\\r\\n      <div class=\\\"size_section general-information\\\"></div>\\r\\n      <div class=\\\"reserve_info general-information\\\"></div>\\r\\n      <div class=\\\"location-container general-information\\\">\\r\\n        <div class=\\\"alpaca-container-item\\\">\\r\\n          <div class=\\\"binf-form-group alpaca-field alpaca-field-text alpaca-optional\\r\\n              alpaca-readonly\\\">\\r\\n            <label class=\\\"binf-control-label alpaca-control-label binf-col-sm-3\\\">\\r\\n              \"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.location : stack1), depth0))\n    + \"\\r\\n            </label>\\r\\n            <div id=\\\"location\\\" class=\\\"binf-col-sm-9 location-view\\\">\\r\\n\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"description_section general-information\\\">\\r\\n\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"binf-col-md-4 thumbnail-container binf-text-left cs-content\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemOpen : stack1), depth0))\n    + \"\\\">\\r\\n          <span class=\\\"thumbnail_not_loaded thumbnail_empty\\\" data-cstabindex=\\\"0\\\"></span>\\r\\n          <img src=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.imgSrc || (depth0 != null ? depth0.imgSrc : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"imgSrc\",\"hash\":{}}) : helper)))\n    + \"\\\" class=\\\"img-doc-preview binf-hidden\\\" alt=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.imgAlt || (depth0 != null ? depth0.imgAlt : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"imgAlt\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"cs-content-footer\\\">\\r\\n    <button class=\\\"binf-btn primary-btn open-command\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemOpen : stack1), depth0))\n    + \"</button>\\r\\n    <button class=\\\"binf-btn default-btn command-btn\\\"\\r\\n            data-signature=\\\"Download\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemDownload : stack1), depth0))\n    + \"</button>\\r\\n    <button class=\\\"binf-btn default-btn command-btn edit-btn\\\"\\r\\n            data-signature=\\\"Edit\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemEdit : stack1), depth0))\n    + \"</button>\\r\\n    <button class=\\\"binf-btn default-btn command-btn\\\"\\r\\n            data-signature=\\\"Properties\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemProperties : stack1), depth0))\n    + \"</button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_document.overview_impl_document.overview', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/document.overview/impl/document.overview',[],function(){});\n","// Shows a list of links to favorite nodes\r\ncsui.define('csui/widgets/document.overview/document.overview.view',[\r\n  'csui/lib/underscore',\r\n  'csui/lib/backbone',\r\n  'csui/lib/marionette',\r\n  'csui/lib/jquery',\r\n  'csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/controls/form/form.view',\r\n  'csui/models/nodeancestors',\r\n  'csui/utils/nodesprites',\r\n  'csui/models/node/node.model',\r\n  'csui/utils/contexts/factories/connector',\r\n  'csui/controls/form/fields/nodepickerfield.view',\r\n  'csui/controls/node-type.icon/node-type.icon.view',\r\n  'csui/utils/contexts/factories/node',\r\n  'csui/utils/commands/impl/thumbnail/thumbnail.object',\r\n  'csui/widgets/metadata/general.panels/document/document.general.form.model',\r\n  'csui/controls/tableheader/comment/comment.button.view',\r\n  'csui/widgets/favorites/favorite.star.view',\r\n  'csui/controls/toolbar/toolbar.command.controller',\r\n  'csui/models/nodes',\r\n  'csui/behaviors/default.action/default.action.behavior',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/utils/commands',\r\n  'i18n!csui/widgets/document.overview/impl/nls/lang',\r\n  'hbs!./impl/document.overview',\r\n  'css!./impl/document.overview'\r\n\r\n], function (_, Backbone, Marionette, $,\r\n    MetadataItemNameView,\r\n    ViewEventsPropagationMixin,\r\n    FormView,\r\n    NodeAncestorCollection,\r\n    NodeSpriteCollection,\r\n    NodeModel,\r\n    ConnectorFactory,\r\n    NodePickerFieldView,\r\n    NodeTypeIconView,\r\n    NodeModelFactory, Thumbnail, DocumentGeneralFormModel, CommentView,\r\n    FavoriteStarView, ToolbarCommandController,\r\n    NodeCollection,\r\n    DefaultActionBehavior, PerfectScrollingBehavior, commands, lang, documentOverviewTemplate) {\r\n  'use strict';\r\n\r\n  var DocumentOverviewView = FormView.extend({\r\n\r\n    constructor: function DocumentOverviewView(options) {\r\n      options || (options = {});\r\n      options.data || (options.data = {});\r\n      if (!options.node) {\r\n        options.node = options.context.getModel(NodeModelFactory, {\r\n          attributes: options.data.id && {id: options.data.id},\r\n          temporary: true\r\n        });\r\n      }\r\n      this.options = options;\r\n      this._createModel();\r\n      FormView.prototype.constructor.call(this, this.options);\r\n\r\n      this.listenTo(this.options.node, 'change', this.updateForm);\r\n\r\n      this._createMetadataItemNameView();\r\n\r\n      this.commandController = new ToolbarCommandController({\r\n        commands: options.commands || commands\r\n      });\r\n      this.commands = this.commandController.commands;\r\n      this.reloadWidget = false;\r\n      this.parentNode = undefined;\r\n      this.supportOriginatingView = true;\r\n    },\r\n    fieldToRefresh: 'modify_date',\r\n\r\n    _createMetadataItemNameView: function () {\r\n      if (this.metadataItemNameView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataItemNameView);\r\n        this.metadataItemNameView.destroy();\r\n      }\r\n\r\n      var inv = this.metadataItemNameView = new MetadataItemNameView({\r\n        model: this.options.node,\r\n        container: this.options.node.parent,\r\n        containerCollection: this.options.containerCollection,\r\n        collection: this.options.collection,\r\n        context: this.options.context,\r\n        nameSchema: {},\r\n        commands: this.commands,\r\n        originatingView: this,\r\n        showDropdownMenu: true,\r\n        showPropertiesCommand: true\r\n      });\r\n      this.listenTo(inv, 'metadata:item:name:save', this._saveItemName);\r\n      this.listenTo(inv, 'metadata:item:before:delete', _.bind(function (args) {\r\n        this.trigger('metadata:item:before:delete', args);\r\n      }, this));\r\n      this.listenTo(inv, 'metadata:item:before:move', _.bind(function (args) {\r\n        this.trigger('metadata:item:before:move', args);\r\n      }, this));\r\n      this.listenTo(inv, 'metadata:item:deleted', _.bind(function (args) {\r\n        this.trigger('metadata:item:deleted', args);\r\n      }, this));\r\n\r\n      this.propagateEventsToViews(this.metadataItemNameView);\r\n    },\r\n\r\n    reloadWidget: false,\r\n\r\n    formTemplate: documentOverviewTemplate,\r\n\r\n    className: 'cs-form csui-general-form cs-document-overview-wrapper',\r\n\r\n    ui: {\r\n      command: \".command-btn\",\r\n      open: \".open-command\",\r\n      location: \"#location\"\r\n    },\r\n\r\n    events: {\r\n      \"click @ui.command\": '_triggerMenuItemAction',\r\n      \"click @ui.open\": '_executeDefaultAction'\r\n    },\r\n\r\n    behaviors: {\r\n      DefaultAction: {\r\n        behaviorClass: DefaultActionBehavior\r\n      },\r\n      PerfectScrolling: {\r\n        behaviorClass: PerfectScrollingBehavior,\r\n        contentParent: '.cs-content-container',\r\n        suppressScrollX: true\r\n      }\r\n    },\r\n\r\n    _executeDefaultAction: function (event) {\r\n      event.stopImmediatePropagation();\r\n      event.preventDefault();\r\n      this.defaultActionController\r\n          .executeAction(this.options.node, {\r\n            context: this.options.context,\r\n            originatingView: this\r\n          });\r\n    },\r\n\r\n    _saveItemName: function (args) {\r\n      var self = this;\r\n      var itemName = args.sender.getValue();\r\n      var name = {'name': itemName};\r\n      var node = this.options.model;\r\n      node.setFields('versions.element(0)', 'owner_id');\r\n      node.set(name, {silent: true});\r\n      var data = _.clone(node.attributes);\r\n      return node.save(data, {\r\n        data: name,\r\n        wait: true,\r\n        silent: true\r\n      }).then(function () {\r\n        node.fetch({silent: true}).done(function () {\r\n          self._updateFieldsToRefersh();\r\n          self.metadataItemNameView._toggleEditMode(false, false);\r\n        });\r\n      });\r\n    },\r\n\r\n    _triggerMenuItemAction: function (event) {\r\n      event.stopImmediatePropagation();\r\n      event.preventDefault();\r\n      var signature = $(event.target).data(\"signature\");\r\n      var command = this.commands.findWhere({signature: signature});\r\n      var originatingView = this;\r\n      originatingView.collection = new NodeCollection([this.options.node]);\r\n\r\n      var status = {\r\n        context: this.options.context,\r\n        nodes: new NodeCollection([this.options.node]),\r\n        container: this.options.node,\r\n        originatingView: originatingView\r\n      };\r\n\r\n      if (command && command.enabled(status)) {\r\n        command.execute(status);\r\n      }\r\n    },\r\n\r\n    _createModel: function () {\r\n      var node = this.options.node;\r\n      this.options.model = new DocumentGeneralFormModel({\r\n        data: {\r\n          \"name\": node.get(\"name\"),\r\n          \"description\": node.get(\"description\"),\r\n          \"create_date\": node.get(\"create_date\"),\r\n          \"create_user_id\": node.get(\"create_user_id\"),\r\n          \"type\": node.get(\"type\"),\r\n          \"type_name\": node.get(\"type_name\"),\r\n          \"mime_type\": NodeSpriteCollection.findTypeByNode(node),\r\n          \"modify_date\": node.get(\"modify_date\"),\r\n          \"owner_user_id\": node.get(\"owner_user_id\"),\r\n          \"size\": node.get(\"size_formatted\"),\r\n          \"reserved_user_id\": node.get(\"reserved_user_id\")\r\n        },\r\n        schema: {\r\n          \"properties\": {\r\n            \"name\": {\r\n              \"maxLength\": 248,\r\n              \"minLength\": 1,\r\n              \"readonly\": true,\r\n              \"required\": true,\r\n              \"title\": \"Name\",\r\n              \"type\": \"string\"\r\n            },\r\n            \"description\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Description\",\r\n              \"type\": \"string\"\r\n            },\r\n            \"create_date\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Created\",\r\n              \"type\": \"string\",\r\n              \"format\": \"datetime\"\r\n            },\r\n            \"create_user_id\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Created By\",\r\n              \"type\": \"otcs_user_picker\"\r\n            },\r\n            \"type\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Type\",\r\n              \"type\": \"integer\"\r\n            },\r\n            \"type_name\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Type\",\r\n              \"type\": \"string\"\r\n            },\r\n            \"modify_date\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Modified\",\r\n              \"type\": \"string\",\r\n              \"format\": \"datetime\"\r\n            },\r\n            \"owner_user_id\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Owned By\",\r\n              \"type\": \"otcs_user_picker\"\r\n            },\r\n            \"size\": {\r\n              \"hidden\": false,\r\n              \"readonly\": true,\r\n              \"title\": \"Size\",\r\n              \"type\": \"string\",\r\n              \"tooltip\": \"838,049 bytes\"\r\n            },\r\n            \"mime_type\": {\r\n              \"hidden\": false,\r\n              \"readonly\": true,\r\n              \"title\": \"Type\",\r\n              \"type\": \"string\"\r\n            }\r\n          },\r\n          \"type\": \"object\",\r\n          \"title\": \"General\"\r\n        },\r\n        options: {\r\n          \"fields\": {\r\n            \"name\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.name,\r\n              \"readonly\": true,\r\n              \"type\": \"text\"\r\n            },\r\n            \"description\": {\r\n              \"hidden\": false,\r\n              \"rows\": 5,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.description,\r\n              \"readonly\": true,\r\n              \"type\": \"textarea\",\r\n              \"placeholder\": \"Add description\"\r\n            },\r\n            \"create_date\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.created,\r\n              \"readonly\": true,\r\n              \"type\": \"datetime\",\r\n              \"placeholder\": \"n/a\"\r\n            },\r\n            \"create_user_id\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.createdBy,\r\n              \"readonly\": true,\r\n              \"type\": \"otcs_user\",\r\n              \"type_control\": {\r\n                \"name\": \"Admin\"\r\n              },\r\n              \"placeholder\": \"n/a\"\r\n            },\r\n            \"type\": {\r\n              \"hidden\": true,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.type,\r\n              \"readonly\": true,\r\n              \"type\": \"integer\"\r\n            },\r\n            \"type_name\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.type,\r\n              \"readonly\": true,\r\n              \"type\": \"text\"\r\n            },\r\n            \"modify_date\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.modified,\r\n              \"readonly\": true,\r\n              \"type\": \"datetime\",\r\n              \"placeholder\": \"n/a\"\r\n            },\r\n            \"owner_user_id\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.ownedBy,\r\n              \"readonly\": true,\r\n              \"type\": \"otcs_user\",\r\n              \"type_control\": {\r\n                \"name\": \"Admin\"\r\n              },\r\n              \"placeholder\": \"n/a\"\r\n            },\r\n            \"size\": {\r\n              \"hidden\": false,\r\n              \"readonly\": true,\r\n              \"label\": lang.size,\r\n              \"placeholder\": \"n/a\",\r\n              \"type\": \"text\"\r\n            },\r\n            \"mime_type\": {\r\n              \"hidden\": false,\r\n              \"readonly\": true,\r\n              \"label\": lang.type,\r\n              \"placeholder\": \"n/a\",\r\n              \"type\": \"text\"\r\n            }\r\n          }\r\n        }\r\n      }, this.options);\r\n      this.options.model._addReserveInfo(this.options.model.attributes);\r\n    },\r\n\r\n    _updateModel: function () {\r\n      var node = this.options.node;\r\n\r\n      _.extend(this.model.attributes.data, {\r\n        \"name\": node.get(\"name\"),\r\n        \"description\": node.get(\"description\"),\r\n        \"create_date\": node.get(\"create_date\"),\r\n        \"create_user_id\": node.get(\"create_user_id\"),\r\n        \"type\": node.get(\"type\"),\r\n        \"type_name\": node.get(\"type_name\"),\r\n        \"mime_type\": NodeSpriteCollection.findTypeByNode(node),\r\n        \"modify_date\": node.get(\"modify_date\"),\r\n        \"owner_user_id\": node.get(\"owner_user_id\"),\r\n        \"size\": node.get(\"size_formatted\"),\r\n        \"reserved_user_id\": node.get(\"reserved_user_id\")\r\n      });\r\n      this.model._addReserveInfo(this.model.attributes);\r\n    },\r\n\r\n    _getLayout: function () {\r\n      var data = this.alpaca.data;\r\n      data.name = this.model.get(\"data\").name;\r\n      var template = this.getOption('formTemplate'),\r\n          html     = template.call(this, {\r\n            data: data,\r\n            mode: this.mode,\r\n            lang: lang,\r\n            // a 1x1 transparent gif, to avoid an empty src tag\r\n            imgSrc: \"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\",\r\n            imgAlt: lang.docPreviewImgAlt\r\n          }),\r\n          bindings = this._getBindings(),\r\n          view     = {\r\n            parent: 'bootstrap-csui',\r\n            layout: {\r\n              template: html,\r\n              bindings: bindings\r\n            }\r\n          };\r\n      return view;\r\n    },\r\n\r\n    _getBindings: function () {\r\n      var bindings = {\r\n        name: 'name_section',\r\n        owner_user_id: '.owner_section',\r\n        modify_date: '.modified_section',\r\n        mime_type: '.type_section',\r\n        description: '.description_section',\r\n        size: '.size_section',\r\n        status: 'status_section'\r\n      };\r\n      // adding 'reserve_info' only for supported object types.\r\n      if (this.model && this.model.node && this.model.node.get(\"reserved\")) {\r\n        bindings = _.extend(bindings, {\r\n          reserve_info: \".reserve_info\"\r\n        });\r\n      }\r\n\r\n      return bindings;\r\n    },\r\n\r\n    updateForm: function (event) {\r\n        //  perform this operations whenever change happen to the node.\r\n        this._updateModel();\r\n        this._createModel();\r\n        FormView.prototype.constructor.call(this, this.options);\r\n        this.metadataItemNameView = new MetadataItemNameView({\r\n          model: this.options.node,\r\n          container: this.options.node.parent,\r\n          containerCollection: this.options.containerCollection,\r\n          collection: this.options.collection,\r\n          context: this.options.context,\r\n          nameSchema: {},\r\n          commands: this.commands,\r\n          originatingView: this,\r\n          showDropdownMenu: true,\r\n          showPropertiesCommand: true\r\n        });\r\n        this.listenTo(this.metadataItemNameView, 'metadata:item:name:save', this._saveItemName);\r\n        this.propagateEventsToViews(this.metadataItemNameView);\r\n        FormView.prototype.updateForm.apply(this, arguments);\r\n    },\r\n\r\n    updateRenderedForm: function (options) {\r\n      FormView.prototype.updateRenderedForm.apply(this, arguments);\r\n\r\n      this._showNodeIcon();\r\n      this._showMetadataItemName();\r\n      this._showThumbnail();\r\n      this._addLocationView();\r\n      this._addCommentView();\r\n      this._addFavoriteView();\r\n      this._checkDescriptionContent();\r\n      this._checkEditPermission();\r\n    },\r\n\r\n    // overriding this method to validate the node's name, for document overview page only.\r\n    _validateAndSave: function () {\r\n      var currentValue = this.metadataItemNameView.getValue().trim();\r\n      var inputValue = this.metadataItemNameView.getInputBoxValue();\r\n      inputValue = inputValue.trim();\r\n      if (inputValue.length === 0 || currentValue !== inputValue) {\r\n        this.metadataItemNameView.ItemNameBehavior.validateInputName(inputValue).done(\r\n            _.bind(function (success) {\r\n              if (success) {\r\n                this.metadataItemNameView.setInputBoxValue(inputValue);\r\n                this.metadataItemNameView.setValue(inputValue);\r\n                this.metadataItemNameView.modelHasEmptyName = false;\r\n                this.metadataItemNameView.trigger(\"metadata:item:name:save\", {\r\n                  sender: this.metadataItemNameView\r\n                });\r\n              } else {\r\n                return false;\r\n              }\r\n            }, this));\r\n      }\r\n    },\r\n\r\n    _showThumbnail: function () {\r\n      this.thumbnail = this.options.thumbnail ||\r\n                       new Thumbnail({\r\n                         node: this.options.node\r\n                       });\r\n      this.listenTo(this.thumbnail, 'load', this._showImage)\r\n          .listenTo(this.thumbnail, 'error', this._showDefaultImage)\r\n          .listenTo(this, 'destroy', _.bind(this._destroyThumbnail, this));\r\n\r\n      if (this.mode !== 'create' && !this.thumbnailSet) {\r\n        var self = this;\r\n        this.thumbnailSet = true;\r\n        //Just show image if url is available,otherwise load thumbnail\r\n        if (!!this.thumbnail.url) {\r\n          this._showImage();\r\n        } else {\r\n          this.thumbnail.load();\r\n        }\r\n        // default action\r\n        this.$el.find('.thumbnail_section').click(function () {\r\n          self.triggerMethod('execute:DefaultAction', self.options.node);\r\n        });\r\n      }\r\n    },\r\n\r\n    _showImage: function () {\r\n      var self                 = this,\r\n          img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded');\r\n      img.attr(\"src\", this.thumbnail.url);\r\n      img.prop('tabindex', '0');\r\n      img.one('load', function (evt) {\r\n\r\n        if (evt.target.clientHeight >= evt.target.clientWidth) {\r\n          img.addClass('cs-form-img-vertical');\r\n        } else {\r\n          img.addClass('cs-form-img-horizontal');\r\n        }\r\n        img.addClass('cs-form-img-border');\r\n        //hide the thumbnail background span and show the real img\r\n        thumbnailNotLoadedEl.addClass('binf-hidden');\r\n        img.removeClass('binf-hidden');\r\n\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n      });\r\n    },\r\n\r\n    _showDefaultImage: function () {\r\n      // show thumbnail missing svg and hide img tag\r\n      var img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded'),\r\n          className            = NodeSpriteCollection.findClassByNode(this.options.node);\r\n      thumbnailNotLoadedEl.addClass(className);\r\n      thumbnailNotLoadedEl.removeClass('thumbnail_empty');\r\n      thumbnailNotLoadedEl.removeClass('csui-icon-notification-error');\r\n      thumbnailNotLoadedEl.removeClass('binf-hidden');\r\n      img.addClass('binf-hidden');\r\n\r\n      // event for keyboard navigation\r\n      var event = $.Event('tab:content:render');\r\n      this.$el.trigger(event);\r\n    },\r\n\r\n    _showNodeIcon: function () {\r\n      if (!this._nodeIconView) {\r\n        this._nodeIconView = new NodeTypeIconView({\r\n          el: this.$el.find('.csui-type-icon').get(0),\r\n          node: this.options.node\r\n        });\r\n        this._nodeIconView.render();\r\n      }\r\n    },\r\n\r\n    _showMetadataItemName: function () {\r\n      var inv = this.metadataItemNameView.render();\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      this.$el.find(\".title-container\").append(inv.el);\r\n    },\r\n\r\n    _addLocationView: function () {\r\n      var self = this;\r\n\r\n      var locationRegion = new Marionette.Region({\r\n        el: this.$el.find(this.ui.location)\r\n      });\r\n      var field = new NodePickerFieldView({\r\n        model: this._getParentNode(), // parent of the document\r\n        context: this.options.context,\r\n        formView: this\r\n      });\r\n      locationRegion.show(field);\r\n\r\n      // check permission\r\n      var newAncestors = new NodeAncestorCollection(undefined, {\r\n        node: this._getParentNode()\r\n      });\r\n      this.listenTo(newAncestors, 'error', function (result) {\r\n        self.$(\".location-container\").hide();\r\n      });\r\n      newAncestors.fetch();\r\n    },\r\n\r\n    _getParentNode: function () {\r\n      if (this.parentNode === undefined) {\r\n        this.parentNode = this.options.node.parent;\r\n\r\n        this.parentNode.attributes.schema = this.options.model.attributes.schema;\r\n        this.parentNode.attributes.schema.readonly = true;\r\n        this.parentNode.attributes.options = this.options.model.attributes.options;\r\n        this.parentNode.attributes.data = this.parentNode.attributes.id;\r\n      }\r\n\r\n      return this.parentNode;\r\n    },\r\n\r\n    _addCommentView: function () {\r\n      var commentOptions = this.options;\r\n      commentOptions.model = this.options.node;\r\n      var commentView = new CommentView(commentOptions);\r\n\r\n      var commentRegion = new Marionette.Region({\r\n        el: this.$el.find(\".commentRegion\")\r\n      });\r\n      commentRegion.show(commentView);\r\n    },\r\n\r\n    _checkDescriptionContent: function () {\r\n      var e = this.$el.find(\".description_section .cs-field-textarea-data\");\r\n      if (!e || (e.length === 0)) {\r\n        this.$el.find(\".description_section\").hide();\r\n      } else {\r\n        this.$el.find(\".description_section\").show();\r\n      }\r\n    },\r\n\r\n    _addFavoriteView: function () {\r\n      var favoriteOptions = this.options;\r\n      favoriteOptions.model = this.options.node;\r\n      favoriteOptions.popoverAtBodyElement = true;\r\n      var favoriteView = new FavoriteStarView(favoriteOptions);\r\n\r\n      var favoriteRegion = new Marionette.Region({\r\n        el: this.$el.find(\".favoriteRegion\")\r\n      });\r\n      favoriteRegion.show(favoriteView);\r\n    },\r\n\r\n    _checkEditPermission: function () {\r\n      var command = this.commands.findWhere({signature: \"Edit\"});\r\n\r\n      var status = {\r\n        context: this.options.context,\r\n        nodes: new NodeCollection([this.options.node]),\r\n        container: this.options.node.parent\r\n      };\r\n\r\n      if (!(command && command.enabled(status))) {\r\n        this.$el.find(\".edit-btn\").addClass(\"binf-hidden\");\r\n      }\r\n    },\r\n\r\n    _destroyForm: function () {\r\n      FormView.prototype._destroyForm.apply(this, arguments);\r\n      this._destroyThumbnail();\r\n    },\r\n\r\n    _destroyThumbnail: function () {\r\n      if (this.thumbnail) {\r\n        this.thumbnail.destroy();\r\n        this.thumbnail = undefined;\r\n      }\r\n      this.thumbnailSet = false;\r\n    },\r\n\r\n    _updateFieldsToRefersh: function () {\r\n      var alpacaForm = this.$el.alpaca('get');\r\n      if (!!alpacaForm) {\r\n        var data = this.options.model.attributes;\r\n        var field = alpacaForm.childrenByPropertyId[this.fieldToRefresh],\r\n            value = data[this.fieldToRefresh];\r\n        if (!!field && field.getValue() !== value) {\r\n          field.setValue(value);\r\n          field.refresh();\r\n        }\r\n\r\n      }\r\n    }\r\n  });\r\n\r\n  _.extend(DocumentOverviewView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return DocumentOverviewView;\r\n\r\n});\r\n\n","\ncsui.define('json!csui/widgets/document.overview/document.overview.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"id\": {\r\n        \"title\": \"{{idTitle}}\",\r\n        \"description\": \"{{idDescription}}\",\r\n        \"type\": \"integer\"\r\n      }\r\n    },\r\n    \"required\": [\"id\"]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"id\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": [144]\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n);\n\n","\ncsui.define('json!csui/widgets/metadata/metadata.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"id\": {\r\n        \"title\": \"{{idTitle}}\",\r\n        \"description\": \"{{idDescription}}\",\r\n        \"type\": \"integer\"\r\n      },\r\n      \"initialPanel\": {\r\n        \"title\": \"{{initialPanelTitle}}\",\r\n        \"description\": \"{{initialPanelDescription}}\",\r\n        \"type\": \"string\"\r\n      }\r\n    },\r\n    \"required\": [\"id\"]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"id\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": []\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"actions\": [\r\n    {\r\n      \"toolItems\": \"csui/widgets/metadata/header.dropdown.menu.items\",\r\n      \"toolItemMasks\": \"csui/widgets/metadata/header.dropdown.menu.items.mask\",\r\n      \"toolbars\": [\r\n        {\r\n          \"id\": \"dropdownMenuList\",\r\n          \"title\": \"{{dropdownMenuTitle}}\",\r\n          \"description\": \"{{dropdownMenuDescription}}\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      \"toolItems\": \"csui/widgets/metadata/add.properties.menuitems\",\r\n      \"toolItemMasks\": \"csui/widgets/metadata/add.properties.menuitems.mask\",\r\n      \"toolbars\": [\r\n        {\r\n          \"id\": \"addPropertiesToolbar\",\r\n          \"title\": \"{{addPropertiesTitle}}\",\r\n          \"description\": \"{{addPropertiesDescription}}\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n);\n\n","\ncsui.define('json!csui/widgets/metadata.navigation/metadata.navigation.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"id\": {\r\n        \"title\": \"{{idTitle}}\",\r\n        \"description\": \"{{idDescription}}\",\r\n        \"type\": \"integer\"\r\n      },\r\n      \"initialPanel\": {\r\n        \"title\": \"{{initialPanelTitle}}\",\r\n        \"description\": \"{{initialPanelDescription}}\",\r\n        \"type\": \"string\"\r\n      }\r\n    },\r\n    \"required\": [\"id\"]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"id\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": []\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n);\n\n","csui.define('csui/widgets/document.overview/impl/nls/document.overview.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/document.overview/impl/nls/root/document.overview.manifest',{\r\n  \"widgetTitle\": \"Document Overview\",\r\n  \"widgetDescription\": \"Shows basic information about a document and offers the most often actions for it.\",\r\n  \"idTitle\": \"Document\",\r\n  \"idDescription\": \"A document to show the overview for\"\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/impl/nls/metadata.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/nls/root/metadata.manifest',{\r\n  \"widgetTitle\": \"Object Information\",\r\n  \"widgetDescription\": \"Shows information about an object and offers the most important actions for it.\",\r\n  \"idTitle\": \"Object\",\r\n  \"idDescription\": \"An object to show the information for\",\r\n  \"initialPanelTitle\": \"Object information\",\r\n  \"initialPanelDescription\": \"An object to show the information for\",\r\n  \"dropdownMenuTitle\": \"Object Context Menu\",\r\n  \"dropdownMenuDescription\": \"Context menu, which is displayed when clicking on the arrow on the right side of the name of the opened object.\",\r\n  \"addPropertiesTitle\": \"Add Feature Menu\",\r\n  \"addPropertiesDescription\": \"Drop-down menu, which is displayed when clicking on the plus on the right side of the property tabs.\"\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/root/metadata.navigation.manifest',{\r\n  \"widgetTitle\": \"Object Information\",\r\n  \"widgetDescription\": \"Shows information about an object and offers the most important actions for it.\",\r\n  \"idTitle\": \"Object\",\r\n  \"idDescription\": \"An object to show the information for\",\r\n  \"initialPanelTitle\": \"Object information\",\r\n  \"initialPanelDescription\": \"An object to show the information for\"\r\n});\r\n\n","\n","csui.define('bundles/csui-metadata',[\r\n  // Controls\r\n  'csui/controls/tableheader/comment/comment.button.view',\r\n  'csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/widgets/metadata/impl/metadata.tabcontentcollection.view',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems.masks',  \r\n\r\n  // Application widgets\r\n  'csui/widgets/metadata/metadata.view',\r\n  'csui/widgets/metadata/metadata.properties.view',\r\n  'csui/widgets/metadata/metadata.action.one.item.properties.view',\r\n  'csui/widgets/metadata/metadata.add.categories.controller',\r\n  'csui/widgets/metadata/metadata.add.document.controller',\r\n  'csui/widgets/metadata/metadata.add.item.controller',\r\n  'csui/widgets/metadata/metadata.copy.move.items.controller',\r\n  'csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',\r\n  'csui/widgets/metadata.navigation/metadata.navigation.view',\r\n  'csui/widgets/document.overview/document.overview.view',\r\n\r\n  // Application widgets manifests\r\n  'json!csui/widgets/document.overview/document.overview.manifest.json',\r\n  'json!csui/widgets/metadata/metadata.manifest.json',\r\n  'json!csui/widgets/metadata.navigation/metadata.navigation.manifest.json',\r\n  'i18n!csui/widgets/document.overview/impl/nls/document.overview.manifest',\r\n  'i18n!csui/widgets/metadata/impl/nls/metadata.manifest',\r\n  'i18n!csui/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest',\r\n\r\n  // Tool items and tool item masks\r\n  'csui/widgets/metadata/add.properties.menuitems',\r\n  'csui/widgets/metadata/add.properties.menuitems.mask',\r\n  'csui/widgets/metadata/header.dropdown.menu.items',\r\n  'csui/widgets/metadata/header.dropdown.menu.items.mask',\r\n  'csui/widgets/metadata/versions.toolbaritems.mask',\r\n\r\n  // Metadata general action fields\r\n  'csui/widgets/metadata/metadata.general.action.fields'\r\n\r\n], {});\r\n\r\ncsui.require(['require', 'css'], function (require, css) {\r\n\r\n  css.styleLoad(require, 'csui/bundles/csui-metadata', true);\r\n\r\n});\r\n\n"]}