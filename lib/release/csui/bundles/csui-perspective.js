csui.define("csui/perspective.manage/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspective.manage/impl/nls/root/lang",{"layoutTabTitle":"Change page layout","widgetTabTitle":"Add widget","expandTab":"Expand tab","collapseTab":"Collapse tab","noTitle":"Title not available","goBackTooltip":"Go back","templateMessage":"Drag and Drop tile in position","changePageLayoutConfirmatonText":"All your previewsly added and configured widgets will be lost!","proceedButton":"Proceed","changeLayoutCancelButton":"Cancel","FlowLayoutTitle":"Flow Layout","LcrLayoutTitle":"Left-Center-Right","perspectiveSaveSuccess":"Perspective has been updated successfully.","saveConfirmMsg":"Please be aware this action will update all perspective overrides using this layout configuration. If you do not want this to happen, you should create a new perspective.","saveConfirmTitle":"Save perspective","addWidget":"Add widget","save":"Save","close":"Close","cancel":"Cancel","configNotSupported":"This widget cannot be configured with edit page."}),csui.define("hbs!csui/perspective.manage/impl/options.form.wrapper",["module","hbs","csui/lib/handlebars"],function(e,i,t){var s=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,i,t,s){var n;return'<div class="csui-pman-form-header">\r\n    <div class="csui-pman-form-title">'+this.escapeExpression((n=null!=(n=i.title||(null!=e?e.title:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"title","hash":{}}):n))+'</div>\r\n    <div class="csui-pman-form-description">'+this.escapeExpression((n=null!=(n=i.description||(null!=e?e.description:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"description","hash":{}}):n))+'</div>\r\n    <div class="csui-pman-config-unsupported">\r\n        <div class="csui-state">\r\n            <span class="csui-state-icon csui-icon csui-icon-notification-error-white"></span>\r\n        </div>\r\n        <div class="csui-error-message">\r\n            <span>'+this.escapeExpression((n=null!=(n=i.configNotSupported||(null!=e?e.configNotSupported:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"configNotSupported","hash":{}}):n))+'</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="csui-pman-form-content cs-formview-wrapper"></div>\r\n'}});return t.registerPartial("csui_perspective.manage_impl_options.form.wrapper",s),s}),csui.define("css!csui/perspective.manage/impl/options.form",[],function(){}),csui.define("csui/perspective.manage/impl/options.form.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/form/form.view","i18n!csui/perspective.manage/impl/nls/lang","hbs!csui/perspective.manage/impl/options.form.wrapper","css!csui/perspective.manage/impl/options.form"],function(e,i,t,s,n,a,r,o,c,l){var p=s.LayoutView.extend({"template":l,"className":"csui-pman-form-wrapper","regions":{"bodyRegion":".csui-pman-form-content"},"behaviors":{"PerfectScrolling":{"behaviorClass":r,"contentParent":".cs-form.cs-form-create.perspective-widget-form"}},"templateHelpers":function(){return{"title":this.options.manifest.title,"description":this.options.manifest.description,"configNotSupported":c.configNotSupported}},"ui":{"unSupportedConfig":".csui-pman-config-unsupported","description":".csui-pman-form-description"},"constructor":function(e){this.options=e||{},this.manifest=this.options.manifest,s.LayoutView.prototype.constructor.apply(this,arguments)},"_createForm":function(e){this.widgetOptionsFormView=new d({"context":this.options.context,"model":e,"mode":"create"}),this.listenToOnce(this.widgetOptionsFormView,"render:form",function(){this.trigger("render:form")}.bind(this)),this.listenTo(this.widgetOptionsFormView,"change:field",function(e){this.trigger("change:field",e)}.bind(this))},"_hasSchema":function(){return!(!(this.manifest&&this.manifest.schema&&this.manifest.schema.properties)||e.isEmpty(this.manifest.schema.properties))},"_hasRequiredFields":function(){return!!(this.manifest&&this.manifest.schema&&this.manifest.schema.required&&this.manifest.schema.required.length>0)},"onRender":function(){if(this.ui.unSupportedConfig.hide(),!this._hasSchema())return void this.trigger("render:form");var e=this._prepareFormModel();this.hasValidSchema=p._normalizeOptions(e.attributes.schema.properties,e.attributes.options.fields,e.attributes.data),this.hasValidSchema?(this._createForm(e),this.bodyRegion.show(this.widgetOptionsFormView)):(this.ui.description.hide(),this.ui.unSupportedConfig.show(),this.trigger("render:form"))},"onPopoverShow":function(e){this._hasSchema()&&!this.hasValidSchema&&(e.find(".binf-popover-content").addClass("invalid-options"),e.find(".binf-arrow").addClass("invalid-options"))},"getValues":function(){if(this._hasSchema())return this.hasValidSchema?this.widgetOptionsFormView.getValues():this._getOptionsData()},"validate":function(){if(!this._hasSchema())return!0;if(!this.hasValidSchema){var i=!0;if(this._hasRequiredFields()){var t=this._getOptionsData(),s=this.manifest.schema.required;e.each(s,function(e){t[e]||(i=!1)})}return i}return this.widgetOptionsFormView.validate()},"_isPreviewWidget":function(){return"csui/perspective.manage/widgets/perspective.widget"===this.options.widgetConfig.type},"_prepareFormModel":function(){var e=this._getOptionsData(),i=JSON.parse(JSON.stringify(this.manifest.schema)),s=JSON.parse(JSON.stringify(this.manifest.options||{}));return s||(s={}),s.fields||(s.fields={}),this._addWidgetSizePropertyIfSupported(i,s,e),new t.Model({"schema":i,"options":s,"data":e})},"_getOptionsData":function(){var e=this.options.widgetConfig.options||{};return this._isPreviewWidget()&&(e=e.options||{}),e},"_addWidgetSizePropertyIfSupported":function(i,t,s){if(this.options.perspectiveView.getSupportedWidgetSizes){var n=this.options.perspectiveView.getSupportedWidgetSizes(this.manifest,this.options.widgetView);if(n&&0!==n.length){var a={"title":c.widgetSizeTitle,"description":c.widgetSizeDescription,"type":"string","enum":e.map(n,function(e){return e.kind})},r={"type":"select","optionLabels":e.map(n,function(e){return e.label}),"removeDefaultNone":!0},o=e.find(n,function(e){return e.selected});o&&(s[p.widgetSizeProperty]=o.kind);var l={};l[p.widgetSizeProperty]=a,i.properties=e.extend(l,i.properties);var d={};d[p.widgetSizeProperty]=r,t.fields=e.extend(d,t.fields),i.required=i.required||[],i.required.push(p.widgetSizeProperty)}}}},{"widgetSizeProperty":"__widgetSize","_resolveOptionsType":function(e,i){var t=e.type;return t||(t=n.getSchemaType(i)),t||(t=i&&n.isArray(i)?"array":"object"),e&&e.enum?e.enum.length>3?"select":"radio":n.defaultSchemaFieldMapping[t]},"_normalizeOptions":function(i,t,s){var a=!0;return e.each(i,function(i,r){var o=t[r],c=s[r];o||(t[r]=o={});var l=o.type;switch(!l&&i.type&&(l=p._resolveOptionsType(i,c)),n.getFieldClass(l)||(a=!1),i.type){case"array":if(o.fields||e.defaults(o,{"fields":{"item":{}}}),o.items&&(o.fields.item=o.items),"object"===i.items.type){o.fields.item.type&&!n.getFieldClass(o.fields.item.type)&&(a=!1),o.fields.item.fields||(o.fields.item.fields={}),c&&0!==c.length||(s[r]=c=[{}]);p._normalizeOptions(i.items.properties,o.fields.item.fields,c[0])||(a=!1)}c||(s[r]=[null]);break;case"object":c||(s[r]=c={}),o.fields||(o.fields={});p._normalizeOptions(i.properties,o.fields,c)||(a=!1);break;default:c||(s[r]=null)}}),a}}),d=o.extend({"className":function(){return o.prototype.className.call(this)+" perspective-widget-form"},"constructor":function(e){o.apply(this,arguments)}});return e.extend(d.prototype,a),p}),csui.define("hbs!csui/perspective.manage/impl/widget.item",["module","hbs","csui/lib/handlebars"],function(e,i,t){var s=t.template({"1":function(e,i,t,s,n,a){var r;return'        <div>\r\n          <div class="csui-widget-item icon-draggable-handle"\r\n               title="'+this.escapeExpression(this.lambda(null!=(r=null!=e?e.attributes:e)?r.title:r,e))+'" '+(null!=(r=i.if.call(e,null!=a[1]?a[1].draggable:a[1],{"name":"if","hash":{},"fn":this.program(2,s,0,n,a),"inverse":this.noop}))?r:"")+">\r\n            <span>"+this.escapeExpression(this.lambda(null!=(r=null!=e?e.attributes:e)?r.title:r,e))+'</span>\r\n            <div class="csui-layout-icon '+this.escapeExpression(this.lambda(null!=(r=null!=e?e.attributes:e)?r.icon:r,e))+'"></div>\r\n          </div>\r\n        </div>\r\n'},"2":function(e,i,t,s){return' draggable="true"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,i,t,s,n,a){var r;return'<div class="csui-accordion-header" title="'+this.escapeExpression(this.lambda(null!=e?e.title:e,e))+'">\r\n  <div class="csui-accordion-header-title">'+this.escapeExpression(this.lambda(null!=e?e.title:e,e))+'</div>\r\n  <div class="csui-button-icon cs-icon icon-expandArrowDown"></div>\r\n  <div class="csui-button-icon cs-icon icon-expandArrowUp"></div>\r\n</div>\r\n<div class="csui-accordion-content">\r\n  <div class="cs-content csui-list-pannel">\r\n    <div class="cs-list-group">\r\n'+(null!=(r=i.each.call(e,null!=e?e.widgets:e,{"name":"each","hash":{},"fn":this.program(1,s,0,n,a),"inverse":this.noop}))?r:"")+"    </div>\r\n  </div>\r\n</div>"},"useDepths":!0});return t.registerPartial("csui_perspective.manage_impl_widget.item",s),s}),csui.define("hbs!csui/perspective.manage/impl/widget.drag.template",["module","hbs","csui/lib/handlebars"],function(e,i,t){var s=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,i,t,s){return'<div class="csui-widget-template">\r\n  <div class="csui-template-header">'+this.escapeExpression(this.lambda(null!=e?e.header:e,e))+'</div>\r\n  <div class="csui-template-body">'+this.escapeExpression(this.lambda(null!=e?e.body:e,e))+"</div>\r\n</div>"}});return t.registerPartial("csui_perspective.manage_impl_widget.drag.template",s),s}),csui.define("csui/perspective.manage/impl/widget.list.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/perspective.manage/impl/options.form.view","i18n!csui/perspective.manage/impl/nls/root/lang","csui/models/widget/widget.collection","hbs!csui/perspective.manage/impl/widget.item","hbs!csui/perspective.manage/impl/widget.drag.template"],function(e,i,t,s,n,a,r,o,c,l,p,d){"use strict";var u=e.config();i.defaults(u,{"dragImageOffsetTop":50,"dragImageOffsetLeft":50});var g=n.ItemView.extend({"constructor":function(e){n.ItemView.prototype.constructor.apply(this,arguments)},"tagName":"div","className":"csui-module-group","template":p,"templateHelpers":function(){var e=new s.Collection(this.model.attributes.widgets),i=t(".perspective-editing .csui-dnd-container"),n=0===i.length;return{"widgets":e.models,"draggable":n}},"ui":{"accordionHeader":".csui-accordion-header","accordionContent":".csui-accordion-content","accordionHeaderIcon":".csui-accordion-header .cs-icon","widget":".csui-widget-item"},"events":{"click @ui.accordionHeader":"toggle","dragstart @ui.widget":"onDragStart","dragend @ui.widget":"onDragEnd"},"toggle":function(){var e=this.ui.accordionHeader.hasClass("csui-accordion-expand");this.ui.accordionHeader.toggleClass("csui-accordion-expand"),this.options.parentView.$el.find(".csui-module-group").removeClass("csui-accordion-visible").find(".csui-accordion-header").removeClass("csui-accordion-expand"),e||(this.$el.addClass("csui-accordion-visible"),this.ui.accordionHeader.addClass("csui-accordion-expand"))},"onRender":function(){if(t(".perspective-editing .csui-dnd-container").length)this._makeWidgetSortable();else{var e="function"==typeof document.createElement("span").dragDrop;!this._hasNativeDragImageSupport()&&e&&this.ui.widget.on("mousedown",this._handleDragImageForIE.bind(this))}},"_makeWidgetSortable":function(){var e=this,i=this.$el.find(".csui-widget-item").parent();i.data("pman.widget",this.model.get("widgets")),i.sortable({"connectWith":[".perspective-editing .csui-dnd-container",".perspective-editing .pman-trash-area"],"containment":".perspective-editing ","helper":function(i,t){var s=t.parent().index();return e.widgetDragTemplate=new h({"title":e.model.get("widgets")[s].get("title"),"newWidget":e.model.get("widgets")[s]}),e.widgetDragTemplate.render(),e.widgetDragTemplate.$el.width("220px"),e.widgetDragTemplate.$el.height("220px"),e.widgetDragTemplate.$el.css({"opacity":.75}),e.widgetDragTemplate.$el.appendTo(e.options.parentView.$el.closest(".pman-header")),e.widgetDragTemplate.$el},"cursor":"grabbing","tolerance":"pointer","cursorAt":{"top":u.dragImageOffsetTop,"left":u.dragImageOffsetLeft},"start":function(i,t){t.item.css("display","block"),t.placeholder.css("display","block"),e.dragStart()},"stop":function(){e.dragEnd()}})},"_handleDragImageForIE":function(e){var s=e.originalEvent,n=t(".csui-template-wrapper").clone(),a=this.model.get("widgets")[t(e.currentTarget).parent().index()];n.find(".csui-template-header").text(a.get("title")),n.css({"top":Math.max(0,s.pageY-u.dragImageOffsetTop)+"px","left":Math.max(0,s.pageX-u.dragImageOffsetLeft)+"px","position":"absolute","pointerEvents":"none"}).appendTo(document.body),setTimeout(function(){n.remove()}),n.on("dragstart",i.bind(function(i){var s=this.model.get("widgets")[t(e.currentTarget).parent().index()];i.originalEvent.dataTransfer.setData("text",JSON.stringify(s.toJSON())),this.dragStart()},this)),n.on("dragend",i.bind(function(e){this.dragEnd()},this)),n[0].dragDrop()},"onDragStart":function(e){var i=this.model.get("widgets")[t(e.currentTarget).parent().index()],s=e.originalEvent.dataTransfer,n=t(".csui-template-wrapper");n.find(".csui-template-header").text(i.get("title")),this._hasNativeDragImageSupport()&&(s.setData("text",JSON.stringify(i.toJSON())),s.setDragImage(n[0],u.dragImageOffsetLeft,u.dragImageOffsetTop)),this.dragStart()},"_hasNativeDragImageSupport":function(){return"setDragImage"in(window.DataTransfer||window.Clipboard).prototype},"onDragEnd":function(e){this.dragEnd()},"dragStart":function(){this.$el.closest(".csui-pman-panel").addClass("csui-pman-drag-start"),t(document.body).addClass("csui-pman-dnd-active")},"dragEnd":function(){this.$el.closest(".csui-pman-panel").removeClass("csui-pman-drag-start"),t(document.body).removeClass("csui-pman-dnd-active")}}),h=n.ItemView.extend({"constructor":function(e){n.ItemView.prototype.constructor.apply(this,arguments)},"tagName":"div","className":"csui-template-wrapper","template":d,"templateHelpers":function(){return{"header":this.options&&this.options.title,"body":c.templateMessage}},"onRender":function(){this.$el.data("pman.widget",this.options.newWidget)}});return n.ItemView.extend({"tagName":"div","template":p,"constructor":function(e){e||(e={}),e.data||(e.data={}),this.behaviors&&i.any(this.behaviors,function(e,i){return e.behaviorClass===r})||(this.behaviors=i.extend({"PerfectScrolling":{"behaviorClass":r,"contentParent":".cs-module-list","suppressScrollX":!0,"scrollYMarginOffset":15}},this.behaviors)),n.ItemView.call(this,e);var t=this;this.allWidgets=new l,this.allWidgets.fetch().done(function(){t.collection=t._groupWidgetsByModule(),t.render(),t.trigger("items:fetched")})},"initialize":function(){i.bindAll(this,"renderItem")},"className":"cs-module-list","render":function(){this.collection&&this.collection.each(this.renderItem)},"renderItem":function(e){var i=this,s=new g({"model":e,"parentView":i});s.render(),t(this.el).append(s.el)},"_groupWidgetsByModule":function(){var e=new s.Collection,t=this.allWidgets.filter(function(e){var t=e.get("manifest");if(!t||!i.has(t,"title")||!i.has(t,"description"))return!1;var s=JSON.parse(JSON.stringify(t.schema||{})),n=JSON.parse(JSON.stringify(t.options||{}));return!!o._normalizeOptions(s.properties,n.fields||{},{})});return i.each(t,function(e){var i=e.get("manifest");e.set("title",i&&i.title||c.noTitle)}),i.each(i.groupBy(t,function(e){return e.serverModule.id}),function(t,s){var n=i.first(t).serverModule.get("title");n=n?n.replace(/OpenText /,""):c.noTitle,e.add({"id":s,"title":n,"widgets":t})}),e},"_sanitiseWidgetLibrary":function(){},"onInitWidgets":function(){this.$el.empty(),this.render()}})}),csui.define("csui/perspective.manage/impl/perspectivelayouts",["csui/lib/underscore","i18n!csui/perspective.manage/impl/nls/root/lang","csui-ext!perspective.manage/impl/perspectivelayouts"],function(e,i,t){var s=[{"title":i.LcrLayoutTitle,"type":"left-center-right","icon":"csui-layout-lcr"},{"title":i.FlowLayoutTitle,"type":"flow","icon":"csui-layout-flow"}];return t&&(s=e.union(s,t)),s}),csui.define("hbs!csui/perspective.manage/impl/pman.panel",["module","hbs","csui/lib/handlebars"],function(e,i,t){var s=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,i,t,s){return'<div class="csui-tab-pannel">\r\n  <div class="csui-layout-tab" title="'+this.escapeExpression(this.lambda(null!=e?e.layoutTabTitle:e,e))+'">\r\n    '+this.escapeExpression(this.lambda(null!=e?e.layoutTabTitle:e,e))+'\r\n  </div>\r\n  <div class="csui-AddWidget-tab" title="'+this.escapeExpression(this.lambda(null!=e?e.widgetTabTitle:e,e))+'">\r\n    '+this.escapeExpression(this.lambda(null!=e?e.widgetTabTitle:e,e))+'\r\n  </div>\r\n  <div class="csui-widget-tab"></div>\r\n</div>\r\n<div class="csui-list-pannel"></div>\r\n<div class="csui-template-overlay"></div>\r\n<div class="csui-template-wrapper">\r\n  <div class="csui-widget-template">\r\n    <div class="csui-template-header"></div>\r\n    <div class="csui-template-body">'+this.escapeExpression(this.lambda(null!=e?e.templateMessage:e,e))+"</div>\r\n  </div>\r\n</div>"}});return t.registerPartial("csui_perspective.manage_impl_pman.panel",s),s}),csui.define("hbs!csui/perspective.manage/impl/list.item",["module","hbs","csui/lib/handlebars"],function(e,i,t){var s=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,i,t,s){return'<div class="'+this.escapeExpression(this.lambda(null!=e?e.className:e,e))+'" title="'+this.escapeExpression(this.lambda(null!=e?e.title:e,e))+'"\r\n     draggable='+this.escapeExpression(this.lambda(null!=e?e.draggable:e,e))+">\r\n  <span>"+this.escapeExpression(this.lambda(null!=e?e.title:e,e))+'</span>\r\n  <div class="csui-layout-icon '+this.escapeExpression(this.lambda(null!=e?e.iconClass:e,e))+'"></div>\r\n</div>'}});return t.registerPartial("csui_perspective.manage_impl_list.item",s),s}),csui.define("hbs!csui/perspective.manage/impl/list",["module","hbs","csui/lib/handlebars"],function(e,i,t){var s=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,i,t,s){var n;return'<div class="cs-header binf-panel-heading cs-header-with-go-back" tabindex="0" role="link"\r\n     aria-label="'+this.escapeExpression((n=null!=(n=i.goBackAria||(null!=e?e.goBackAria:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"goBackAria","hash":{}}):n))+'">\r\n  <span class="icon circular arrow_back cs-go-back" title="'+this.escapeExpression((n=null!=(n=i.goBackTooltip||(null!=e?e.goBackTooltip:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"goBackTooltip","hash":{}}):n))+'"></span>\r\n</div>\r\n<div class="cs-content">\r\n  <div class="cs-list-group"></div>\r\n</div>\r\n'}});return t.registerPartial("csui_perspective.manage_impl_list",s),s}),csui.define("css!csui/perspective.manage/impl/pman.panel",[],function(){}),csui.define("csui/perspective.manage/impl/pman.panel.view",["require","module","csui/lib/jquery","csui/lib/backbone","csui/lib/underscore","csui/lib/marionette","csui/controls/progressblocker/blocker","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/perspective.manage/impl/widget.list.view","csui/perspective.manage/impl/perspectivelayouts","i18n!csui/perspective.manage/impl/nls/root/lang","hbs!csui/perspective.manage/impl/pman.panel","hbs!csui/perspective.manage/impl/list.item","hbs!csui/perspective.manage/impl/list","hbs!csui/perspective.manage/impl/widget.drag.template","css!csui/perspective.manage/impl/pman.panel"],function(e,i,t,s,n,a,r,o,c,l,p,d,u,g,h){"use strict";var m=a.ItemView.extend({"tagName":"div","template":d,"events":{"click @ui.layoutTab":"onTabClicked"},"ui":{"tabPannel":".csui-tab-pannel","listPannel":".csui-list-pannel","layoutTab":".csui-layout-tab","widgetTab":".csui-widget-tab","template":".csui-widget-template"},"className":"csui-pman-panel","behaviors":{"PerfectScrolling":{"behaviorClass":o,"contentParent":".csui-tab-pannel","suppressScrollX":!0,"scrollYMarginOffset":8}},"templateHelpers":function(){return{"layoutTabTitle":p.layoutTabTitle,"widgetTabTitle":p.widgetTabTitle,"templateMessage":p.templateMessage}},"onPanelOpen":function(){this.accordionView.triggerMethod("init:widgets"),this.trigger("ensure:scrollbar")},"onRender":function(){this.ui.widgetTab.hide(),this.ui.layoutTab.hide(),this.accordionRegion=new a.Region({"el":this.ui.widgetTab}),this.accordionView=new c,this.accordionRegion.show(this.accordionView),this.blockActions(),this.listenTo(this.accordionView,"items:fetched",function(){this.unblockActions(),this.ui.layoutTab.show(),this.ui.widgetTab.show()})},"constructor":function(e){this.options=e||{},a.ItemView.prototype.constructor.apply(this,arguments),r.imbue(this),this.listenTo(this,"reset:items",function(){this.listView&&this.listView.destroy()})},"onTabClicked":function(e){var i=e.data?e:{"data":{"items":l}};i.draggable=!!i.data.draggable,i.itemClassName="csui-layout-item",i.pmanView=this.options.pmanView,this.ui.tabPannel.addClass("binf-hidden"),this.listregion=new a.Region({"el":this.ui.listPannel}),this.listView=new f(i),this.listregion.show(this.listView),this.listenTo(this.listView,"before:destroy",function(){this.ui.tabPannel.removeClass("binf-hidden")}).listenTo(this.listView,"click:back",function(){this.listView.destroy()})}}),v=a.ItemView.extend({"constructor":function(e){a.ItemView.prototype.constructor.apply(this,arguments)},"tagName":"div","template":u,"templateHelpers":function(){return{"draggable":!!this.options.draggable,"className":this.options.itemClassName,"iconClass":this.model.get("icon")}},"events":{"click .csui-layout-item:not(.binf-active)":n.debounce(function(){this.trigger("change:layout")},200,!0)},"onRender":function(){this.model.get("type")===this.options.pmanView.perspective.get("perspective").type&&this.trigger("set:active")}}),f=a.CompositeView.extend({"constructor":function(e){if(e||(e={}),e.data||(e.data={}),this.behaviors&&n.any(this.behaviors,function(e,i){return e.behaviorClass===o})||(this.behaviors=n.extend({"PerfectScrolling":{"behaviorClass":o,"contentParent":".csui-pman-list","suppressScrollX":!0,"scrollYMarginOffset":15}},this.behaviors)),a.CompositeView.call(this,e),this.options.data&&this.options.data.items){if(!this.collection){var i=s.Collection.extend({"model":s.Model.extend({"idAttribute":null})});this.collection=new i}this.collection.add(this.options.data.items)}},"ui":{"back":".cs-go-back"},"className":"csui-pman-list","events":{"click @ui.back":"onClickBack"},"childEvents":{"change:layout":"onChangeLayout","set:active":"setActive"},"template":g,"templateHelpers":function(){return{"goBackTooltip":p.goBackTooltip}},"childViewContainer":".cs-list-group","childView":v,"childViewOptions":function(){return this.options},"onClickBack":function(e){e.preventDefault(),e.stopPropagation(),this.trigger("click:back")},"setActive":function(e){this.$el.find(".csui-layout-item").removeClass("binf-active"),e.$el.find(".csui-layout-item").addClass("binf-active")},"onChangeLayout":function(e){var i=this;csui.require(["csui/dialogs/modal.alert/modal.alert"],function(t){t.confirmWarning(p.changePageLayoutConfirmatonText,p.layoutTabTitle,{"buttons":{"showYes":!0,"labelYes":p.proceedButton,"showNo":!0,"labelNo":p.changeLayoutCancelButton}}).done(function(t){t&&(i.setActive(e),i.options.pmanView.trigger("change:layout",e.model.get("type")))})})}});return m}),csui.define("hbs!csui/perspective.manage/impl/pman",["module","hbs","csui/lib/handlebars"],function(e,i,t){var s=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,i,t,s){return'<div class="pman-backdrop"></div>\r\n<div class="pman-header">\r\n  <div class="pman-header-backdrop"></div>\r\n  <div class="pman-tools-container">\r\n    <div class="pman-left-tools">\r\n      <ul>\r\n        <li class="pman-toolitem">\r\n          <button class="icon icon-toolbarAdd" title="'+this.escapeExpression(this.lambda(null!=e?e.addWidget:e,e))+'"></button>\r\n        </li>\r\n      </ul>\r\n      <div class="pman-pannel-wrapper"></div>\r\n    </div>\r\n    <div class="pman-right-tools">\r\n      <ul>\r\n        <li>\r\n          <button class="binf-btn icon-save" title="'+this.escapeExpression(this.lambda(null!=e?e.save:e,e))+'">'+this.escapeExpression(this.lambda(null!=e?e.save:e,e))+'</button>\r\n        </li>\r\n        <li>\r\n          <button class="binf-btn cancel-edit" title="'+this.escapeExpression(this.lambda(null!=e?e.cancel:e,e))+'">'+this.escapeExpression(this.lambda(null!=e?e.cancel:e,e))+'</button>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n  <div class="pman-trash-area">\r\n    <div class="pman-trash-banner"></div>\r\n  </div>\r\n</div>'}});return t.registerPartial("csui_perspective.manage_impl_pman",s),s}),csui.define("css!csui/perspective.manage/impl/pman",[],function(){}),csui.define("csui/perspective.manage/behaviours/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspective.manage/behaviours/impl/nls/root/lang",{"deleteConfirmMsg":"Are you sure, you want to remove widget?","deleteConfirmTitle":"Remove Widget","replaceConfirmMsg":"Are you sure, you want to replace widget?","replaceConfirmTitle":"Replace Widget","widgetSizeTitle":"Widget size","widgetSizeDescription":"Determines how much space the widget occupies. Note that widgets are re-sized automatically to display optimally on smaller screens.","removeWidget":"Remove widget"}),csui.define("hbs!csui/perspective.manage/behaviours/impl/widget.masking",["module","hbs","csui/lib/handlebars"],function(e,i,t){var s=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,i,t,s){var n;return'<div class="csui-pman-widget-masking">\r\n  <div class="csui-pman-widget-close clear-icon" title="'+this.escapeExpression((n=null!=(n=i.removeWidget||(null!=e?e.removeWidget:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"removeWidget","hash":{}}):n))+'"></div>\r\n</div>\r\n<div class="csui-pman-popover-right csui-pman-popover-holder"></div>\r\n<div class="csui-pman-popover-left csui-pman-popover-holder"></div>'}});return t.registerPartial("csui_perspective.manage_behaviours_impl_widget.masking",s),s}),csui.define("css!csui/perspective.manage/behaviours/impl/widget.masking",[],function(){}),csui.define("csui/perspective.manage/behaviours/pman.widget.config.behaviour",["require","i18n","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/lib/backbone","csui/utils/log","csui/models/widget/widget.model","csui/perspective.manage/impl/options.form.view","i18n!csui/perspective.manage/behaviours/impl/nls/lang","hbs!csui/perspective.manage/behaviours/impl/widget.masking","css!csui/perspective.manage/behaviours/impl/widget.masking"],function(e,i,t,s,n,a,r,o,c,l,p,d){"use strict";var u=n.ItemView.extend({"template":d,"className":function(){return u.className},"templateHelpers":function(){return{"removeWidget":p.removeWidget}},"ui":{"delete":".csui-pman-widget-close","masking":".csui-pman-widget-masking"},"events":{"click @ui.masking":"_showCallout","drop":"onDrop","dragover":"onDragOver","dragenter":"onDragEnter","dragleave":"onDragLeave","click @ui.delete":"onDeleteClick"},"constructor":function(e){n.ItemView.apply(this,arguments),this.dropCounter=0,this.manifest=void 0,this.perspectiveView=e.perspectiveView,this.widgetView=e.widgetView,this.widgetConfig=e.widgetConfig},"_isConfigurable":function(){return!!this.widgetConfig&&!t.isEmpty(this.widgetConfig)&&"csui/perspective.manage/widgets/perspective.placeholder"!==this.widgetConfig.type&&"csui/widgets/error"!==this.widgetConfig.type},"onRender":function(){if(this._isConfigurable()){var e=this;this._loadManifest().done(function(i){e._createOptionsForm(function(){e._updateWidgetOptions()})})}},"_showCallout":function(){this._isConfigurable()&&this._loadManifest().done(function(e){this._showOptionsCallout(e)}.bind(this))},"_showOptionsCallout":function(e){if(this._calculatePopoverPlacement(),a.isIE11()&&document.activeElement&&document.activeElement.blur(),this.$popoverEl.data("binf.popover"))return this.$popoverEl.binf_popover("destroy"),void(this.optionsFormView&&this.optionsFormView.$el.remove());this.perspectiveView.$el.find("."+u.className+" .csui-pman-popover-holder").binf_popover("destroy"),this.optionsFormView?this._showPopover():this._createOptionsForm()},"_createOptionsForm":function(e){this.optionsFormView=new l(t.defaults({"context":this.perspectiveView.options.context,"manifest":this.manifest},this.options)),e&&this.optionsFormView.listenToOnce(this.optionsFormView,"render:form",e),this.optionsFormView.render(),this.optionsFormView.listenTo(this.optionsFormView,"change:field",this._onChangeField.bind(this))},"_calculatePopoverPlacement":function(){var e=this._determineCalloutPlacement();this.$popoverEl=this.$el.find(".csui-pman-popover-"+e.placement),e.mirror&&(e.placement="right"==e.placement?"left":"right"),this.placement=e.placement,this.$popoverContainer=s('<div class="binf-popover pman-widget-popover pman-ms-popover" role="tooltip"><div class="binf-arrow"></div><h3 class="binf-popover-title"></h3><div class="binf-popover-content"></div></div>'),this.$popoverContainer.css("max-width",e.availableSpace+"px")},"_showPopover":function(){var e={"html":!0,"content":this.optionsFormView.el,"trigger":"manual","viewport":{"selector":this.options.perspectiveSelector,"padding":15},"placement":this.placement,"template":this.$popoverContainer,"animation":!1};this.$popoverEl.binf_popover(e),this.$popoverEl.off("hidden.binf.popover").on("hidden.binf.popover",this._handleCalloutHide.bind(this)),this.$popoverEl.binf_popover("show"),this.optionsFormView.onPopoverShow(this.$popoverContainer),this.optionsFormView.$el.find(".cs-formview-wrapper").trigger("refresh:setcontainer");var i=this.$popoverEl.next(".binf-popover"),t=i.find(".alpaca-container-item-first");if(t.length){t=t.first();var s=t.find("input:visible, textarea:visible, button.binf-dropdown-toggle:visible");s.length&&s.focus()}this._registerPopoverEvents(),this.optionsFormView.trigger("ensure:scrollbar")},"_registerPopoverEvents":function(){s(".perspective-editing .cs-perspective-panel").on("click."+this.cid,{"view":this},this._documentClickHandler),s(".pman-container").on("click."+this.cid,{"view":this},this._documentClickHandler),s(window).on("resize."+this.cid,{"view":this},this._windowResizeHandler)},"_windowResizeHandler":function(e){e.data.view.$popoverEl.binf_popover("destroy")},"_unregisterPopoverEvents":function(){s(".perspective-editing .cs-perspective-panel").off("click."+this.cid,this._documentClickHandler),s(".pman-container").off("click."+this.cid,this._documentClickHandler),s(window).off("resize."+this.cid,this._windowResizeHandler)},"_handleCalloutHide":function(){this._unregisterPopoverEvents(),this._updateWidgetOptions()},"_updateWidgetOptions":function(){var e=this.optionsFormView.validate(),i=this.optionsFormView.getValues();this.perspectiveView.trigger("update:widget:options",{"widgetView":this.widgetView,"isValid":e,"options":i}),e?this.widgetView.$el.removeClass("binf-has-error"):this.widgetView.$el.addClass("binf-has-error")},"_documentClickHandler":function(e){var i=e.data.view;s(e.target).closest(".binf-popover").length||i.$el.is(e.target)||i.$el.has(e.target).length||s.contains(document,e.target)&&(i._unregisterPopoverEvents(),i.$popoverEl.binf_popover("destroy"))},"_onChangeField":function(e){
e.name===l.widgetSizeProperty&&(this.perspectiveView.trigger("update:widget:size",this.options.widgetView,e.value),this.$popoverEl.binf_popover("destroy"))},"_evalRequiredFormWidth":function(){this.optionsFormView.$el.addClass("pman-prerender-form"),this.optionsFormView.$el.addClass("pman-widget-popover"),this.optionsFormView.$el.appendTo(document.body),this.optionsFormView.$el.find(".cs-formview-wrapper").trigger("refresh:setcontainer");var e=this.optionsFormView.$el.width();return this.optionsFormView.$el.find(".csui-scrollablecols").length>0&&(e+=this.optionsFormView.$el.find(".csui-scrollablecols")[0].scrollWidth-this.optionsFormView.$el.find(".csui-scrollablecols")[0].offsetWidth),this.optionsFormView.$el.removeClass("pman-widget-popover"),e},"_calculateSpaceAroundWidget":function(){var e=(this.$el.width(),s(document).width()),i=this.$el.find(".csui-pman-popover-left").offset().left,t=e-this.$el.find(".csui-pman-popover-right").offset().left;return{"right":{"placement":"right","mirror":!1,"availableSpace":t},"rightFlip":{"placement":"right","mirror":!0,"availableSpace":e-t},"left":{"placement":"left","mirror":!1,"availableSpace":i},"leftFlip":{"placement":"left","mirror":!0,"availableSpace":e-i}}},"_determineCalloutPlacement":function(){var e,t,s,n=i&&i.settings.rtl,a=this._evalRequiredFormWidth()+20,r=this._calculateSpaceAroundWidget(),o=n?[r.left,r.right,r.rightFlip,r.leftFlip]:[r.right,r.left,r.leftFlip,r.rightFlip];for(e=0;e<o.length;e++){var c=o[e];if(a<c.availableSpace){t=c;break}(!s||c.availableSpace>s.availableSpace)&&(s=c)}return t||(t=s),t.availableSpace-=20,t},"_isPreviewWidget":function(){return this.widgetConfig.type===u.perspectiveWidget},"_loadManifest":function(){if(void 0!==this.manifest)return s.Deferred().resolve(this.manifest);if(this._isPreviewWidget())return this.manifest=this.widgetConfig.options.widget.get("manifest"),this._loadManifest();var e=s.Deferred(),i=this,t=new c({"id":this.widgetConfig.type});return t.fetch().then(function(){i.manifest=t.get("manifest"),e.resolve(i.manifest)},function(i){e.reject(i)}),e.promise()},"onDeleteClick":function(e){e.preventDefault(),e.stopPropagation();var i=this;csui.require(["csui/dialogs/modal.alert/modal.alert"],function(e){e.confirmQuestion(p.deleteConfirmMsg,p.deleteConfirmTitle).done(function(e){e&&i._doDeleteWidget()})})},"_doDeleteWidget":function(){this.perspectiveView.trigger("delete:widget",this.widgetView)},"_doReplaceWidget":function(e){var i=e.get("manifest")||{};this.perspectiveView.trigger("replace:widget",this.widgetView,{"type":u.perspectiveWidget,"kind":i.kind,"options":{"options":{},"widget":e}})},"onDragOver":function(e){e.preventDefault()},"onDragEnter":function(e){e.preventDefault(),this.dropCounter++,this.$el.siblings(".csui-perspective-placeholder").addClass("csui-widget-drop")},"onDragLeave":function(){0===--this.dropCounter&&this.$el.siblings(".csui-perspective-placeholder").removeClass("csui-widget-drop")},"_extractWidgetToDrop":function(e){var i=e.originalEvent.dataTransfer.getData("text");if(i)try{return new c(JSON.parse(i))}catch(e){return!1}},"onDrop":function(e){e.preventDefault(),this.onDragLeave();var i=this._extractWidgetToDrop(e);if(i)if(this.widgetConfig.type===u.placeholderWidget)this._doReplaceWidget(i);else{var t=this;csui.require(["csui/dialogs/modal.alert/modal.alert"],function(e){e.confirmQuestion(p.replaceConfirmMsg,p.replaceConfirmTitle).done(function(e){e&&t._doReplaceWidget(i)})})}}},{"className":"csui-configure-perspective-widget","perspectiveWidget":"csui/perspective.manage/widgets/perspective.widget","placeholderWidget":"csui/perspective.manage/widgets/perspective.placeholder","widgetSizeProperty":"__widgetSize"});return n.Behavior.extend({"defaults":{"perspectiveSelector":".perspective-editing .cs-perspective > div"},"constructor":function(e,i){if(!e.perspectiveView)throw new n.Error({"name":"perspectiveView","message":"Undefined perspectiveView options"});this.perspectiveView=e.perspectiveView,n.Behavior.prototype.constructor.apply(this,arguments),this.view=i,t.extend(this.perspectiveView,{"getPManPlaceholderWidget":function(){return{"type":u.placeholderWidget,"options":{}}}})},"_ensureWidgetElement":function(){if(t.isObject(this.$widgetEl)||(this.$widgetEl=this.options.el?s(this.options.el):this.view.$el),!this.$widgetEl||0===this.$widgetEl.length)throw new n.Error('An "el" '+this.$widgetEl.selector+" must exist in DOM");return!0},"_checkAndApplyMask":function(){if(!(this.$el.find("."+u.className).length>0)){this._ensureWidgetElement();var e=this._resolveWidgetConfiguration(),i=new u(t.extend(this.options,{"widgetView":this.view,"widgetConfig":e}));i.render(),this.$widgetEl.append(i.el),this.$widgetEl.addClass("csui-pman-editable-widget"),this.$widgetEl.data("pman.widget",{"attributes":{"manifest":e}}),e.type===u.placeholderWidget&&this.$widgetEl.removeClass("csui-draggable-item")}},"_resolveWidgetConfiguration":function(){return this.view.model&&this.view.model.get("widget")?this.view.model.get("widget"):this.view.getPManWidgetConfig&&t.isFunction(this.view.getPManWidgetConfig)?this.view.getPManWidgetConfig():this.options.widgetConfig?this.options.widgetConfig:void 0},"onRender":function(){this._checkAndApplyMask()},"onDestroy":function(){}})}),csui.define("csui/perspective.manage/pman.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/utils/non-emptying.region/non-emptying.region","csui/perspective.manage/impl/pman.panel.view","i18n!csui/perspective.manage/impl/nls/root/lang","hbs!csui/perspective.manage/impl/pman","css!csui/perspective.manage/impl/pman","csui/perspective.manage/behaviours/pman.widget.config.behaviour"],function(e,i,t,s,n,a,r,o,c){var l;return s.ItemView.extend({"className":"pman pman-container","template":c,"templateHelpers":function(){return{"addWidget":o.addWidget,"save":o.save,"cancel":o.cancel}},"ui":{"pmanPanel":".pman-header .pman-pannel-wrapper","cancelEdit":".pman-header .cancel-edit","addIcon":".pman-header .icon-toolbarAdd","saveBtn":".pman-header .icon-save","trashArea":".pman-header .pman-trash-area"},"events":{"click @ui.cancelEdit":"onClickClose","click @ui.addIcon":"togglePannel","click @ui.saveBtn":"onClickSave"},"constructor":function(t){t||(t={}),e.defaults(t,{"applyMasking":this.applyMasking.bind(this),"container":document.body}),t.container=i(t.container),this.context=t.context,this._prepareForEdit(t.perspective||t.context.perspective),s.ItemView.prototype.constructor.call(this,t),this._registerEventHandler()},"_registerEventHandler":function(){this.listenTo(this,"change:layout",function(e){this.perspective.set("perspective",{"type":e,"options":{"perspectiveMode":"edit"}},{"silent":!0}),this._triggerEditMode(),this.togglePannel()}),this.listenTo(this.context,"save:perspective",this._savePerspective),this.listenTo(this.context,"change:perspective",this._onChangePerspective),this.listenTo(this.context,"retain:perspective",this._doExitPerspective)},"_prepareForEdit":function(e){if(!e)throw new Error("Missing perspective");this.perspective=this._clonePrespective(e),this.perspective.isNew()&&this.perspective.set("perspective",this._getDefaultPerspectiveConfig()),(this.perspective.get("perspective").options||{}).perspectiveMode="edit"},"_clonePrespective":function(e){var i=e.get("perspective"),t=JSON.parse(JSON.stringify(i));return e.set("perspective",t),e},"show":function(){var e=this.getContainer();return new a({"el":e}).show(this),this},"getContainer":function(){return l&&i.contains(this.options.container,l)||(l=i("<div>",{"class":"binf-widgets"}).appendTo(this.options.container)[0]),l},"_getDefaultPerspectiveConfig":function(){return{"type":"left-center-right","options":{"center":{"type":"csui/widgets/nodestable"}}}},"_savePerspective":function(e){this.perspective.set(e);var t=this;this.perspective.save().then(function(){csui.require(["csui/controls/globalmessage/globalmessage"],function(i){i.showMessage("success",o.perspectiveSaveSuccess),e.perspective.id=t.perspective.get("id"),t.context.perspective.set(e.perspective),t._doExitPerspective()})},function(e){var t;if(e&&e.responseJSON&&e.responseJSON.error)t=e.responseJSON.error;else{var s=n.MessageHelper.toHtml();n.MessageHelper.reset(),t=i(s).text()}csui.require(["csui/controls/globalmessage/globalmessage"],function(e){e.showMessage("error",t)})})},"onClickSave":function(){var e=this.options.container.find(".binf-popover");e.length&&e.binf_popover("hide"),this.context.triggerMethod("serialize:perspective",this.perspective)},"onClickClose":function(){this._doExitPerspective()},"togglePannel":function(){this.ui.pmanPanel.hasClass("binf-active")?this._closeToolsPanel():this._openToolsPanel()},"_openToolsPanel":function(){this.pmanPanelView.trigger("reset:items"),this.ui.addIcon.addClass("binf-active"),this.ui.addIcon.attr("title",o.close),this.ui.pmanPanel.addClass("binf-active"),this.pmanPanelView.triggerMethod("panel:open")},"_closeToolsPanel":function(){this.ui.pmanPanel.removeClass("binf-active"),this.ui.addIcon.attr("title",o.addWidget),this.ui.addIcon.removeClass("binf-active")},"applyMasking":function(){},"_initializeWidgets":function(){this.pmanPanelRegion=new s.Region({"el":this.ui.pmanPanel}),this.pmanPanelView=new r({"pmanView":this}),this.pmanPanelRegion.show(this.pmanPanelView),this.ui.trashArea.droppable({"tolerance":"pointer","hoverClass":"pman-trash-hover","accept":function(){return!1}})},"_triggerEditMode":function(){var e=new t.Model(this.perspective.get("perspective"));this.context.triggerMethod("enter:edit:perspective",e)},"onRender":function(){this.options.container.addClass("perspective-editing"),this.options.applyMasking(),this._initializeWidgets(),this._triggerEditMode(),i(document).on("click."+this.cid,{"view":this},this._documentClick)},"_documentClick":function(e){var i=e.data.view;i.ui.addIcon.is(e.target)||i.ui.addIcon.has(e.target).length||i.ui.pmanPanel.is(e.target)||i.ui.pmanPanel.has(e.target).length||i._closeToolsPanel()},"_onChangePerspective":function(){this._doCleanup()},"_doCleanup":function(){var e=this.options.container.find(".binf-popover");e.length&&e.binf_popover("destroy"),this.options.container.removeClass("perspective-editing"),i(document).off("click."+this.cid,this._documentClick),this.trigger("destroy")},"_doExitPerspective":function(){this._doCleanup(),this.context.triggerMethod("exit:edit:perspective",this.perspective)}},{"placeHolderWidget":"csui/perspective.manage/widgets/perspective.placeholder"})}),csui.define("csui/perspective.manage/widgets/perspective.placeholder/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspective.manage/widgets/perspective.placeholder/impl/nls/root/lang",{"dndWidgetsHere":"Drag and Drop widgets here"}),csui.define("hbs!csui/perspective.manage/widgets/perspective.placeholder/impl/perspective.placeholder",["module","hbs","csui/lib/handlebars"],function(e,i,t){var s=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,i,t,s){var n;return'<div class="csui-placeholder-title" title="'+this.escapeExpression((n=null!=(n=i.dndWidgetsHere||(null!=e?e.dndWidgetsHere:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"dndWidgetsHere","hash":{}}):n))+'">\r\n  <div class="csui-placeholder-icon"></div>\r\n  <div>'+this.escapeExpression((n=null!=(n=i.dndWidgetsHere||(null!=e?e.dndWidgetsHere:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"dndWidgetsHere","hash":{}}):n))+"</div>\r\n</div>"}});return t.registerPartial("csui_perspective.manage_widgets_perspective.placeholder_impl_perspective.placeholder",s),s}),csui.define("css!csui/perspective.manage/widgets/perspective.placeholder/impl/perspective.placeholder",[],function(){}),csui.define("csui/perspective.manage/widgets/perspective.placeholder/perspective.placeholder.view",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","i18n!csui/perspective.manage/widgets/perspective.placeholder/impl/nls/lang","hbs!csui/perspective.manage/widgets/perspective.placeholder/impl/perspective.placeholder","css!csui/perspective.manage/widgets/perspective.placeholder/impl/perspective.placeholder"],function(e,i,t,s,n){return t.ItemView.extend({"className":"csui-perspective-placeholder","template":n,"templateHelpers":function(){return{"dndWidgetsHere":s.dndWidgetsHere}},"constructor":function(e){t.ItemView.apply(this,arguments)},"onShow":function(){this.$el.parent().addClass("csui-pman-placeholder-container")},"onDestroy":function(){this.$el.parent().removeClass("csui-pman-placeholder-container")}})}),csui.define("csui/perspective.manage/widgets/perspective.widget/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspective.manage/widgets/perspective.widget/impl/nls/root/lang",{"noConfig":"No configuration needed","clickToConfig":"Configuration needed"}),csui.define("hbs!csui/perspective.manage/widgets/perspective.widget/impl/perspective.widget",["module","hbs","csui/lib/handlebars"],function(e,i,t){var s=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,i,t,s){var n;return'<div class="tile-header">\r\n  <div class="tile-title">\r\n    <h2 class="csui-heading" title="'+this.escapeExpression((n=null!=(n=i.widgetTitle||(null!=e?e.widgetTitle:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"widgetTitle","hash":{}}):n))+'">'+this.escapeExpression((n=null!=(n=i.widgetTitle||(null!=e?e.widgetTitle:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"widgetTitle","hash":{}}):n))+'</h2>\r\n  </div>\r\n</div>\r\n<div>\r\n  <div title="'+this.escapeExpression((n=null!=(n=i.widgetMessage||(null!=e?e.widgetMessage:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"widgetMessage","hash":{}}):n))+'" class="csui-pman-widget-msg">\r\n    <div class="csui-pman-widget-icon"></div>\r\n    <div>'+this.escapeExpression((n=null!=(n=i.widgetMessage||(null!=e?e.widgetMessage:e))?n:i.helperMissing,"function"==typeof n?n.call(e,{"name":"widgetMessage","hash":{}}):n))+"</div>\r\n  </div>\r\n</div>"}});return t.registerPartial("csui_perspective.manage_widgets_perspective.widget_impl_perspective.widget",s),s}),csui.define("css!csui/perspective.manage/widgets/perspective.widget/impl/perspective.widget",[],function(){}),csui.define("csui/perspective.manage/widgets/perspective.widget/perspective.widget.view",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","i18n!csui/perspective.manage/widgets/perspective.widget/impl/nls/lang","hbs!csui/perspective.manage/widgets/perspective.widget/impl/perspective.widget","css!csui/perspective.manage/widgets/perspective.widget/impl/perspective.widget"],function(e,i,t,s,n){return t.ItemView.extend({"className":"csui-pman-widget","template":n,"templateHelpers":function(){var i=this.widget.get("manifest"),t=!i||!i.schema||!i.schema.properties||e.isEmpty(i.schema.properties);return{"widgetTitle":this.widget.get("title"),"widgetMessage":t?s.noConfig:s.clickToConfig}},"constructor":function(e){t.ItemView.apply(this,arguments),this.widget=e.data.widget}})}),csui.define("json!csui/perspective.manage/widgets/perspective.placeholder/perspective.placeholder.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{title}}","description":"{{description}}","kind":"tile","schema":{"type":"object","properties":{}}}),csui.define("json!csui/perspective.manage/widgets/perspective.widget/perspective.widget.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{title}}","description":"{{description}}","kind":"tile","schema":{"type":"object","properties":{}}}),csui.define("csui/perspective.manage/widgets/perspective.placeholder/impl/nls/perspective.placeholder.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspective.manage/widgets/perspective.placeholder/impl/nls/root/perspective.placeholder.manifest",{"dndWidgetsHere":"Drag and Drop widgets here"}),csui.define("csui/perspective.manage/widgets/perspective.widget/impl/nls/perspective.widget.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspective.manage/widgets/perspective.widget/impl/nls/root/perspective.widget.manifest",{"noConfig":"No configuration needed","clickToConfig":"Configuration needed"}),csui.define("bundles/csui-perspective",["csui/perspective.manage/pman.view","csui/perspective.manage/behaviours/pman.widget.config.behaviour","csui/perspective.manage/widgets/perspective.placeholder/perspective.placeholder.view","csui/perspective.manage/widgets/perspective.widget/perspective.widget.view","json!csui/perspective.manage/widgets/perspective.placeholder/perspective.placeholder.manifest.json","json!csui/perspective.manage/widgets/perspective.widget/perspective.widget.manifest.json","i18n!csui/perspective.manage/widgets/perspective.placeholder/impl/nls/perspective.placeholder.manifest","i18n!csui/perspective.manage/widgets/perspective.widget/impl/nls/perspective.widget.manifest"],{}),csui.require(["require","css"],function(e,i){i.styleLoad(e,"csui/bundles/csui-perspective",!0)});
//# sourceMappingURL=csui-perspective.js.map