csui.define("xecmpf/controls/bosearch/bosearch.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(t,e,o){"use strict";var n=o.Model.extend({"constructor":function(t,e){o.Model.prototype.constructor.apply(this,arguments)}});return n}),csui.define("xecmpf/controls/bosearch/searchform/bosearchform.model",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/url","csui/models/resource"],function(t,e,o,n,i,s,r){"use strict";var c=n.Model.extend(o.defaults({"constructor":function(t,e){e||(e={}),t=o.extend({"data":{},"options":{},"schema":{}},t),n.Model.prototype.constructor.call(this,t,e),this.makeResource(e)},"url":function(){var t="forms/businessobjects/search",o=this.get("id"),n={"bo_type_id":o},i=t+"?"+e.param(n),r=this.connector.connection.url,c=s.combine(r&&r.replace("/v1","/v2")||r,i);return c},"parse":function(t){var e;return t&&t.results&&(e=t.results[1],e.id=this.get("id"),e.name=t.results[0].data.bo_type_name,e.bus_att_metadata_mapping=t.results[0].data.business_attachments&&t.results[0].data.business_attachments.metadata_mapping,e.schema&&delete e.schema.title),e}},r(n.Model)));return c}),csui.define("xecmpf/controls/property.panels/reference/impl/workspace.reference.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/mixins/node.connectable/node.connectable.mixin"],function(t,e,o,n,i){"use strict";var s=o.Model.extend({"constructor":function(t,e){o.Model.prototype.constructor.apply(this,arguments),this.makeNodeConnectable(e)},"sync":function(i,s,r){var c,a,u,l;if("read"===i)c=this.get("id"),a=t.str.sformat("businessworkspaces/{0}",c),u=this.connector.connection.url,l=n.combine(u&&u.replace("/v1","/v2")||u,a),r.url=l;else if("update"===i){c=this.get("id"),a=t.str.sformat("businessworkspaces/{0}/workspacereferences",c);var d=this.get("bo_id"),p=this.get("bo_type_id"),m={"bo_id":d,"bo_type_id":p};u=this.connector.connection.url,l=n.combine(u&&u.replace("/v1","/v2")||u,a),r.url=l,r.data=e.param(m)}return o.sync(i,s,r)},"parse":function(t){var e=t&&t.results&&t.results.data||{},o=t&&t.results&&t.results.actions&&t.results.actions.data||{},n=e.properties||{},i=e.business_properties||{};return i.business_object_id&&(n.bo_id=i.business_object_id),i.business_object_type_id&&(n.bo_type_id=i.business_object_type_id),i.business_object_type_name&&(n.bo_type_name=i.business_object_type_name),i.external_system_id&&(n.ext_system_id=i.external_system_id),i.external_system_name&&(n.ext_system_name=i.external_system_name),i.workspace_type_id&&(n.workspace_type_id=i.workspace_type_id),i.workspace_type_name&&(n.workspace_type_name=i.workspace_type_name),n.change_reference=!!o["change-reference"],n.complete_reference=!!o["complete-reference"],n}});return i.mixin(s.prototype),s}),csui.define("xecmpf/controls/property.panels/reference/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/controls/property.panels/reference/impl/nls/root/lang",{"cannotCompleteBusinessReference":"You do not have permission to complete the business reference","errorUpdatingWorkspaceReference":"Error updating workspace reference.","businessObjectIdLabel":"Reference object","referenceTabTitle":"Reference","referenceSearchButtonTitle":"Search","referenceSearchButtonLabel":"{0} in {1}","referenceRemoveButtonTitle":"Remove","referenceReplaceButtonTitle":"Replace","referencePanelOverrideNote":"If you add a workspace reference, workspace name and other attributes will be overwritten with metadata of the business object."}),csui.define("xecmpf/controls/property.panels/reference/impl/reference.panel.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","i18n!xecmpf/controls/property.panels/reference/impl/nls/lang"],function(t,e,o,n){"use strict";var i=o.Model.extend({"constructor":function(t,e){o.Model.prototype.constructor.apply(this,arguments),this.set("id","conws-reference"),this.set("title",n.referenceTabTitle)}});return i}),csui.define("xecmpf/models/boattachmentcontext/attachmentcontext.category.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/url","csui/models/node/node.model","csui/models/mixins/fetchable/fetchable.mixin"],function(t,e,o,n,i,s,r){var c=s.extend({"constructor":function(t,e){e||(e={}),s.prototype.constructor.call(this,t,e),this.node=e.node,this.category_id=e.category_id},"fetch":function(o){o||(o={});var n=e.extend({},o);return n.url||(n.url=e.result(this,"url")),this.node.get("id")?s.prototype.fetch.call(this,n):t.Deferred().resolve().promise()},"url":function(){return i.combine(this.connector.connection.url,"nodes",this.node.get("id"),"categories",this.category_id).replace("/v2/","/v1/")},"parse":function(t){return t.data}});return c}),csui.define("xecmpf/models/boattachmentcontext/attachmentcontext.category.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","xecmpf/models/boattachmentcontext/attachmentcontext.category.model"],function(t,e,o,n,i){var s=e.extend({"propertyPrefix":"attachmentContextCategory","constructor":function(t,s){e.prototype.constructor.apply(this,arguments),s.attachmentContextCategory=s.attachmentContextCategory||{};var r=s.attachmentContextCategory.node||t.getModel(n,s),c=s.attachmentContextCategory.connector||t.getObject(o,s);this.property=new i({},{"category_id":s.attachmentContextCategory.category_id,"connector":c,"node":r})},"fetch":function(t){return this.property.fetch(t)}});return s}),csui.define("xecmpf/widgets/boattachments/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/boattachments/impl/nls/root/lang",{"dialogTitle":"Business attachments","searchPlaceholder":"Search %1","noResultsPlaceholder":"No business attachments to display.","errorFieldFormatTagUnrecognized":"Invalid format specification for {0}.","errorCustomColumnConfigInvalid":"Invalid custom column configuration: {0}.","errorCustomColumnMissingBraces":"Missing curly braces in custom column configuration: {0}.","errorOrderByMustNotBeString":"Configuration 'orderBy' must be an object not a string.","errorOrderByMissingBraces":"Missing curly braces in 'orderBy' configuration.","errorFilteringFailed":"Filtering of result list failed. Please contact your administrator.","noAttachmentsFound":"No business attachments found.","businessAttachments":"Business attachments","CommandSnapshot":"Snapshot","addBusinessAttachment":"Add business attachment","fileSizeByte":"Bytes","fileSizeKByte":"KB","fileSizeMByte":"MB","parent_id":"Location","reservedBy":"Reserved by %1","snaphotCreated":"Snapshot created","snaphotFailed":"Snapshot creation failed","CommandDoneVerbCreated":"created","fileSizeGByte":"GB","items":"items","invalidConfigurationNoBusObjDisplay":"Cannot display business attachments because there is no business object defined.","invalidConfigurationNoBusObjConfigured":"No business object type configured for workspace display.","invalidConfigurationNoBusObjAvailable":"Cannot display business attachments because there is no business object available.","noBusinessObjectFound":"No business object found","invalidConfiguration":"Invalid widget configuration. Business object key, business object type and business application ID must be set."}),csui.define("xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/url","csui/models/node/node.model","csui/dialogs/modal.alert/modal.alert","xecmpf/models/boattachmentcontext/attachmentcontext.category.factory","i18n!xecmpf/widgets/boattachments/impl/nls/lang","csui/models/mixins/resource/resource.mixin"],function(t,e,o,n,i,s,r,c,a,u){var l=o.Model.extend({"constructor":function(t,e){e||(e={}),o.Model.prototype.constructor.call(this,t,e),this.makeResource(e),this.node=e.node,this.data=e.data,this.connector=e.connector,this.context=e.context,this.invalidConfigurationShown=!1,this.invalidErrorMessage=a.noBusinessObjectFound},"_logInvalidConfiguration":function(){this._isConfigEmpty(this.busObjectKey)&&n.warn("Business object key is not set")&&console&&console.log(n.last),this._isConfigEmpty(this.busObjectType)&&n.warn("Business object type is not set")&&console&&console.log(n.last),this._isConfigEmpty(this.extSystemId)&&n.warn("Business application ID is not set")&&console&&console.log(n.last)},"_logEmptyBusObjKeyConfiguration":function(){n.warn("Empty business object key in business attachment widget")&&console&&console.log(n.last),this.invalidConfigurationShown=!0},"_logEmptyBusObjTypeConfiguration":function(){n.warn("Empty business object type in business attachment widget")&&console&&console.log(n.last),this.invalidConfigurationShown=!0},"_logEmptyBusAppIDConfiguration":function(){n.warn("Empty business application ID in business attachment widget")&&console&&console.log(n.last),this.invalidConfigurationShown=!0},"_showInvalidConfigurationError":function(t){!this.invalidConfigurationShown&&r.showError(t),this.invalidConfigurationShown=!0},"_isConfigEmpty":function(t){var o=e.isObject(t)?1===t.length?e.isEmpty(t[0]):!0:e.isEmpty(t);return o},"_isConfigValid":function(){var t=this._isConfigEmpty(this.busObjectKey),e=this._isConfigEmpty(this.busObjectType),o=this._isConfigEmpty(this.extSystemId);return!e&&!o&&!t},"_isWorkspaceWithoutConfig":function(){return e.isEmpty(this._getCategoryInfo(this.data.busObjectId))&&e.isEmpty(this._getCategoryInfo(this.data.busObjectType))&&e.isEmpty(this._getCategoryInfo(this.data.extSystemId))&&this.node.get("id")&&848===this.node.get("type")},"_loadCategories":function(){var t=[],e=this,o=this._getCategoryInfo(this.data.busObjectId),n=this._getCategoryInfo(this.data.busObjectType),i=this._getCategoryInfo(this.data.extSystemId);if(o.categoryId){var s=this.context.getModel(c,{"attributes":{"category_id":o.categoryId},"category_id":o.categoryId,"node":this.node,"connector":this.connector});t.push(s.fetch()),this.listenTo(s,"sync",function(){var t=s.get(o.categoryAttr);e._isConfigEmpty(t)?e._logEmptyBusObjKeyConfiguration():e.busObjectKey=t}),this.listenTo(s,"error",function(){this._showInvalidConfigurationError(arguments[1].responseJSON.error)})}else this.busObjectKey=o.categoryAttr;if(n.categoryId){var r=this.context.getModel(c,{"attributes":{"category_id":n.categoryId},"category_id":n.categoryId,"node":this.node,"connector":this.connector});t.push(r.fetch()),this.listenTo(r,"sync",function(){var t=r.get(n.categoryAttr);e._isConfigEmpty(t)?e._logEmptyBusObjTypeConfiguration():e.busObjectType=t}),this.listenTo(r,"error",function(){this._showInvalidConfigurationError(arguments[1].responseJSON.error)})}else this.busObjectType=n.categoryAttr;if(i.categoryId){var a=this.context.getModel(c,{"attributes":{"category_id":i.categoryId},"category_id":i.categoryId,"node":this.node,"connector":this.connector});t.push(a.fetch()),this.listenTo(a,"sync",function(){var t=a.get(i.categoryAttr);e._isConfigEmpty(t)?e._logEmptyBusAppIDConfiguration():e.extSystemId=t}),this.listenTo(a,"error",function(){this._showInvalidConfigurationError(arguments[1].responseJSON.error)})}else this.extSystemId=i.categoryAttr;return t},"_getCategoryInfo":function(t){var o,n,i;if(!e.isEmpty(t)){var s=/{categories.(([0-9]+)_[0-9]+[_]?[0-9]*[_]?[0-9]*)}/g;return s.test(t)?(s.lastIndex=0,o=s.exec(t),n=o[2],i=o[1],{"categoryId":n,"categoryAttr":i}):{"categoryId":"","categoryAttr":t}}return""},"url":function(){var t;return t=this._isWorkspaceWithoutConfig()===!0?i.combine(this.connector.connection.url,"businessworkspaces/"+this.node.get("id")+"?metadata"):i.combine(this.connector.connection.url,"businessworkspacetypes?ext_system_id="+this.extSystemId+"&expand_templates=true&bo_type="+this.busObjectType),t.replace("/v1/","/v2/")},"parse":function(t){if(this._isWorkspaceWithoutConfig()===!0){var o=e.find(t.results.data.workspace_references,function(t){return t.has_default_display===!0});return e.isUndefined(o)?(t.results.data.business_properties.isEarly?(this.invalidConfigurationShown=!0,this.invalidErrorMessage=a.invalidConfigurationNoBusObjDisplay):(this.invalidConfigurationShown=!0,this.invalidErrorMessage=a.invalidConfigurationNoBusObjAvailable),null):{"busObjectKey":o.business_object_id,"busObjectType":o.business_object_type,"extSystemId":o.external_system_id,"titleIcon":t.results.data.wksp_info.wksp_type_icon}}return{"busObjectKey":this.busObjectKey,"busObjectType":this.busObjectType,"extSystemId":this.extSystemId,"titleIcon":t.results.length>0&&t.results[0].data.wksp_info.wksp_type_icon}}});u.mixin(l.prototype);var d=l.prototype.fetch;return l.prototype.fetch=function(e){var o=t.Deferred(),n=this._loadCategories(),i=this;return n.length>0?(t.when.apply(t,n).done(function(){i._isConfigValid()===!0?d.call(i,e).done(function(){o.resolve()}):(i._logInvalidConfiguration(),i._showInvalidConfigurationError(a.invalidConfiguration),o.resolve())}),o.promise()):this._isWorkspaceWithoutConfig()===!0||this._isConfigValid()===!0?d.call(this,e):(this._logInvalidConfiguration(),this._showInvalidConfigurationError(a.invalidConfiguration),o.resolve().promise())},l}),csui.define("xecmpf/models/boattachmentcontext/attachmentcontext.node.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/url","csui/models/resource"],function(t,e,o,n,i,s){var r=o.Model.extend(e.defaults({"workspaceSpecific":!0,"constructor":function(t,e){e||(e={}),o.Model.prototype.constructor.call(this,t,e),this.options=e,this.makeResource(e),this.listenTo(this.options.node,"change:id",this.syncToNode),this.syncToNode()},"syncToNode":function(){var t=this.options.node,e=t.get("id");848===t.get("type")&&this.set({"id":e,"type":848})},"url":function(){var t,e=this.options.node.get("id");return this.options.data&&this.options.data.busObjectId&&this.options.data.busObjectType&&this.options.data.extSystemId?(t=i.combine(this.options.connector.connection.url,"/businessworkspaces"),t+="?expanded_view=true&where_bo_type="+this.options.data.busObjectType,t+="&where_ext_system_id="+this.options.data.extSystemId,t+="&where_bo_id="+this.options.data.busObjectId,t=t.replace("/v1","/v2")):(t=i.combine(this.options.connector.connection.url,"nodes",e,"businessworkspace"),t=t.replace("/v2","/v1")),t},"fetch":function(o){return this.options.node.get("id")?848!==this.options.node.get("type")?(n.debug("Fetching the workspace id for {0} from server.",this)&&console.log(n.last),o||(o={}),o.url||(o.url=e.result(this,"url")),this.Fetchable.fetch.call(this,o)):(n.debug("Fetching the workspace id for {0} from node.",this)&&console.log(n.last),this.set({"id":this.options.node.get("id"),"type":848}),t.Deferred().resolve().promise()):this.options.data&&this.options.data.busObjectId&&this.options.data.busObjectType&&this.options.data.extSystemId?(n.debug("Fetching the workspace id for {0} from server.",this)&&console.log(n.last),o||(o={}),o.url||(o.url=e.result(this,"url")),this.Fetchable.fetch.call(this,o)):t.Deferred().resolve().promise()},"parse":function(t){return t.results&&(t=t.results.length>0?t.results[0].data.properties:null),t?{"id":t.id,"type":t.type}:void 0},"toString":function(){return"node:"+this.get("id")}},s(o.Model)));return r}),csui.define("xecmpf/models/boattachmentcontext/attachmentcontext.node.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","xecmpf/models/boattachmentcontext/attachmentcontext.node.model"],function(t,e,o,n,i){var s=e.extend({"propertyPrefix":"attachmentContextNode","constructor":function(t,s){e.prototype.constructor.apply(this,arguments);var r=s.attachmentContextNode.node||t.getModel(n,{}),c=s.attachmentContextNode.connector||t.getObject(o,{});this.property=new i({},{"data":s.attachmentContextNode.data,"connector":c,"node":r})},"fetch":function(t){return this.property.fetch(t)}});return s}),csui.define("xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.model"],function(t,e,o,n,i){var s=e.extend({"propertyPrefix":"attachmentContextBusinessObjectInfo","constructor":function(s,r){r=r||{},e.prototype.constructor.apply(this,arguments);var c=r.node||s.getModel(n,{}),a=r.connector||s.getObject(o,{}),u=r.attachmentContextBusinessObjectInfo.data||{};t.defaults(u,{"busObjectId":"","busObjectType":"","extSystemId":""}),this.property=new i({},{"context":s,"data":u,"connector":a,"node":c})},"fetch":function(t){return this.property.fetch(t)}});return s}),csui.define("xecmpf/models/boattachmentcontext/attachmentcontext.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/contexts/context","csui/utils/contexts/factories/node","xecmpf/models/boattachmentcontext/attachmentcontext.node.factory","xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.factory","xecmpf/models/boattachmentcontext/attachmentcontext.category.factory"],function(t,e,o,n,i,s,r,c,a){var u=i.extend({"constructor":function(t,e){e||(e={}),i.prototype.constructor.apply(this,arguments),this.options=e,this.attachmentSpecific={},this.attachmentSpecific[s.prototype.propertyPrefix]=!0,this.attachmentSpecific[r.prototype.propertyPrefix]=!0,this.attachmentSpecific[c.prototype.propertyPrefix]=!0,this.attachmentSpecific[a.prototype.propertyPrefix]=!0,this.attachmentSpecificFactories=[s,r,c,a],this.options.node=this.options.context.getModel(s),this.wkspid=this.getModel(r,{"data":this.options.data,"node":this.options.node,"connector":this.options.node.connector}),this.node=this.getModel(s),this.wkspid.get("id")===this.options.node.get("id")?this.node.set(this.options.node.attributes):this.node.set("id",this.wkspid.get("id"))},"setAttachmentSpecific":function(t){this.attachmentSpecific[t.prototype.propertyPrefix]=!0,this._isAttachmentSpecificFactory(t)||this.attachmentSpecificFactories.push(t)},"isAttachmentSpecific":function(t){var e=!1;return this.attachmentSpecific[t.prototype.propertyPrefix]?e=!0:this._isAttachmentSpecificFactory(t)&&(this.attachmentSpecific[t.prototype.propertyPrefix]=!0,e=!0),e},"_isAttachmentSpecificFactory":function(t){for(var e=!1,o=0;o<this.attachmentSpecificFactories.length;o++)if(this.attachmentSpecificFactories[o]===t){e=!0;break}return e},"getOuterContext":function(){return this.options.context},"getModel":function(){return this._getAttachmentObject("getModel",arguments)},"getCollection":function(){return this._getAttachmentObject("getCollection",arguments)},"getObject":function(){return this._getAttachmentObject("getObject",arguments)},"_getAttachmentObject":function(t,e){var o;return o=this.isAttachmentSpecific(e[0])?i.prototype[t].apply(this,e):this.options.context[t].apply(this.options.context,e)},"fetch":function(o){var i=this.wkspid.get("id"),s=this;return this.wkspid.fetch().then(function(){var o;n.debug("wkspid old {0}, new {1}.",i,s.wkspid.get("id"))&&console.log(n.last);var r=s.getFactories?s.getFactories():s._factories,c=e.find(r,function(t){return t.property===s.node});n.debug("going to fetch {0}.",c.propertyPrefix)&&console.log(n.last);var a;return s.wkspid.get("id")===s.options.node.get("id")?s.node.set(s.options.node.attributes):s.wkspid.get("id")?(s.node.set("id",s.wkspid.get("id")),s.node.set("type",848),c.fetch&&(a=c.fetch())):s.node.set(s.options.node.attributes),r=s.getFactories?s.getFactories():s._factories,o=e.chain(r).map(function(t){return n.debug("going to fetch {0}.",t.propertyPrefix)&&console.log(n.last),t.property!==s.wkspid&&t.property!==s.node&&t.fetch?t.fetch(s):void 0}).compact().value(),a&&o.unshift(a),t.when.apply(t,o)})}});return u}),csui.define("xecmpf/widgets/boattachments/impl/boattachmentutil",["csui/lib/jquery","csui/lib/underscore","i18n!xecmpf/widgets/boattachments/impl/nls/lang"],function(t,e,o){function n(){}return e.extend(n.prototype,{"formatFilzeSize":function(t){var e=t.size;if(void 0!==t.container&&t.container===!0)return e+" "+o.items;var n=o.fileSizeByte;return e>1024&&(n=o.fileSizeKByte,e/=1024,e>1024&&(n=o.fileSizeMByte,e/=1024,e>1024&&(n=o.fileSizeGByte,e/=1024))),Math.ceil(e)+" "+n},"orderByAsString":function(t,o,n){var i,s={"sc":o,"so":n};if(t&&(s=e.defaults({"sc":t.sortColumn,"so":t.sortOrder},s)),s.sc){var r=/{([^:}]+)(:([^}]+))?}/g,c=r.exec(s.sc);c?s.sc=c[1]:s.sc=void 0}return(s.sc||s.so)&&(i=e.str.sformat("{0} {1}",s.sc?s.sc:"name",s.so?s.so:"asc")),i}}),new n}),csui.define("xecmpf/widgets/boattachments/impl/boattachment.model",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/models/node/node.model","csui/models/nodeancestors","csui/utils/contexts/factories/factory","xecmpf/widgets/boattachments/impl/boattachmentutil"],function(t,e,o,n,i,s,r,c){var a=i.extend({"constructor":function(t,e){e||(e={}),e.connector||(e.connector=e.collection&&e.collection.connector||void 0),this.connector=e.connector,i.prototype.constructor.call(this,t,e)},"idAttribute":"id","parse":function(t,e){var o=i.prototype.parse.call(this,t,e);return o.size_formatted||(o.size_formatted=c.formatFilzeSize(o)),0===o.version&&(o.version=""),o.actions&&(o.actions[o.actions.length]={"body":"","content_type":"","form_href":"","href":"","method":"GET","name":"Snapshot","signature":"Snapshot"}),o.ancestors=new s(t.data.ancestors,{"node":this,"autofetch":!1}),o}});return a}),csui.define("xecmpf/widgets/boattachments/impl/boattachments.model",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/node/node.model","csui/models/connectable","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/nodechildren","csui/models/nodes","csui/models/mixins/expandable/expandable.mixin","csui/models/mixins/node.resource/node.resource.mixin","csui/models/browsable/browsable.mixin","csui/models/browsable/v1.request.mixin","csui/models/mixins/resource/resource.mixin","csui/models/browsable/v1.response.mixin","csui/models/browsable/v2.response.mixin","xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.factory","xecmpf/widgets/boattachments/impl/boattachment.model"],function(t,e,o,n,i,s,r,c,a,u,l,d,p,m,h,f,b,y,g,x){var _=c.extend({"constructor":function(){c.prototype.constructor.apply(this,arguments)}}),v=a.extend({"dataCollectionName":"properties","model":_,"constructor":function(t){t&&(this.dataCollectionName=t),a.prototype.constructor.apply(this)},"resetColumns":function(t,e){this.resetCollection(this.getColumns(t),e)},"getColumns":function(t){var e=t&&t.meta_data&&t.meta_data.properties||{};e&&!e.modified&&(e.modified=e.modify_date),e&&!e.size_formatted&&(e.size_formatted=e.size);var n=o.keys(e),i=this.getColumnModels(n,e);return o.each(i,function(t){("user"===t.persona||"member"===t.persona)&&(t.type=14)}),i}}),w=t.config(),C=l.extend({"dataCollectionName":"properties","model":x,"constructor":function(t,e){l.prototype.constructor.apply(this,arguments),e||(e={}),this.options=e,this.makeNodeResource(e).makeExpandable(e).makeBrowsable(e).makeBrowsableV1Request(e).makeBrowsableV1Response(e),this.columns=new v(this.dataCollectionName),this.totalCount=0,this.titleIcon=void 0,this.next=void 0,this.busobjinfo=this.options.context.getModel(g,{"attributes":this.options.data.businessattachment.properties,"data":this.options.data.businessattachment.properties})},"url":function(){var t=this.options.query||{};t=this.mergeUrlPaging(w,t),t=this.mergeUrlSorting(t),t=this.mergeUrlFiltering(t);var e=i.combine(this.getBaseUrl(),"businessobjects",this.busobjinfo.get("extSystemId"),this.busobjinfo.get("busObjectType"),this.busobjinfo.get("busObjectKey"),"businessattachments");return this.listenTo(this,"sync",this._cacheCollection),e=e.replace("/v1","/v2"),t=o.omit(t,function(t,e){return null==t||""===t}),t.metadata=void 0,e+"?"+this.queryParamsToString(t)+"&expand="+encodeURIComponent("properties{original_id,ancestors,parent_id,reserved_user_id,createdby,modifiedby}")},"fetch":function(t){var o=this,n=e.Deferred();return this.busobjinfo.fetch().done(function(){this.fetching||(this.totalCount=0),o.busobjinfo.get("extSystemId")&&o.busobjinfo.get("busObjectType")&&o.busobjinfo.get("busObjectKey")?o.Fetchable.fetch.call(o,t).done(function(){n.resolve()}).fail(function(){n.resolve()}):(o.trigger("sync"),n.resolve())}),n.promise()},"clone":function(){var t=e.extend(!0,{},this.options);t.query&&t.query.where_name&&(t.query.where_name="");var o=new this.constructor([],t);return o.connector=this.connector,o},"parse":function(t){return this.totalCount=t.paging.total_count,this.options.orderBy=this.orderBy,this.columns&&this.columns.resetColumns(t,this.options),this.next=t.paging.actions&&t.paging.actions.next?!0:!1,this.businessObjectActions=t.businessObjectActions,t.results},"mergeUrlPaging":function(t,e){var o=this.topCount||t.defaultPageSize;return o&&(e.limit=o,e.page=this.skipCount?Math.floor(this.skipCount/o)+1:1),e},"mergeUrlSorting":function(t){var e;return this.orderBy?(e=this.orderBy,t.sort=this._formatSorting(e)):o.isUndefined(t.sort)?(t.sort="asc_name",this.orderBy="name asc"):t.sort.indexOf(" ")>-1&&(e=t.sort,this.orderBy=t.sort,t.sort=this._formatSorting(e)),t},"_formatSorting":function(t){var e=t.lastIndexOf(" ");return t.slice(e+1)+"_"+t.slice(0,e)},"mergeUrlFiltering":function(t){if(!e.isEmptyObject(this.filters))for(var o in this.filters)this.filters.hasOwnProperty(o)&&(""===this.filters[o]||void 0===this.filters[o]?(delete t["where_"+o],delete this.options.query["where_"+o]):t["where_"+o]="contains_"+encodeURIComponent(this.filters[o]));return t},"queryParamsToString":function(t){var e="";for(var o in t)t.hasOwnProperty(o)&&(e.length>0&&(e+="&"),e+=void 0===t[o]?o:o+"="+t[o]);return e},"getBaseUrl":function(){var t=this.connector&&this.connector.connection&&this.connector.connection.url;return o.isUndefined(t)&&(t=this.options.connector.connection.url),t}});m.mixin(C.prototype),d.mixin(C.prototype),p.mixin(C.prototype),h.mixin(C.prototype),b.mixin(C.prototype);var k=l.prototype.fetch;return C.prototype.Fetchable={"fetch":function(t){return k.call(this,t)}},C}),csui.define("xecmpf/widgets/myattachments/metadata.attachment.model",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/url","csui/models/actions","csui/models/mixins/expandable/expandable.mixin","csui/models/mixins/resource/resource.mixin","csui/models/mixins/uploadable/uploadable.mixin","csui/lib/jquery"],function(t,e,o,n,i,s,r,c,a,u){"use strict";var l=o.Model.extend({"constructor":function(t,n){t||(t={}),n=e.extend({"expand":"user"},n),t.actions||this._setCollectionProperty("actions",s,t,n),o.Model.prototype.constructor.call(this,t,n),this.makeResource(n).makeUploadable(n).makeExpandable(n)},"set":function(t,e,n){var i;return null==t?this:(t.actions&&(this.actions=t.actions,this._setCollectionProperty("actions",s,t,n)),"object"==typeof t?t.data?t.data.properties&&(i=t.data.properties,this.id=i.ext_system_id+i.bo_type+i.bo_id,n=e):(i=t,n=e):(i={})[t]=e,n||(n={}),o.Model.prototype.set.call(this,i,n))},"isNew":function(){return this.id?!1:!0},"isFetchable":function(){return!(!this.get("id")||!this.get("bo_id"))},"url":function(){var t=i.combine(this.collection.node.urlBase(),"businessattachments");return this.isNew()||(t=i.combine(t,encodeURIComponent(this.get("ext_system_id")),encodeURIComponent(this.get("bo_type")),encodeURIComponent(this.get("bo_id")))),t=t.replace("/v1","/v2")},"parse":function(t){var o;o=u.isArray(t.results)?t.results[0]:t;var n=e.map(o,function(t,o){return{"id":o,"actions":e.map(t.data,function(t,e){return t.signature=e,t})}},{});return o.actions=n[0].actions,o},"_setCollectionProperty":function(t,o,n,i){var s=e.str.camelize(t),r=n[t];this[s]=new o(r,{"connector":this.connector||i&&i.connector})}});return r.mixin(l.prototype),a.mixin(l.prototype),c.mixin(l.prototype),l}),csui.define("xecmpf/widgets/myattachments/metadata.attachments.model",["module","csui/lib/backbone","csui/utils/log","xecmpf/widgets/myattachments/metadata.attachment.model","csui/lib/jquery","csui/lib/underscore","csui/utils/url"],function(t,e,o,n,i,s,r){"use strict";var c=e.Collection.extend({"model":n,"constructor":function(t,o){e.Collection.prototype.constructor.apply(this,arguments),this.options=o||{},this.options.connector&&this.options.connector.assignTo(this)},"setOrder":function(t,e){return this.orderBy!==t?(this.orderBy=t,e!==!1&&this.fetch(),!0):void 0},"resetOrder":function(t){return this.orderBy?(this.orderBy=void 0,t!==!1&&this.fetch(),!0):void 0},"setLimit":function(t,e,o){return this.skipCount!==t||this.topCount!==e?(this.skipCount=t,this.topCount=e,o!==!1&&this.fetch(),!0):void 0},"resetLimit":function(t){return this.skipCount?(this.skipCount=0,t!==!1&&this.fetch(),!0):void 0},"setFilter":function(t,e,o){for(var n in t)this.filters||(this.filters={}),this.filters[n]=t[n];return e!==!1&&this.fetch(o),!0}});return c.version="1.0",c}),csui.define("xecmpf/widgets/myattachments/metadata.nodeattachments.model",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/base","csui/utils/log","csui/utils/url","xecmpf/widgets/myattachments/metadata.attachments.model","csui/models/actions","csui/models/columns","csui/models/mixins/node.resource/node.resource.mixin","csui/models/mixins/expandable/expandable.mixin","csui/lib/jquery","csui/utils/deepClone/deepClone"],function(t,e,o,n,i,s,r,c,a,u,l,d){"use strict";var p=r.extend({"constructor":function(t,e){r.prototype.constructor.apply(this,arguments),this.makeNodeResource(e).makeExpandable(e),this.columns=new a},"clone":function(){return new this.constructor(this.models,{"node":this.node,"skip":this.skipCount,"top":this.topCount,"filter":e.deepClone(this.filters),"orderBy":e.clone(this.orderBy),"expand":e.clone(this.expand),"commands":e.clone(this.options.commands)})},"mergeUrlPaging":function(){var t={},e=this.topCount;return e&&(t.limit=e,t.page=this.skipCount?Math.floor(this.skipCount/e)+1:1),t},"mergeUrlFiltering":function(){var t=[];if(!d.isEmptyObject(this.filters))for(var e in this.filters)this.filters.hasOwnProperty(e)&&""!==this.filters[e]&&(t["where_"+e]="contains_"+this.filters[e]);return t},"mergeUrlSorting":function(){var t,o=[];return this.orderBy?(t=this.orderBy,o.sort=this._formatSorting(t)):e.isUndefined(o.sort)?(o.sort="asc_name",this.orderBy="name asc"):o.sort.indexOf(" ")>-1&&(t=o.sort,this.orderBy=o.sort,o.sort=this._formatSorting(t)),o},"_formatSorting":function(t){var e=t.lastIndexOf(" ");return t.slice(e+1)+"_"+t.slice(0,e)},"url":function(){var t=s.combineQueryString(this.getExpandableResourcesUrlQuery(),"metadata",this.mergeUrlPaging(),this.mergeUrlFiltering(),this.mergeUrlSorting()),e=this.node.urlBase();return e=e.replace("/v1","/v2"),s.combine(e,"/businessattachments?"+t)},"parse":function(t){this.actions=t.actions,this.totalCount=t.paging.total_count;var o=t.meta_data,n=e.keys(o.properties);if(!this.options.onlyClientSideDefinedColumns&&t.metadata_order)for(var i=0;i<t.metadata_order.length;i++){var s=t.metadata_order[i];o[s].metadata_order=500+i}return this.filters||this.columns.reset(this.getColumnModels(n,o.properties)),t.results},"getColumnModels":function(t,o){var n=e.reduce(t,function(t,n){if(n.indexOf("_formatted")>=0){var i=n.replace(/_formatted$/,"");if(o[i])return t}else{var s=o[n];if(!s.metadata_order){var r=o[n+"_formatted"];r&&r.metadata_order&&(s.metadata_order=r.metadata_order)}}var c=o[n];switch(n){case"name":c=e.extend(c,{"default_action":!0,"contextual_menu":!1,"editable":!0,"filter_key":"name"})}return t.push(e.extend({"column_key":n},c)),t},[]);return n}});return l.mixin(p.prototype),u.mixin(p.prototype),p}),csui.define("xecmpf/widgets/dossier/impl/dossier.model",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin"],function(t,e,o,n,i,s){
var r,c;return r=n.Model.extend({"constructor":function(t,e){n.Model.prototype.constructor.apply(this,arguments)},"parse":function(t){return t&&t.paging&&t.paging.total_count>0?t:void 0}}),c=n.Collection.extend({"model":r,"constructor":function(t,e){e||(e={}),n.Collection.prototype.constructor.apply(this,arguments),this.options=o.pick(e,["connector","nodeModel","query"]),this.makeConnectable(this.options)},"parse":function(t,e){var n=t.results.data,i=t.results.properties;return this.total_documents=i.total_documents,n=o.filter(n,function(t){return t.paging.total_count>0})},"queryParamsToString":function(t){return"?"+e.param(t)},"fetch":function(t){return t||(t={}),t.query&&(this.url=this.getUrl()+this.queryParamsToString(t.query)),n.Collection.prototype.fetch.apply(this,arguments)},"url":function(){var t=this.options.query||{};return this.getUrl()+this.queryParamsToString(t)},"getUrl":function(){var t=this.connector.connection.url;return t=i.combine(t,"businessworkspaces",this.options.nodeModel.get("id"),"dossier").replace("/v1","/v2")}}),s.mixin(c.prototype),c}),csui.define("xecmpf/widgets/dossier/impl/documentslist/impl/documents.model",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/browsable/browsable.mixin","csui/models/node/node.model"],function(t,e,o,n,i,s,r,c){var a,u,l;return a=t.config(),u=c.extend({"idAttribute":"id","constructor":function(t,e){c.prototype.constructor.apply(this,arguments),this.set(c.prototype.parse.call(this,t,e)),this.connector=e.collection.options.connector}}),l=n.Collection.extend({"model":u,"constructor":function(t,e){e||(e={}),e.connector=e.nodeModel&&e.nodeModel.connector,this.options=o.pick(e,["connector","nodeModel","query","paging","metadata"]),n.Collection.prototype.constructor.apply(this,arguments),this.makeConnectable(this.options).makeBrowsable(this.options),this.totalCount=this.options.paging.total_count,this.options.orderBy=this.orderBy},"fetch":function(){return n.Collection.prototype.fetch.apply(this,arguments)},"parse":function(t,e){return t.results.data},"mergeUrlPaging":function(t,e){var o=this.topCount||t.defaultPageSize||5;return o&&(e.limit=o,e.page=this.skipCount?Math.floor(this.skipCount/o)+1:1),e},"mergeUrlMetadata":function(t){return this.options.metadata&&(t.metadata="{"+this.options.metadata+"}"),t},"queryParamsToString":function(t){return"?"+e.param(t)},"url":function(){var t=this.options.query||{};t=this.mergeUrlPaging(a,t),t=this.mergeUrlMetadata(t);var e=this.connector.connection.url;return e=i.combine(e,"businessworkspaces",this.options.nodeModel&&this.options.nodeModel.get("id"),"dossier/documents"),e=e.replace("/v1","/v2"),e+this.queryParamsToString(t)}}),s.mixin(l.prototype),r.mixin(l.prototype),l}),csui.define("xecmpf/widgets/dossier/impl/documentslistitem/impl/metadata.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(t,e,o){var n=o.Collection.extend({"constructor":function(e,n){n||(n={}),n.data||(n.data={}),o.Collection.prototype.constructor.apply(this,arguments),t.isEmpty(n.data)||(this.hideEmptyFields=n.hideEmptyFields,this.catsAndAttrs=n.catsAndAttrs,this._addModels(n.data))},"_addModels":function(e){t.each(this.catsAndAttrs,function(t){var o,n,i,s,r,c=typeof t;if("number"===c){if(r=t,e.hasOwnProperty(r))for(s in e[r].data)if(e[r].data.hasOwnProperty(s)){if(o=e[r].definitions[s].name,n=e[r].data[s],i=e[r].definitions[s].type_name,this.hideEmptyFields===!0&&null===n)continue;this.add({"label":o,"value":n,"type":i})}}else if("string"===c&&(r=t.split("_")[0],s=t,e.hasOwnProperty(r)&&e[r].data.hasOwnProperty(s))){if(o=e[r].definitions[s].name,n=e[r].data[s],i=e[r].definitions[s].type_name,this.hideEmptyFields===!0&&void 0===n)return;this.add({"label":o,"value":n,"type":i})}},this)},"comparator":"label"});return n}),csui.define("xecmpf/widgets/header/impl/completenesscheck/impl/models/missingdocuments.model",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/utils/url"],function(t,e,o,n){var i=e.Model.extend({"idAttribute":"id","constructor":function(t,o){o||(o={}),e.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(o)},"parse":function(t){return t}});o.mixin(i.prototype);var s=e.Collection.extend({"model":i,"constructor":function(t,o){this.options=o||{},e.Collection.prototype.constructor.apply(this,arguments),this.makeConnectable(o)},"url":function(){var t=this.options.node.get("id");return n.combine(this.connector.connection.url.replace("v1","v2"),"/businessworkspaces/"+t+"/missingdocuments")},"parse":function(t){return t.results.data},"fetch":function(){return e.Collection.prototype.fetch.apply(this,arguments)}});return o.mixin(s.prototype),s}),csui.define("xecmpf/widgets/workspaces/models/workspace.collection",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/nodes","csui/models/nodechildrencolumns","csui/models/browsable/browsable.mixin","csui/models/browsable/v1.request.mixin","csui/models/mixins/resource/resource.mixin","csui/models/browsable/v1.response.mixin","csui/models/browsable/v2.response.mixin","csui/utils/log","csui/utils/deepClone/deepClone"],function(t,e,o,n,i,s,r,c,a,u,l,d,p){"use strict";var m=t.config();o.defaults(m,{"defaultPageSize":30});var h=s.extend({"constructor":function(t,e){e=o.defaults({},e,{"top":m.defaultPageSize},e),s.prototype.constructor.call(this,t,e),this.makeBrowsable(e).makeBrowsableV1Request(e).makeResource(e).makeBrowsableV2Response(e),this.options=e,this.orderBy="name asc"},"clone":function(){return new this.constructor(this.models,{"skip":this.skipCount,"top":this.topCount,"orderBy":this.orderBy})},"getBaseUrl":function(){return this.options.connector.connection.url.replace("/v1","/v2")},"url":function(){var t=this.getBrowsableUrlQuery(),e=i.combine(this.getBaseUrl(),t?"/businessworkspaces?"+t+"&":"/businessworkspaces?");return e+="metadata&expanded_view=true&where_bo_type="+this.options.busObjectType+"&where_ext_system_id="+this.options.extSystemId,this.options.early&&(e+="&where_is_early=true"),this.options.busObjectId&&(e+="&where_bo_id="+this.options.busObjectId),e=e.replace("where_name=","where_name=contains_")},"isFetchable":function(){return!0},"parse":function(t,e){var n=o.chain(t.meta_data.properties).pick("modify_date").value().modify_date,i=o.chain(t.meta_data.properties).pick("name").value().name;return this.columns=new r([{"align":n.align,"column_key":"modify_date","name":n.name,"persona":n.persona,"sort":n.sort?!0:!1,"type":n.type,"width_weight":n.width_weight},{"column_key":"name","align":i.align,"name":i.name,"persona":i.persona,"sort":i?i.sort:!1,"type":i.type,"width_weight":i.width_weight}]),this.parseBrowsedState(t,e),this.parseBrowsedItems(t,e)}});c.mixin(h.prototype),a.mixin(h.prototype),u.mixin(h.prototype),d.mixin(h.prototype);var f=h.prototype.fetch;return h.prototype.Fetchable={"fetch":function(t){return f.call(this,t)}},h}),csui.define("xecmpf/widgets/workspaces/models/workspace.types.collection",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/resource/resource.mixin"],function(t,e,o,n){"use strict";var i=e.Model.extend({"defaults":{"id":null,"name":null,"templates":null}}),s=e.Collection.extend({"model":i,"constructor":function(t,o){this.options=o||(o={}),e.Collection.prototype.constructor.apply(this,arguments),this.makeResource(o)},"getBaseUrl":function(){return this.options.connector.connection.url.replace("/v1","/v2")},"queryParamsToString":function(t){var e="";for(var o in t)t.hasOwnProperty(o)&&(e.length>0&&(e+="&"),e+=void 0===t[o]?o:o+"="+t[o]);return e},"url":function(){var t=o.combine(this.getBaseUrl(),"/businessworkspacetypes");return t+="?expand_templates=true&bo_type="+this.options.config.busObjectType+"&ext_system_id="+this.options.config.extSystemId},"parse":function(e,o){var n=e.results;return t.chain(n).map(function(e,o,n){var i=e.data.properties,s={"wksp_type_name":i.wksp_type_name,"wksp_type_id":i.wksp_type_id,"rm_enabled":i.rm_enabled,"type":848};return s.templates=t.chain(i.templates).map(function(t,e,o){return 0===e?{"id":t.id,"name":t.name,"subType":t.subtype}:void 0}).compact().value(),s}).compact().value()}});return n.mixin(s.prototype),s}),csui.define("xecmpf/models/boattachmentcontext/attachmentcontext.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","xecmpf/models/boattachmentcontext/attachmentcontext.model"],function(t,e,o){var n=e.extend({"propertyPrefix":"attachmentContext","constructor":function(t,n){e.prototype.constructor.apply(this,arguments),this.property=new o({},{"context":t,"data":n.attachmentContext})},"fetch":function(t){return this.property.fetch(t)}});return n}),csui.define("xecmpf/widgets/header/impl/completenesscheck/impl/missingdocuments.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","xecmpf/widgets/header/impl/completenesscheck/impl/models/missingdocuments.model"],function(t,e,o,n,i,s,r){var c=n.extend({"propertyPrefix":"missingDocumentsCollection","constructor":function(c,a){n.prototype.constructor.apply(this,arguments);var u=this.options.missingDocumentsCollection||{};if(!(u instanceof o.Collection)){var l=c.getObject(i,a),d=c.getModel(s,a),p=t.config();u=new r(u.models,e.extend({"connector":l,"node":d,"reportType":"MissingDocuments"},u.options,p.options,{"autofetch":!0}))}this.property=u},"fetch":function(t){return this.property.fetch(t)}});return c}),csui.define("bundles/xecmpf-core",["xecmpf/controls/bosearch/bosearch.model","xecmpf/controls/bosearch/searchform/bosearchform.model","xecmpf/controls/property.panels/reference/impl/workspace.reference.model","xecmpf/controls/property.panels/reference/impl/reference.panel.model","xecmpf/models/boattachmentcontext/attachmentcontext.category.model","xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.model","xecmpf/models/boattachmentcontext/attachmentcontext.node.model","xecmpf/models/boattachmentcontext/attachmentcontext.model","xecmpf/widgets/boattachments/impl/boattachment.model","xecmpf/widgets/boattachments/impl/boattachments.model","xecmpf/widgets/myattachments/metadata.attachment.model","xecmpf/widgets/myattachments/metadata.attachments.model","xecmpf/widgets/myattachments/metadata.nodeattachments.model","xecmpf/widgets/dossier/impl/dossier.model","xecmpf/widgets/dossier/impl/documentslist/impl/documents.model","xecmpf/widgets/dossier/impl/documentslistitem/impl/metadata.model","xecmpf/widgets/header/impl/completenesscheck/impl/models/missingdocuments.model","xecmpf/widgets/workspaces/models/workspace.collection","xecmpf/widgets/workspaces/models/workspace.types.collection","xecmpf/models/boattachmentcontext/attachmentcontext.category.factory","xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.factory","xecmpf/models/boattachmentcontext/attachmentcontext.factory","xecmpf/models/boattachmentcontext/attachmentcontext.node.factory","xecmpf/widgets/header/impl/completenesscheck/impl/missingdocuments.factory"],{});
//# sourceMappingURL=xecmpf-core.js.map