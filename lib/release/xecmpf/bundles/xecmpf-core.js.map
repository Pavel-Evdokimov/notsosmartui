{"version":3,"sources":["../../src/controls/bosearch/bosearch.model.js","../../src/controls/bosearch/searchform/bosearchform.model.js","../../src/controls/property.panels/reference/impl/workspace.reference.model.js","../../src/controls/property.panels/reference/impl/nls/lang.js","../../src/controls/property.panels/reference/impl/nls/root/lang.js","../../src/controls/property.panels/reference/impl/nls/lang!i18n","../../src/controls/property.panels/reference/impl/reference.panel.model.js","../../src/models/boattachmentcontext/attachmentcontext.category.model.js","../../src/models/boattachmentcontext/attachmentcontext.category.factory.js","../../src/widgets/boattachments/impl/nls/lang.js","../../src/widgets/boattachments/impl/nls/root/lang.js","../../src/widgets/boattachments/impl/nls/lang!i18n","../../src/models/boattachmentcontext/attachmentcontext.busobjinfo.model.js","../../src/models/boattachmentcontext/attachmentcontext.node.model.js","../../src/models/boattachmentcontext/attachmentcontext.node.factory.js","../../src/models/boattachmentcontext/attachmentcontext.busobjinfo.factory.js","../../src/models/boattachmentcontext/attachmentcontext.model.js","../../src/widgets/boattachments/impl/boattachmentutil.js","../../src/widgets/boattachments/impl/boattachment.model.js","../../src/widgets/boattachments/impl/boattachments.model.js","../../src/widgets/myattachments/metadata.attachment.model.js","../../src/widgets/myattachments/metadata.attachments.model.js","../../src/widgets/myattachments/metadata.nodeattachments.model.js","../../src/widgets/dossier/impl/dossier.model.js","../../src/widgets/dossier/impl/documentslist/impl/documents.model.js","../../src/widgets/dossier/impl/documentslistitem/impl/metadata.model.js","../../src/widgets/header/impl/completenesscheck/impl/models/missingdocuments.model.js","../../src/widgets/workspaces/models/workspace.collection.js","../../src/widgets/workspaces/models/workspace.types.collection.js","../../src/models/boattachmentcontext/attachmentcontext.factory.js","../../src/widgets/header/impl/completenesscheck/impl/missingdocuments.factory.js","xecmpf-core.js"],"names":["csui","define","_","$","Backbone","BoSearchModel","Model","extend","constructor","attributes","options","prototype","apply","this","arguments","module","log","Url","ResourceModel","BusinessObjectSearchFormModel","defaults","data","schema","call","makeResource","url","path","bo_type_id","get","params","resource","param","baseurl","connector","connection","combine","replace","parse","response","form","results","id","name","bo_type_name","bus_att_metadata_mapping","business_attachments","metadata_mapping","title","NodeConnectableMixin","WorkspaceReferenceModel","makeNodeConnectable","sync","method","model","node_id","str","sformat","bo_id","actions","properties","business","business_properties","business_object_id","business_object_type_id","business_object_type_name","external_system_id","ext_system_id","external_system_name","ext_system_name","workspace_type_id","workspace_type_name","change_reference","complete_reference","mixin","root","en-us","en","cannotCompleteBusinessReference","errorUpdatingWorkspaceReference","businessObjectIdLabel","referenceTabTitle","referenceSearchButtonTitle","referenceSearchButtonLabel","referenceRemoveButtonTitle","referenceReplaceButtonTitle","referencePanelOverrideNote","lang","ReferencePanelModel","set","NodeModel","FetchableMixin","AttachmentContextCategoryModel","node","category_id","fetch","categoryOptions","result","Deferred","resolve","promise","ModelFactory","ConnectorFactory","NodeModelFactory","AttachmentContextFactoryModel","AttachmentContextCategoryFactory","propertyPrefix","context","attachmentContextCategory","getModel","getObject","property","dialogTitle","searchPlaceholder","noResultsPlaceholder","errorFieldFormatTagUnrecognized","errorCustomColumnConfigInvalid","errorCustomColumnMissingBraces","errorOrderByMustNotBeString","errorOrderByMissingBraces","errorFilteringFailed","noAttachmentsFound","businessAttachments","CommandSnapshot","addBusinessAttachment","fileSizeByte","fileSizeKByte","fileSizeMByte","parent_id","reservedBy","snaphotCreated","snaphotFailed","CommandDoneVerbCreated","fileSizeGByte","items","invalidConfigurationNoBusObjDisplay","invalidConfigurationNoBusObjConfigured","invalidConfigurationNoBusObjAvailable","noBusinessObjectFound","invalidConfiguration","ModalAlert","ResourceMixin","AttachmentContextBusinessObjectInfoModel","invalidConfigurationShown","invalidErrorMessage","_logInvalidConfiguration","_isConfigEmpty","busObjectKey","warn","console","last","busObjectType","extSystemId","_logEmptyBusObjKeyConfiguration","_logEmptyBusObjTypeConfiguration","_logEmptyBusAppIDConfiguration","_showInvalidConfigurationError","msg","showError","config","isConfigEmpty","isObject","length","isEmpty","_isConfigValid","isBusKeyEmpty","isBusObjEmpty","isExtSystemEmpty","_isWorkspaceWithoutConfig","_getCategoryInfo","busObjectId","_loadCategories","promises","self","busObjectIdCatInfo","busObjectTypeCatInfo","extSystemIdCatInfo","categoryId","catModelObjectId","push","listenTo","catVal","categoryAttr","responseJSON","error","catModelObjectType","catModelExtSystem","configValue","res","regExp","test","lastIndex","exec","busProps","find","workspace_references","wksp_ref","has_default_display","isUndefined","isEarly","business_object_type","titleIcon","wksp_info","wksp_type_icon","originalFetch","deferred","when","done","AttachmentContextNode","workspaceSpecific","syncToNode","type","nodeId","debug","Fetchable","toString","AttachmentContextNodeModel","AttachmentContextNodeFactory","attachmentContextNode","AttachmentContextBusinessObjectInfoFactory","attachmentContextBusinessObjectInfo","Context","AttachmentContexCategoryFactory","AttachmentContextModel","attachmentSpecific","attachmentSpecificFactories","wkspid","setAttachmentSpecific","Factory","_isAttachmentSpecificFactory","isAttachmentSpecific","found","ii","getOuterContext","_getAttachmentObject","getCollection","methodName","old_id","then","factories","getFactories","_factories","obj","f","nodepromise","chain","map","compact","value","unshift","BOAttachmentUtil","formatFilzeSize","size","undefined","container","filesSize","Math","ceil","orderByAsString","orderBy","defCol","defOrd","ret","order","sc","so","sortColumn","sortOrder","parameterPlaceholder","match","NodeAncestorCollection","BOAttachmentModel","collection","idAttribute","size_formatted","version","body","content_type","form_href","href","signature","ancestors","autofetch","ConnectableModel","NodeChildrenColumnModel","NodeChildrenColumnCollection","NodeChildrenCollection","NodeCollection","ExpandableMixin","NodeResourceMixin","BrowsableMixin","BrowsableV1RequestMixin","BrowsableV1ResponseMixin","BrowsableV2ResponseMixin","AttachmentsColumnModel","AttachmentsColumnCollection","dataCollectionName","resetColumns","resetCollection","getColumns","definitions","meta_data","columnKeys","keys","columnModels","getColumnModels","each","persona","BOAttachmentsCollection","models","makeNodeResource","makeExpandable","makeBrowsable","makeBrowsableV1Request","makeBrowsableV1Response","columns","totalCount","next","busobjinfo","businessattachment","queryParams","query","mergeUrlPaging","mergeUrlSorting","mergeUrlFiltering","getBaseUrl","_cacheCollection","omit","key","metadata","queryParamsToString","encodeURIComponent","df","fetching","fail","trigger","clone","where_name","paging","total_count","businessObjectActions","limit","topCount","defaultPageSize","page","skipCount","floor","sort","_formatSorting","indexOf","slicePosition","lastIndexOf","slice","isEmptyObject","filters","hasOwnProperty","queryParamsStr","ActionCollection","UploadableMixin","AttachmentModel","expand","_setCollectionProperty","makeUploadable","val","attrs","bo_type","isNew","isFetchable","urlBase","attachment","isArray","attachmentActions","attribute","Class","camelize","AttachmentCollection","Collection","assignTo","setOrder","resetOrder","setLimit","skip","top","resetLimit","setFilter","base","NodeColumnCollection","NodeAttachmentCollection","filter","deepClone","commands","combineQueryString","getExpandableResourcesUrlQuery","onlyClientSideDefinedColumns","metadata_order","idx","column_key","reset","reduce","colArray","column","shortColumnName","definition_short","definition_formatted","definition","default_action","contextual_menu","editable","filter_key","ConnectableMixin","DossierModel","DossierCollection","pick","makeConnectable","total_documents","item","getUrl","nodeModel","DocumentModel","DocumentsCollection","mergeUrlMetadata","MetadataCollection","hideEmptyFields","catsAndAttrs","_addModels","label","category","itemType","add","split","comparator","MissingDocumentModel","MissingDocumentCollection","wrkspceId","WorkspaceCollection","makeBrowsableV2Response","getBrowsableUrlQuery","early","modifyDate","modify_date","align","width_weight","parseBrowsedState","parseBrowsedItems","WorkspaceTypeModel","templates","WorkspaceTypesCollection","businessworkspacetypes","elem","index","ref","props","businessworkspacetypeAttributes","wksp_type_name","wksp_type_id","rm_enabled","subType","subtype","AttachmentContextFactory","attachmentContext","CollectionFactory","NodeFactory","MissingReportCollection","MissingDocumentsFactory","missingDocumentsCollection","reportType"],"mappings":"AAAA,AAAAA,KAAAC,OAAA,2CACA,sBACA,kBACA,qBACA,SAAAC,EAAAC,EAAAC,GACA,YAEA,IAAAC,GAAAD,EAAAE,MAAAC,QAEAC,cAAA,SAAAC,EAAAC,GACAN,EAAAE,MAAAK,UAAAH,YAAAI,MAAAC,KAAAC,aAKA,OAAAT,KCXAL,KAAAC,OAAA,0DAAA,SAAA,kBAAA,sBAAA,oBACA,iBAAA,iBAAA,wBACA,SAAAc,EAAAZ,EAAAD,EAAAE,EAAAY,EAAAC,EAAAC,GACA,YAEA,IAAAC,GAAAf,EAAAE,MAAAC,OACAL,EAAAkB,UAEAZ,cAAA,SAAAC,EAAAC,GACAA,IAAAA,MAEAD,EAAAP,EAAAK,QAAAc,UAAAX,aAAAY,aAAAb,GACAL,EAAAE,MAAAK,UAAAH,YAAAe,KAAAV,KAAAJ,EAAAC,GAEAG,KAAAW,aAAAd,IAIAe,MAAA,WACA,GAAAC,GAAA,+BACAC,EAAAd,KAAAe,IAAA,MACAC,GAAAF,aAAAA,GACAG,EAAAJ,EAAA,IAAAvB,EAAA4B,MAAAF,GACAG,EAAAnB,KAAAoB,UAAAC,WAAAT,IACAA,EAAAR,EAAAkB,QAAAH,GAAAA,EAAAI,QAAA,MAAA,QAAAJ,EAAAF,EACA,OAAAL,IAGAY,QAAA,SAAAC,GACA,GAAAC,EAUA,OATAD,IAAAA,EAAAE,UACAD,EAAAD,EAAAE,QAAA,GACAD,EAAAE,GAAA5B,KAAAe,IAAA,MACAW,EAAAG,KAAAJ,EAAAE,QAAA,GAAAnB,KAAAsB,aACAJ,EAAAK,yBAAAN,EAAAE,QAAA,GAAAnB,KAAAwB,sBAAAP,EAAAE,QAAA,GAAAnB,KAAAwB,qBAAAC,iBACAP,EAAAjB,cACAiB,GAAAjB,OAAAyB,OAGAR,IAGArB,EAAAd,EAAAE,QAEA,OAAAa,KAIAnB,KAAAC,OAAA,4ECnDA,sBACA,kBACA,oBACA,iBACA,8DACA,SAAAC,EAAAC,EAAAC,EAAAa,EACA+B,GACA,YAEA,IAAAC,GAAA7C,EAAAE,MAAAC,QAEAC,cAAA,SAAAC,EAAAC,GACAN,EAAAE,MAAAK,UAAAH,YAAAI,MAAAC,KAAAC,WACAD,KAAAqC,oBAAAxC,IAIAyC,OAAA,SAAAC,EAAAC,EAAA3C,GACA,GAAA4C,GAAA5B,EAAAM,EAAAP,CACA,IAAA,SAAA2B,EACAE,EAAAzC,KAAAe,IAAA,MACAF,EAAAxB,EAAAqD,IAAAC,QAAA,yBAAAF,GACAtB,EAAAnB,KAAAoB,UAAAC,WAAAT,IACAA,EAAAR,EAAAkB,QAAAH,GAAAA,EAAAI,QAAA,MAAA,QAAAJ,EAAAN,GACAhB,EAAAe,IAAAA,MACA,IAAA,WAAA2B,EAAA,CACAE,EAAAzC,KAAAe,IAAA,MACAF,EAAAxB,EAAAqD,IAAAC,QAAA,6CAAAF,EACA,IAAAG,GAAA5C,KAAAe,IAAA,SACAD,EAAAd,KAAAe,IAAA,cACAC,GAAA4B,QAAAA,EAAA9B,aAAAA,EACAK,GAAAnB,KAAAoB,UAAAC,WAAAT,IACAA,EAAAR,EAAAkB,QAAAH,GAAAA,EAAAI,QAAA,MAAA,QAAAJ,EAAAN,GACAhB,EAAAe,IAAAA,EACAf,EAAAW,KAAAlB,EAAA4B,MAAAF,GAEA,MAAAzB,GAAA+C,KAAAC,EAAAC,EAAA3C,IAGA2B,QAAA,SAAAC,GACA,GAAAjB,GAAAiB,GAAAA,EAAAE,SAAAF,EAAAE,QAAAnB,SACAqC,EAAApB,GAAAA,EAAAE,SAAAF,EAAAE,QAAAkB,SACApB,EAAAE,QAAAkB,QAAArC,SACAsC,EAAAtC,EAAAsC,eACAC,EAAAvC,EAAAwC,uBAcA,OAbAD,GAAAE,qBAAAH,EAAAF,MAAAG,EAAAE,oBACAF,EAAAG,0BACAJ,EAAAhC,WAAAiC,EAAAG,yBACAH,EAAAI,4BACAL,EAAAhB,aAAAiB,EAAAI,2BACAJ,EAAAK,qBAAAN,EAAAO,cAAAN,EAAAK,oBACAL,EAAAO,uBAAAR,EAAAS,gBAAAR,EAAAO,sBACAP,EAAAS,oBAAAV,EAAAU,kBAAAT,EAAAS,mBACAT,EAAAU,sBACAX,EAAAW,oBAAAV,EAAAU,qBACAX,EAAAY,mBAAAb,EAAA,oBACAC,EAAAa,qBAAAd,EAAA,sBAEAC,IAOA,OAFAX,GAAAyB,MAAAxB,EAAAtC,WAEAsC,IAIAjD,KAAAC,OAAA,2DCpEAyE,QAAA,EAEAC,SAAA,EACAC,MAAA,IAGA5E,KAAAC,OAAA,gECPA4E,kCAAA,gEACAC,kCAAA,sCACAC,wBAAA,mBACAC,oBAAA,YACAC,6BAAA,SACAC,6BAAA,aACAC,6BAAA,SACAC,8BAAA,UACAC,6BAAA,oICRArF,KAAAC,OAAA,wECAA,sBACA,kBACA,oBACA,gEACA,SAAAC,EAAAC,EAAAC,EAAAkF,GACA,YAEA,IAAAC,GAAAnF,EAAAE,MAAAC,QAEAC,cAAA,SAAAC,EAAAC,GACAN,EAAAE,MAAAK,UAAAH,YAAAI,MAAAC,KAAAC,WAEAD,KAAA2E,IAAA,KAAA,mBACA3E,KAAA2E,IAAA,QAAAF,EAAAN,qBAMA,OAAAO,KCjBAvF,KAAAC,OAAA,sEAAA,kBACA,sBACA,oBACA,iBACA,iBACA,8BACA,gDACA,SAAAE,EAAAD,EACAE,EACAY,EACAC,EACAwE,EACAC,GAEA,GAAAC,GAAAF,EAAAlF,QAGAC,cAAA,SAAAC,EAAAC,GACAA,IAAAA,MAEA+E,EAAA9E,UAAAH,YAAAe,KAAAV,KAAAJ,EAAAC,GACAG,KAAA+E,KAAAlF,EAAAkF,KACA/E,KAAAgF,YAAAnF,EAAAmF,aAGAC,QAAA,SAAApF,GACAA,IAAAA,KAEA,IAAAqF,GAAA7F,EAAAK,UAAAG,EAIA,OAHAqF,GAAAtE,MACAsE,EAAAtE,IAAAvB,EAAA8F,OAAAnF,KAAA,QAEAA,KAAA+E,KAAAhE,IAAA,MACA6D,EAAA9E,UAAAmF,MAAAvE,KAAAV,KAAAkF,GAEA5F,EAAA8F,WAAAC,UAAAC,WAIA1E,MAAA,WACA,MAAAR,GAAAkB,QAAAtB,KAAAoB,UAAAC,WAAAT,IAEA,QAAAZ,KAAA+E,KAAAhE,IAAA,MAAA,aAAAf,KAAAgF,aAAAzD,QAAA,OAAA,SAEAC,QAAA,SAAAC,GACA,MAAAA,GAAAjB,OAGA,OAAAsE,KAIA3F,KAAAC,OAAA,wEAAA,sBCtDA,wCACA,0CACA,qCACA,sEACA,SAAAC,EACAkG,EACAC,EACAC,EACAC,GAEA,GAAAC,GAAAJ,EAAA7F,QAEAkG,iBAAA,4BAEAjG,cAAA,SAAAkG,EAAAhG,GACA0F,EAAAzF,UAAAH,YAAAI,MAAAC,KAAAC,WACAJ,EAAAiG,0BAAAjG,EAAAiG,6BAEA,IAAAf,GAAAlF,EAAAiG,0BAAAf,MACAc,EAAAE,SAAAN,EAAA5F,GACAuB,EAAAvB,EAAAiG,0BAAA1E,WACAyE,EAAAG,UAAAR,EAAA3F,EAEAG,MAAAiG,SAAA,GAAAP,OAEAV,cAAAnF,EAAAiG,0BAAAd,YACA5D,YAAAA,EACA2D,OAAAA,KAKAE,QAAA,SAAApF,GACA,MAAAG,MAAAiG,SAAAhB,MAAApF,KAKA,OAAA8F,KAIAxG,KAAAC,OAAA,8CCzCAyE,QAAA,EAEAC,SAAA,EACAC,MAAA,IAGA5E,KAAAC,OAAA,mDCPA8G,cAAA,uBACAC,oBAAA,YACAC,uBAAA,sCACAC,kCAAA,wCACAC,iCAAA,4CACAC,iCAAA,4DACAC,8BAAA,0DACAC,4BAAA,mDACAC,uBAAA,sEACAC,qBAAA,iCACAC,sBAAA,uBACAC,kBAAA,WACAC,wBAAA,0BACAC,eAAA,QACAC,gBAAA,KACAC,gBAAA,KACAC,YAAA,WACAC,aAAA,iBACAC,iBAAA,mBACAC,gBAAA,2BACAC,yBAAA,UACAC,gBAAA,KACAC,QAAA,QACAC,sCAAA,mFACAC,yCAAA,4DACAC,wCAAA,qFACAC,wBAAA,2BACAC,uBAAA,qHEzBA1I,KAAAC,OAAA,wEAAA,kBACA,sBACA,oBACA,iBACA,iBACA,8BACA,uCACA,uEACA,kDACA,8CAEA,SAAAE,EAAAD,EACAE,EACAY,EACAC,EACAwE,EACAkD,EACAnC,EACAlB,EAAAsD,GAEA,GAAAC,GAAAzI,EAAAE,MAAAC,QAGAC,cAAA,SAAAC,EAAAC,GACAA,IAAAA,MAEAN,EAAAE,MAAAK,UAAAH,YAAAe,KAAAV,KAAAJ,EAAAC,GACAG,KAAAW,aAAAd,GAEAG,KAAA+E,KAAAlF,EAAAkF,KACA/E,KAAAQ,KAAAX,EAAAW,KACAR,KAAAoB,UAAAvB,EAAAuB,UACApB,KAAA6F,QAAAhG,EAAAgG,QACA7F,KAAAiI,2BAAA,EACAjI,KAAAkI,oBAAAzD,EAAAmD,uBAGAO,2BAAA,WACAnI,KAAAoI,eAAApI,KAAAqI,eAAAlI,EAAAmI,KAAA,mCAAAC,SAAAA,QAAApI,IAAAA,EAAAqI,MACAxI,KAAAoI,eAAApI,KAAAyI,gBAAAtI,EAAAmI,KAAA,oCAAAC,SAAAA,QAAApI,IAAAA,EAAAqI,MACAxI,KAAAoI,eAAApI,KAAA0I,cAAAvI,EAAAmI,KAAA,uCAAAC,SAAAA,QAAApI,IAAAA,EAAAqI,OAEAG,kCAAA,WACAxI,EAAAmI,KAAA,4DAAAC,SAAAA,QAAApI,IAAAA,EAAAqI,MACAxI,KAAAiI,2BAAA,GAEAW,mCAAA,WACAzI,EAAAmI,KAAA,6DAAAC,SAAAA,QAAApI,IAAAA,EAAAqI,MACAxI,KAAAiI,2BAAA,GAEAY,iCAAA,WACA1I,EAAAmI,KAAA,gEAAAC,SAAAA,QAAApI,IAAAA,EAAAqI,MACAxI,KAAAiI,2BAAA,GAGAa,iCAAA,SAAAC,IACA/I,KAAAiI,2BAAAH,EAAAkB,UAAAD,GACA/I,KAAAiI,2BAAA,GAEAG,iBAAA,SAAAa,GAKA,GAAAC,GAAA7J,EAAA8J,SAAAF,GAAA,IAAAA,EAAAG,OAAA/J,EAAAgK,QAAAJ,EAAA,KAAA,EAAA5J,EAAAgK,QAAAJ,EACA,OAAAC,IAGAI,iBAAA,WACA,GAAAC,GAAAvJ,KAAAoI,eAAApI,KAAAqI,cACAmB,EAAAxJ,KAAAoI,eAAApI,KAAAyI,eACAgB,EAAAzJ,KAAAoI,eAAApI,KAAA0I,YAEA,QAAAc,IAAAC,IAAAF,GAEAG,4BAAA,WACA,MAAArK,GAAAgK,QAAArJ,KAAA2J,iBAAA3J,KAAAQ,KAAAoJ,eACAvK,EAAAgK,QAAArJ,KAAA2J,iBAAA3J,KAAAQ,KAAAiI,iBACApJ,EAAAgK,QAAArJ,KAAA2J,iBAAA3J,KAAAQ,KAAAkI,eACA1I,KAAA+E,KAAAhE,IAAA,OAAA,MAAAf,KAAA+E,KAAAhE,IAAA,SAEA8I,kBAAA,WACA,GAAAC,MACAC,EAAA/J,KACAgK,EAAAhK,KAAA2J,iBAAA3J,KAAAQ,KAAAoJ,aACAK,EAAAjK,KAAA2J,iBAAA3J,KAAAQ,KAAAiI,eACAyB,EAAAlK,KAAA2J,iBAAA3J,KAAAQ,KAAAkI,YAEA,IAAAsB,EAAAG,WAAA,CACA,GAAAC,GAAApK,KAAA6F,QAAAE,SAAAJ,GAEA/F,cACAoF,cAAAgF,EAAAG,YAEAnF,cAAAgF,EAAAG,WACApF,OAAA/E,KAAA+E,KACA3D,YAAApB,KAAAoB,WAIA0I,GAAAO,KAAAD,EAAAnF,SACAjF,KAAAsK,SAAAF,EAAA,OAAA,WAEA,GAAAG,GAAAH,EAAArJ,IAAAiJ,EAAAQ,aACAT,GAAA3B,eAAAmC,GAGAR,EAAApB,kCAFAoB,EAAA1B,aAAAkC,IAoBAvK,KAAAsK,SAAAF,EAAA,QAAA,WACApK,KAAA8I,+BAAA7I,UAAA,GAAAwK,aAAAC,aAKA1K,MAAAqI,aAAA2B,EAAAQ,YAGA,IAAAP,EAAAE,WAAA,CACA,GAAAQ,GACA3K,KAAA6F,QAAAE,SAAAJ,GAEA/F,cACAoF,cAAAiF,EAAAE,YAEAnF,cAAAiF,EAAAE,WACApF,OAAA/E,KAAA+E,KACA3D,YAAApB,KAAAoB,WAGA0I,GAAAO,KAAAM,EAAA1F,SACAjF,KAAAsK,SAAAK,EAAA,OAAA,WAUA,GAAAJ,GAAAI,EAAA5J,IAAAkJ,EAAAO,aACAT,GAAA3B,eAAAmC,GAGAR,EAAAnB,mCAFAmB,EAAAtB,cAAA8B,IAaAvK,KAAAsK,SAAAK,EAAA,QAAA,WACA3K,KAAA8I,+BAAA7I,UAAA,GAAAwK,aAAAC,aAGA1K,MAAAyI,cAAAwB,EAAAO,YAGA,IAAAN,EAAAC,WAAA,CACA,GAAAS,GAAA5K,KAAA6F,QAAAE,SAAAJ,GAEA/F,cACAoF,cAAAkF,EAAAC,YAEAnF,cAAAkF,EAAAC,WACApF,OAAA/E,KAAA+E,KACA3D,YAAApB,KAAAoB,WAIA0I,GAAAO,KAAAO,EAAA3F,SACAjF,KAAAsK,SAAAM,EAAA,OAAA,WAiBA,GAAAL,GAAAK,EAAA7J,IAAAmJ,EAAAM,aACAT,GAAA3B,eAAAmC,GAGAR,EAAAlB,iCAFAkB,EAAArB,YAAA6B,IAMAvK,KAAAsK,SAAAM,EAAA,QAAA,WACA5K,KAAA8I,+BAAA7I,UAAA,GAAAwK,aAAAC,aAGA1K,MAAA0I,YAAAwB,EAAAM,YAEA,OAAAV,IAEAH,mBAAA,SAAAkB,GACA,GAAAC,GAAAX,EAAAK,CAEA,KAAAnL,EAAAgK,QAAAwB,GAAA,CACA,GAAAE,GAAA,qDACA,OAAAA,GAAAC,KAAAH,IACAE,EAAAE,UAAA,EACAH,EAAAC,EAAAG,KAAAL,GACAV,EAAAW,EAAA,GACAN,EAAAM,EAAA,IAGAX,aAAAA,EACAK,eAAAA,KAIAL,aAAA,GACAK,eAAAK,GAIA,MAAA,IAIAjK,MAAA,WACA,GAAAA,EAWA,OARAA,GADAZ,KAAA0J,+BAAA,EACAtJ,EAAAkB,QAAAtB,KAAAoB,UAAAC,WAAAT,IACA,sBAAAZ,KAAA+E,KAAAhE,IAAA,MAAA,aAEAX,EAAAkB,QAAAtB,KAAAoB,UAAAC,WAAAT,IACA,wCACAZ,KAAA0I,YACA,kCAAA1I,KAAAyI,eAEA7H,EAAAW,QAAA,OAAA,SAEAC,QAAA,SAAAC,GAEA,GAAAzB,KAAA0J,+BAAA,EAAA,CACA,GAAAyB,GAAA9L,EAAA+L,KAAA3J,EAAAE,QAAAnB,KAAA6K,qBACA,SAAAC,GACA,MAAAA,GAAAC,uBAAA,GAEA,OAAAlM,GAAAmM,YAAAL,IACA1J,EAAAE,QAAAnB,KAAAwC,oBAAAyI,SACAzL,KAAAiI,2BAAA,EACAjI,KAAAkI,oBAAAzD,EAAAgD,sCAEAzH,KAAAiI,2BAAA,EACAjI,KAAAkI,oBAAAzD,EAAAkD,uCAEA,OAGAU,eAAA8C,EAAAlI,mBACAwF,gBAAA0C,EAAAO,qBACAhD,cAAAyC,EAAA/H,mBACAuI,YAAAlK,EAAAE,QAAAnB,KAAAoL,UAAAC,gBAIA,OACAxD,eAAArI,KAAAqI,aACAI,gBAAAzI,KAAAyI,cACAC,cAAA1I,KAAA0I,YACAiD,YAAAlK,EAAAE,QAAAyH,OAAA,GACA3H,EAAAE,QAAA,GAAAnB,KAAAoL,UAAAC,kBAKA9D,GAAAnE,MAAAoE,EAAAlI,UAEA,IAAAgM,GAAA9D,EAAAlI,UAAAmF,KAoCA,OAnCA+C,GAAAlI,UAAAmF,MAAA,SAAApF,GACA,GAAAkM,GAAAzM,EAAA8F,WACA0E,EAAA9J,KAAA6J,kBACAE,EAAA/J,IAEA,OAAA8J,GAAAV,OAAA,GACA9J,EAAA0M,KAAAjM,MAAAT,EAAAwK,GAAAmC,KAAA,WAGAlC,EAAAT,oBAAA,EAEAwC,EAAApL,KAAAqJ,EAAAlK,GAAAoM,KAAA,WACAF,EAAA1G,aAGA0E,EAAA5B,2BACA4B,EAAAjB,+BAAArE,EAAAoD,sBACAkE,EAAA1G,aAeA0G,EAAAzG,WAVAtF,KAAA0J,+BAAA,GAAA1J,KAAAsJ,oBAAA,EAEAwC,EAAApL,KAAAV,KAAAH,IAEAG,KAAAmI,2BACAnI,KAAA8I,+BAAArE,EAAAoD,sBACAkE,EAAA1G,UAAAC,YAOA0C,ICjVA7I,KAAAC,OAAA,kEAAA,kBACA,sBACA,oBACA,iBACA,iBACA,wBACA,SAAAE,EAAAD,EAAAE,EACAY,EACAC,EACAC,GAEA,GAAA6L,GAAA3M,EAAAE,MAAAC,OACAL,EAAAkB,UAEA4L,qBAAA,EAEAxM,cAAA,SAAAC,EAAAC,GACAA,IAAAA,MAEAN,EAAAE,MAAAK,UAAAH,YAAAe,KAAAV,KAAAJ,EAAAC,GAEAG,KAAAH,QAAAA,EACAG,KAAAW,aAAAd,GACAG,KAAAsK,SAAAtK,KAAAH,QAAAkF,KAAA,YAAA/E,KAAAoM,YAGApM,KAAAoM,cAGAA,aAAA,WACA,GAAArH,GAAA/E,KAAAH,QAAAkF,KACAtC,EAAAsC,EAAAhE,IAAA,KACA,OAAAgE,EAAAhE,IAAA,SACAf,KAAA2E,KAAA/C,KAAAa,EAAA4J,OAAA,OAIAzL,MAAA,WACA,GACAA,GADA0L,EAAAtM,KAAAH,QAAAkF,KAAAhE,IAAA,KAkBA,OAfAf,MAAAH,QAAAW,MAAAR,KAAAH,QAAAW,KAAAoJ,aACA5J,KAAAH,QAAAW,KAAAiI,eACAzI,KAAAH,QAAAW,KAAAkI,aAEA9H,EAAAR,EAAAkB,QAAAtB,KAAAH,QAAAuB,UAAAC,WAAAT,IACA,uBACAA,GAAA,qCAAAZ,KAAAH,QAAAW,KAAAiI,cACA7H,GAAA,wBAAAZ,KAAAH,QAAAW,KAAAkI,YACA9H,GAAA,gBAAAZ,KAAAH,QAAAW,KAAAoJ,YACAhJ,EAAAA,EAAAW,QAAA,MAAA,SAEAX,EAAAR,EAAAkB,QAAAtB,KAAAH,QAAAuB,UAAAC,WAAAT,IAAA,QAAA0L,EACA,qBACA1L,EAAAA,EAAAW,QAAA,MAAA,QAEAX,GAGAqE,QAAA,SAAApF,GACA,MAAAG,MAAAH,QAAAkF,KAAAhE,IAAA,MACA,MAAAf,KAAAH,QAAAkF,KAAAhE,IAAA,SACAZ,EAAAoM,MAAA,iDAAAvM,OAAAuI,QAAApI,IAAAA,EAAAqI,MACA3I,IAAAA,MAEAA,EAAAe,MACAf,EAAAe,IAAAvB,EAAA8F,OAAAnF,KAAA,QAEAA,KAAAwM,UAAAvH,MAAAvE,KAAAV,KAAAH,KAEAM,EAAAoM,MAAA,+CAAAvM,OAAAuI,QAAApI,IAAAA,EAAAqI,MACAxI,KAAA2E,KAAA/C,KAAA5B,KAAAH,QAAAkF,KAAAhE,IAAA,MAAAsL,OAAA,MACA/M,EAAA8F,WAAAC,UAAAC,WAGAtF,KAAAH,QAAAW,MAAAR,KAAAH,QAAAW,KAAAoJ,aACA5J,KAAAH,QAAAW,KAAAiI,eACAzI,KAAAH,QAAAW,KAAAkI,aAEAvI,EAAAoM,MAAA,iDAAAvM,OAAAuI,QAAApI,IAAAA,EAAAqI,MACA3I,IAAAA,MAEAA,EAAAe,MACAf,EAAAe,IAAAvB,EAAA8F,OAAAnF,KAAA,QAEAA,KAAAwM,UAAAvH,MAAAvE,KAAAV,KAAAH,IAGAP,EAAA8F,WAAAC,UAAAC,WAIA9D,QAAA,SAAAC,GAKA,MAJAA,GAAAE,UACAF,EAAAA,EAAAE,QAAAyH,OAAA,EAAA3H,EAAAE,QAAA,GAAAnB,KAAAsC,WAAA,MAGArB,GACAG,KAAAH,EAAAG,GAAAyK,OAAA5K,EAAA4K,MADA,QAKAI,WAAA,WAEA,MAAA,QAAAzM,KAAAe,IAAA,QAGAV,EAAAd,EAAAE,QAEA,OAAAyM,KAIA/M,KAAAC,OAAA,oEAAA,sBCpHA,wCACA,0CACA,qCACA,kEACA,SAAAC,EACAkG,EACAC,EACAC,EACAiH,GAEA,GAAAC,GAAApH,EAAA7F,QAEAkG,iBAAA,wBAEAjG,cAAA,SAAAkG,EAAAhG,GACA0F,EAAAzF,UAAAH,YAAAI,MAAAC,KAAAC,UAEA,IAAA8E,GAAAlF,EAAA+M,sBAAA7H,MACAc,EAAAE,SAAAN,MACArE,EAAAvB,EAAA+M,sBAAAxL,WACAyE,EAAAG,UAAAR,KAEAxF,MAAAiG,SAAA,GAAAyG,OAAAlM,OAAAX,EAAA+M,sBAAApM,KACAY,YAAAA,EAAA2D,OAAAA,KAIAE,QAAA,SAAApF,GACA,MAAAG,MAAAiG,SAAAhB,MAAApF,KAKA,OAAA8M,KAIAxN,KAAAC,OAAA,0EAAA,sBCrCA,wCACA,0CACA,qCACA,wEAEA,SAAAC,EACAkG,EACAC,EACAC,EACAuC,GAEA,GAAA6E,GAAAtH,EAAA7F,QAEAkG,iBAAA,sCAEAjG,cAAA,SAAAkG,EAAAhG,GACAA,EAAAA,MACA0F,EAAAzF,UAAAH,YAAAI,MAAAC,KAAAC,UAEA,IAAA8E,GAAAlF,EAAAkF,MAAAc,EAAAE,SAAAN,MACArE,EAAAvB,EAAAuB,WAAAyE,EAAAG,UAAAR,MACAhF,EAAAX,EAAAiN,oCAAAtM,QAEAnB,GAAAkB,SAAAC,GACAoJ,cAAA,GACAnB,gBAAA,GACAC,cAAA,KAGA1I,KAAAiG,SAAA,GAAA+B,OACAnC,UAAAA,EAAArF,OAAAA,EAAAY,YAAAA,EAAA2D,OAAAA,KAIAE,QAAA,SAAApF,GACA,MAAAG,MAAAiG,SAAAhB,MAAApF,KAKA,OAAAgN,KCtCA1N,KAAAC,OAAA,6DAAA,kBAAA,sBAAA,oBACA,iBACA,8BACA,qCACA,mEACA,yEACA,wEAEA,SAAAE,EAAAD,EAAAE,EACAY,EACA4M,EACAtH,EACAkH,EACAE,EACAG,GAEA,GAAAC,GAAAF,EAAArN,QAEAC,cAAA,SAAAC,EAAAC,GACAA,IAAAA,MAEAkN,EAAAjN,UAAAH,YAAAI,MAAAC,KAAAC,WAEAD,KAAAH,QAAAA,EAEAG,KAAAkN,sBACAlN,KAAAkN,mBAAAzH,EAAA3F,UAAA8F,iBAAA,EACA5F,KAAAkN,mBAAAP,EAAA7M,UAAA8F,iBAAA,EACA5F,KAAAkN,mBAAAL,EAAA/M,UAAA8F,iBAAA,EACA5F,KAAAkN,mBAAAF,EAAAlN,UAAA8F,iBAAA,EAEA5F,KAAAmN,6BACA1H,EACAkH,EACAE,EACAG,GAIAhN,KAAAH,QAAAkF,KAAA/E,KAAAH,QAAAgG,QAAAE,SAAAN,GAGAzF,KAAAoN,OAAApN,KAAA+F,SAAA4G,GACAnM,OAAAR,KAAAH,QAAAW,KAAAuE,OAAA/E,KAAAH,QAAAkF,KAAA3D,YAAApB,KAAAH,QAAAkF,KAAA3D,YAGApB,KAAA+E,KAAA/E,KAAA+F,SAAAN,GAEAzF,KAAAoN,OAAArM,IAAA,QAAAf,KAAAH,QAAAkF,KAAAhE,IAAA,MACAf,KAAA+E,KAAAJ,IAAA3E,KAAAH,QAAAkF,KAAAnF,YAEAI,KAAA+E,KAAAJ,IAAA,KAAA3E,KAAAoN,OAAArM,IAAA,QAIAsM,wBAAA,SAAAC,GACAtN,KAAAkN,mBAAAI,EAAAxN,UAAA8F,iBAAA,EACA5F,KAAAuN,6BAAAD,IACAtN,KAAAmN,4BAAA9C,KAAAiD,IAIAE,uBAAA,SAAAF,GACA,GAAAG,IAAA,CAQA,OAPAzN,MAAAkN,mBAAAI,EAAAxN,UAAA8F,gBACA6H,GAAA,EACAzN,KAAAuN,6BAAAD,KAEAtN,KAAAkN,mBAAAI,EAAAxN,UAAA8F,iBAAA,EACA6H,GAAA,GAEAA,GAGAF,+BAAA,SAAAD,GAEA,IAAA,GADAG,IAAA,EACAC,EAAA,EAAAA,EAAA1N,KAAAmN,4BAAA/D,OAAAsE,IACA,GAAA1N,KAAAmN,4BAAAO,KAAAJ,EAAA,CACAG,GAAA,CACA,OAGA,MAAAA,IAGAE,kBAAA,WACA,MAAA3N,MAAAH,QAAAgG,SAGAE,WAAA,WACA,MAAA/F,MAAA4N,qBAAA,WAAA3N,YAEA4N,gBAAA,WACA,MAAA7N,MAAA4N,qBAAA,gBAAA3N,YAEA+F,YAAA,WACA,MAAAhG,MAAA4N,qBAAA,YAAA3N,YAGA2N,uBAAA,SAAAE,EAAA9M,GACA,GAAAwB,EAOA,OALAA,GADAxC,KAAAwN,qBAAAxM,EAAA,IACA+L,EAAAjN,UAAAgO,GAAA/N,MAAAC,KAAAgB,GAEAhB,KAAAH,QAAAgG,QAAAiI,GAAA/N,MAAAC,KAAAH,QAAAgG,QAAA7E,IAMAiE,QAAA,SAAApF,GACA,GAAAkO,GAAA/N,KAAAoN,OAAArM,IAAA,MACAgJ,EAAA/J,IAMA,OAAAA,MAAAoN,OACAnI,QACA+I,KAAA,WACA,GAAAlE,EACA3J,GAAAoM,MAAA,2BAAAwB,EAAAhE,EAAAqD,OAAArM,IAAA,QAAAwH,QAAApI,IAAAA,EAAAqI,KASA,IAAAyF,GAAAlE,EAAAmE,aAAAnE,EAAAmE,eAAAnE,EAAAoE,WACAC,EAAA/O,EAAA+L,KAAA6C,EAAA,SAAAI,GACA,MAAAA,GAAApI,WAAA8D,EAAAhF,MAEA5E,GAAAoM,MAAA,sBAAA6B,EAAAxI,iBAAA2C,QAAApI,IAAAA,EAAAqI,KACA,IAAA8F,EA2CA,OApCAvE,GAAAqD,OAAArM,IAAA,QAAAgJ,EAAAlK,QAAAkF,KAAAhE,IAAA,MACAgJ,EAAAhF,KAAAJ,IAAAoF,EAAAlK,QAAAkF,KAAAnF,YAGAmK,EAAAqD,OAAArM,IAAA,OACAgJ,EAAAhF,KAAAJ,IAAA,KAAAoF,EAAAqD,OAAArM,IAAA,OACAgJ,EAAAhF,KAAAJ,IAAA,OAAA,KACAyJ,EAAAnJ,QACAqJ,EAAAF,EAAAnJ,UAGA8E,EAAAhF,KAAAJ,IAAAoF,EAAAlK,QAAAkF,KAAAnF,YAMAqO,EAAAlE,EAAAmE,aAAAnE,EAAAmE,eAAAnE,EAAAoE,WAEArE,EAAAzK,EAAAkP,MAAAN,GACAO,IAAA,SAAAJ,GAEA,MADAjO,GAAAoM,MAAA,sBAAA6B,EAAAxI,iBAAA2C,QAAApI,IAAAA,EAAAqI,MACA4F,EAAAnI,WAAA8D,EAAAqD,QACAgB,EAAAnI,WAAA8D,EAAAhF,MAEAqJ,EAAAnJ,MACAmJ,EAAAnJ,MAAA8E,GAJA,SAQA0E,UACAC,QACAJ,GACAxE,EAAA6E,QAAAL,GAGAhP,EAAA0M,KAAAjM,MAAAT,EAAAwK,OAKA,OAAAmD,KAIA9N,KAAAC,OAAA,sDC9LA,kBACA,sBACA,mDAEA,SAAAE,EAAAD,EACAoF,GAEA,QAAAmK,MAuDA,MApDAvP,GAAAK,OAAAkP,EAAA9O,WAEA+O,kBAAA,SAAA9J,GACA,GAAA+J,GAAA/J,EAAA+J,IACA,IAAAC,SAAAhK,EAAAiK,WAAAjK,EAAAiK,aAAA,EACA,MAAAF,GAAA,IAAArK,EAAA+C,KAEA,IAAAyH,GAAAxK,EAAAsC,YAaA,OAZA+H,GAAA,OACAG,EAAAxK,EAAAuC,cACA8H,GAAA,KACAA,EAAA,OACAG,EAAAxK,EAAAwC,cACA6H,GAAA,KACAA,EAAA,OACAG,EAAAxK,EAAA8C,cACAuH,GAAA,QAIAI,KAAAC,KAAAL,GAAA,IAAAG,GAGAG,kBAAA,SAAAC,EAAAC,EAAAC,GACA,GAEAC,GAAAC,GAAAC,KAAAJ,EAAAK,KAAAJ,EAKA,IAJAF,IACAI,EAAApQ,EAAAkB,UAAAmP,KAAAL,EAAAO,WAAAD,KAAAN,EAAAQ,WAAAJ,IAGAA,EAAAC,GAAA,CAGA,GAAAI,GAAA,yBACAC,EAAAD,EAAA5E,KAAAuE,EAAAC,GACAK,GACAN,EAAAC,GAAAK,EAAA,GAEAN,EAAAC,GAAAX,OAQA,OAJAU,EAAAC,IAAAD,EAAAE,MAEAH,EAAAnQ,EAAAqD,IAAAC,QAAA,UAAA8M,EAAAC,GAAAD,EAAAC,GAAA,OAAAD,EAAAE,GAAAF,EAAAE,GAAA,QAEAH,KAKA,GAAAZ,KC1DAzP,KAAAC,OAAA,wDACA,SACA,kBACA,sBACA,oBACA,8BACA,4BACA,wCACA,sDAGA,SAAAc,EAAAZ,EAAAD,EAAAE,EAAAqF,EACAoL,EAAAxK,EAAAoJ,GAEA,GAAAqB,GAAArL,EAAAlF,QAEAC,cAAA,SAAAC,EAAAC,GAGAA,IAAAA,MACAA,EAAAuB,YACAvB,EAAAuB,UAAAvB,EAAAqQ,YAAArQ,EAAAqQ,WAAA9O,WAAA2N,QAEA/O,KAAAoB,UAAAvB,EAAAuB,UACAwD,EAAA9E,UAAAH,YAAAe,KAAAV,KAAAJ,EAAAC,IAMAsQ,cAAA,KAGA3O,QAAA,SAAAC,EAAA5B,GACA,GAAAkF,GAAAH,EAAA9E,UAAA0B,MAAAd,KAAAV,KAAAyB,EAAA5B,EA6BA,OA3BAkF,GAAAqL,iBACArL,EAAAqL,eACAxB,EAAAC,gBAAA9J,IAIA,IAAAA,EAAAsL,UACAtL,EAAAsL,QAAA,IAGAtL,EAAAlC,UACAkC,EAAAlC,QAAAkC,EAAAlC,QAAAuG,SACAkH,OAAA,GACAC,eAAA,GACAC,YAAA,GACAC,OAAA,GACAlO,SAAA,MACAV,OAAA,WACA6O,YAAA,aAIA3L,EAAA4L,UAAA,GAAAX,GACAvO,EAAAjB,KAAAmQ,WACA5L,OAAA/E,KAAA4Q,aAAA,IAGA7L,IAKA,OAAAkL,KClEA9Q,KAAAC,OAAA,yDAAA,SAAA,kBACA,sBACA,oBACA,iBACA,8BACA,0BACA,iCACA,kCACA,2BAEA,oBACA,iDACA,uDACA,wCACA,yCACA,6CACA,0CACA,0CAEA,yEACA,wDACA,SAAAc,EAAAZ,EAAAD,EAAAE,EAAAa,EACAwE,EAAAiM,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAtJ,EACAuJ,EACAC,EACA1E,EACAoD,GAGA,GAAAuB,GAAAV,EAAApR,QAEAC,cAAA,WACAmR,EAAAhR,UAAAH,YAAAI,MAAAC,KAAAC,cAKAwR,EAAAV,EAAArR,QAEAgS,qBAAA,aACAlP,QAAAgP,EAEA7R,cAAA,SAAA+R,GACAA,IAAA1R,KAAA0R,mBAAAA,GACAX,EAAAjR,UAAAH,YAAAI,MAAAC,OAGA2R,eAAA,SAAAlQ,EAAA5B,GACAG,KAAA4R,gBAAA5R,KAAA6R,WAAApQ,GAAA5B,IAGAgS,aAAA,SAAApQ,GAEA,GAAAqQ,GAAArQ,GAAAA,EAAAsQ,WAAAtQ,EAAAsQ,UAAAjP,cAEAgP,KAAAA,EAAA,WACAA,EAAA,SAAAA,EAAA,aAGAA,IAAAA,EAAA,iBACAA,EAAA,eAAAA,EAAA,KAEA,IAAAE,GAAA3S,EAAA4S,KAAAH,GACAI,EAAAlS,KAAAmS,gBAAAH,EAAAF,EASA,OAPAzS,GAAA+S,KAAAF,EAAA,SAAA1P,IAEA,SAAAA,EAAA6P,SAAA,WAAA7P,EAAA6P,WACA7P,EAAA6J,KAAA,MAIA6F,KAIAjJ,EAAA/I,EAAA+I,SAEAqJ,EAAArB,EAAAvR,QAEAgS,qBAAA,aACAlP,QAAAyN,EAEAtQ,cAAA,SAAA4S,EAAA1S,GACAoR,EAAAnR,UAAAH,YAAAI,MAAAC,KAAAC,WACAJ,IAAAA,MACAG,KAAAH,QAAAA,EAEAG,KAAAwS,iBAAA3S,GACA4S,eAAA5S,GACA6S,cAAA7S,GACA8S,uBAAA9S,GACA+S,wBAAA/S,GAEAG,KAAA6S,QAAA,GAAApB,GAAAzR,KAAA0R,oBACA1R,KAAA8S,WAAA,EACA9S,KAAA2L,UAAAoD,OAEA/O,KAAA+S,KAAAhE,OACA/O,KAAAgT,WAAAhT,KAAAH,QAAAgG,QAAAE,SAAA8G,GAEAjN,aAAAI,KAAAH,QAAAW,KAAAyS,mBAAAnQ,WACAtC,OAAAR,KAAAH,QAAAW,KAAAyS,mBAAAnQ,cAIAlC,MAAA,WACA,GAAAsS,GAAAlT,KAAAH,QAAAsT,SAEAD,GAAAlT,KAAAoT,eAAAnK,EAAAiK,GAEAA,EAAAlT,KAAAqT,gBAAAH,GAEAA,EAAAlT,KAAAsT,kBAAAJ,EAEA,IAAAtS,GAAAR,EAAAkB,QAAAtB,KAAAuT,aACA,kBACAvT,KAAAgT,WAAAjS,IAAA,eACAf,KAAAgT,WAAAjS,IAAA,iBACAf,KAAAgT,WAAAjS,IAAA,gBAAA,sBAQA,OANAf,MAAAsK,SAAAtK,KAAA,OAAAA,KAAAwT,kBACA5S,EAAAA,EAAAW,QAAA,MAAA,OACA2R,EAAA7T,EAAAoU,KAAAP,EAAA,SAAAxE,EAAAgF,GACA,MAAA,OAAAhF,GAAA,KAAAA,IAEAwE,EAAAS,SAAA5E,OACAnO,EAAA,IAAAZ,KAAA4T,oBAAAV,GAAA,WAAAW,mBACA,sFAIA5O,QAAA,SAAApF,GACA,GAAAkK,GAAA/J,KACA8T,EAAAxU,EAAA8F,UAoBA,OAnBApF,MAAAgT,WAAA/N,QAAAgH,KAAA,WACAjM,KAAA+T,WAEA/T,KAAA8S,WAAA,GAGA/I,EAAAiJ,WAAAjS,IAAA,gBACAgJ,EAAAiJ,WAAAjS,IAAA,kBACAgJ,EAAAiJ,WAAAjS,IAAA,gBACAgJ,EAAAyC,UAAAvH,MAAAvE,KAAAqJ,EAAAlK,GAAAoM,KAAA,WACA6H,EAAAzO,YACA2O,KAAA,WACAF,EAAAzO,aAGA0E,EAAAkK,QAAA,QACAH,EAAAzO,aAGAyO,EAAAxO,WAGA4O,QAAA,WAIA,GAAArU,GAAAP,EAAAI,QAAA,KAAAM,KAAAH,QAEAA,GAAAsT,OAAAtT,EAAAsT,MAAAgB,aAAAtU,EAAAsT,MAAAgB,WAAA,GACA,IAAAjE,GAAA,GAAAlQ,MAAAL,eAAAE,EAGA,OADAqQ,GAAA9O,UAAApB,KAAAoB,UACA8O,GAGA1O,QAAA,SAAAC,GAYA,MAVAzB,MAAA8S,WAAArR,EAAA2S,OAAAC,YACArU,KAAAH,QAAAwP,QAAArP,KAAAqP,QACArP,KAAA6S,SAAA7S,KAAA6S,QAAAlB,aAAAlQ,EAAAzB,KAAAH,SAGAG,KAAA+S,KAAAtR,EAAA2S,OAAAvR,SAAApB,EAAA2S,OAAAvR,QAAAkQ,MAAA,GAAA,EAEA/S,KAAAsU,sBAAA7S,EAAA6S,sBAGA7S,EAAAE,SAEAyR,iBAAA,SAAAnK,EAAAiK,GACA,GAAAqB,GAAAvU,KAAAwU,UAAAvL,EAAAwL,eAKA,OAJAF,KACArB,EAAAqB,MAAAA,EACArB,EAAAwB,KAAA1U,KAAA2U,UAAAzF,KAAA0F,MAAA5U,KAAA2U,UAAAJ,GAAA,EAAA,GAEArB,GAGAG,kBAAA,SAAAH,GACA,GAAA7D,EAYA,OAXArP,MAAAqP,SACAA,EAAArP,KAAAqP,QACA6D,EAAA2B,KAAA7U,KAAA8U,eAAAzF,IACAhQ,EAAAmM,YAAA0H,EAAA2B,OACA3B,EAAA2B,KAAA,WACA7U,KAAAqP,QAAA,YACA6D,EAAA2B,KAAAE,QAAA,KAAA,KACA1F,EAAA6D,EAAA2B,KACA7U,KAAAqP,QAAA6D,EAAA2B,KACA3B,EAAA2B,KAAA7U,KAAA8U,eAAAzF,IAEA6D,GAGA4B,iBAAA,SAAAzF,GACA,GAAA2F,GAAA3F,EAAA4F,YAAA,IACA,OAAA5F,GAAA6F,MAAAF,EAAA,GAAA,IAAA3F,EAAA6F,MAAA,EAAAF,IAGA1B,oBAAA,SAAAJ,GACA,IAAA5T,EAAA6V,cAAAnV,KAAAoV,SACA,IAAA,GAAAvT,KAAA7B,MAAAoV,QACApV,KAAAoV,QAAAC,eAAAxT,KACA,KAAA7B,KAAAoV,QAAAvT,IAAAkN,SAAA/O,KAAAoV,QAAAvT,UAEAqR,GAAA,SAAArR,SACA7B,MAAAH,QAAAsT,MAAA,SAAAtR,IAKAqR,EAAA,SAAArR,GAAA,YACAgS,mBAAA7T,KAAAoV,QAAAvT,IAKA,OAAAqR,IAGAU,sBAAA,SAAA5S,GACA,GAAAsU,GAAA,EACA,KAAA,GAAApU,KAAAF,GACAA,EAAAqU,eAAAnU,KACAoU,EAAAlM,OAAA,IACAkM,GAAA,KAIAA,GADAvG,SAAA/N,EAAAE,GACAA,EAEAA,EAAA,IAAAF,EAAAE,GAIA,OAAAoU,IAGA/B,aAAA,WACA,GAAA3S,GAAAZ,KAAAoB,WAAApB,KAAAoB,UAAAC,YACArB,KAAAoB,UAAAC,WAAAT,GAIA,OAHAvB,GAAAmM,YAAA5K,KACAA,EAAAZ,KAAAH,QAAAuB,UAAAC,WAAAT,KAEAA,IAIAwQ,GAAAxN,MAAA0O,EAAAxS,WACAoR,EAAAtN,MAAA0O,EAAAxS,WACAqR,EAAAvN,MAAA0O,EAAAxS,WACAuR,EAAAzN,MAAA0O,EAAAxS,WACAwR,EAAA1N,MAAA0O,EAAAxS,UAIA,IAAAgM,GAAAmF,EAAAnR,UAAAmF,KAaA,OAZAqN,GAAAxS,UAAA0M,WAEAvH,QAAA,SAAApF,GAKA,MAAAiM,GAAApL,KAAAV,KAAAH,KAKAyS,IAIAnT,KAAAC,OAAA,0DAAA,SAAA,sBAAA,oBC/SA,iBAAA,iBAAA,sBACA,iDACA,6CACA,iDACA,mBACA,SAAAc,EAAAb,EAAAE,EAAAY,EAAAC,EAAAmV,EACArE,EAAAnJ,EAAAyN,EAAAlW,GACA,YAEA,IAAAmW,GAAAlW,EAAAE,MAAAC,QAMAC,cAAA,SAAAC,EAAAC,GACAD,IAAAA,MACAC,EAAAR,EAAAK,QAAAgW,SAAA,QAAA7V,GAEAD,EAAAiD,SACA7C,KAAA2V,uBAAA,UAAAJ,EACA3V,EAAAC,GAGAN,EAAAE,MAAAK,UAAAH,YAAAe,KAAAV,KAAAJ,EAAAC,GAEAG,KAAAW,aAAAd,GACA+V,eAAA/V,GACA4S,eAAA5S,IAGA8E,MAAA,SAAA+O,EAAAmC,EAAAhW,GACA,GAAAiW,EACA,OAAA,OAAApC,EACA1T,MAIA0T,EAAA7Q,UACA7C,KAAA6C,QAAA6Q,EAAA7Q,QACA7C,KAAA2V,uBAAA,UAAAJ,EAAA7B,EAAA7T,IAGA,gBAAA6T,GACAA,EAAAlT,KACAkT,EAAAlT,KAAAsC,aACAgT,EAAApC,EAAAlT,KAAAsC,WAMA9C,KAAA4B,GAAAkU,EAAAzS,cAAAyS,EAAAC,QAAAD,EAAAlT,MACA/C,EAAAgW,IAIAC,EAAApC,EACA7T,EAAAgW,IAGAC,MAAApC,GAAAmC,EAGAhW,IAAAA,MACAN,EAAAE,MAAAK,UAAA6E,IAAAjE,KAAAV,KAAA8V,EAAAjW,KAIAmW,QAAA,WACA,MAAAhW,MAAA4B,IACA,GAGA,GAIAqU,cAAA,WACA,SAAAjW,KAAAe,IAAA,QAAAf,KAAAe,IAAA,WAGAH,MAAA,WACA,GAAAA,GAAAR,EAAAkB,QAAAtB,KAAAkQ,WAAAnL,KAAAmR,UAAA,sBAKA,OAJAlW,MAAAgW,UACApV,EAAAR,EAAAkB,QAAAV,EAAAiT,mBAAA7T,KAAAe,IAAA,kBAAA8S,mBAAA7T,KAAAe,IAAA,YAAA8S,mBAAA7T,KAAAe,IAAA,YAEAH,EAAAA,EAAAW,QAAA,MAAA,QAIAC,QAAA,SAAAC,GACA,GAAA0U,EAEAA,GADA7W,EAAA8W,QAAA3U,EAAAE,SACAF,EAAAE,QAAA,GAGAF,CAGA,IAAA4U,GAAAhX,EAAAmP,IAAA2H,EAAA,SAAAzH,EAAAgF,GACA,OACA9R,KAAA8R,EACA7Q,UAAAxD,EAAAmP,IAAAE,EAAAlO,KAAA,SAAAkO,EAAAgF,GAEA,MADAhF,GAAAgC,UAAAgD,EACAhF,SAOA,OAFAyH,GAAAtT,QAAAwT,EAAA,GAAAxT,QAEAsT,GAGAR,yBAAA,SAAAW,EAAAC,EAAA3W,EAAAC,GACA,GAAAoG,GAAA5G,EAAAqD,IAAA8T,SAAAF,GACA/D,EAAA3S,EAAA0W,EACAtW,MAAAiG,GAAA,GAAAsQ,GAAAhE,GACAnR,YAAApB,KAAAoB,WAAAvB,GAAAA,EAAAuB,cAUA,OAJA8P,GAAAtN,MAAA6R,EAAA3V,WACA0V,EAAA5R,MAAA6R,EAAA3V,WACAiI,EAAAnE,MAAA6R,EAAA3V,WAEA2V,IAKAtW,KAAAC,OAAA,2DAAA,SAAA,oBAAA,iBAAA,yDAAA,kBAAA,sBAAA,kBCtIA,SAAAc,EAAAX,EAAAY,EAAAsV,EAAAnW,EAAAD,EAAAe,GACA,YAEA,IAAAqW,GAAAlX,EAAAmX,WAAAhX,QAEA8C,QAAAiT,EAEA9V,cAAA,SAAA4S,EAAA1S,GACAN,EAAAmX,WAAA5W,UAAAH,YAAAI,MAAAC,KAAAC,WACAD,KAAAH,QAAAA,MACAG,KAAAH,QAAAuB,WACApB,KAAAH,QAAAuB,UAAAuV,SAAA3W,OAIA4W,WAAA,SAAAhX,EAAAqF,GACA,MAAAjF,MAAAqP,UAAAzP,GACAI,KAAAqP,QAAAzP,EACAqF,KAAA,GACAjF,KAAAiF,SAGA,GANA,QAUA4R,aAAA,SAAA5R,GACA,MAAAjF,MAAAqP,SACArP,KAAAqP,QAAAN,OACA9J,KAAA,GACAjF,KAAAiF,SAEA,GALA,QASA6R,WAAA,SAAAC,EAAAC,EAAA/R,GACA,MAAAjF,MAAA2U,YAAAoC,GAAA/W,KAAAwU,WAAAwC,GACAhX,KAAA2U,UAAAoC,EACA/W,KAAAwU,SAAAwC,EACA/R,KAAA,GACAjF,KAAAiF,SAEA,GANA,QAUAgS,aAAA,SAAAhS,GACA,MAAAjF,MAAA2U,WACA3U,KAAA2U,UAAA,EACA1P,KAAA,GACAjF,KAAAiF,SAEA,GALA,QASAiS,YAAA,SAAA9B,EAAAnQ,EAAApF,GACA,IAAA,GAAA6T,KAAA0B,GACApV,KAAAoV,UACApV,KAAAoV,YAEApV,KAAAoV,QAAA1B,GAAA0B,EAAA1B,EAKA,OAHAzO,MAAA,GACAjF,KAAAiF,MAAApF,IAEA,IAMA,OAFA4W,GAAApG,QAAA,MAEAoG,IAIAtX,KAAAC,OAAA,+DAAA,SAAA,sBAAA,oBC7EA,kBAAA,iBAAA,iBACA,0DAAA,sBAAA,sBACA,uDACA,iDACA,kBAEA,kCACA,SAAAc,EAAAb,EAAAE,EAAA4X,EAAAhX,EAAAC,EAAAqW,EAAAlB,EACA6B,EAAAjG,EACAD,EAAA5R,GACA,YAEA,IAAA+X,GAAAZ,EAAA/W,QAEAC,cAAA,SAAA4S,EAAA1S,GACA4W,EAAA3W,UAAAH,YAAAI,MAAAC,KAAAC,WAEAD,KAAAwS,iBAAA3S,GACA4S,eAAA5S,GAGAG,KAAA6S,QAAA,GAAAuE,IAGAlD,QAAA,WACA,MAAA,IAAAlU,MAAAL,YAAAK,KAAAuS,QACAxN,OAAA/E,KAAA+E,KACAgS,OAAA/W,KAAA2U,UACAqC,MAAAhX,KAAAwU,SACA8C,SAAAjY,EAAAkY,UAAAvX,KAAAoV,SACA/F,UAAAhQ,EAAA6U,MAAAlU,KAAAqP,SACAqG,SAAArW,EAAA6U,MAAAlU,KAAA0V,QAEA8B,WAAAnY,EAAA6U,MAAAlU,KAAAH,QAAA2X,aAIApE,iBAAA,WACA,GAAAF,MACAqB,EAAAvU,KAAAwU,QAKA,OAJAD,KACArB,EAAAqB,MAAAA,EACArB,EAAAwB,KAAA1U,KAAA2U,UAAAzF,KAAA0F,MAAA5U,KAAA2U,UAAAJ,GAAA,EAAA,GAEArB,GAGAI,oBAAA,WACA,GAAAJ,KACA,KAAA5T,EAAA6V,cAAAnV,KAAAoV,SACA,IAAA,GAAAvT,KAAA7B,MAAAoV,QACApV,KAAAoV,QAAAC,eAAAxT,IACA,KAAA7B,KAAAoV,QAAAvT,KACAqR,EAAA,SAAArR,GAAA,YAAA7B,KAAAoV,QAAAvT,GAKA,OAAAqR,IAGAG,kBAAA,WACA,GACAhE,GADA6D,IAaA,OAXAlT,MAAAqP,SACAA,EAAArP,KAAAqP,QACA6D,EAAA2B,KAAA7U,KAAA8U,eAAAzF,IACAhQ,EAAAmM,YAAA0H,EAAA2B,OACA3B,EAAA2B,KAAA,WACA7U,KAAAqP,QAAA,YACA6D,EAAA2B,KAAAE,QAAA,KAAA,KACA1F,EAAA6D,EAAA2B,KACA7U,KAAAqP,QAAA6D,EAAA2B,KACA3B,EAAA2B,KAAA7U,KAAA8U,eAAAzF,IAEA6D,GAGA4B,iBAAA,SAAAzF,GACA,GAAA2F,GAAA3F,EAAA4F,YAAA,IACA,OAAA5F,GAAA6F,MAAAF,EAAA,GAAA,IAAA3F,EAAA6F,MAAA,EAAAF,IAGApU,MAAA,WACA,GAAAuS,GAAA/S,EAAAqX,mBACAzX,KAAA0X,iCACA,WACA1X,KAAAoT,iBACApT,KAAAsT,oBACAtT,KAAAqT,mBAGAzS,EAAAZ,KAAA+E,KAAAmR,SAQA,OAFAtV,GAAAA,EAAAW,QAAA,MAAA,OAEAnB,EAAAkB,QAAAV,EAAA,wBAAAuS,IAGA3R,QAAA,SAAAC,GACAzB,KAAA6C,QAAApB,EAAAoB,QACA7C,KAAA8S,WAAArR,EAAA2S,OAAAC,WAEA,IAAAV,GAAAlS,EAAAsQ,UACAC,EAAA3S,EAAA4S,KAAA0B,EAAA7Q,WAEA,KAAA9C,KAAAH,QAAA8X,8BAEAlW,EAAAmW,eACA,IAAA,GAAAC,GAAA,EAAAA,EAAApW,EAAAmW,eAAAxO,OAAAyO,IAAA,CACA,GAAAC,GAAArW,EAAAmW,eAAAC,EACAlE,GAAAmE,GAAAF,eAAA,IAAAC,EASA,MAJA7X,MAAAoV,SACApV,KAAA6S,QAAAkF,MAAA/X,KAAAmS,gBAAAH,EAAA2B,EAAA7Q,aAGArB,EAAAE,SAGAwQ,kBAAA,SAAAH,EAAA2B,GACA,GAAAd,GAAAxT,EAAA2Y,OAAAhG,EAAA,SAAAiG,EAAAC,GACA,GAAAA,EAAAnD,QAAA,eAAA,EAAA,CACA,GAAAoD,GAAAD,EAAA3W,QAAA,cAAA,GACA,IAAAoS,EAAAwE,GAEA,MAAAF,OAEA,CAGA,GAAAG,GAAAzE,EAAAuE,EACA,KAAAE,EAAAR,eAAA,CACA,GAAAS,GAAA1E,EAAAuE,EAAA,aACAG,IAAAA,EAAAT,iBACAQ,EAAAR,eAAAS,EAAAT,iBAIA,GAAAU,GAAA3E,EAAAuE,EAEA,QAAAA,GACA,IAAA,OACAI,EAAAjZ,EAAAK,OAAA4Y,GACAC,kBAAA,EACAC,mBAAA,EACAC,YAAA,EACAC,aAAA,SAMA,MADAT,GAAA5N,KAAAhL,EAAAK,QAAAoY,aAAAI,GAAAI,IACAL,MAEA,OAAApF,KASA,OAHA3B,GAAAtN,MAAAyT,EAAAvX,WACAqR,EAAAvN,MAAAyT,EAAAvX,WAEAuX,IAIAlY,KAAAC,OAAA,6CAAA,SAAA,kBAAA,sBAAA,oBC/KA,iBAAA,oDACA,SAAAc,EAAAZ,EAAAD,EAAAE,EACAa,EAAAuY;AvBFA,AuBIA,GAAAC,GAAAC,CAgEA,OA9DAD,GAAArZ,EAAAE,MAAAC,QACAC,cAAA,SAAAC,EAAAC,GACAN,EAAAE,MAAAK,UAAAH,YAAAI,MAAAC,KAAAC,YAGAuB,QAAA,SAAAC,GACA,MAAAA,IAAAA,EAAA2S,QAAA3S,EAAA2S,OAAAC,YAAA,EACA5S,EADA,UAMAoX,EAAAtZ,EAAAmX,WAAAhX,QACA8C,QAAAoW,EAEAjZ,cAAA,SAAAC,EAAAC,GACAA,IAAAA,MACAN,EAAAmX,WAAA5W,UAAAH,YAAAI,MAAAC,KAAAC,WAEAD,KAAAH,QAAAR,EAAAyZ,KAAAjZ,GAAA,YAAA,YAAA,UACAG,KAAA+Y,gBAAA/Y,KAAAH,UAGA2B,QAAA,SAAAC,EAAA5B,GACA,GAAAW,GAAAiB,EAAAE,QAAAnB,KACAsC,EAAArB,EAAAE,QAAAmB,UAKA,OAJA9C,MAAAgZ,gBAAAlW,EAAAkW,gBACAxY,EAAAnB,EAAAiY,OAAA9W,EAAA,SAAAyY,GACA,MAAAA,GAAA7E,OAAAC,YAAA,KAKAT,sBAAA,SAAA5S,GACA,MAAA,IAAA1B,EAAA4B,MAAAF,IAGAiE,QAAA,SAAApF,GAKA,MAJAA,KAAAA,MACAA,EAAAsT,QACAnT,KAAAY,IAAAZ,KAAAkZ,SAAAlZ,KAAA4T,oBAAA/T,EAAAsT,QAEA5T,EAAAmX,WAAA5W,UAAAmF,MAAAlF,MAAAC,KAAAC,YAGAW,MAAA,WAEA,GAAAsS,GAAAlT,KAAAH,QAAAsT,SAEA,OAAAnT,MAAAkZ,SAAAlZ,KAAA4T,oBAAAV,IAGAgG,SAAA,WACA,GAAAtY,GAAAZ,KAAAoB,UAAAC,WAAAT,GAGA,OAFAA,GAAAR,EAAAkB,QAAAV,EAAA,qBAAAZ,KAAAH,QAAAsZ,UAAApY,IAAA,MAAA,WACAQ,QAAA,MAAA,UAKAoX,EAAA/U,MAAAiV,EAAA/Y,WAEA+Y,IAGA1Z,KAAAC,OAAA,kEAAA,SAAA,kBAAA,sBAAA,oBAAA,iBCvEA,mDACA,wCACA,+BACA,SAAAc,EAAAZ,EAAAD,EAAAE,EAAAa,EACAuY,EAAAvH,EACAxM,GAEA,GAAAqE,GAAAmQ,EAAAC,CAiFA,OA/EApQ,GAAA/I,EAAA+I,SAEAmQ,EAAAxU,EAAAlF,QAEAyQ,cAAA,KAEAxQ,cAAA,SAAAC,EAAAC,GACA+E,EAAA9E,UAAAH,YAAAI,MAAAC,KAAAC,WACAD,KAAA2E,IAAAC,EAAA9E,UAAA0B,MAAAd,KAAAV,KAAAJ,EAAAC,IACAG,KAAAoB,UAAAvB,EAAAqQ,WAAArQ,QAAAuB,aAIAiY,EAAA9Z,EAAAmX,WAAAhX,QAEA8C,QAAA4W,EAEAzZ,cAAA,SAAA4S,EAAA1S,GACAA,IAAAA,MACAA,EAAAuB,UAAAvB,EAAAsZ,WAAAtZ,EAAAsZ,UAAA/X,UACApB,KAAAH,QAAAR,EAAAyZ,KAAAjZ,GAAA,YAAA,YAAA,QAAA,SAAA,aACAN,EAAAmX,WAAA5W,UAAAH,YAAAI,MAAAC,KAAAC,WAEAD,KAAA+Y,gBAAA/Y,KAAAH,SACA6S,cAAA1S,KAAAH,SAEAG,KAAA8S,WAAA9S,KAAAH,QAAAuU,OAAAC,YACArU,KAAAH,QAAAwP,QAAArP,KAAAqP,SAGApK,QAAA,WACA,MAAA1F,GAAAmX,WAAA5W,UAAAmF,MAAAlF,MAAAC,KAAAC,YAGAuB,QAAA,SAAAC,EAAA5B,GACA,MAAA4B,GAAAE,QAAAnB,MAGA4S,iBAAA,SAAAnK,EAAAiK,GACA,GAAAqB,GAAAvU,KAAAwU,UAAAvL,EAAAwL,iBAAA,CAKA,OAJAF,KACArB,EAAAqB,MAAAA,EACArB,EAAAwB,KAAA1U,KAAA2U,UAAAzF,KAAA0F,MAAA5U,KAAA2U,UAAAJ,GAAA,EAAA,GAEArB,GAGAoG,mBAAA,SAAApG,GAIA,MAHAlT,MAAAH,QAAA8T,WACAT,EAAAS,SAAA,IAAA3T,KAAAH,QAAA8T,SAAA,KAEAT,GAGAU,sBAAA,SAAA5S,GACA,MAAA,IAAA1B,EAAA4B,MAAAF,IAGAJ,MAAA,WAEA,GAAAsS,GAAAlT,KAAAH,QAAAsT,SAGAD,GAAAlT,KAAAoT,eAAAnK,EAAAiK,GAGAA,EAAAlT,KAAAsZ,iBAAApG,EAEA,IAAAtS,GAAAZ,KAAAoB,UAAAC,WAAAT,GAKA,OAJAA,GAAAR,EAAAkB,QAAAV,EAAA,qBACAZ,KAAAH,QAAAsZ,WAAAnZ,KAAAH,QAAAsZ,UAAApY,IAAA,MAAA,qBACAH,EAAAA,EAAAW,QAAA,MAAA,OAEAX,EAAAZ,KAAA4T,oBAAAV,MAIAyF,EAAA/U,MAAAyV,EAAAvZ,WACAsR,EAAAxN,MAAAyV,EAAAvZ,WACAuZ,IAGAla,KAAAC,OAAA,qEAAA,sBAAA,kBAAA,qBC3FA,SAAAC,EAAAC,EAAAC,GACA,GAAAga,GAAAha,EAAAmX,WAAAhX,QAEAC,cAAA,SAAA4S,EAAA1S,GACAA,IAAAA,MACAA,EAAAW,OAAAX,EAAAW,SACAjB,EAAAmX,WAAA5W,UAAAH,YAAAI,MAAAC,KAAAC,WACAZ,EAAAgK,QAAAxJ,EAAAW,QACAR,KAAAwZ,gBAAA3Z,EAAA2Z,gBACAxZ,KAAAyZ,aAAA5Z,EAAA4Z,aACAzZ,KAAA0Z,WAAA7Z,EAAAW,QAIAkZ,aAAA,SAAAlZ,GACAnB,EAAA+S,KAAApS,KAAAyZ,aAAA,SAAAR,GACA,GACAU,GAAAjL,EAAArC,EAAAiK,EAAAsD,EADAC,QAAAZ,EAGA,IAAA,WAAAY,GAEA,GADAD,EAAAX,EACAzY,EAAA6U,eAAAuE,GACA,IAAAtD,IAAA9V,GAAAoZ,GAAA,KACA,GAAApZ,EAAAoZ,GAAA,KAAAvE,eAAAiB,GAAA,CAIA,GAHAqD,EAAAnZ,EAAAoZ,GAAA,YAAAtD,GAAA,KACA5H,EAAAlO,EAAAoZ,GAAA,KAAAtD,GACAjK,EAAA7L,EAAAoZ,GAAA,YAAAtD,GAAA,UACAtW,KAAAwZ,mBAAA,GAAA,OAAA9K,EAAA,QACA1O,MAAA8Z,KAAAH,QAAAA,EAAAjL,QAAAA,EAAArC,OAAAA,SAIA,IAAA,WAAAwN,IACAD,EAAAX,EAAAc,MAAA,KAAA,GACAzD,EAAA2C,EACAzY,EAAA6U,eAAAuE,IAAApZ,EAAAoZ,GAAA,KAAAvE,eAAAiB,IAAA,CAIA,GAHAqD,EAAAnZ,EAAAoZ,GAAA,YAAAtD,GAAA,KACA5H,EAAAlO,EAAAoZ,GAAA,KAAAtD,GACAjK,EAAA7L,EAAAoZ,GAAA,YAAAtD,GAAA,UACAtW,KAAAwZ,mBAAA,GAAAzK,SAAAL,EAAA,MACA1O,MAAA8Z,KAAAH,QAAAA,EAAAjL,QAAAA,EAAArC,OAAAA,MAGArM,OAGAga,aAAA,SAGA,OAAAT,KAGApa,KAAAC,OAAA,mFAAA,sBAAA,oBCpDA,mDAAA,kBACA,SAAAC,EAAAE,EAAAoZ,EAAAvY,GAEA,GAAA6Z,GAAA1a,EAAAE,MAAAC,QAEAyQ,cAAA,KAEAxQ,cAAA,SAAAC,EAAAC,GACAA,IAAAA,MACAN,EAAAE,MAAAK,UAAAH,YAAAI,MAAAC,KAAAC,WACAD,KAAA+Y,gBAAAlZ,IAGA2B,QAAA,SAAAC,GACA,MAAAA,KAIAkX,GAAA/U,MAAAqW,EAAAna,UAEA,IAAAoa,GAAA3a,EAAAmX,WAAAhX,QAEA8C,QAAAyX,EAEAta,cAAA,SAAA4S,EAAA1S,GACAG,KAAAH,QAAAA,MACAN,EAAAmX,WAAA5W,UAAAH,YAAAI,MAAAC,KAAAC,WACAD,KAAA+Y,gBAAAlZ,IAGAe,MAAA,WACA,GAAAuZ,GAAAna,KAAAH,QAAAkF,KAAAhE,IAAA,KACA,OAAAX,GAAAkB,QAAAtB,KAAAoB,UAAAC,WAAAT,IAAAW,QAAA,KAAA,MACA,uBAAA4Y,EAAA,sBAGA3Y,QAAA,SAAAC,GACA,MAAAA,GAAAE,QAAAnB,MAGAyE,QAAA,WACA,MAAA1F,GAAAmX,WAAA5W,UAAAmF,MAAAlF,MAAAC,KAAAC,aAKA,OAFA0Y,GAAA/U,MAAAsW,EAAApa,WAEAoa,IAGA/a,KAAAC,OAAA,yDAAA,SAAA,kBAAA,sBAAA,oBCjDA,iBACA,oBACA,kCACA,wCACA,yCACA,6CACA,0CACA,0CACA,iBACA,kCACA,SAAAc,EAAAZ,EAAAD,EAAAE,EAAAa,EACA6Q,EACAF,EACAK,EACAC,EACAtJ,EACAuJ,EACAC,EACApR,GACA,YAEA,IAAA8I,GAAA/I,EAAA+I,QACA5J,GAAAkB,SAAA0I,GACAwL,kBAAA,IAGA,IAAA2F,GAAAnJ,EAAAvR,QAEAC,cAAA,SAAA4S,EAAA1S,GACAA,EAAAR,EAAAkB,YAAAV,GACAmX,MAAA/N,EAAAwL,iBACA5U,GAEAoR,EAAAnR,UAAAH,YAAAe,KAAAV,KAAAuS,EAAA1S,GACAG,KAAA0S,cAAA7S,GACA8S,uBAAA9S,GACAc,aAAAd,GACAwa,wBAAAxa,GAEAG,KAAAH,QAAAA,EACAG,KAAAqP,QAAA,YAGA6E,QAAA,WACA,MAAA,IAAAlU,MAAAL,YAAAK,KAAAuS,QACAwE,OAAA/W,KAAA2U,UACAqC,MAAAhX,KAAAwU,SACAnF,UAAArP,KAAAqP,WAGAkE,aAAA,WAEA,MAAAvT,MAAAH,QAAAuB,UAAAC,WAAAT,IAAAW,QAAA,MAAA,QAGAX,MAAA,WACA,GAAAuS,GAAAnT,KAAAsa,uBACA1Z,EAAAR,EAAAkB,QAAAtB,KAAAuT,aACAJ,EAAA,uBAAAA,EAAA,IAAA,uBAYA,OAVAvS,IAAA,6CACAZ,KAAAH,QAAA4I,cACA,wBAAAzI,KAAAH,QAAA6I,YACA1I,KAAAH,QAAA0a,QACA3Z,GAAA,wBAEAZ,KAAAH,QAAA+J,cACAhJ,GAAA,gBAAAZ,KAAAH,QAAA+J,aAEAhJ,EAAAA,EAAAW,QAAA,cAAA,yBAGA0U,cAAA,WACA,OAAA,GAEAzU,QAAA,SAAAC,EAAA5B,GACA,GAAA2a,GAAAnb,EAAAkP,MAAA9M,EAAAsQ,UAAAjP,YAAAgW,KAAA,eAAApK,QAAA+L,YACA5Y,EAAAxC,EAAAkP,MAAA9M,EAAAsQ,UAAAjP,YAAAgW,KAAA,QAAApK,QAAA7M,IAuBA,OArBA7B,MAAA6S,QAAA,GAAA9B,KAEA2J,QAAAF,EAAAE,MACA5C,aAAA,cACAjW,OAAA2Y,EAAA3Y,KACAwQ,UAAAmI,EAAAnI,QACAwC,OAAA2F,EAAA3F,MAAA,GAAA,EACAxI,OAAAmO,EAAAnO,KACAsO,eAAAH,EAAAG,eAGA7C,aAAA,OACA4C,QAAA7Y,EAAA6Y,MACA7Y,OAAAA,EAAAA,KACAwQ,UAAAxQ,EAAAwQ,QACAwC,OAAAhT,EAAAA,EAAAgT,MAAA,EACAxI,OAAAxK,EAAAwK,KACAsO,eAAA9Y,EAAA8Y,gBAGA3a,KAAA4a,kBAAAnZ,EAAA5B,GACAG,KAAA6a,kBAAApZ,EAAA5B,KAKAuR,GAAAxN,MAAAwW,EAAAta,WACAuR,EAAAzN,MAAAwW,EAAAta,WACAiI,EAAAnE,MAAAwW,EAAAta,WACAyR,EAAA3N,MAAAwW,EAAAta,UAEA,IAAAgM,GAAAsO,EAAAta,UAAAmF,KAaA,OAZAmV,GAAAta,UAAA0M,WAEAvH,QAAA,SAAApF,GAKA,MAAAiM,GAAApL,KAAAV,KAAAH,KAKAua,IAIAjb,KAAAC,OAAA,+DAAA,sBC/HA,oBACA,iBACA,8CACA,SAAAC,EACAE,EACAa,EACA2H,GACA,YAEA,IAAA+S,GAAAvb,EAAAE,MAAAC,QAEAa,YACAqB,KAAA,KACAC,OAAA,KACAkZ,YAAA,QAIAC,EAAAzb,EAAAmX,WAAAhX,QAEA8C,QAAAsY,EAEAnb,cAAA,SAAA4S,EAAA1S,GACAG,KAAAH,QAAAA,IAAAA,MACAN,EAAAmX,WAAA5W,UAAAH,YAAAI,MAAAC,KAAAC,WACAD,KAAAW,aAAAd,IAGA0T,aAAA,WAEA,MAAAvT,MAAAH,QAAAuB,UAAAC,WAAAT,IAAAW,QAAA,MAAA,QAEAqS,sBAAA,SAAA5S,GACA,GAAAsU,GAAA,EACA,KAAA,GAAApU,KAAAF,GACAA,EAAAqU,eAAAnU,KACAoU,EAAAlM,OAAA,IACAkM,GAAA,KAIAA,GADAvG,SAAA/N,EAAAE,GACAA,EAEAA,EAAA,IAAAF,EAAAE,GAIA,OAAAoU,IAGA1U,MAAA,WAEA,GAAAA,GAAAR,EAAAkB,QAAAtB,KAAAuT,aAAA,0BAKA,OAJA3S,IAAA,kCACAZ,KAAAH,QAAAoJ,OAAAR,cACA,kBAAAzI,KAAAH,QAAAoJ,OAAAP,aAMAlH,QAAA,SAAAC,EAAA5B,GAEA,GAAAob,GAAAxZ,EAAAE,OACA,OAAAtC,GAAAkP,MAAA0M,GACAzM,IAAA,SAAA0M,EAAAC,EAAAC,GAEA,GAAAC,GAAAH,EAAA1a,KAAAsC,WACAwY,GACAC,iBAAAF,EAAAE,eACAC,eAAAH,EAAAG,aACAC,aAAAJ,EAAAI,WACApP,OAAA,IAiBA,OAfAiP,GAAAP,UACA1b,EAAAkP,MAAA8M,EAAAN,WACAvM,IAAA,SAAA0M,EAAAC,EAAAC,GACA,MAAA,KAAAD,GAEAvZ,KAAAsZ,EAAAtZ,GACAC,OAAAqZ,EAAArZ,KACA6Z,UAAAR,EAAAS,SAJA,SAQAlN,UACAC,QAGA4M,IAEA7M,UACAC,UAOA,OAFA3G,GAAAnE,MAAAoX,EAAAlb,WAEAkb,ICjGA7b,KAAAC,OAAA,+DAAA,sBACA,wCACA,6DACA,SAAAC,EACAkG,EACA0H,GAEA,GAAA2O,GAAArW,EAAA7F,QAEAkG,iBAAA,oBAEAjG,cAAA,SAAAkG,EAAAhG,GACA0F,EAAAzF,UAAAH,YAAAI,MAAAC,KAAAC,WACAD,KAAAiG,SAAA,GAAAgH,OAAApH,UAAAA,EAAArF,OAAAX,EAAAgc,qBAGA5W,QAAA,SAAApF,GACA,MAAAG,MAAAiG,SAAAhB,MAAApF,KAKA,OAAA+b,KCxBAzc,KAAAC,OAAA,8EACA,SACA,sBACA,oBACA,wCACA,0CACA,qCACA,mFACA,SAAAc,EACAb,EACAE,EACAuc,EACAtW,EACAuW,EACAC,GACA,GAAAC,GAAAH,EAAApc,QACAkG,iBAAA,6BACAjG,cAAA,SAAAkG,EAAAhG,GACAic,EAAAhc,UAAAH,YAAAI,MAAAC,KAAAC,UACA,IAAAic,GAAAlc,KAAAH,QAAAqc,8BACA,MAAAA,YAAA3c,GAAAmX,YAAA,CACA,GAAAtV,GAAAyE,EAAAG,UAAAR,EAAA3F,GACAkF,EAAAc,EAAAE,SAAAgW,EAAAlc,GACAoJ,EAAA/I,EAAA+I,QACAiT,GAAA,GAAAF,GAAAE,EAAA3J,OAAAlT,EAAAK,QAEA0B,YAAAA,EACA2D,OAAAA,EACAoX,aAAA,oBACAD,EAAArc,QAAAoJ,EAAApJ,SACA+Q,aAAA,KAGA5Q,KAAAiG,SAAAiW,GAEAjX,QAAA,SAAApF,GACA,MAAAG,MAAAiG,SAAAhB,MAAApF,KAGA,OAAAoc,KAGA9c,KAAAC,OAAA,uBC1CA,0CACA,yDACA,2EACA,uEACA,qEACA,uEACA,iEACA,4DACA,uDACA,wDACA,yDACA,0DACA,8DACA,4CACA,iEACA,oEACA,kFACA,wDACA,8DACA,uEACA,yEACA,8DACA,mEACA;A/BtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA,ADsEA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA,ADYA;ACXA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA,ADuDA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA,AD+BA;AE/BA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpHA,ADqHA;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA,ADsCA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjEA,ADkEA;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/KA,ADgLA;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvEA,ADwEA;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvGA,ADwGA;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundles/xecmpf-core.js","sourcesContent":["csui.define('xecmpf/controls/bosearch/bosearch.model',[\r\n  'csui/lib/underscore',\r\n  'csui/lib/jquery',\r\n  'csui/lib/backbone'\r\n], function (_, $, Backbone) {\r\n  'use strict';\r\n\r\n  var BoSearchModel = Backbone.Model.extend({\r\n\r\n    constructor: function BoSearchModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  return BoSearchModel;\r\n\r\n});\r\n\n","/**\r\n * Created by stefang on 24.05.2016.\r\n */\r\n// Fetches the search form.\r\ncsui.define('xecmpf/controls/bosearch/searchform/bosearchform.model',[\"module\", \"csui/lib/jquery\", \"csui/lib/underscore\", \"csui/lib/backbone\",\r\n  \"csui/utils/log\", \"csui/utils/url\", \"csui/models/resource\"\r\n], function (module, $, _, Backbone, log, Url, ResourceModel) {\r\n  \"use strict\";\r\n\r\n  var BusinessObjectSearchFormModel = Backbone.Model.extend(\r\n      _.defaults({\r\n\r\n        constructor: function BusinessObjectSearchFormModel(attributes, options) {\r\n          options || (options = {});\r\n\r\n          attributes = _.extend({data:{},options:{},schema:{}},attributes);\r\n          Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n\r\n          this.makeResource(options);\r\n\r\n        },\r\n\r\n        url: function () {\r\n          var path = 'forms/businessobjects/search',\r\n              bo_type_id = this.get(\"id\"),\r\n              params = { bo_type_id: bo_type_id },\r\n              resource = path + '?' + $.param(params),\r\n              baseurl = this.connector.connection.url,\r\n              url = Url.combine(baseurl&&baseurl.replace('/v1', '/v2')||baseurl, resource);\r\n          return url;\r\n        },\r\n\r\n        parse: function (response) {\r\n          var form;\r\n          if (response && response.results) {\r\n            form = response.results[1];\r\n            form.id = this.get(\"id\");\r\n            form.name = response.results[0].data.bo_type_name;\r\n            form.bus_att_metadata_mapping = response.results[\"0\"].data.business_attachments && response.results[\"0\"].data.business_attachments.metadata_mapping;\r\n            if (form.schema) {\r\n              delete form.schema.title; // avoid title being displayed by the FormView\r\n            }\r\n          }\r\n          return form;\r\n        }\r\n\r\n      }, ResourceModel(Backbone.Model)));\r\n  \r\n  return BusinessObjectSearchFormModel;\r\n\r\n});\r\n\n","csui.define('xecmpf/controls/property.panels/reference/impl/workspace.reference.model',[\r\n  'csui/lib/underscore',\r\n  'csui/lib/jquery',\r\n  'csui/lib/backbone',\r\n  \"csui/utils/url\",\r\n  \"csui/models/mixins/node.connectable/node.connectable.mixin\"\r\n], function (_, $, Backbone, Url,\r\n    NodeConnectableMixin) {\r\n  'use strict';\r\n\r\n  var WorkspaceReferenceModel = Backbone.Model.extend({\r\n\r\n    constructor: function WorkspaceReferenceModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n      this.makeNodeConnectable(options);\r\n\r\n    },\r\n\r\n    sync: function (method, model, options) {\r\n      var node_id, path, baseurl, url;\r\n      if (method === \"read\") {\r\n        node_id = this.get(\"id\");\r\n        path = _.str.sformat('businessworkspaces/{0}', node_id);\r\n        baseurl = this.connector.connection.url;\r\n        url = Url.combine(baseurl && baseurl.replace('/v1', '/v2') || baseurl, path);\r\n        options.url = url;\r\n      } else if (method === \"update\") {\r\n        node_id = this.get(\"id\");\r\n        path = _.str.sformat('businessworkspaces/{0}/workspacereferences', node_id);\r\n        var bo_id = this.get(\"bo_id\");\r\n        var bo_type_id = this.get(\"bo_type_id\");\r\n        var params = {bo_id: bo_id, bo_type_id: bo_type_id};\r\n        baseurl = this.connector.connection.url;\r\n        url = Url.combine(baseurl && baseurl.replace('/v1', '/v2') || baseurl, path);\r\n        options.url = url;\r\n        options.data = $.param(params);\r\n      }\r\n      return Backbone.sync(method, model, options);\r\n    },\r\n\r\n    parse: function (response) {\r\n      var data       = response && response.results && response.results.data || {},\r\n          actions    = response && response.results && response.results.actions &&\r\n                       response.results.actions.data || {},\r\n          properties = data.properties || {},\r\n          business   = data.business_properties || {};\r\n      business.business_object_id && (properties.bo_id = business.business_object_id);\r\n      business.business_object_type_id &&\r\n      (properties.bo_type_id = business.business_object_type_id);\r\n      business.business_object_type_name &&\r\n      (properties.bo_type_name = business.business_object_type_name);\r\n      business.external_system_id && (properties.ext_system_id = business.external_system_id);\r\n      business.external_system_name && (properties.ext_system_name = business.external_system_name);\r\n      business.workspace_type_id && (properties.workspace_type_id = business.workspace_type_id);\r\n      business.workspace_type_name &&\r\n      (properties.workspace_type_name = business.workspace_type_name);\r\n      properties.change_reference = !!actions['change-reference'];\r\n      properties.complete_reference = !!actions['complete-reference'];\r\n\r\n      return properties;\r\n    }\r\n\r\n  });\r\n\r\n  NodeConnectableMixin.mixin(WorkspaceReferenceModel.prototype);\r\n\r\n  return WorkspaceReferenceModel;\r\n\r\n});\r\n\n","csui.define('xecmpf/controls/property.panels/reference/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('xecmpf/controls/property.panels/reference/impl/nls/root/lang',{\r\n  cannotCompleteBusinessReference: \"You do not have permission to complete the business reference\",\r\n  errorUpdatingWorkspaceReference: \"Error updating workspace reference.\",\r\n  businessObjectIdLabel: \"Reference object\",\r\n  referenceTabTitle: 'Reference',\r\n  referenceSearchButtonTitle: 'Search',\r\n  referenceSearchButtonLabel: '{0} in {1}',\r\n  referenceRemoveButtonTitle: 'Remove',\r\n  referenceReplaceButtonTitle: 'Replace',\r\n  referencePanelOverrideNote: 'If you add a workspace reference, workspace name and other attributes will be overwritten with metadata of the business object.'\r\n});\r\n\n","\n","csui.define('xecmpf/controls/property.panels/reference/impl/reference.panel.model',[\r\n  'csui/lib/underscore',\r\n  'csui/lib/jquery',\r\n  'csui/lib/backbone',\r\n  'i18n!xecmpf/controls/property.panels/reference/impl/nls/lang'\r\n], function (_, $, Backbone, lang) {\r\n  'use strict';\r\n\r\n  var ReferencePanelModel = Backbone.Model.extend({\r\n\r\n    constructor: function ReferencePanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n\r\n      this.set('id', 'conws-reference');\r\n      this.set('title', lang.referenceTabTitle);\r\n      \r\n    }\r\n    \r\n  });\r\n\r\n  return ReferencePanelModel;\r\n\r\n});\r\n\n","/**\r\n * Fetches the workspace info for a given node.\r\n */\r\ncsui.define('xecmpf/models/boattachmentcontext/attachmentcontext.category.model',['csui/lib/jquery',\r\n    'csui/lib/underscore',\r\n    'csui/lib/backbone',\r\n    \"csui/utils/log\",\r\n    'csui/utils/url',\r\n    'csui/models/node/node.model',\r\n    'csui/models/mixins/fetchable/fetchable.mixin'\r\n], function ($, _,\r\n             Backbone,\r\n             log,\r\n             Url,\r\n             NodeModel,\r\n             FetchableMixin) {\r\n\r\n    var AttachmentContextCategoryModel = NodeModel.extend({\r\n\r\n        // constructor gives an explicit name to the object in the debugger\r\n        constructor: function AttachmentContextCategoryModel(attributes, options) {\r\n            options || (options = {});\r\n\r\n            NodeModel.prototype.constructor.call(this, attributes, options);\r\n            this.node = options.node;\r\n            this.category_id = options.category_id;\r\n\r\n        },\r\n        fetch: function (options) {\r\n            options || (options = {});\r\n            // If not overridden, Use the v1 URL for GET requests\r\n\t\t\tvar categoryOptions = _.extend({},options)\r\n\t\t\t if (!categoryOptions.url) {\r\n                categoryOptions.url = _.result(this, 'url');\r\n            }\r\n            if (this.node.get(\"id\")) {\r\n                return NodeModel.prototype.fetch.call(this, categoryOptions);\r\n            } else {\r\n                return $.Deferred().resolve().promise();\r\n            }\r\n        },\r\n\r\n        url: function () {\r\n            return Url.combine(this.connector.connection.url,\r\n                // yes, take v1\r\n                'nodes', this.node.get(\"id\"), 'categories', this.category_id).replace('/v2/', '/v1/');\r\n        },\r\n        parse: function (response) {\r\n            return response.data;\r\n        }\r\n    });\r\n    return AttachmentContextCategoryModel;\r\n});\r\n\r\n\n","csui.define('xecmpf/models/boattachmentcontext/attachmentcontext.category.factory',['csui/lib/underscore',\r\n    'csui/utils/contexts/factories/factory',\r\n    'csui/utils/contexts/factories/connector',\r\n    'csui/utils/contexts/factories/node',\r\n    'xecmpf/models/boattachmentcontext/attachmentcontext.category.model'\r\n], function (_,\r\n             ModelFactory,\r\n             ConnectorFactory,\r\n             NodeModelFactory,\r\n             AttachmentContextFactoryModel) {\r\n\r\n    var AttachmentContextCategoryFactory = ModelFactory.extend({\r\n\r\n        propertyPrefix: 'attachmentContextCategory',\r\n\r\n        constructor: function AttachmentContextCategoryFactory(context, options) {\r\n            ModelFactory.prototype.constructor.apply(this, arguments);\r\n            options.attachmentContextCategory = options.attachmentContextCategory || {};\r\n\r\n            var node = options.attachmentContextCategory.node ||\r\n                    context.getModel(NodeModelFactory, options),\r\n                connector = options.attachmentContextCategory.connector ||\r\n                    context.getObject(ConnectorFactory, options);\r\n\r\n            this.property = new AttachmentContextFactoryModel({},\r\n                {\r\n                    category_id: options.attachmentContextCategory.category_id,\r\n                    connector: connector,\r\n                    node: node\r\n                });\r\n\r\n        },\r\n\r\n        fetch: function (options) {\r\n            return this.property.fetch(options);\r\n        }\r\n\r\n    });\r\n\r\n    return AttachmentContextCategoryFactory;\r\n\r\n});\r\n\n","csui.define('xecmpf/widgets/boattachments/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('xecmpf/widgets/boattachments/impl/nls/root/lang',{\r\n    dialogTitle: 'Business attachments',\r\n    searchPlaceholder: 'Search %1',\r\n    noResultsPlaceholder: 'No business attachments to display.',\r\n    errorFieldFormatTagUnrecognized: 'Invalid format specification for {0}.',\r\n    errorCustomColumnConfigInvalid: \"Invalid custom column configuration: {0}.\",\r\n    errorCustomColumnMissingBraces: \"Missing curly braces in custom column configuration: {0}.\",\r\n    errorOrderByMustNotBeString: \"Configuration 'orderBy' must be an object not a string.\",\r\n    errorOrderByMissingBraces: \"Missing curly braces in 'orderBy' configuration.\",\r\n    errorFilteringFailed: 'Filtering of result list failed. Please contact your administrator.',\r\n    noAttachmentsFound: 'No business attachments found.',\r\n    businessAttachments: 'Business attachments',\r\n    CommandSnapshot: 'Snapshot',\r\n    addBusinessAttachment: 'Add business attachment',\r\n    fileSizeByte: \"Bytes\",\r\n    fileSizeKByte: \"KB\",\r\n    fileSizeMByte: \"MB\",\r\n    parent_id: 'Location',\r\n    reservedBy: 'Reserved by %1',\r\n    snaphotCreated: 'Snapshot created',\r\n    snaphotFailed: 'Snapshot creation failed',\r\n    CommandDoneVerbCreated: 'created',\r\n    fileSizeGByte: \"GB\",\r\n    items: 'items',\r\n    invalidConfigurationNoBusObjDisplay:'Cannot display business attachments because there is no business object defined.',\r\n    invalidConfigurationNoBusObjConfigured:'No business object type configured for workspace display.',\r\n    invalidConfigurationNoBusObjAvailable:'Cannot display business attachments because there is no business object available.',\r\n    noBusinessObjectFound: 'No business object found',\r\n    invalidConfiguration: 'Invalid widget configuration. Business object key, business object type and business application ID must be set.'\r\n});\r\n\n","\n","/**\r\n * Fetches the workspace info for a given node.\r\n */\r\ncsui.define('xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.model',['csui/lib/jquery',\r\n    'csui/lib/underscore',\r\n    'csui/lib/backbone',\r\n    \"csui/utils/log\",\r\n    'csui/utils/url',\r\n    'csui/models/node/node.model',\r\n    'csui/dialogs/modal.alert/modal.alert',\r\n    'xecmpf/models/boattachmentcontext/attachmentcontext.category.factory',\r\n    'i18n!xecmpf/widgets/boattachments/impl/nls/lang',\r\n    'csui/models/mixins/resource/resource.mixin'\r\n\r\n], function ($, _,\r\n             Backbone,\r\n             log,\r\n             Url,\r\n             NodeModel,\r\n             ModalAlert,\r\n             AttachmentContextCategoryFactory,\r\n             lang, ResourceMixin ) {\r\n\r\n    var AttachmentContextBusinessObjectInfoModel = Backbone.Model.extend({\r\n\r\n        // constructor gives an explicit name to the object in the debugger\r\n        constructor: function AttachmentContextBusinessObjectInfoModel(attributes, options) {\r\n            options || (options = {});\r\n\r\n            Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n            this.makeResource(options);\r\n\r\n            this.node = options.node;\r\n            this.data = options.data;\r\n            this.connector = options.connector;\r\n            this.context = options.context;\r\n            this.invalidConfigurationShown = false;\r\n            this.invalidErrorMessage = lang.noBusinessObjectFound\r\n\r\n        },\r\n        _logInvalidConfiguration: function() {\r\n          this._isConfigEmpty(this.busObjectKey) && log.warn('Business object key is not set') && console && console.log(log.last);\r\n          this._isConfigEmpty(this.busObjectType) && log.warn('Business object type is not set') && console && console.log(log.last);\r\n          this._isConfigEmpty(this.extSystemId) && log.warn('Business application ID is not set')  && console && console.log(log.last);\r\n        },\r\n        _logEmptyBusObjKeyConfiguration: function() {\r\n          log.warn('Empty business object key in business attachment widget') && console && console.log(log.last);\r\n          this.invalidConfigurationShown = true;\r\n        },\r\n        _logEmptyBusObjTypeConfiguration: function() {\r\n          log.warn('Empty business object type in business attachment widget') && console && console.log(log.last);\r\n          this.invalidConfigurationShown = true;\r\n        },\r\n        _logEmptyBusAppIDConfiguration: function() {\r\n          log.warn('Empty business application ID in business attachment widget')  && console && console.log(log.last);\r\n          this.invalidConfigurationShown = true;\r\n        },\r\n\r\n        _showInvalidConfigurationError: function(msg) {\r\n          !this.invalidConfigurationShown && ModalAlert.showError(msg);\r\n          this.invalidConfigurationShown = true;\r\n        },\r\n        _isConfigEmpty: function(config){\r\n          // For single Value attributes, config value is of type string.\r\n          // For multi value attribute, config value is of type object (ie., list of values).\r\n          // If a multi value attribute has a single value then checking wheter it is empty or not.\r\n          // If a multi value attribute has multiple empty/non empty values then it is considered as empty or non set configuration.\r\n          var isConfigEmpty = _.isObject(config) ? (config.length === 1 ? _.isEmpty(config[0]) : true) : _.isEmpty(config);\r\n          return isConfigEmpty\r\n\r\n        },\r\n        _isConfigValid: function() {\r\n          var isBusKeyEmpty = this._isConfigEmpty(this.busObjectKey),\r\n              isBusObjEmpty = this._isConfigEmpty(this.busObjectType),\r\n              isExtSystemEmpty = this._isConfigEmpty(this.extSystemId);\r\n\r\n          return !isBusObjEmpty &&  !isExtSystemEmpty && !isBusKeyEmpty;\r\n        },\r\n        _isWorkspaceWithoutConfig: function() {\r\n            return  _.isEmpty(this._getCategoryInfo(this.data.busObjectId)) &&\r\n                    _.isEmpty(this._getCategoryInfo(this.data.busObjectType)) &&\r\n                    _.isEmpty(this._getCategoryInfo(this.data.extSystemId)) &&\r\n                    this.node.get(\"id\") && this.node.get(\"type\") === 848;\r\n        },\r\n        _loadCategories: function() {\r\n            var promises = [],\r\n                self = this,\r\n                busObjectIdCatInfo = this._getCategoryInfo(this.data.busObjectId),\r\n                busObjectTypeCatInfo = this._getCategoryInfo(this.data.busObjectType),\r\n                extSystemIdCatInfo = this._getCategoryInfo(this.data.extSystemId);\r\n\r\n            if (busObjectIdCatInfo.categoryId) {\r\n                var catModelObjectId = this.context.getModel(AttachmentContextCategoryFactory,\r\n                    {\r\n                        attributes: {\r\n                            category_id: busObjectIdCatInfo.categoryId\r\n                        },\r\n                        category_id: busObjectIdCatInfo.categoryId,\r\n                        node: this.node,\r\n                        connector: this.connector\r\n                    });\r\n\r\n                // got the model for the bus. obj. id\r\n                promises.push(catModelObjectId.fetch());\r\n                this.listenTo(catModelObjectId, 'sync', function () {\r\n                        // object key must be set via category\r\n                        var catVal = catModelObjectId.get(busObjectIdCatInfo.categoryAttr);\r\n                        if (!self._isConfigEmpty(catVal)) {\r\n                            self.busObjectKey = catVal;\r\n                        }  else {\r\n                            self._logEmptyBusObjKeyConfiguration();\r\n                        }\r\n                        /*// but check if we can get also the business object type ....\r\n                        catVal = catModelObjectId.get(busObjectTypeCatInfo.categoryAttr);\r\n                        if (!self._isConfigEmpty(catVal)) {\r\n                            self.busObjectType = catVal;\r\n                        } else {\r\n                          self._logEmptyBusObjTypeConfiguration();\r\n                        }\r\n                                    // ... and the external system ...\r\n                                    catVal = catModelObjectId.get(extSystemIdCatInfo.categoryAttr);\r\n                                    if (!self._isConfigEmpty(catVal)) {\r\n                                        self.extSystemId = catVal;\r\n                                    } else {\r\n                          self._logEmptyBusAppIDConfiguration();\r\n                        }*/\r\n                    }\r\n                );\r\n                this.listenTo(catModelObjectId, \"error\", function () {\r\n                    this._showInvalidConfigurationError(arguments[1].responseJSON.error);\r\n                });\r\n\r\n            } else {\r\n                // key is fixed\r\n                this.busObjectKey = busObjectIdCatInfo.categoryAttr;\r\n            }\r\n            // load category for business object type if necessary\r\n            if (busObjectTypeCatInfo.categoryId) {\r\n                var catModelObjectType =\r\n                    this.context.getModel(AttachmentContextCategoryFactory,\r\n                        {\r\n                            attributes: {\r\n                                category_id: busObjectTypeCatInfo.categoryId\r\n                            },\r\n                            category_id: busObjectTypeCatInfo.categoryId,\r\n                            node: this.node,\r\n                            connector: this.connector\r\n                        });\r\n\r\n                promises.push(catModelObjectType.fetch());\r\n                this.listenTo(catModelObjectType, 'sync', function () {\r\n                        // check again if we can get from this category all entries\r\n                        // so we can skip further category calls\r\n                       /* var catVal = catModelObjectType.get(busObjectIdCatInfo.categoryAttr);\r\n                        if (!self._isConfigEmpty(catVal)) {\r\n                            self.busObjectKey = catVal;\r\n                        } else {\r\n\t\t\t\t\t\t              \tself._logEmptyBusObjKeyConfiguration();\r\n\t\t\t\t\t            \t}*/\r\n\r\n                        var catVal = catModelObjectType.get(busObjectTypeCatInfo.categoryAttr);\r\n                        if (!self._isConfigEmpty(catVal)) {\r\n                            self.busObjectType = catVal;\r\n                        } else {\r\n                            self._logEmptyBusObjTypeConfiguration();\r\n                        }\r\n\r\n                      /*  catVal = catModelObjectType.get(extSystemIdCatInfo.categoryAttr);\r\n                        if (!self._isConfigEmpty(catVal)) {\r\n                            self.extSystemId = catVal;\r\n                        } else {\r\n                          self._logEmptyBusAppIDConfiguration()\r\n                        }*/\r\n                    }\r\n                );\r\n                this.listenTo(catModelObjectType, \"error\", function () {\r\n                    this._showInvalidConfigurationError(arguments[1].responseJSON.error);\r\n                });\r\n            } else {\r\n                this.busObjectType = busObjectTypeCatInfo.categoryAttr;\r\n            }\r\n            // get external system category\r\n            if (extSystemIdCatInfo.categoryId) {\r\n                var catModelExtSystem = this.context.getModel(AttachmentContextCategoryFactory,\r\n                    {\r\n                        attributes: {\r\n                            category_id: extSystemIdCatInfo.categoryId\r\n                        },\r\n                        category_id: extSystemIdCatInfo.categoryId,\r\n                        node: this.node,\r\n                        connector: this.connector\r\n                    });\r\n\r\n\r\n                promises.push(catModelExtSystem.fetch());\r\n                this.listenTo(catModelExtSystem, 'sync', function () {\r\n                        // check again if we can get from this category all entries\r\n                        // so we can skip further category calls\r\n                       /* var catVal = catModelExtSystem.get(busObjectIdCatInfo.categoryAttr);\r\n                        if (!self._isConfigEmpty(catVal)) {\r\n                            self.busObjectKey = catVal;\r\n                        } else {\r\n                          self._logEmptyBusObjKeyConfiguration();\r\n                        }\r\n\r\n                                    catVal = catModelExtSystem.get(busObjectTypeCatInfo.categoryAttr);\r\n                                    if (!self._isConfigEmpty(catVal)) {\r\n                                        self.busObjectType = catVal;\r\n                                    } else {\r\n                           self._logEmptyBusObjTypeConfiguration();\r\n                        }*/\r\n\r\n                        var catVal = catModelExtSystem.get(extSystemIdCatInfo.categoryAttr);\r\n                        if (!self._isConfigEmpty(catVal)) {\r\n                            self.extSystemId = catVal;\r\n                        } else {\r\n                            self._logEmptyBusAppIDConfiguration();\r\n                        }\r\n                    }\r\n                );\r\n                this.listenTo(catModelExtSystem, \"error\", function () {\r\n                    this._showInvalidConfigurationError(arguments[1].responseJSON.error);\r\n                });\r\n            } else {\r\n                this.extSystemId = extSystemIdCatInfo.categoryAttr;\r\n            }\r\n            return promises;\r\n        },\r\n        _getCategoryInfo: function (configValue) {\r\n            var res, categoryId, categoryAttr;\r\n\r\n            if (!_.isEmpty(configValue)) {\r\n                var regExp = /{categories.(([0-9]+)_[0-9]+[_]?[0-9]*[_]?[0-9]*)}/g;\r\n                if (regExp.test(configValue)) {\r\n                    regExp.lastIndex = 0;\r\n                    res = regExp.exec(configValue);\r\n                    categoryId = res[2];\r\n                    categoryAttr = res[1];\r\n\r\n                    return {\r\n                        categoryId: categoryId,\r\n                        categoryAttr: categoryAttr\r\n                    }\r\n                } else {\r\n                    return {\r\n                        categoryId: \"\",\r\n                        categoryAttr: configValue\r\n                    };\r\n                }\r\n            }\r\n            return \"\";\r\n        },\r\n\r\n        // computes the REST API URL used to access the metadata.\r\n        url: function () {\r\n            var url;\r\n\r\n            if (this._isWorkspaceWithoutConfig() === true) {\r\n                url = Url.combine(this.connector.connection.url,\r\n                    'businessworkspaces/' + this.node.get(\"id\") + '?metadata');\r\n            } else {\r\n                url = Url.combine(this.connector.connection.url,\r\n                    'businessworkspacetypes' +\r\n                    '?ext_system_id=' + this.extSystemId +\r\n                    '&expand_templates=true&bo_type=' + this.busObjectType);\r\n            }\r\n            return url.replace('/v1/', '/v2/');\r\n        },\r\n        parse: function (response) {\r\n\r\n            if (this._isWorkspaceWithoutConfig() === true) {\r\n                var busProps =  _.find(response.results.data.workspace_references,\r\n                        function(wksp_ref) {\r\n                            return (wksp_ref.has_default_display === true)\r\n                        });\r\n                if (_.isUndefined(busProps)) {\r\n                    if ( response.results.data.business_properties.isEarly) {\r\n                        this.invalidConfigurationShown = true;\r\n                        this.invalidErrorMessage = lang.invalidConfigurationNoBusObjDisplay;\r\n                    } else {\r\n                        this.invalidConfigurationShown = true;\r\n                        this.invalidErrorMessage =lang.invalidConfigurationNoBusObjAvailable;\r\n                    }\r\n                    return null;\r\n                } else {\r\n                    return {\r\n                        busObjectKey: busProps.business_object_id,\r\n                        busObjectType: busProps.business_object_type,\r\n                        extSystemId: busProps.external_system_id,\r\n                        titleIcon: response.results.data.wksp_info.wksp_type_icon\r\n                    }\r\n                }\r\n            } else {\r\n                return {\r\n                    busObjectKey: this.busObjectKey,\r\n                    busObjectType: this.busObjectType,\r\n                    extSystemId: this.extSystemId,\r\n                    titleIcon: response.results.length > 0 &&\r\n                    response.results[0].data.wksp_info.wksp_type_icon\r\n                }\r\n            }\r\n        }\r\n    });\r\n    ResourceMixin.mixin(AttachmentContextBusinessObjectInfoModel.prototype);\r\n\r\n    var originalFetch = AttachmentContextBusinessObjectInfoModel.prototype.fetch;\r\n    AttachmentContextBusinessObjectInfoModel.prototype.fetch = function (options) {\r\n        var deferred = $.Deferred(),\r\n            promises = this._loadCategories(),\r\n            self = this;\r\n\r\n        if (promises.length > 0) {\r\n            $.when.apply($, promises).done(function () {\r\n                // if one setting is determined via category all entries\r\n                // must be set\r\n                if (self._isConfigValid() === true)\r\n                {\r\n                    originalFetch.call(self, options).done(function () {\r\n                        deferred.resolve();\r\n                    });\r\n                } else {\r\n                    self._logInvalidConfiguration();\r\n                    self._showInvalidConfigurationError(lang.invalidConfiguration);\r\n                    deferred.resolve();\r\n                }\r\n\r\n            })\r\n        } else {\r\n            if (this._isWorkspaceWithoutConfig() === true || this._isConfigValid() === true)\r\n            {\r\n                return originalFetch.call(this, options);\r\n            } else {\r\n                this._logInvalidConfiguration();\r\n                this._showInvalidConfigurationError(lang.invalidConfiguration);\r\n                return deferred.resolve().promise();\r\n            }\r\n\r\n        }\r\n        return deferred.promise();\r\n    };\r\n\r\n    return AttachmentContextBusinessObjectInfoModel;\r\n});\r\n\r\n\n","/**\r\n * Fetches the workspace id of the effective businessworkspace for a given node.\r\n */\r\n\r\ncsui.define('xecmpf/models/boattachmentcontext/attachmentcontext.node.model',['csui/lib/jquery',\r\n    'csui/lib/underscore',\r\n    'csui/lib/backbone',\r\n    \"csui/utils/log\",\r\n    'csui/utils/url',\r\n    \"csui/models/resource\"\r\n], function ($, _, Backbone,\r\n             log,\r\n             Url,\r\n             ResourceModel) {\r\n\r\n    var AttachmentContextNode = Backbone.Model.extend(\r\n        _.defaults({\r\n\r\n            workspaceSpecific: true,\r\n\r\n            constructor: function AttachmentContextNode(attributes, options) {\r\n                options || (options = {});\r\n\r\n                Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n\r\n                this.options = options;\r\n                this.makeResource(options);\r\n                this.listenTo(this.options.node, 'change:id', this.syncToNode);\r\n\r\n                // and initially set id if it fits.\r\n                this.syncToNode();\r\n            },\r\n\r\n            syncToNode: function () {\r\n                var node = this.options.node;\r\n                var node_id = node.get(\"id\");\r\n                if (node.get(\"type\") === 848) {\r\n                    this.set({id: node_id, type: 848});\r\n                }\r\n            },\r\n\r\n            url: function () {\r\n                var nodeId = this.options.node.get('id');\r\n                var url;\r\n\r\n                if (this.options.data && this.options.data.busObjectId &&\r\n                    this.options.data.busObjectType &&\r\n                    this.options.data.extSystemId) {\r\n\r\n                    url = Url.combine(this.options.connector.connection.url,\r\n                        '/businessworkspaces');\r\n                    url += '?expanded_view=true&where_bo_type=' + this.options.data.busObjectType;\r\n                    url += '&where_ext_system_id=' + this.options.data.extSystemId;\r\n                    url += '&where_bo_id=' + this.options.data.busObjectId;\r\n                    url = url.replace('/v1', '/v2'); // yes, we need to send a v1 call!!!\r\n                } else {\r\n                    url = Url.combine(this.options.connector.connection.url, 'nodes', nodeId,\r\n                        'businessworkspace');\r\n                    url = url.replace('/v2', '/v1'); // yes, we need to send a v1 call!!!\r\n                }\r\n                return url;\r\n            },\r\n\r\n            fetch: function (options) {\r\n                if (this.options.node.get('id')) {\r\n                    if (this.options.node.get('type') !== 848) {\r\n                        log.debug(\"Fetching the workspace id for {0} from server.\", this) && console.log(log.last);\r\n                        options || (options = {});\r\n                        // If not overridden, Use the v1 URL for GET requests\r\n                        if (!options.url) {\r\n                            options.url = _.result(this, 'url');\r\n                        }\r\n                        return this.Fetchable.fetch.call(this, options);\r\n                    } else {\r\n                        log.debug(\"Fetching the workspace id for {0} from node.\", this) && console.log(log.last);\r\n                        this.set({id: this.options.node.get('id'), type: 848});\r\n                        return $.Deferred().resolve().promise();\r\n                    }\r\n\r\n                } else if (this.options.data && this.options.data.busObjectId && // integration scenario\r\n                            this.options.data.busObjectType &&\r\n                            this.options.data.extSystemId) {\r\n\r\n                    log.debug(\"Fetching the workspace id for {0} from server.\", this) && console.log(log.last);\r\n                    options || (options = {});\r\n                    // If not overridden, Use the v1 URL for GET requests\r\n                    if (!options.url) {\r\n                        options.url = _.result(this, 'url');\r\n                    }\r\n                    return this.Fetchable.fetch.call(this, options);\r\n\r\n                } else {\r\n                    return $.Deferred().resolve().promise();\r\n                }\r\n            },\r\n\r\n            parse: function (response) {\r\n                if (response.results) {\r\n                    response = response.results.length>0?response.results[0].data.properties:null;\r\n                }\r\n\r\n                if (response) {\r\n                    return {id: response.id, type: response.type};\r\n                }\r\n            },\r\n\r\n            toString: function () {\r\n                // Format a string for logging purposes\r\n                return \"node:\" + this.get('id');\r\n            }\r\n\r\n        }, ResourceModel(Backbone.Model)));\r\n\r\n    return AttachmentContextNode;\r\n\r\n});\r\n\n","csui.define('xecmpf/models/boattachmentcontext/attachmentcontext.node.factory',['csui/lib/underscore',\r\n    'csui/utils/contexts/factories/factory',\r\n    'csui/utils/contexts/factories/connector',\r\n    'csui/utils/contexts/factories/node',\r\n    'xecmpf/models/boattachmentcontext/attachmentcontext.node.model'\r\n], function (_,\r\n             ModelFactory,\r\n             ConnectorFactory,\r\n             NodeModelFactory,\r\n             AttachmentContextNodeModel) {\r\n\r\n    var AttachmentContextNodeFactory = ModelFactory.extend({\r\n\r\n        propertyPrefix: 'attachmentContextNode',\r\n\r\n        constructor: function AttachmentContextNodeFactory(context, options) {\r\n            ModelFactory.prototype.constructor.apply(this, arguments);\r\n\r\n            var node = options.attachmentContextNode.node ||\r\n                    context.getModel(NodeModelFactory, {}),\r\n                connector = options.attachmentContextNode.connector ||\r\n                    context.getObject(ConnectorFactory, {});\r\n\r\n            this.property = new AttachmentContextNodeModel({}, {data: options.attachmentContextNode.data,\r\n                connector: connector, node: node});\r\n\r\n        },\r\n\r\n        fetch: function (options) {\r\n            return this.property.fetch(options);\r\n        }\r\n\r\n    });\r\n\r\n    return AttachmentContextNodeFactory;\r\n\r\n});\r\n\n","csui.define('xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.factory',['csui/lib/underscore',\r\n    'csui/utils/contexts/factories/factory',\r\n    'csui/utils/contexts/factories/connector',\r\n    'csui/utils/contexts/factories/node',\r\n    'xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.model'\r\n\r\n], function (_,\r\n             ModelFactory,\r\n             ConnectorFactory,\r\n             NodeModelFactory,\r\n             AttachmentContextBusinessObjectInfoModel) {\r\n\r\n    var AttachmentContextBusinessObjectInfoFactory = ModelFactory.extend({\r\n\r\n        propertyPrefix: 'attachmentContextBusinessObjectInfo',\r\n\r\n        constructor: function AttachmentContextBusinessObjectInfoFactory(context, options) {\r\n            options = options || {};\r\n            ModelFactory.prototype.constructor.apply(this, arguments);\r\n\r\n            var node = options.node ||  context.getModel(NodeModelFactory, {}),\r\n                connector = options.connector || context.getObject(ConnectorFactory, {}),\r\n                data = options.attachmentContextBusinessObjectInfo.data || {};\r\n\r\n            _.defaults(data, {\r\n                busObjectId: \"\",\r\n                busObjectType: \"\",\r\n                extSystemId: \"\"\r\n            })\r\n\r\n            this.property = new AttachmentContextBusinessObjectInfoModel({},\r\n                {context: context, data: data, connector: connector, node: node});\r\n\r\n        },\r\n\r\n        fetch: function (options) {\r\n            return this.property.fetch(options);\r\n        }\r\n\r\n    });\r\n\r\n    return AttachmentContextBusinessObjectInfoFactory;\r\n\r\n});\r\n\n","/**\r\n * Created by stefang on 24.11.2015.\r\n */\r\ncsui.define('xecmpf/models/boattachmentcontext/attachmentcontext.model',['csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone',\r\n    \"csui/utils/log\",\r\n    'csui/utils/contexts/context',\r\n    'csui/utils/contexts/factories/node',\r\n    'xecmpf/models/boattachmentcontext/attachmentcontext.node.factory',\r\n    'xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.factory',\r\n    'xecmpf/models/boattachmentcontext/attachmentcontext.category.factory'\r\n\r\n], function ($, _, Backbone,\r\n             log,\r\n             Context,\r\n             NodeModelFactory,\r\n             AttachmentContextNodeFactory,\r\n             AttachmentContextBusinessObjectInfoFactory,\r\n             AttachmentContexCategoryFactory) {\r\n\r\n    var AttachmentContextModel = Context.extend({\r\n\r\n        constructor: function AttachmentContextModel(attributes, options) {\r\n            options || (options = {});\r\n\r\n            Context.prototype.constructor.apply(this, arguments);\r\n\r\n            this.options = options;\r\n\r\n            this.attachmentSpecific = {};\r\n            this.attachmentSpecific[NodeModelFactory.prototype.propertyPrefix] = true;\r\n            this.attachmentSpecific[AttachmentContextNodeFactory.prototype.propertyPrefix] = true;\r\n            this.attachmentSpecific[AttachmentContextBusinessObjectInfoFactory.prototype.propertyPrefix] = true;\r\n            this.attachmentSpecific[AttachmentContexCategoryFactory.prototype.propertyPrefix] = true;\r\n\r\n            this.attachmentSpecificFactories = [\r\n                NodeModelFactory,\r\n                AttachmentContextNodeFactory,\r\n                AttachmentContextBusinessObjectInfoFactory,\r\n                AttachmentContexCategoryFactory\r\n            ];\r\n\r\n            // get the navigation node, that triggers the attachment context node\r\n            this.options.node = this.options.context.getModel(NodeModelFactory);\r\n\r\n            // attachment context node is the first model in the attachment context and we fetch it first\r\n            this.wkspid = this.getModel(AttachmentContextNodeFactory,\r\n                {data: this.options.data, node: this.options.node, connector: this.options.node.connector});\r\n\r\n            // and provide an attachment node, for compatibility with the outer context\r\n            this.node = this.getModel(NodeModelFactory);\r\n\r\n            if (this.wkspid.get(\"id\") === this.options.node.get(\"id\")) {\r\n                this.node.set(this.options.node.attributes);\r\n            } else {\r\n                this.node.set(\"id\", this.wkspid.get(\"id\"));\r\n            }\r\n        },\r\n\r\n        setAttachmentSpecific: function (Factory) {\r\n            this.attachmentSpecific[Factory.prototype.propertyPrefix] = true;\r\n            if (!this._isAttachmentSpecificFactory(Factory)) {\r\n                this.attachmentSpecificFactories.push(Factory);\r\n            }\r\n        },\r\n\r\n        isAttachmentSpecific: function (Factory) {\r\n            var found = false;\r\n            if (this.attachmentSpecific[Factory.prototype.propertyPrefix]) {\r\n                found = true;\r\n            } else if (this._isAttachmentSpecificFactory(Factory)) {\r\n                // remember property prefix, so we find it faster next time.\r\n                this.attachmentSpecific[Factory.prototype.propertyPrefix] = true;\r\n                found = true;\r\n            }\r\n            return found;\r\n        },\r\n\r\n        _isAttachmentSpecificFactory: function (Factory) {\r\n            var found = false;\r\n            for (var ii = 0; ii < this.attachmentSpecificFactories.length; ii++) {\r\n                if (this.attachmentSpecificFactories[ii] === Factory) {\r\n                    found = true;\r\n                    break;\r\n                }\r\n            }\r\n            return found;\r\n        },\r\n\r\n        getOuterContext: function () {\r\n            return this.options.context;\r\n        },\r\n\r\n        getModel: function () {\r\n            return this._getAttachmentObject(\"getModel\", arguments);\r\n        },\r\n        getCollection: function () {\r\n            return this._getAttachmentObject(\"getCollection\", arguments);\r\n        },\r\n        getObject: function () {\r\n            return this._getAttachmentObject(\"getObject\", arguments);\r\n        },\r\n\r\n        _getAttachmentObject: function (methodName, params) {\r\n            var model;\r\n            if (this.isAttachmentSpecific(params[0])) {\r\n                model = Context.prototype[methodName].apply(this, params);\r\n            } else {\r\n                model = this.options.context[methodName].apply(this.options.context, params);\r\n            }\r\n\r\n            return model;\r\n        },\r\n\r\n        fetch: function (options) {\r\n            var old_id = this.wkspid.get(\"id\"),\r\n                self = this;\r\n            // First fetch attachment context node and wait for the result.\r\n            // As we do this in the fetch, we delay the slide-in animation of the perspective,\r\n            // so the perspective is sliding in only after we have triggered all fetches here.\r\n            // This is for sliding in smoothly, as otherwise it is stumbling on mobiles/tablets.\r\n\r\n            return this.wkspid // get workspace id for given node\r\n                .fetch()\r\n                .then(function () {\r\n                    var promises;\r\n                    log.debug(\"wkspid old {0}, new {1}.\", old_id, self.wkspid.get(\"id\")) && console.log(log.last);\r\n                    // then, if possible, first get values for node models from context node\r\n                    // and for all other models do a normal fetch using the factory.\r\n                    // note: node models represent persisted or non persisted nodes for an id.\r\n                    // They are triggered from outside by setting the id.\r\n                    // So if the workspace id of the context node changes\r\n                    // we must set the id of all our node models in the attachment context.\r\n\r\n                    // get node factory\r\n                    var factories = self.getFactories ? self.getFactories() : self._factories;\r\n                    var obj = _.find(factories, function (f) {\r\n                        return f.property === self.node\r\n                    });\r\n                    log.debug(\"going to fetch {0}.\", obj.propertyPrefix) && console.log(log.last);\r\n                    var nodepromise;\r\n                    // update inner node (inner context) !!!\r\n                    // Workspaces:\r\n                    // 1. From current navigation node we determine a parent workspace id\r\n                    // 2. Inner node is set to workspace node\r\n                    // Containers:\r\n                    // Current navigation node is set to inner node\r\n                    if (self.wkspid.get(\"id\") === self.options.node.get(\"id\")) {\r\n                        self.node.set(self.options.node.attributes);\r\n                    } else {\r\n                        // drill down from workspace into folder\r\n                        if (self.wkspid.get(\"id\")) {\r\n                            self.node.set(\"id\", self.wkspid.get(\"id\"));\r\n                            self.node.set(\"type\", 848);\r\n                            if (obj.fetch) {\r\n                                nodepromise = obj.fetch();\r\n                            }\r\n                        } else { // container is not a workspace\r\n                            self.node.set(self.options.node.attributes);\r\n                        }\r\n                    }\r\n\r\n                    // after setting the id in the node model, again get the factories to be sure, that\r\n                    // we have also the factories, that were added during the change:id propagation.\r\n                    factories = self.getFactories ? self.getFactories() : self._factories;\r\n                    // trigger business attachment call\r\n                    promises = _.chain(factories)\r\n                        .map(function (obj) {\r\n                            log.debug(\"going to fetch {0}.\", obj.propertyPrefix) && console.log(log.last);\r\n                            if (obj.property !== self.wkspid &&\r\n                                obj.property !== self.node) {\r\n\r\n                                if (obj.fetch) {\r\n                                    return obj.fetch(self);\r\n                                }\r\n                            }\r\n                        })\r\n                        .compact()\r\n                        .value();\r\n                    if (nodepromise) {\r\n                        promises.unshift(nodepromise);\r\n                    }\r\n\r\n                    return $.when.apply($, promises);\r\n                })\r\n        }\r\n    });\r\n\r\n    return AttachmentContextModel;\r\n\r\n});\r\n\n","csui.define('xecmpf/widgets/boattachments/impl/boattachmentutil',[\r\n    'csui/lib/jquery',\r\n    'csui/lib/underscore',\r\n    \"i18n!xecmpf/widgets/boattachments/impl/nls/lang\",\r\n\r\n], function ($, _,\r\n             lang) {\r\n\r\n    function BOAttachmentUtil() {\r\n    }\r\n\r\n    _.extend(BOAttachmentUtil.prototype, {\r\n\r\n        formatFilzeSize: function (node) {\r\n            var size = node.size;\r\n            if (node.container!==undefined && node.container === true) {\r\n                return size + ' ' + lang.items;\r\n            } else {\r\n                var filesSize = lang.fileSizeByte;\r\n                if (size > 1024) {\r\n                    filesSize = lang.fileSizeKByte;\r\n                    size = size / 1024;\r\n                    if (size > 1024) {\r\n                        filesSize = lang.fileSizeMByte;\r\n                        size = size / 1024;\r\n                        if (size > 1024) {\r\n                            filesSize = lang.fileSizeGByte;\r\n                            size = size / 1024;\r\n                        }\r\n                    }\r\n                }\r\n                return Math.ceil(size) + ' ' + filesSize;\r\n            }\r\n        },\r\n        orderByAsString: function (orderBy, defCol, defOrd) {\r\n            var sc;\r\n\r\n            var ret, order = {sc: defCol, so: defOrd};\r\n            if (orderBy) {\r\n                order = _.defaults({sc: orderBy.sortColumn, so: orderBy.sortOrder}, order);\r\n            }\r\n            // strip curly braces from sortColumn\r\n            if (order.sc) {\r\n                // syntax of the sortColumn is to be checked in the constructors, so no need to\r\n                // raise a message here\r\n                var parameterPlaceholder = /{([^:}]+)(:([^}]+))?}/g;\r\n                var match = parameterPlaceholder.exec(order.sc);\r\n                if (match) {\r\n                    order.sc = match[1];\r\n                } else {\r\n                    order.sc = undefined;\r\n                }\r\n            }\r\n            // if one of column or order is defined, then we must deliver something defined\r\n            if (order.sc || order.so) {\r\n                // and use a constant default, if one is undefined\r\n                ret = _.str.sformat(\"{0} {1}\", order.sc ? order.sc : \"name\", order.so ? order.so : \"asc\");\r\n            }\r\n            return ret;\r\n        }\r\n\r\n    });\r\n\r\n    return new BOAttachmentUtil();\r\n});\r\n\n","/**\r\n * The business attachment model for fetching business attachments from the server.\r\n * Provides:\r\n *   - Endless scrolling\r\n */\r\ncsui.define('xecmpf/widgets/boattachments/impl/boattachment.model',[\r\n    'module',\r\n    'csui/lib/jquery',\r\n    'csui/lib/underscore',\r\n    'csui/lib/backbone',\r\n    'csui/models/node/node.model',\r\n    'csui/models/nodeancestors',\r\n    'csui/utils/contexts/factories/factory',\r\n    'xecmpf/widgets/boattachments/impl/boattachmentutil'\r\n\r\n\r\n], function (module, $, _, Backbone, NodeModel,\r\n             NodeAncestorCollection, ConnectorFactory, BOAttachmentUtil) {\r\n\r\n    var BOAttachmentModel = NodeModel.extend({\r\n\r\n        constructor: function BOAttachmentModel(attributes, options) {\r\n            // The connector needs to be passed to the NodeModel constructor\r\n            // to be processed correctly\r\n            options || (options = {});\r\n            if (!options.connector) {\r\n                options.connector = options.collection && options.collection.connector || undefined;\r\n            }\r\n            this.connector = options.connector;\r\n            NodeModel.prototype.constructor.call(this, attributes, options);\r\n\r\n        },\r\n\r\n        // Set id attribute to support endless scrolling\r\n        // Needed to support compare attachments and add attachments to a existing collection\r\n        idAttribute: 'id',\r\n\r\n        // Parse one workspace and add category properties\r\n        parse: function (response, options) {\r\n            var node = NodeModel.prototype.parse.call(this, response, options);\r\n\r\n            if (!node.size_formatted ) {\r\n                node.size_formatted =\r\n                    BOAttachmentUtil.formatFilzeSize(node);\r\n            }\r\n\r\n            // SAPRM-11354: If CS item has no version it should be blank\r\n            if ( node.version === 0 ){\r\n                node.version = \"\";\r\n            }\r\n\r\n            if (node.actions) {\r\n                node.actions[node.actions.length] = {\r\n                    body: \"\",\r\n                    content_type: \"\",\r\n                    form_href: \"\",\r\n                    href: \"\",\r\n                    method: \"GET\",\r\n                    name: \"Snapshot\",\r\n                    signature: \"Snapshot\"\r\n                }\r\n            }\r\n\r\n            node.ancestors = new NodeAncestorCollection(\r\n                response.data.ancestors, {\r\n                node: this, autofetch: false\r\n            });\r\n\r\n            return node;\r\n        }\r\n\r\n    });\r\n\r\n    return BOAttachmentModel;\r\n});\r\n\n","/**\r\n * The business attachment model for fetching the business attachments from the server.\r\n * Provides:\r\n *   - Endless scrolling\r\n *   - Fetch custom attributes (categories)\r\n *   - Provide Workspace type icon\r\n */\r\ncsui.define('xecmpf/widgets/boattachments/impl/boattachments.model',['module', 'csui/lib/jquery',\r\n  'csui/lib/underscore',\r\n  'csui/lib/backbone',\r\n  'csui/utils/url',\r\n  'csui/models/node/node.model',\r\n  'csui/models/connectable',\r\n  'csui/models/nodechildrencolumn',\r\n  'csui/models/nodechildrencolumns',\r\n  'csui/models/nodechildren',\r\n\r\n  'csui/models/nodes',\r\n  'csui/models/mixins/expandable/expandable.mixin',\r\n  'csui/models/mixins/node.resource/node.resource.mixin',\r\n  'csui/models/browsable/browsable.mixin',\r\n  'csui/models/browsable/v1.request.mixin',\r\n  'csui/models/mixins/resource/resource.mixin',\r\n  'csui/models/browsable/v1.response.mixin',\r\n  'csui/models/browsable/v2.response.mixin',\r\n\r\n  'xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.factory',\r\n  'xecmpf/widgets/boattachments/impl/boattachment.model'\r\n], function (module, $, _, Backbone, Url,\r\n    NodeModel, ConnectableModel,\r\n    NodeChildrenColumnModel,\r\n    NodeChildrenColumnCollection,\r\n    NodeChildrenCollection,\r\n    NodeCollection,\r\n    ExpandableMixin,\r\n    NodeResourceMixin,\r\n    BrowsableMixin,\r\n    BrowsableV1RequestMixin,\r\n    ResourceMixin,\r\n    BrowsableV1ResponseMixin,\r\n    BrowsableV2ResponseMixin,\r\n    AttachmentContextBusinessObjectInfoFactory,\r\n    BOAttachmentModel) {\r\n\r\n  // Model for display columns in expanded view\r\n  var AttachmentsColumnModel = NodeChildrenColumnModel.extend({\r\n\r\n    constructor: function AttachmentsColumnModel() {\r\n      NodeChildrenColumnModel.prototype.constructor.apply(this, arguments);\r\n    }\r\n  });\r\n\r\n  // Collection for display columns in expanded view\r\n  var AttachmentsColumnCollection = NodeChildrenColumnCollection.extend({\r\n\r\n    dataCollectionName: \"properties\",\r\n    model: AttachmentsColumnModel,\r\n\r\n    constructor: function AttachmentsColumnCollection(dataCollectionName) {\r\n      dataCollectionName && (this.dataCollectionName = dataCollectionName);\r\n      NodeChildrenColumnCollection.prototype.constructor.apply(this);\r\n    },\r\n\r\n    resetColumns: function (response, options) {\r\n      this.resetCollection(this.getColumns(response), options);\r\n    },\r\n\r\n    getColumns: function (response) {\r\n\r\n      var definitions = response && response.meta_data && response.meta_data.properties || {};\r\n\r\n      if (definitions && !definitions['modified']) {\r\n        definitions['modified'] = definitions['modify_date'];\r\n      }\r\n\r\n      if (definitions && !definitions['size_formatted']) {\r\n        definitions['size_formatted'] = definitions['size'];\r\n      }\r\n      var columnKeys   = _.keys(definitions),\r\n          columnModels = this.getColumnModels(columnKeys, definitions);\r\n\r\n      _.each(columnModels, function (model) {\r\n        // To format user columns they must have type 14\r\n        if (model.persona === \"user\" || model.persona === \"member\") {\r\n          model.type = 14;\r\n        }\r\n      });\r\n\r\n      return columnModels\r\n    }\r\n\r\n  });\r\n  var config = module.config();\r\n\r\n  var BOAttachmentsCollection = NodeCollection.extend({\r\n\r\n    dataCollectionName: \"properties\",\r\n    model: BOAttachmentModel,\r\n\r\n    constructor: function BOAttachmentsCollection(models, options) {\r\n      NodeCollection.prototype.constructor.apply(this, arguments);\r\n      options || (options = {});\r\n      this.options = options;\r\n\r\n      this.makeNodeResource(options)\r\n          .makeExpandable(options)\r\n          .makeBrowsable(options)\r\n          .makeBrowsableV1Request(options)\r\n          .makeBrowsableV1Response(options);\r\n\r\n      this.columns = new AttachmentsColumnCollection(this.dataCollectionName);\r\n      this.totalCount = 0;\r\n      this.titleIcon = undefined;\r\n      // API returns if there are more pages to fetch or not\r\n      this.next = undefined;\r\n      this.busobjinfo = this.options.context.getModel(AttachmentContextBusinessObjectInfoFactory,\r\n          {\r\n            attributes: this.options.data.businessattachment.properties,\r\n            data: this.options.data.businessattachment.properties\r\n          });\r\n    },\r\n\r\n    url: function () {\r\n      var queryParams = this.options.query || {};\r\n      // Paging\r\n      queryParams = this.mergeUrlPaging(config, queryParams);\r\n      // Sorting\r\n      queryParams = this.mergeUrlSorting(queryParams);\r\n      // Filtering\r\n      queryParams = this.mergeUrlFiltering(queryParams);\r\n\r\n      var url = Url.combine(this.getBaseUrl(),\r\n          'businessobjects',\r\n          this.busobjinfo.get(\"extSystemId\"),\r\n          this.busobjinfo.get(\"busObjectType\"),\r\n          this.busobjinfo.get(\"busObjectKey\"), 'businessattachments');\r\n\r\n      this.listenTo(this, \"sync\", this._cacheCollection);\r\n      url = url.replace('/v1', '/v2');\r\n      queryParams = _.omit(queryParams, function (value, key) {\r\n        return value == null || value === '';\r\n      });\r\n      queryParams.metadata = undefined;\r\n      return url + '?' + this.queryParamsToString(queryParams) + \"&expand=\" + encodeURIComponent(\r\n          'properties{original_id,ancestors,parent_id,reserved_user_id,createdby,modifiedby}');\r\n\r\n    },\r\n\r\n    fetch: function (options) {\r\n      var self = this,\r\n          df   = $.Deferred();\r\n      this.busobjinfo.fetch().done(function () {\r\n        if (!this.fetching) {\r\n          // reset total count\r\n          this.totalCount = 0;\r\n        }\r\n\r\n        if (self.busobjinfo.get(\"extSystemId\") &&\r\n            self.busobjinfo.get(\"busObjectType\") &&\r\n            self.busobjinfo.get(\"busObjectKey\")) {\r\n          self.Fetchable.fetch.call(self, options).done(function () {\r\n            df.resolve()\r\n          }).fail(function () {\r\n            df.resolve()\r\n          })\r\n        } else {\r\n          self.trigger('sync');\r\n          df.resolve()\r\n        }\r\n      });\r\n      return df.promise();\r\n    },\r\n\r\n    clone: function () {\r\n      // Don't share something between collapsed and expanded view (models, ...)\r\n      // Sorting, filtering, columns, ... must also be shared since e.g. the modal view has\r\n      // specific sorting\r\n      var options = $.extend(true, {}, this.options);\r\n      // remove filter parameter\r\n      options.query && options.query.where_name && (options.query.where_name = '');\r\n      var collection = new this.constructor([], options);\r\n\r\n      collection.connector = this.connector;\r\n      return collection;\r\n    },\r\n\r\n    parse: function (response) {\r\n      // In case api returns properties use them, otherwise use defaults\r\n      this.totalCount = response.paging.total_count;\r\n      this.options.orderBy = this.orderBy;\r\n      this.columns && this.columns.resetColumns(response, this.options);\r\n\r\n      // If more pages available set next to true, otherwise to false\r\n      this.next = response.paging.actions && response.paging.actions.next ? true : false;\r\n\r\n      this.businessObjectActions = response.businessObjectActions;\r\n\r\n      // pass the array of v2 nodes to the model parse methods\r\n      return response.results;\r\n    },\r\n    mergeUrlPaging: function (config, queryParams) {\r\n      var limit = this.topCount || config.defaultPageSize;\r\n      if (limit) {\r\n        queryParams.limit = limit;\r\n        queryParams.page = this.skipCount ? (Math.floor(this.skipCount / limit)) + 1 : 1;\r\n      }\r\n      return queryParams;\r\n    },\r\n\r\n    mergeUrlSorting: function (queryParams) {\r\n      var orderBy;\r\n      if (this.orderBy) {\r\n        orderBy = this.orderBy;\r\n        queryParams.sort = this._formatSorting(orderBy);\r\n      } else if (_.isUndefined(queryParams.sort)) {\r\n        queryParams.sort = \"asc_name\";\r\n        this.orderBy = \"name asc\";\r\n      } else if (queryParams.sort.indexOf(\" \") > -1) {\r\n        orderBy = queryParams.sort;\r\n        this.orderBy = queryParams.sort;\r\n        queryParams.sort = this._formatSorting(orderBy);\r\n      }\r\n      return queryParams;\r\n    },\r\n\r\n    _formatSorting: function (orderBy) {\r\n      var slicePosition = orderBy.lastIndexOf(\" \");\r\n      return orderBy.slice(slicePosition + 1) + '_' + orderBy.slice(0, slicePosition);\r\n    },\r\n\r\n    mergeUrlFiltering: function (queryParams) {\r\n      if (!$.isEmptyObject(this.filters)) {\r\n        for (var name in this.filters) {\r\n          if (this.filters.hasOwnProperty(name)) {\r\n            if (this.filters[name] === \"\" || this.filters[name] === undefined) {\r\n              // Clear filter\r\n              delete queryParams[\"where_\" + name];\r\n              delete this.options.query[\"where_\" + name];\r\n            } else {\r\n              // API like search syntax: where_name=contains_street\r\n              // Currently it's only possible to filter for strings, since the\r\n              // API only returns for Strings that filtering is possible\r\n              queryParams[\"where_\" + name] = \"contains_\" +\r\n                                             encodeURIComponent(this.filters[name]);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return queryParams;\r\n    },\r\n\r\n    queryParamsToString: function (params) {\r\n      var queryParamsStr = \"\";\r\n      for (var param in params) {\r\n        if (params.hasOwnProperty(param)) {\r\n          if (queryParamsStr.length > 0) {\r\n            queryParamsStr += \"&\"\r\n          }\r\n\r\n          if (params[param] === undefined) {\r\n            queryParamsStr += param;\r\n          } else {\r\n            queryParamsStr += param + \"=\" + params[param];\r\n          }\r\n        }\r\n      }\r\n      return queryParamsStr;\r\n    },\r\n\r\n    getBaseUrl: function () {\r\n      var url = this.connector && this.connector.connection &&\r\n                this.connector.connection.url;\r\n      if (_.isUndefined(url)) {\r\n        url = this.options.connector.connection.url;\r\n      }\r\n      return url;\r\n    }\r\n  });\r\n\r\n  BrowsableMixin.mixin(BOAttachmentsCollection.prototype);\r\n  ExpandableMixin.mixin(BOAttachmentsCollection.prototype);\r\n  NodeResourceMixin.mixin(BOAttachmentsCollection.prototype);\r\n  BrowsableV1RequestMixin.mixin(BOAttachmentsCollection.prototype);\r\n  BrowsableV1ResponseMixin.mixin(BOAttachmentsCollection.prototype);\r\n\r\n  // TODO: Remove this, as soon as all abandoned this.Fetchable.\r\n\r\n  var originalFetch = NodeCollection.prototype.fetch;\r\n  BOAttachmentsCollection.prototype.Fetchable = {\r\n\r\n    fetch: function (options) {\r\n      // log.warn('Using this.Fetchable.fetch has been deprecated.  ' +\r\n      //          'Use NodeChildrenCollection.prototype.fetch. ' +\r\n      //          'this.Fetchable is going to be removed.') && console.warn(log.last);\r\n      // log.warn('Occurred ' + log.getStackTrace(2)) && console.warn(log.last);\r\n      return originalFetch.call(this, options);\r\n    }\r\n\r\n  };\r\n\r\n  return BOAttachmentsCollection;\r\n\r\n});\r\n\n","csui.define('xecmpf/widgets/myattachments/metadata.attachment.model',['module', 'csui/lib/underscore', 'csui/lib/backbone',\r\n    'csui/utils/log', 'csui/utils/url', 'csui/models/actions',\r\n    'csui/models/mixins/expandable/expandable.mixin',\r\n    'csui/models/mixins/resource/resource.mixin',\r\n    'csui/models/mixins/uploadable/uploadable.mixin',\r\n    'csui/lib/jquery'\r\n], function (module, _, Backbone, log, Url, ActionCollection,\r\n             ExpandableMixin, ResourceMixin, UploadableMixin, $) {\r\n    'use strict';\r\n\r\n    var AttachmentModel = Backbone.Model.extend({\r\n\r\n        // Not set this idAttribute as you can have the same bo_id for\r\n        // different external systems\r\n        // idAttribute: '_id',\r\n\r\n        constructor: function AttachmentModel(attributes, options) {\r\n            attributes || (attributes = {});\r\n            options = _.extend({expand: 'user'}, options);\r\n\r\n            if (!attributes.actions) {\r\n\t\t\t\tthis._setCollectionProperty('actions', ActionCollection,\r\n\t\t\t\t\tattributes, options);\r\n\t\t\t}\r\n\r\n            Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n\r\n            this.makeResource(options)\r\n                .makeUploadable(options)\r\n                .makeExpandable(options);\r\n        },\r\n\r\n        set: function (key, val, options) {\r\n            var attrs;\r\n            if (key == null) {\r\n                return this;\r\n            }\r\n\r\n            // Save actions\r\n            if (key.actions) {\r\n                this.actions = key.actions;\r\n                this._setCollectionProperty('actions', ActionCollection, key, options);\r\n            }\r\n            // Handle both `\"key\", value` and `{key: value}` -style arguments.\r\n            if (typeof key === 'object') {\r\n                if (key.data) {\r\n                    if (key.data.properties) {\r\n                        attrs = key.data.properties;\r\n                        // we need additional id for collapse of the table, see\r\n                        // table.view.js line 1525:\r\n                        // childRow.attr('id', \"csui-details-row-\" + aData.get('id'));\r\n                        // ........\r\n                        // aData could be an AttachmentModel\r\n                        this.id = attrs.ext_system_id + attrs.bo_type + attrs.bo_id;\r\n                        options = val;\r\n                    }\r\n                }\r\n                else {\r\n                    attrs = key;\r\n                    options = val;\r\n                }\r\n            } else {\r\n                (attrs = {})[key] = val;\r\n            }\r\n\r\n            options || (options = {});\r\n            return Backbone.Model.prototype.set.call(this, attrs, options);\r\n\r\n        },\r\n\r\n        isNew: function () {\r\n            if (this.id) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        },\r\n\r\n        isFetchable: function () {\r\n            return !!(this.get('id') && this.get('bo_id'));\r\n        },\r\n\r\n        url: function () {\r\n            var url = Url.combine(this.collection.node.urlBase(), 'businessattachments');\r\n            if (!this.isNew()) {\r\n                url = Url.combine(url, encodeURIComponent(this.get('ext_system_id')), encodeURIComponent(this.get('bo_type')), encodeURIComponent(this.get('bo_id')));\r\n            }\r\n            url = url.replace('/v1', '/v2');\r\n            return url;\r\n        },\r\n\r\n        parse: function (response) {\r\n            var attachment;\r\n            if ( $.isArray(response.results) ){\r\n                attachment = response.results[0];\r\n            }\r\n            else {\r\n               attachment = response;\r\n            }\r\n\r\n            var attachmentActions = _.map(attachment, function (value, key) {\r\n\t\t\t\treturn {\r\n\t\t\t\t  id: key,\r\n\t\t\t\t  actions: _.map(value.data, function (value, key) {\r\n\t\t\t\t\tvalue.signature = key;\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t  })\r\n\t\t\t\t};\r\n\t\t\t}, {});\r\n\t\t\t\r\n\t\t\tattachment.actions = attachmentActions[0].actions;\r\n\r\n            return attachment;\r\n        },\r\n\r\n        _setCollectionProperty: function (attribute, Class, attributes, options) {\r\n            var property   = _.str.camelize(attribute),\r\n                models     = attributes[attribute];\t\t\t  \r\n            this[property] = new Class(models, {\r\n                connector: this.connector || options && options.connector\r\n            });\r\n          }\r\n\r\n    });\r\n\r\n    ExpandableMixin.mixin(AttachmentModel.prototype);\r\n    UploadableMixin.mixin(AttachmentModel.prototype);\r\n    ResourceMixin.mixin(AttachmentModel.prototype);\r\n\r\n    return AttachmentModel;\r\n\r\n});\r\n\r\n\n","csui.define('xecmpf/widgets/myattachments/metadata.attachments.model',[\"module\", \"csui/lib/backbone\", \"csui/utils/log\", \"xecmpf/widgets/myattachments/metadata.attachment.model\",\"csui/lib/jquery\", \"csui/lib/underscore\", \"csui/utils/url\"\r\n], function (module, Backbone, log, AttachmentModel, $, _, Url) {\r\n  'use strict';\r\n\r\n  var AttachmentCollection = Backbone.Collection.extend({\r\n\r\n    model: AttachmentModel,\r\n\r\n    constructor: function AttachmentCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n      this.options = options || {};\r\n      if (this.options.connector) {\r\n        this.options.connector.assignTo(this);\r\n      }\r\n    },\r\n\r\n    setOrder: function (attributes, fetch) {\r\n      if (this.orderBy !== attributes) {\r\n        this.orderBy = attributes;\r\n        if (fetch !== false) {\r\n          this.fetch();\r\n        }\r\n        //this._runAllOperations();\r\n        return true;\r\n      }\r\n    },\r\n\r\n    resetOrder: function (fetch) {\r\n      if (this.orderBy) {\r\n        this.orderBy = undefined;\r\n        if (fetch !== false) {\r\n          this.fetch();\r\n        }\r\n        return true;\r\n      }\r\n    },\r\n\r\n    setLimit: function (skip, top, fetch) {\r\n      if (this.skipCount !== skip || this.topCount !== top) {\r\n        this.skipCount = skip;\r\n        this.topCount = top;\r\n        if (fetch !== false) {\r\n          this.fetch();\r\n        }\r\n        return true;\r\n      }\r\n    },\r\n\r\n    resetLimit: function (fetch) {\r\n      if (this.skipCount) {\r\n        this.skipCount = 0;\r\n        if (fetch !== false) {\r\n          this.fetch();\r\n        }\r\n        return true;\r\n      }\r\n    },\r\n\r\n    setFilter: function (filters, fetch, options) {\r\n          for (var key in filters) {\r\n              if (!this.filters) {\r\n                  this.filters = {};\r\n              }\r\n              this.filters[key] = filters[key];\r\n          }\r\n          if (fetch !== false) {\r\n              this.fetch(options);\r\n          }\r\n          return true;\r\n    }\r\n\r\n  });\r\n  AttachmentCollection.version = '1.0';\r\n\r\n  return AttachmentCollection;\r\n\r\n});\r\n\n","csui.define('xecmpf/widgets/myattachments/metadata.nodeattachments.model',['module', 'csui/lib/underscore', 'csui/lib/backbone',\r\n    'csui/utils/base', 'csui/utils/log', 'csui/utils/url',\r\n    'xecmpf/widgets/myattachments/metadata.attachments.model', 'csui/models/actions', 'csui/models/columns',\r\n    'csui/models/mixins/node.resource/node.resource.mixin',\r\n    'csui/models/mixins/expandable/expandable.mixin',\r\n    'csui/lib/jquery',\r\n    // 'csui/models/browsable/client-side.mixin',\r\n    'csui/utils/deepClone/deepClone'\r\n], function (module, _, Backbone, base, log, Url, AttachmentCollection, ActionCollection,\r\n             NodeColumnCollection, NodeResourceMixin,\r\n             ExpandableMixin, $/* ClientSideBrowsableMixin */) {\r\n    'use strict';\r\n\r\n    var NodeAttachmentCollection = AttachmentCollection.extend({\r\n\r\n        constructor: function NodeAttachmentCollection(models, options) {\r\n            AttachmentCollection.prototype.constructor.apply(this, arguments);\r\n\r\n            this.makeNodeResource(options)\r\n                .makeExpandable(options);\r\n            // .makeClientSideBrowsable(options);\r\n\r\n            this.columns = new NodeColumnCollection();\r\n        },\r\n\r\n        clone: function () {\r\n            return new this.constructor(this.models, {\r\n                node: this.node,\r\n                skip: this.skipCount,\r\n                top: this.topCount,\r\n                filter: _.deepClone(this.filters),\r\n                orderBy: _.clone(this.orderBy),\r\n                expand: _.clone(this.expand),\r\n                // TODO: Use commandable mixin.\r\n                commands: _.clone(this.options.commands)\r\n            });\r\n        },\r\n\r\n        mergeUrlPaging: function () {\r\n            var queryParams = {};\r\n            var limit = this.topCount;\r\n            if (limit) {\r\n                queryParams.limit = limit;\r\n                queryParams.page = this.skipCount ? (Math.floor(this.skipCount / limit)) + 1 : 1;\r\n            }\r\n            return queryParams;\r\n        },\r\n\r\n        mergeUrlFiltering: function () {\r\n            var queryParams = [];\r\n            if (!$.isEmptyObject(this.filters)) {\r\n                for (var name in this.filters) {\r\n                    if (this.filters.hasOwnProperty(name)) {\r\n                        if (this.filters[name] !== \"\") {\r\n                            queryParams[\"where_\" + name] = \"contains_\" + this.filters[name];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return queryParams;\r\n        },\r\n\r\n        mergeUrlSorting: function () {\r\n            var queryParams = [];\r\n            var orderBy;\r\n            if (this.orderBy) {\r\n                orderBy = this.orderBy;\r\n                queryParams.sort = this._formatSorting(orderBy);\r\n            } else if (_.isUndefined(queryParams.sort)) {\r\n                queryParams.sort = \"asc_name\";\r\n                this.orderBy = \"name asc\";\r\n            } else if (queryParams.sort.indexOf(\" \") > -1) {\r\n                orderBy = queryParams.sort;\r\n                this.orderBy = queryParams.sort;\r\n                queryParams.sort = this._formatSorting(orderBy);\r\n            }\r\n            return queryParams;\r\n        },\r\n\r\n        _formatSorting: function (orderBy) {\r\n            var slicePosition = orderBy.lastIndexOf(\" \");\r\n            return orderBy.slice(slicePosition + 1) + '_' + orderBy.slice(0, slicePosition);\r\n        },\r\n\r\n        url: function () {\r\n            var query = Url.combineQueryString(\r\n                this.getExpandableResourcesUrlQuery(),\r\n                'metadata',\r\n                this.mergeUrlPaging(),\r\n                this.mergeUrlFiltering(),\r\n                this.mergeUrlSorting()\r\n            );\r\n\r\n            var url = this.node.urlBase();\r\n            // SAPRM-9351:\r\n            // this does not work for machine names like\r\n            // http://xecmwinsrv12.eng-muc-test.opentext.net:8080/OTCS/cs.exe/api/v1/nodes/...\"\r\n            // we have to replace correctly\r\n            // url = url.replace(\"v1\", \"v2\");\r\n            url = url.replace('/v1', '/v2');\r\n            // End of SAPRM-9351\r\n            return Url.combine(url, '/businessattachments?' + query);\r\n        },\r\n\r\n        parse: function (response) {\r\n            this.actions = response.actions; // get actions independent from single bus. attachment, e.g. add attachment\r\n            this.totalCount = response.paging.total_count;\r\n\r\n            var metadata = response.meta_data;\r\n            var columnKeys = _.keys(metadata.properties);\r\n\r\n            if (!this.options.onlyClientSideDefinedColumns) {\r\n                // merge metadata_order into metadata as metadata_order attribute\r\n                if (response.metadata_order) {\r\n                    for (var idx = 0; idx < response.metadata_order.length; idx++) {\r\n                        var column_key = response.metadata_order[idx];\r\n                        metadata[column_key].metadata_order = 500 + idx;\r\n                    }\r\n                }\r\n            }\r\n            // do not reset the columns in case of filtering else the searchbox is removed\r\n            if (!this.filters) {\r\n                this.columns.reset(this.getColumnModels(columnKeys, metadata.properties));\r\n            }\r\n\r\n            return response.results;\r\n        },\r\n\r\n        getColumnModels: function (columnKeys, metadata) {\r\n            var columns = _.reduce(columnKeys, function (colArray, column) {\r\n                if (column.indexOf('_formatted') >= 0) {\r\n                    var shortColumnName = column.replace(/_formatted$/, '');\r\n                    if (metadata[shortColumnName]) {\r\n                        // there is also the column without the trailing _formatted: skip this and use this instead\r\n                        return colArray;\r\n                    }\r\n                } else {\r\n                    // copy the metadata_order from the *_formatted column to the non-formatted column\r\n                    // because it is assumed that the attributes form *_formatted column are more important\r\n                    var definition_short = metadata[column];\r\n                    if (!definition_short.metadata_order) {\r\n                        var definition_formatted = metadata[column + '_formatted'];\r\n                        if (definition_formatted && definition_formatted.metadata_order) {\r\n                            definition_short.metadata_order = definition_formatted.metadata_order;\r\n                        }\r\n                    }\r\n                }\r\n                var definition = metadata[column];\r\n\r\n                switch (column) {\r\n                    case \"name\":\r\n                        definition = _.extend(definition, {\r\n                            default_action: true,\r\n                            contextual_menu: false,\r\n                            editable: true,\r\n                            filter_key: \"name\"\r\n                        });\r\n                        break;\r\n                }\r\n\r\n                colArray.push(_.extend({column_key: column}, definition));\r\n                return colArray;\r\n            }, []);\r\n            return columns;\r\n        }\r\n\r\n    });\r\n\r\n    // ClientSideBrowsableMixin.mixin(NodeAttachmentCollection.prototype);\r\n    ExpandableMixin.mixin(NodeAttachmentCollection.prototype);\r\n    NodeResourceMixin.mixin(NodeAttachmentCollection.prototype);\r\n\r\n    return NodeAttachmentCollection;\r\n\r\n});\r\n\n","csui.define('xecmpf/widgets/dossier/impl/dossier.model',['module', 'csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone',\r\n    'csui/utils/url', 'csui/models/mixins/connectable/connectable.mixin'\r\n], function (module, $, _, Backbone,\r\n             Url, ConnectableMixin) {\r\n\r\n    var DossierModel, DossierCollection;\r\n\r\n    DossierModel = Backbone.Model.extend({\r\n        constructor: function DossierModel(attributes, options) {\r\n            Backbone.Model.prototype.constructor.apply(this, arguments);\r\n        },\r\n\r\n        parse: function (response) {\r\n            if (response && response.paging && response.paging.total_count > 0) {\r\n                return response;\r\n            }\r\n        }\r\n    });\r\n\r\n    DossierCollection = Backbone.Collection.extend({\r\n        model: DossierModel,\r\n\r\n        constructor: function DossierCollection(attributes, options) {\r\n            options || (options = {});\r\n            Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n\r\n            this.options = _.pick(options, ['connector', 'nodeModel', 'query']);\r\n            this.makeConnectable(this.options);\r\n        },\r\n\r\n        parse: function (response, options) {\r\n            var data = response.results.data,\r\n                properties = response.results.properties;\r\n            this.total_documents = properties.total_documents;\r\n            data = _.filter(data, function (item) {\r\n                return item.paging.total_count > 0\r\n            });\r\n            return data;\r\n        },\r\n\r\n        queryParamsToString: function (params) {\r\n            return '?' + $.param(params);\r\n        },\r\n\r\n        fetch: function (options) {\r\n            options || (options = {});\r\n            if (options.query) {\r\n                this.url = this.getUrl() + this.queryParamsToString(options.query);\r\n            }\r\n            return Backbone.Collection.prototype.fetch.apply(this, arguments);\r\n        },\r\n\r\n        url: function () {\r\n            // Get query from options, e.g. group_by criterion already passed\r\n            var queryParams = this.options.query || {};\r\n\r\n            return this.getUrl() + this.queryParamsToString(queryParams);\r\n        },\r\n\r\n        getUrl: function () {\r\n            var url = this.connector.connection.url;\r\n            url = Url.combine(url, 'businessworkspaces', this.options.nodeModel.get('id'), 'dossier')\r\n                .replace('/v1', '/v2');\r\n            return url;\r\n        }\r\n    });\r\n\r\n    ConnectableMixin.mixin(DossierCollection.prototype);\r\n\r\n    return DossierCollection;\r\n});\r\n\n","csui.define('xecmpf/widgets/dossier/impl/documentslist/impl/documents.model',['module', 'csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/browsable/browsable.mixin',\r\n  'csui/models/node/node.model'\r\n], function (module, $, _, Backbone, Url,\r\n    ConnectableMixin, BrowsableMixin,\r\n    NodeModel) {\r\n\r\n  var config, DocumentModel, DocumentsCollection;\r\n\r\n  config = module.config();\r\n\r\n  DocumentModel = NodeModel.extend({\r\n\r\n    idAttribute: 'id',\r\n\r\n    constructor: function DocumentModel(attributes, options) {\r\n      NodeModel.prototype.constructor.apply(this, arguments);\r\n      this.set(NodeModel.prototype.parse.call(this, attributes, options));\r\n      this.connector = options.collection.options.connector\r\n    }\r\n  });\r\n\r\n  DocumentsCollection = Backbone.Collection.extend({\r\n\r\n    model: DocumentModel,\r\n\r\n    constructor: function DocumentsCollection(models, options) {\r\n      options || (options = {});\r\n      options.connector = options.nodeModel && options.nodeModel.connector;\r\n      this.options = _.pick(options, ['connector', 'nodeModel', 'query', 'paging', 'metadata']);\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n\r\n      this.makeConnectable(this.options)\r\n          .makeBrowsable(this.options);\r\n\r\n      this.totalCount = this.options.paging.total_count;\r\n      this.options.orderBy = this.orderBy;\r\n    },\r\n\r\n    fetch: function () {\r\n      return Backbone.Collection.prototype.fetch.apply(this, arguments);\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      return response.results.data;\r\n    },\r\n\r\n    mergeUrlPaging: function (config, queryParams) {\r\n      var limit = this.topCount || config.defaultPageSize || 5;\r\n      if (limit) {\r\n        queryParams.limit = limit;\r\n        queryParams.page = this.skipCount ? (Math.floor(this.skipCount / limit)) + 1 : 1;\r\n      }\r\n      return queryParams;\r\n    },\r\n\r\n    mergeUrlMetadata: function (queryParams) {\r\n      if (this.options.metadata) {\r\n        queryParams.metadata = '{' + this.options.metadata + '}';\r\n      }\r\n      return queryParams;\r\n    },\r\n\r\n    queryParamsToString: function (params) {\r\n      return '?' + $.param(params);\r\n    },\r\n\r\n    url: function () {\r\n      // Get query from options\r\n      var queryParams = this.options.query || {};\r\n\r\n      // Paging\r\n      queryParams = this.mergeUrlPaging(config, queryParams);\r\n\r\n      //metadata\r\n      queryParams = this.mergeUrlMetadata(queryParams);\r\n\r\n      var url = this.connector.connection.url;\r\n      url = Url.combine(url, 'businessworkspaces',\r\n          this.options.nodeModel && this.options.nodeModel.get('id'), 'dossier/documents');\r\n      url = url.replace('/v1', '/v2');\r\n\r\n      return url + this.queryParamsToString(queryParams);\r\n    }\r\n  });\r\n\r\n  ConnectableMixin.mixin(DocumentsCollection.prototype);\r\n  BrowsableMixin.mixin(DocumentsCollection.prototype);\r\n  return DocumentsCollection;\r\n});\r\n\n","csui.define('xecmpf/widgets/dossier/impl/documentslistitem/impl/metadata.model',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone'\r\n], function (_, $, Backbone) {\r\n  var MetadataCollection = Backbone.Collection.extend({\r\n\r\n    constructor: function MetadataCollection(models, options) {\r\n      options || (options = {});\r\n      options.data || (options.data = {});\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n      if (!_.isEmpty(options.data)) {\r\n        this.hideEmptyFields = options.hideEmptyFields;\r\n        this.catsAndAttrs = options.catsAndAttrs;\r\n        this._addModels(options.data);\r\n      }\r\n    },\r\n\r\n    _addModels: function (data) {\r\n      _.each(this.catsAndAttrs, function (item) {\r\n        var itemType = typeof item,\r\n            label, value, type, attribute, category;\r\n\r\n        if (itemType === 'number') {\r\n          category = item;\r\n          if (data.hasOwnProperty(category)) {\r\n            for (attribute in data[category]['data']) {\r\n              if (data[category]['data'].hasOwnProperty(attribute)) {\r\n                label = data[category]['definitions'][attribute]['name'];\r\n                value = data[category]['data'][attribute];\r\n                type = data[category]['definitions'][attribute]['type_name'];\r\n                if (this.hideEmptyFields === true && value === null) {continue;}\r\n                this.add({label: label, value: value, type: type});\r\n              }\r\n            }\r\n          }\r\n        } else if (itemType === 'string') {\r\n          category = item.split('_')[0];\r\n          attribute = item;\r\n          if (data.hasOwnProperty(category) && data[category]['data'].hasOwnProperty(attribute)) {\r\n            label = data[category]['definitions'][attribute]['name'];\r\n            value = data[category]['data'][attribute];\r\n            type = data[category]['definitions'][attribute]['type_name'];\r\n            if (this.hideEmptyFields === true && value === undefined) {return;}\r\n            this.add({label: label, value: value, type: type});\r\n          }\r\n        }\r\n      }, this);\r\n    },\r\n\r\n    comparator: 'label'\r\n  });\r\n\r\n  return MetadataCollection;\r\n});\r\n\n","csui.define('xecmpf/widgets/header/impl/completenesscheck/impl/models/missingdocuments.model',['csui/lib/underscore', 'csui/lib/backbone',\r\n    'csui/models/mixins/connectable/connectable.mixin', 'csui/utils/url'\r\n], function (_, Backbone, ConnectableMixin, Url) {\r\n    \r\n    var MissingDocumentModel = Backbone.Model.extend({\r\n\r\n        idAttribute: 'id',\r\n\r\n        constructor: function MissingDocumentModel(attributes, options) {\r\n            options || (options = {});\r\n            Backbone.Model.prototype.constructor.apply(this, arguments);\r\n            this.makeConnectable(options);\r\n        },\r\n\r\n        parse: function (response) {\r\n            return response;\r\n        }\r\n\r\n    });\r\n    ConnectableMixin.mixin(MissingDocumentModel.prototype);\r\n\r\n    var MissingDocumentCollection = Backbone.Collection.extend({\r\n\r\n        model: MissingDocumentModel,\r\n\r\n        constructor: function MissingDocumentCollection(models, options) {\r\n            this.options = options || {};\r\n            Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n            this.makeConnectable(options);\r\n        },\r\n\r\n        url: function () {\r\n            var wrkspceId = this.options.node.get('id');\r\n            return Url.combine(this.connector.connection.url.replace('v1', 'v2'),\r\n                '/businessworkspaces/' + wrkspceId + '/missingdocuments');\r\n        },\r\n\r\n        parse: function (response) {\r\n            return response.results.data;\r\n        },\r\n\r\n        fetch: function () {\r\n            return Backbone.Collection.prototype.fetch.apply(this, arguments);\r\n        }\r\n    });\r\n    ConnectableMixin.mixin(MissingDocumentCollection.prototype);\r\n\r\n    return MissingDocumentCollection;\r\n});\r\n\n"," csui.define('xecmpf/widgets/workspaces/models/workspace.collection',['module', 'csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone',\r\n    'csui/utils/url',\r\n    'csui/models/nodes',\r\n    'csui/models/nodechildrencolumns',\r\n    'csui/models/browsable/browsable.mixin',\r\n    'csui/models/browsable/v1.request.mixin',\r\n    'csui/models/mixins/resource/resource.mixin',\r\n    'csui/models/browsable/v1.response.mixin',\r\n    'csui/models/browsable/v2.response.mixin',\r\n    'csui/utils/log',\r\n    'csui/utils/deepClone/deepClone'\r\n], function (module, $, _, Backbone, Url,\r\n             NodeCollection,\r\n             NodeChildrenColumnCollection,\r\n             BrowsableMixin,\r\n             BrowsableV1RequestMixin,\r\n             ResourceMixin,\r\n             BrowsableV1ResponseMixin,\r\n             BrowsableV2ResponseMixin,\r\n             log) {\r\n    'use strict';\r\n\r\n    var config = module.config();\r\n    _.defaults(config, {\r\n        defaultPageSize: 30\r\n    });\r\n\r\n    var WorkspaceCollection = NodeCollection.extend({\r\n\r\n        constructor: function WorkspaceCollection(models, options) {\r\n            options = _.defaults({}, options, {\r\n                top: config.defaultPageSize\r\n            }, options);\r\n\r\n            NodeCollection.prototype.constructor.call(this, models, options);\r\n            this.makeBrowsable(options)\r\n                .makeBrowsableV1Request(options)\r\n                .makeResource(options)\r\n                .makeBrowsableV2Response(options);\r\n\r\n            this.options = options;\r\n            this.orderBy = \"name asc\";\r\n        },\r\n\r\n        clone: function () {\r\n            return new this.constructor(this.models, {\r\n                skip: this.skipCount,\r\n                top: this.topCount,\r\n                orderBy: this.orderBy\r\n            });\r\n        },\r\n        getBaseUrl: function () {\r\n            //   return \"//server/otcs/cs/api/v2\";\r\n            return this.options.connector.connection.url.replace('/v1', '/v2');\r\n        },\r\n\r\n        url: function () {\r\n            var query = this.getBrowsableUrlQuery(),\r\n                url = Url.combine(this.getBaseUrl(),\r\n                    query ? '/businessworkspaces?' + query + \"&\" : '/businessworkspaces?');\r\n\r\n            url += 'metadata&expanded_view=true' +\r\n                '&where_bo_type=' + this.options.busObjectType +\r\n                '&where_ext_system_id=' + this.options.extSystemId;\r\n            if (this.options.early) {\r\n                url += '&where_is_early=true';\r\n            }\r\n            if (this.options.busObjectId) {\r\n                url += '&where_bo_id='+this.options.busObjectId;\r\n            }\r\n            url = url.replace(\"where_name=\", \"where_name=contains_\");\r\n            return url;\r\n        },\r\n        isFetchable: function () {\r\n            return true;\r\n        },\r\n        parse: function (response, options) {\r\n            var modifyDate = _.chain(response.meta_data.properties).pick(\"modify_date\").value().modify_date,\r\n                name = _.chain(response.meta_data.properties).pick(\"name\").value().name\r\n\r\n            this.columns = new NodeChildrenColumnCollection([\r\n                {\r\n                    align: modifyDate.align,\r\n                    column_key: \"modify_date\",\r\n                    name: modifyDate.name,\r\n                    persona: modifyDate.persona,\r\n                    sort: (modifyDate.sort ? true : false ),\r\n                    type: modifyDate.type,\r\n                    width_weight: modifyDate.width_weight\r\n                },\r\n                {\r\n                    column_key: \"name\",\r\n                    align: name.align,\r\n                    name: name.name,\r\n                    persona: name.persona,\r\n                    sort: (name ? name.sort : false ),\r\n                    type: name.type,\r\n                    width_weight: name.width_weight\r\n                }]);\r\n\r\n            this.parseBrowsedState(response, options);\r\n            return this.parseBrowsedItems(response, options);\r\n        }\r\n\r\n    });\r\n\r\n    BrowsableMixin.mixin(WorkspaceCollection.prototype);\r\n    BrowsableV1RequestMixin.mixin(WorkspaceCollection.prototype);\r\n    ResourceMixin.mixin(WorkspaceCollection.prototype);\r\n    BrowsableV2ResponseMixin.mixin(WorkspaceCollection.prototype);\r\n    // TODO: Remove this, as soon as all abandoned this.Fetchable.\r\n    var originalFetch = WorkspaceCollection.prototype.fetch;\r\n    WorkspaceCollection.prototype.Fetchable = {\r\n\r\n        fetch: function (options) {\r\n            // log.warn('Using this.Fetchable.fetch has been deprecated.  ' +\r\n            //          'Use NodeChildrenCollection.prototype.fetch. ' +\r\n            //          'this.Fetchable is going to be removed.') && console.warn(log.last);\r\n            // log.warn('Occurred ' + log.getStackTrace(2)) && console.warn(log.last);\r\n            return originalFetch.call(this, options);\r\n        }\r\n\r\n    };\r\n\r\n    return WorkspaceCollection;\r\n\r\n});\r\n\n","csui.define('xecmpf/widgets/workspaces/models/workspace.types.collection',['csui/lib/underscore',\r\n    'csui/lib/backbone',\r\n    'csui/utils/url',\r\n    'csui/models/mixins/resource/resource.mixin'\r\n], function (_,\r\n             Backbone,\r\n             Url,\r\n             ResourceMixin) {\r\n    'use strict';\r\n\r\n    var WorkspaceTypeModel = Backbone.Model.extend({\r\n\r\n         defaults: {\r\n            id: null,\r\n            name: null,\r\n            templates: null\r\n         }\r\n    });\r\n\r\n    var WorkspaceTypesCollection = Backbone.Collection.extend({\r\n\r\n        model: WorkspaceTypeModel,\r\n\r\n        constructor: function WorkspaceTypesCollection(models, options) {\r\n            this.options = options || (options = {});\r\n            Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n            this.makeResource(options);\r\n        },\r\n\r\n        getBaseUrl: function () {\r\n            // return \"//server/otcs/cs/api/v2\";\r\n            return this.options.connector.connection.url.replace('/v1', '/v2');\r\n        },\r\n        queryParamsToString: function (params) {\r\n            var queryParamsStr = \"\";\r\n            for (var param in params) {\r\n                if (params.hasOwnProperty(param)) {\r\n                    if (queryParamsStr.length > 0) {\r\n                        queryParamsStr += \"&\"\r\n                    }\r\n\r\n                    if (params[param] === undefined) {\r\n                        queryParamsStr += param;\r\n                    } else {\r\n                        queryParamsStr += param + \"=\" + params[param];\r\n                    }\r\n                }\r\n            }\r\n            return queryParamsStr;\r\n        },\r\n\r\n        url: function () {\r\n\r\n            var url = Url.combine(this.getBaseUrl(), '/businessworkspacetypes');\r\n            url += '?expand_templates=true' +\r\n                '&bo_type=' + this.options.config.busObjectType +\r\n                '&ext_system_id=' + this.options.config.extSystemId;\r\n\r\n            return url;\r\n\r\n        },\r\n\r\n        parse: function (response, options) {\r\n\r\n            var businessworkspacetypes = response.results;\r\n            return _.chain(businessworkspacetypes)\r\n                .map(function (elem, index, ref) {\r\n\r\n                    var props = elem.data.properties,\r\n                        businessworkspacetypeAttributes = {\r\n                            wksp_type_name: props.wksp_type_name,\r\n                            wksp_type_id: props.wksp_type_id,\r\n                            rm_enabled: props.rm_enabled,\r\n                            type: 848\r\n                        };\r\n                     businessworkspacetypeAttributes.templates =\r\n                        _.chain(props.templates)\r\n                            .map(function (elem, index, ref) {\r\n                                if (index === 0) {\r\n                                    return {\r\n                                        id: elem.id,\r\n                                        name: elem.name,\r\n                                        subType: elem.subtype\r\n                                    };\r\n                                }\r\n                            })\r\n                            .compact()\r\n                            .value();\r\n\r\n\r\n                    return businessworkspacetypeAttributes;\r\n                })\r\n                .compact()\r\n                .value();\r\n        }\r\n\r\n    });\r\n\r\n    ResourceMixin.mixin(WorkspaceTypesCollection.prototype);\r\n\r\n    return WorkspaceTypesCollection;\r\n\r\n});\r\n\n","/**\r\n * Created by stefang on 24.11.2015.\r\n */\r\ncsui.define('xecmpf/models/boattachmentcontext/attachmentcontext.factory',['csui/lib/underscore',\r\n    'csui/utils/contexts/factories/factory',\r\n    'xecmpf/models/boattachmentcontext/attachmentcontext.model'\r\n], function (_,\r\n             ModelFactory,\r\n             AttachmentContextModel) {\r\n\r\n    var AttachmentContextFactory = ModelFactory.extend({\r\n\r\n        propertyPrefix: 'attachmentContext',\r\n\r\n        constructor: function AttachmentContextFactory(context, options) {\r\n            ModelFactory.prototype.constructor.apply(this, arguments);\r\n            this.property = new AttachmentContextModel({}, {context: context, data: options.attachmentContext});\r\n        },\r\n\r\n        fetch: function (options) {\r\n            return this.property.fetch(options);\r\n        }\r\n\r\n    });\r\n\r\n    return AttachmentContextFactory;\r\n\r\n});\r\n\n","\r\ncsui.define('xecmpf/widgets/header/impl/completenesscheck/impl/missingdocuments.factory',[\r\n  'module',\r\n  'csui/lib/underscore',\r\n  'csui/lib/backbone',\r\n  'csui/utils/contexts/factories/factory',\r\n  'csui/utils/contexts/factories/connector',\r\n  'csui/utils/contexts/factories/node',\r\n  'xecmpf/widgets/header/impl/completenesscheck/impl/models/missingdocuments.model'\r\n], function (module,\r\n    _,\r\n    Backbone,\r\n    CollectionFactory,\r\n    ConnectorFactory,\r\n    NodeFactory,\r\n    MissingReportCollection) {\r\n  var MissingDocumentsFactory = CollectionFactory.extend({\r\n    propertyPrefix: 'missingDocumentsCollection',\r\n    constructor: function MissingDocumentsFactory(context, options) {\r\n      CollectionFactory.prototype.constructor.apply(this, arguments);\r\n      var missingDocumentsCollection = this.options.missingDocumentsCollection || {};\r\n      if (!(missingDocumentsCollection instanceof Backbone.Collection)) {\r\n        var connector = context.getObject(ConnectorFactory, options),\r\n            node      = context.getModel(NodeFactory, options),\r\n            config    = module.config();\r\n        missingDocumentsCollection = new MissingReportCollection(missingDocumentsCollection.models, _.extend(\r\n            {\r\n              connector: connector,\r\n              node: node,\r\n              reportType: 'MissingDocuments'\r\n            }, missingDocumentsCollection.options, config.options, {\r\n              autofetch: true\r\n            }));\r\n      }\r\n      this.property = missingDocumentsCollection;\r\n    },\r\n    fetch: function (options) {\r\n      return this.property.fetch(options);\r\n    }\r\n  });\r\n  return MissingDocumentsFactory;\r\n});\r\n\n","csui.define('bundles/xecmpf-core',[\r\n  'xecmpf/controls/bosearch/bosearch.model',\r\n  'xecmpf/controls/bosearch/searchform/bosearchform.model',\r\n  'xecmpf/controls/property.panels/reference/impl/workspace.reference.model',\r\n  'xecmpf/controls/property.panels/reference/impl/reference.panel.model',\r\n  'xecmpf/models/boattachmentcontext/attachmentcontext.category.model',\r\n  'xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.model',\r\n  'xecmpf/models/boattachmentcontext/attachmentcontext.node.model',\r\n  'xecmpf/models/boattachmentcontext/attachmentcontext.model',\r\n  'xecmpf/widgets/boattachments/impl/boattachment.model',\r\n  'xecmpf/widgets/boattachments/impl/boattachments.model',\r\n  'xecmpf/widgets/myattachments/metadata.attachment.model',\r\n  'xecmpf/widgets/myattachments/metadata.attachments.model',\r\n  'xecmpf/widgets/myattachments/metadata.nodeattachments.model',\r\n  'xecmpf/widgets/dossier/impl/dossier.model',\r\n  'xecmpf/widgets/dossier/impl/documentslist/impl/documents.model',\r\n  'xecmpf/widgets/dossier/impl/documentslistitem/impl/metadata.model',\r\n  'xecmpf/widgets/header/impl/completenesscheck/impl/models/missingdocuments.model',\r\n  'xecmpf/widgets/workspaces/models/workspace.collection',\r\n  'xecmpf/widgets/workspaces/models/workspace.types.collection',\r\n  'xecmpf/models/boattachmentcontext/attachmentcontext.category.factory',\r\n  'xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.factory',\r\n  'xecmpf/models/boattachmentcontext/attachmentcontext.factory',\r\n  'xecmpf/models/boattachmentcontext/attachmentcontext.node.factory',\r\n  'xecmpf/widgets/header/impl/completenesscheck/impl/missingdocuments.factory'\r\n], {});\n"]}